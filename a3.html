<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* ... (vos variables CSS) ... */
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #00637c;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: rgb(0, 48, 16);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex; /* Added to align items */
            justify-content: space-between; /* Added to space items apart */
            align-items: center; /* Added to vertically align items */
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .logout-button:hover {
            background-color: #c0392b;
        }


        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: rgb(244, 255, 143);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
        .logout-button {
        position: relative; /* Changed from fixed to relative */
        top: auto; /* Reset top */
        right: auto; /* Reset right */
        margin-left: 10px; /* Add some space from the title */
        z-index: auto;
        background-color: #e74c3c;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button:hover {
        background-color: #c0392b;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .logout-button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button i {
        font-size: 16px;
    }

    @media (max-width: 768px) {
        .logout-button {
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 12px;
        }
    }
      .database-selector {
        margin-bottom: 20px;
    }

    .database-selector select {
        padding: 10px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        color: var(--text-color);
        cursor: pointer;
    }

    .database-selector select:focus {
        outline: none;
        border-color: var(--primary-color);
    }

    /* Styles pour la notification */
   .notification {
       position: fixed;
       top: 20px;
       right: 20px;
       background-color: #4CAF50; /* Couleur de fond (vert pour le succès) */
       color: white; /* Texte en blanc */
       padding: 15px;
       border-radius: 5px;
       z-index: 1001; /* Assurez-vous qu'elle est au-dessus de tout */
       display: none; /* Cachée par défaut */
    }
   .notification.error {
    background-color: red; /* Rouge pour les erreurs */
   }

    .close-btn {
       margin-left: 15px;
       color: white;
       font-weight: bold;
       float: right;
       font-size: 22px;
       line-height: 20px;
       cursor: pointer;
       transition: 0.3s;
    }

    .close-btn:hover {
       color: black;
    }
    </style>
</head>
<body>
    <div id="loadingIndicator" class="loading" style="display: none;"></div>
    <div class="container" id="contentContainer" style="display:none;">
        <h1>Gestion des tickets <button onclick="logout()" class="logout-button">
            <i class="fas fa-sign-out-alt"></i> Déconnexion
        </button></h1>


        <div class="database-selector">
            <label for="databaseSelect">Choisir la base de données : </label>
            <select id="databaseSelect" onchange="changeDatabase()">
                <option value="TicketsTotal">TicketsTotal</option>
                <option value="TicketsTransit">TicketsTransit</option>
            </select>
        </div>

        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".txt,.json" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <!-- Modale de notification -->
    <div id="notification" class="notification">
        <span id="notificationMessage"></span>
        <span class="close-btn" onclick="closeNotification()">×</span>
    </div>


    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editId" placeholder="ID" disabled>
            <input type="text" id="editCategory" placeholder="Catégorie">
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newCategory" placeholder="Catégorie">
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour la modification groupée -->
    <div id="bulkEditModal" class="modal">
        <div class="modal-content">
            <h2>Modifier les tickets sélectionnés</h2>
            <input type="text" id="bulkEditCategory" placeholder="Catégorie (laisser vide si inchangé)">
            <input type="text" id="bulkEditPassword" placeholder="Mot de passe (laisser vide si inchangé)">
            <input type="text" id="bulkEditPrice" placeholder="Prix (laisser vide si inchangé)">
            <input type="text" id="bulkEditUser" placeholder="Utilisateur (laisser vide si inchangé)">
            <div class="modal-buttons">
                <button onclick="saveBulkEdit()">Enregistrer</button>
                <button onclick="closeBulkEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script type="module">
 const _0x1c44f8=_0xcab6;(function(_0x10cea5,_0x460fa0){const _0x221697=_0xcab6,_0xc422f6=_0x10cea5();while(!![]){try{const _0x43c09b=-parseInt(_0x221697(0x143))/0x1*(-parseInt(_0x221697(0x15c))/0x2)+-parseInt(_0x221697(0x12a))/0x3*(parseInt(_0x221697(0xc3))/0x4)+parseInt(_0x221697(0xeb))/0x5+parseInt(_0x221697(0xde))/0x6*(parseInt(_0x221697(0x113))/0x7)+-parseInt(_0x221697(0x159))/0x8*(-parseInt(_0x221697(0x109))/0x9)+parseInt(_0x221697(0xc2))/0xa+parseInt(_0x221697(0xda))/0xb;if(_0x43c09b===_0x460fa0)break;else _0xc422f6['push'](_0xc422f6['shift']());}catch(_0xf8b65f){_0xc422f6['push'](_0xc422f6['shift']());}}}(_0x4661,0xb5a81));import{getActiveDatabase}from'./firebase-config-manager.js';import{getDatabase,ref,onValue,set,update,push,remove,off,get}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';import{initializeApp}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';let db,allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,currentDatabase=_0x1c44f8(0xea),currentUserId,editingCategory='',editingIndex=-0x1,editingId='',initializationPromise;async function initializeDatabase(){const _0x63dffd=_0x1c44f8;!initializationPromise&&(initializationPromise=getActiveDatabase()),db=await initializationPromise,console[_0x63dffd(0xe8)]('Database\x20initialized\x20in\x20a3.html');}async function checkLoginAndSubscription(){const _0x2ec5ca=_0x1c44f8;if(sessionStorage[_0x2ec5ca(0x13c)]('isLoggedIn')!==_0x2ec5ca(0x169))return redirectToLogin(),![];currentUserId=sessionStorage[_0x2ec5ca(0x13c)](_0x2ec5ca(0xc1));if(!currentUserId)return console['error'](_0x2ec5ca(0x12f)),redirectToLogin(),![];const _0x5c6b01=ref(db,_0x2ec5ca(0xcd)+currentUserId+_0x2ec5ca(0x111));try{const _0x16c780=await get(_0x5c6b01),_0x494857=_0x16c780[_0x2ec5ca(0xb7)]();if(!_0x494857||_0x494857[_0x2ec5ca(0x110)]!==_0x2ec5ca(0x164))return showNotification(_0x2ec5ca(0xb0),_0x2ec5ca(0xbd)),setTimeout(()=>{const _0x1c7dc0=_0x2ec5ca;window[_0x1c7dc0(0xb8)][_0x1c7dc0(0xdd)]=_0x1c7dc0(0x16f);},0xbb8),![];return document[_0x2ec5ca(0x170)]('contentContainer')[_0x2ec5ca(0x119)]['display']=_0x2ec5ca(0x10b),!![];}catch(_0x2873e6){return console[_0x2ec5ca(0xb0)](_0x2ec5ca(0x17a),_0x2873e6),showNotification('error','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.'),![];}}function showNotification(_0x474549,_0x3f3566){const _0x1361b5=_0x1c44f8,_0x1f2431=document[_0x1361b5(0x170)](_0x1361b5(0x10d)),_0x28c9cf=document[_0x1361b5(0x170)](_0x1361b5(0xab));_0x28c9cf[_0x1361b5(0xc9)]=_0x3f3566,_0x1f2431[_0x1361b5(0xdc)]=_0x1361b5(0xac)+_0x474549,_0x1f2431[_0x1361b5(0x119)][_0x1361b5(0x16a)]='block';}window['closeNotification']=function(){const _0x55d63a=_0x1c44f8;document['getElementById'](_0x55d63a(0x10d))[_0x55d63a(0x119)]['display']=_0x55d63a(0x129);};function redirectToLogin(){const _0x3f419c=_0x1c44f8;window[_0x3f419c(0xb8)][_0x3f419c(0xdd)]=_0x3f419c(0xc4);}window[_0x1c44f8(0xb9)]=function(){const _0x376c2d=_0x1c44f8;sessionStorage[_0x376c2d(0xed)](),redirectToLogin();};function showLoading(){const _0x2809b2=_0x1c44f8;document[_0x2809b2(0x170)](_0x2809b2(0xca))[_0x2809b2(0x119)][_0x2809b2(0x16a)]='flex';}function hideLoading(){const _0x451200=_0x1c44f8;document['getElementById'](_0x451200(0xca))['style']['display']=_0x451200(0x129);}async function loadTickets(){const _0x339601=_0x1c44f8;showLoading();const _0x42384c=sessionStorage['getItem']('currentUserId');if(!_0x42384c){hideLoading(),console['error'](_0x339601(0x15f));return;}await initializeDatabase();const _0x35c066=ref(db,_0x339601(0xcd)+_0x42384c+'/'+currentDatabase);off(_0x35c066,_0x339601(0xe0)),onValue(_0x35c066,_0x37b8f9=>{const _0x9d88cd=_0x339601;allTickets=_0x37b8f9[_0x9d88cd(0xb7)]()||{},displayTickets(allTickets),hideLoading();},_0x52f8b8=>{const _0x3913a3=_0x339601;console[_0x3913a3(0xb0)](_0x3913a3(0x16c),_0x52f8b8),hideLoading(),alert(_0x3913a3(0x139));});}function displayTickets(_0x29a0d2,_0x106a58=''){const _0x34dbe0=_0x1c44f8,_0x17b3e4=document[_0x34dbe0(0x170)](_0x34dbe0(0x15a));_0x17b3e4[_0x34dbe0(0x115)]='';if(currentDatabase===_0x34dbe0(0xea))displayTicketsTotal(_0x29a0d2,_0x106a58);else currentDatabase===_0x34dbe0(0xfb)&&displayTicketsTransit(_0x29a0d2,_0x106a58);}function displayTicketsTotal(_0x8ada9b,_0x399f96=''){const _0x4d0405=_0x1c44f8,_0x438333=document[_0x4d0405(0x170)](_0x4d0405(0x15a));for(let _0x41289d in _0x8ada9b){const _0x7a6f69=_0x8ada9b[_0x41289d],_0xfa5a66='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>'+_0x41289d+_0x4d0405(0x104)+_0x41289d+_0x4d0405(0x17c)+_0x41289d+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_'+_0x41289d+'\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20'+_0x41289d+_0x4d0405(0x108)+_0x41289d+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTickets(event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22window.deleteAllTicketsInCategory(\x27'+_0x41289d+_0x4d0405(0xf4)+_0x41289d+_0x4d0405(0x153)+_0x41289d+'\x27)\x22>Modifier\x20les\x20tickets\x20selectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_'+_0x41289d+_0x4d0405(0x102)+generateTicketRowsTotal(_0x41289d,_0x7a6f69,_0x399f96)+_0x4d0405(0xe4)+_0x41289d+_0x4d0405(0x127)+_0x41289d+_0x4d0405(0x16d);_0x438333[_0x4d0405(0x115)]+=_0xfa5a66;}}function generateTicketRowsTotal(_0x48e17b,_0x581151,_0xc3bf91){const _0x16a59c=_0x1c44f8;let _0x1b5dbb='';for(let _0x4f4002=0x0;_0x4f4002<_0x581151[_0x16a59c(0x140)]['length'];_0x4f4002++){if(_0xc3bf91&&!matchesSearchTotal(_0x581151,_0x4f4002,_0xc3bf91))continue;_0x1b5dbb+=_0x16a59c(0xbb)+_0x48e17b+_0x16a59c(0xaa)+_0x4f4002+_0x16a59c(0x156)+highlightMatch(_0x581151[_0x16a59c(0x140)][_0x4f4002],_0xc3bf91)+_0x16a59c(0xad)+highlightMatch(_0x581151[_0x16a59c(0x176)][_0x4f4002],_0xc3bf91)+_0x16a59c(0xad)+highlightMatch(_0x581151[_0x16a59c(0xf8)][_0x4f4002],_0xc3bf91)+_0x16a59c(0x126)+_0x48e17b+_0x16a59c(0xf1)+_0x4f4002+_0x16a59c(0xaf)+_0x48e17b+_0x16a59c(0xf1)+_0x4f4002+_0x16a59c(0xd4);}return _0x1b5dbb;}function displayTicketsTransit(_0x45a64f,_0x4bc829=''){const _0x507c9b=_0x1c44f8,_0x232d3c=document['getElementById'](_0x507c9b(0x15a));_0x232d3c[_0x507c9b(0x115)]='';const _0x22082e=_0x507c9b(0x151)+generateTicketRowsTransit(_0x45a64f,_0x4bc829)+_0x507c9b(0x14d);_0x232d3c[_0x507c9b(0x115)]=_0x22082e;}function generateTicketRowsTransit(_0x473504,_0x449692){const _0x5c2d8a=_0x1c44f8;let _0x4603ad='';for(let _0x2c607d in _0x473504){const _0xc08c32=_0x473504[_0x2c607d];if(_0x449692&&!matchesSearchTransit(_0xc08c32,_0x449692))continue;_0x4603ad+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_Transit\x22\x20value=\x22'+_0x2c607d+_0x5c2d8a(0x156)+highlightMatch(_0x2c607d,_0x449692)+_0x5c2d8a(0xad)+highlightMatch(_0xc08c32[_0x5c2d8a(0xc0)],_0x449692)+_0x5c2d8a(0xad)+highlightMatch(_0xc08c32[_0x5c2d8a(0xf2)],_0x449692)+_0x5c2d8a(0xad)+highlightMatch(_0xc08c32['price'],_0x449692)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0xc08c32[_0x5c2d8a(0x15e)],_0x449692)+_0x5c2d8a(0xf5)+_0x2c607d+_0x5c2d8a(0xb6)+_0x2c607d+_0x5c2d8a(0x12c);}return _0x4603ad;}function editTicketTransit(_0x1de600){const _0x34afb3=_0x1c44f8,_0x6f4d1=allTickets[_0x1de600];_0x6f4d1?(editingId=_0x1de600,document[_0x34afb3(0x170)](_0x34afb3(0x178))['value']=_0x1de600,document[_0x34afb3(0x170)](_0x34afb3(0xdf))[_0x34afb3(0xe0)]=_0x6f4d1[_0x34afb3(0xc0)],document[_0x34afb3(0x170)]('editPassword')['value']=_0x6f4d1[_0x34afb3(0xf2)],document['getElementById']('editPrice')['value']=_0x6f4d1[_0x34afb3(0x14c)],document[_0x34afb3(0x170)](_0x34afb3(0xc5))['value']=_0x6f4d1[_0x34afb3(0x15e)],document['getElementById'](_0x34afb3(0xd9))[_0x34afb3(0x119)][_0x34afb3(0x16a)]='block'):alert(_0x34afb3(0xa7));}async function saveTicketEdit(){const _0xc90513=_0x1c44f8,_0x21ebd3=document[_0xc90513(0x170)]('editPassword')[_0xc90513(0xe0)],_0x10775a=document['getElementById']('editPrice')[_0xc90513(0xe0)],_0x3b5134=document[_0xc90513(0x170)](_0xc90513(0xc5))[_0xc90513(0xe0)],_0x3b9fe3=document[_0xc90513(0x170)](_0xc90513(0xdf))[_0xc90513(0xe0)],_0x15f70d=sessionStorage['getItem']('currentUserId');if(!_0x21ebd3||!_0x10775a||!_0x3b5134||!_0x3b9fe3||!_0x15f70d){alert(_0xc90513(0x152));return;}showLoading(),await initializeDatabase();if(currentDatabase===_0xc90513(0xea)){const _0xae98be=allTickets[editingCategory];_0xae98be[_0xc90513(0x140)][editingIndex]=_0x21ebd3,_0xae98be[_0xc90513(0x176)][editingIndex]=_0x10775a,_0xae98be[_0xc90513(0xf8)][editingIndex]=_0x3b5134;const _0x35c56b={[_0xc90513(0xcd)+_0x15f70d+'/'+currentDatabase+'/'+editingCategory]:_0xae98be};update(ref(db),_0x35c56b)['then'](()=>{const _0x122641=_0xc90513;hideLoading(),closeEditModal(),alert(_0x122641(0x160));})[_0xc90513(0x168)](_0x227fa0=>{const _0x24684d=_0xc90513;console[_0x24684d(0xb0)](_0x24684d(0x17f),_0x227fa0),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket');});}else{if(currentDatabase==='TicketsTransit'){const _0x139511=ref(db,_0xc90513(0xcd)+_0x15f70d+'/'+currentDatabase+'/'+editingId);update(_0x139511,{'category':_0x3b9fe3,'password':_0x21ebd3,'price':_0x10775a,'user':_0x3b5134})[_0xc90513(0xff)](()=>{hideLoading(),closeEditModal(),alert('Ticket\x20modifié\x20avec\x20succès!');})[_0xc90513(0x168)](_0x5e5b65=>{const _0x1619d3=_0xc90513;console[_0x1619d3(0xb0)](_0x1619d3(0x17f),_0x5e5b65),hideLoading(),alert(_0x1619d3(0x123));});}}}function editTicketTotal(_0xaa38a9,_0x40d76b){const _0x312c63=_0x1c44f8;editingCategory=_0xaa38a9,editingIndex=_0x40d76b;const _0x3e1495=allTickets[_0xaa38a9];document['getElementById']('editId')[_0x312c63(0xe0)]='',document[_0x312c63(0x170)]('editCategory')[_0x312c63(0xe0)]=_0xaa38a9,document[_0x312c63(0x170)]('editPassword')[_0x312c63(0xe0)]=_0x3e1495[_0x312c63(0x140)][_0x40d76b],document[_0x312c63(0x170)](_0x312c63(0x11a))[_0x312c63(0xe0)]=_0x3e1495[_0x312c63(0x176)][_0x40d76b],document[_0x312c63(0x170)](_0x312c63(0xc5))[_0x312c63(0xe0)]=_0x3e1495[_0x312c63(0xf8)][_0x40d76b],document[_0x312c63(0x170)]('editTicketModal')[_0x312c63(0x119)][_0x312c63(0x16a)]=_0x312c63(0x10b);}async function mergeTicketsToCategory(_0x4b2870,_0x3a472d){const _0x36dc8a=_0x1c44f8;let _0x30f178={};const _0x4d740d=sessionStorage[_0x36dc8a(0x13c)](_0x36dc8a(0xc1));if(!_0x4d740d){console[_0x36dc8a(0xb0)](_0x36dc8a(0x15f));return;}await initializeDatabase();if(currentDatabase===_0x36dc8a(0xfb))for(let _0x40c3cc in _0x3a472d){_0x30f178[_0x36dc8a(0xcd)+_0x4d740d+'/'+currentDatabase+'/'+_0x40c3cc]=_0x3a472d[_0x40c3cc];}else{!allTickets[_0x4b2870]&&(allTickets[_0x4b2870]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0x40805e=allTickets[_0x4b2870],_0x31e62e={'motDePasse':[..._0x40805e[_0x36dc8a(0x140)],..._0x3a472d[_0x36dc8a(0x140)]],'prix':[..._0x40805e['prix'],..._0x3a472d['prix']],'utilisateur':[..._0x40805e[_0x36dc8a(0xf8)],..._0x3a472d['utilisateur']]};_0x30f178['users-data/'+_0x4d740d+'/'+currentDatabase+'/'+_0x4b2870]=_0x31e62e;}update(ref(db),_0x30f178)[_0x36dc8a(0xff)](()=>{const _0x2a17e4=_0x36dc8a;hideLoading(),alert(_0x2a17e4(0xb1)+(_0x4b2870||_0x2a17e4(0xfb))+'!');})[_0x36dc8a(0x168)](_0x3bf7b0=>{const _0x1fe22d=_0x36dc8a;console[_0x1fe22d(0xb0)]('Erreur\x20lors\x20de\x20l\x27importation:',_0x3bf7b0),hideLoading(),alert(_0x1fe22d(0x13e));});}function editCategory(_0x5bab2e){const _0x15f9e8=_0x1c44f8;currentEditingCategory=_0x5bab2e,document[_0x15f9e8(0x170)](_0x15f9e8(0x116))[_0x15f9e8(0xe0)]=_0x5bab2e,document['getElementById'](_0x15f9e8(0xe7))[_0x15f9e8(0x119)]['display']=_0x15f9e8(0x10b);}async function saveCategoryEdit(){const _0xb0935c=_0x1c44f8,_0x49521e=document[_0xb0935c(0x170)](_0xb0935c(0x116))[_0xb0935c(0xe0)][_0xb0935c(0x125)](),_0x89299d=sessionStorage[_0xb0935c(0x13c)](_0xb0935c(0xc1));if(!_0x49521e||!_0x89299d){alert(_0xb0935c(0x161));return;}if(_0x49521e===currentEditingCategory){closeEditCategoryModal();return;}showLoading(),await initializeDatabase();const _0x3158f4=allTickets[currentEditingCategory],_0x1bc127={['users-data/'+_0x89299d+'/'+currentDatabase+'/'+currentEditingCategory]:null,[_0xb0935c(0xcd)+_0x89299d+'/'+currentDatabase+'/'+_0x49521e]:_0x3158f4};update(ref(db),_0x1bc127)['then'](()=>{const _0x2a87f5=_0xb0935c;hideLoading(),closeEditCategoryModal(),alert(_0x2a87f5(0x10a));})[_0xb0935c(0x168)](_0x1bb0ad=>{const _0x26531a=_0xb0935c;console['error'](_0x26531a(0x133),_0x1bb0ad),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie');});}function showAddTicketModal(_0x4fb49){const _0x182e49=_0x1c44f8;currentEditingCategory=_0x4fb49,document[_0x182e49(0x170)](_0x182e49(0xec))[_0x182e49(0xe0)]='',document[_0x182e49(0x170)](_0x182e49(0x146))[_0x182e49(0xe0)]='',document[_0x182e49(0x170)](_0x182e49(0xe6))[_0x182e49(0xe0)]='',document[_0x182e49(0x170)](_0x182e49(0x122))['value']='',document[_0x182e49(0x170)](_0x182e49(0x177))[_0x182e49(0x119)]['display']=_0x182e49(0x10b);}async function saveNewTicket(){const _0x231d86=_0x1c44f8;showLoading();const _0x1fdd58=sessionStorage[_0x231d86(0x13c)](_0x231d86(0xc1));if(!_0x1fdd58){hideLoading(),alert(_0x231d86(0x112));return;}await initializeDatabase();if(currentDatabase==='TicketsTransit'){const _0x58d527=_0x231d86(0x128)+Date[_0x231d86(0xc8)](),_0x237c59={'id':_0x58d527,'category':document['getElementById'](_0x231d86(0x122))[_0x231d86(0xe0)][_0x231d86(0x125)](),'password':document[_0x231d86(0x170)]('newPassword')[_0x231d86(0xe0)][_0x231d86(0x125)](),'price':document[_0x231d86(0x170)](_0x231d86(0x146))['value'][_0x231d86(0x125)](),'user':document[_0x231d86(0x170)](_0x231d86(0xe6))[_0x231d86(0xe0)][_0x231d86(0x125)]()};set(ref(db,_0x231d86(0xcd)+_0x1fdd58+'/'+currentDatabase+'/'+_0x58d527),_0x237c59)[_0x231d86(0xff)](()=>{hideLoading(),closeAddTicketModal(),alert('Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTransit!');})[_0x231d86(0x168)](_0x5daa9c=>{const _0x749812=_0x231d86;console[_0x749812(0xb0)](_0x749812(0x12b),_0x5daa9c),hideLoading(),alert(_0x749812(0xdb));});}else{const _0x3a5df0=currentEditingCategory,_0x4b27e8={'password':document[_0x231d86(0x170)](_0x231d86(0xec))[_0x231d86(0xe0)]['trim'](),'price':document[_0x231d86(0x170)](_0x231d86(0x146))[_0x231d86(0xe0)][_0x231d86(0x125)](),'user':document['getElementById'](_0x231d86(0xe6))[_0x231d86(0xe0)][_0x231d86(0x125)]()},_0x16416f=allTickets[_0x3a5df0]||{'motDePasse':[],'prix':[],'utilisateur':[]};_0x16416f[_0x231d86(0x140)][_0x231d86(0xd1)](_0x4b27e8['password']),_0x16416f[_0x231d86(0x176)][_0x231d86(0xd1)](_0x4b27e8[_0x231d86(0x14c)]),_0x16416f[_0x231d86(0xf8)]['push'](_0x4b27e8[_0x231d86(0x15e)]),set(ref(db,_0x231d86(0xcd)+_0x1fdd58+'/'+currentDatabase+'/'+_0x3a5df0),_0x16416f)[_0x231d86(0xff)](()=>{const _0x2f6323=_0x231d86;hideLoading(),closeAddTicketModal(),alert(_0x2f6323(0xfa));})[_0x231d86(0x168)](_0x44b48b=>{const _0x7b0b5b=_0x231d86;console[_0x7b0b5b(0xb0)](_0x7b0b5b(0x12b),_0x44b48b),hideLoading(),alert(_0x7b0b5b(0xdb));});}}function closeEditModal(){const _0x2da637=_0x1c44f8;document[_0x2da637(0x170)](_0x2da637(0xd9))['style'][_0x2da637(0x16a)]=_0x2da637(0x129),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0x416edf=_0x1c44f8;document['getElementById']('editCategoryModal')[_0x416edf(0x119)]['display']=_0x416edf(0x129),currentEditingCategory=null;}function closeAddTicketModal(){const _0x16fa59=_0x1c44f8;document[_0x16fa59(0x170)](_0x16fa59(0x177))[_0x16fa59(0x119)][_0x16fa59(0x16a)]=_0x16fa59(0x129),currentEditingCategory=null;}function matchesSearchTotal(_0x3cde1b,_0x18c142,_0x307b7d){const _0x8e6c4c=_0x1c44f8,_0x529cee=_0x307b7d[_0x8e6c4c(0xe2)]();return _0x3cde1b[_0x8e6c4c(0x140)][_0x18c142][_0x8e6c4c(0xe2)]()['includes'](_0x529cee)||_0x3cde1b['prix'][_0x18c142]['toLowerCase']()['includes'](_0x529cee)||_0x3cde1b[_0x8e6c4c(0xf8)][_0x18c142]['toLowerCase']()['includes'](_0x529cee);}function matchesSearchTransit(_0x33fb29,_0x3db19f){const _0x4b93a5=_0x1c44f8,_0x4182f6=_0x3db19f[_0x4b93a5(0xe2)]();return _0x33fb29['id']&&_0x33fb29['id'][_0x4b93a5(0xe2)]()[_0x4b93a5(0x107)](_0x4182f6)||_0x33fb29[_0x4b93a5(0xc0)]&&_0x33fb29[_0x4b93a5(0xc0)]['toLowerCase']()[_0x4b93a5(0x107)](_0x4182f6)||_0x33fb29[_0x4b93a5(0xf2)]&&_0x33fb29[_0x4b93a5(0xf2)][_0x4b93a5(0xe2)]()[_0x4b93a5(0x107)](_0x4182f6)||_0x33fb29['price']&&_0x33fb29[_0x4b93a5(0x14c)][_0x4b93a5(0xe2)]()['includes'](_0x4182f6)||_0x33fb29[_0x4b93a5(0x15e)]&&_0x33fb29[_0x4b93a5(0x15e)]['toLowerCase']()[_0x4b93a5(0x107)](_0x4182f6);}function matchesSearch(_0x7390f0,_0x47ee8d,_0x1eeac9){const _0x274601=_0x1c44f8;if(currentDatabase===_0x274601(0xea))return matchesSearchTotal(_0x7390f0,_0x47ee8d,_0x1eeac9);else{if(currentDatabase===_0x274601(0xfb))return matchesSearchTransit(_0x7390f0,_0x1eeac9);}return![];}function highlightMatch(_0x1e9eb3,_0xb5e6e1){const _0x449af2=_0x1c44f8;if(!_0xb5e6e1)return _0x1e9eb3;const _0x559d18=new RegExp(_0xb5e6e1,'gi');return _0x1e9eb3[_0x449af2(0xfe)](_0x559d18,_0x29706f=>'<span\x20class=\x22highlight\x22>'+_0x29706f+_0x449af2(0x100));}async function deleteTicket(_0xc318cc,_0x3b1f5b,_0x176971){const _0x37e0ab=_0x1c44f8,_0x2384d3=sessionStorage[_0x37e0ab(0x13c)](_0x37e0ab(0xc1));if(!_0x2384d3){alert(_0x37e0ab(0x175));return;}if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?')){showLoading(),await initializeDatabase();if(currentDatabase==='TicketsTransit')remove(ref(db,_0x37e0ab(0xcd)+_0x2384d3+'/'+currentDatabase+'/'+_0x176971))[_0x37e0ab(0xff)](()=>{const _0x32a879=_0x37e0ab;hideLoading(),alert(_0x32a879(0x12e));})['catch'](_0x437805=>{const _0x2b4392=_0x37e0ab;console[_0x2b4392(0xb0)](_0x2b4392(0x158),_0x437805),hideLoading(),alert(_0x2b4392(0xef));});else{const _0x335386=allTickets[_0xc318cc];_0x335386[_0x37e0ab(0x140)][_0x37e0ab(0x163)](_0x3b1f5b,0x1),_0x335386[_0x37e0ab(0x176)]['splice'](_0x3b1f5b,0x1),_0x335386[_0x37e0ab(0xf8)][_0x37e0ab(0x163)](_0x3b1f5b,0x1),set(ref(db,_0x37e0ab(0xcd)+_0x2384d3+'/'+currentDatabase+'/'+_0xc318cc),_0x335386)[_0x37e0ab(0xff)](()=>{const _0x45588a=_0x37e0ab;hideLoading(),alert(_0x45588a(0x12e));})['catch'](_0x3cff63=>{const _0x448b9f=_0x37e0ab;console[_0x448b9f(0xb0)](_0x448b9f(0x158),_0x3cff63),hideLoading(),alert(_0x448b9f(0xef));});}}}async function deleteSelectedTickets(_0x35fc48){const _0x2179ba=_0x1c44f8,_0x2e6797=sessionStorage[_0x2179ba(0x13c)](_0x2179ba(0xc1));if(!_0x2e6797){alert(_0x2179ba(0x103));return;}const _0x51b591=document[_0x2179ba(0x17e)]('input[name^=\x22ticketSelect_'+(_0x35fc48||_0x2179ba(0xd5))+_0x2179ba(0x131));if(_0x51b591[_0x2179ba(0x13f)]===0x0){alert(_0x2179ba(0x147));return;}if(confirm(_0x2179ba(0x134))){showLoading(),await initializeDatabase();const _0x5ce343={};if(currentDatabase===_0x2179ba(0xfb))_0x51b591[_0x2179ba(0x10f)](_0x3e38b8=>{const _0x4f4df2=_0x3e38b8['value'];_0x5ce343['users-data/'+_0x2e6797+'/'+currentDatabase+'/'+_0x4f4df2]=null;});else{const _0x2fccdf=allTickets[_0x35fc48],_0x4849ba=Array[_0x2179ba(0x132)](_0x51b591)[_0x2179ba(0x17d)](_0x21c2ba=>parseInt(_0x21c2ba[_0x2179ba(0xe0)]))[_0x2179ba(0x117)]((_0x4edde1,_0x662970)=>_0x662970-_0x4edde1);_0x4849ba['forEach'](_0x2e180f=>{const _0x3ebc4d=_0x2179ba;_0x2fccdf[_0x3ebc4d(0x140)][_0x3ebc4d(0x163)](_0x2e180f,0x1),_0x2fccdf['prix'][_0x3ebc4d(0x163)](_0x2e180f,0x1),_0x2fccdf['utilisateur']['splice'](_0x2e180f,0x1);}),_0x5ce343[_0x2179ba(0xcd)+_0x2e6797+'/'+currentDatabase+'/'+_0x35fc48]=_0x2fccdf;}update(ref(db),_0x5ce343)[_0x2179ba(0xff)](()=>{const _0x3c8431=_0x2179ba;hideLoading(),alert(_0x3c8431(0x118));})[_0x2179ba(0x168)](_0x5f4abe=>{const _0xe82518=_0x2179ba;console[_0xe82518(0xb0)](_0xe82518(0x158),_0x5f4abe),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets');});}}function editSelectedTickets(_0x2032a5){const _0x22b02b=_0x1c44f8,_0x55b3a3=document[_0x22b02b(0x17e)](_0x22b02b(0xe3)+(_0x2032a5||'Transit')+_0x22b02b(0x131));if(_0x55b3a3[_0x22b02b(0x13f)]===0x0){alert(_0x22b02b(0x141));return;}window['selectedTicketsData']={'category':_0x2032a5,'tickets':[]};if(currentDatabase===_0x22b02b(0xfb))_0x55b3a3[_0x22b02b(0x10f)](_0x2401f7=>{const _0x524f4b=_0x22b02b,_0x58ee16=_0x2401f7[_0x524f4b(0xe0)];window['selectedTicketsData'][_0x524f4b(0xfd)][_0x524f4b(0xd1)]({'id':_0x58ee16,'data':allTickets[_0x58ee16]});});else{const _0x13b684=Array[_0x22b02b(0x132)](_0x55b3a3)['map'](_0x45e663=>parseInt(_0x45e663[_0x22b02b(0xe0)]));window[_0x22b02b(0x150)][_0x22b02b(0xfd)]=_0x13b684['map'](_0x4c1d8c=>({'index':_0x4c1d8c,'data':{'password':allTickets[_0x2032a5][_0x22b02b(0x140)][_0x4c1d8c],'price':allTickets[_0x2032a5][_0x22b02b(0x176)][_0x4c1d8c],'user':allTickets[_0x2032a5]['utilisateur'][_0x4c1d8c]}}));}document[_0x22b02b(0x170)](_0x22b02b(0x15d))[_0x22b02b(0x119)][_0x22b02b(0x16a)]='block';}async function saveBulkEdit(){const _0x5e48c6=_0x1c44f8,_0x5206be=document[_0x5e48c6(0x170)](_0x5e48c6(0x106))['value'][_0x5e48c6(0x125)](),_0x3f132e=document['getElementById']('bulkEditPassword')[_0x5e48c6(0xe0)][_0x5e48c6(0x125)](),_0x43c0c1=document[_0x5e48c6(0x170)]('bulkEditPrice')['value'][_0x5e48c6(0x125)](),_0x5dbe6b=document['getElementById'](_0x5e48c6(0x114))[_0x5e48c6(0xe0)][_0x5e48c6(0x125)](),_0x3164db=sessionStorage[_0x5e48c6(0x13c)]('currentUserId');if(!_0x3164db){alert(_0x5e48c6(0x11d));return;}showLoading(),await initializeDatabase();const _0x2509b9={};if(currentDatabase==='TicketsTransit')window[_0x5e48c6(0x150)][_0x5e48c6(0xfd)]['forEach'](_0x401b44=>{const _0x5b7021=_0x5e48c6,_0x2f5491={..._0x401b44[_0x5b7021(0x11c)],'category':_0x5206be||_0x401b44[_0x5b7021(0x11c)][_0x5b7021(0xc0)],'password':_0x3f132e||_0x401b44[_0x5b7021(0x11c)][_0x5b7021(0xf2)],'price':_0x43c0c1||_0x401b44[_0x5b7021(0x11c)][_0x5b7021(0x14c)],'user':_0x5dbe6b||_0x401b44['data'][_0x5b7021(0x15e)]};_0x2509b9[_0x5b7021(0xcd)+_0x3164db+'/'+currentDatabase+'/'+_0x401b44['id']]=_0x2f5491;});else{const _0x43916d=window[_0x5e48c6(0x150)][_0x5e48c6(0xc0)],_0x22a05c=allTickets[_0x43916d];window[_0x5e48c6(0x150)][_0x5e48c6(0xfd)][_0x5e48c6(0x10f)](_0x17590c=>{const _0xaa814d=_0x5e48c6;if(_0x3f132e)_0x22a05c[_0xaa814d(0x140)][_0x17590c[_0xaa814d(0x138)]]=_0x3f132e;if(_0x43c0c1)_0x22a05c[_0xaa814d(0x176)][_0x17590c['index']]=_0x43c0c1;if(_0x5dbe6b)_0x22a05c[_0xaa814d(0xf8)][_0x17590c[_0xaa814d(0x138)]]=_0x5dbe6b;}),_0x2509b9[_0x5e48c6(0xcd)+_0x3164db+'/'+currentDatabase+'/'+_0x43916d]=_0x22a05c;}update(ref(db),_0x2509b9)[_0x5e48c6(0xff)](()=>{const _0x97e364=_0x5e48c6;hideLoading(),closeBulkEditModal(),alert(_0x97e364(0xe1));})[_0x5e48c6(0x168)](_0x401a6e=>{const _0x59b8fa=_0x5e48c6;console['error'](_0x59b8fa(0x120),_0x401a6e),hideLoading(),alert(_0x59b8fa(0x105));});}function closeBulkEditModal(){const _0x56d4f3=_0x1c44f8;document[_0x56d4f3(0x170)](_0x56d4f3(0x15d))[_0x56d4f3(0x119)][_0x56d4f3(0x16a)]=_0x56d4f3(0x129),window[_0x56d4f3(0x150)]=null;}async function deleteAllTicketsInCategory(_0x351d31){const _0x342ac5=_0x1c44f8,_0x3b92ed=sessionStorage[_0x342ac5(0x13c)](_0x342ac5(0xc1));if(!_0x3b92ed){alert(_0x342ac5(0x103));return;}confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20'+(_0x351d31||_0x342ac5(0xfb))+'\x20?')&&(showLoading(),await initializeDatabase(),currentDatabase===_0x342ac5(0xfb)?set(ref(db,_0x342ac5(0xcd)+_0x3b92ed+'/'+currentDatabase),{})['then'](()=>{const _0x3e6d73=_0x342ac5;hideLoading(),alert(_0x3e6d73(0xfc));})[_0x342ac5(0x168)](_0x18ad2f=>{const _0x3cc0db=_0x342ac5;console[_0x3cc0db(0xb0)]('Erreur\x20lors\x20de\x20la\x20suppression:',_0x18ad2f),hideLoading(),alert(_0x3cc0db(0x11f));}):set(ref(db,_0x342ac5(0xcd)+_0x3b92ed+'/'+currentDatabase+'/'+_0x351d31),{'motDePasse':[],'prix':[],'utilisateur':[]})[_0x342ac5(0xff)](()=>{const _0x28aa52=_0x342ac5;hideLoading(),alert(_0x28aa52(0x149));})['catch'](_0x2a869e=>{const _0x14f5b1=_0x342ac5;console[_0x14f5b1(0xb0)](_0x14f5b1(0x158),_0x2a869e),hideLoading(),alert(_0x14f5b1(0x11f));}));}function _0xcab6(_0x1ee3f4,_0x1abda0){const _0x46611c=_0x4661();return _0xcab6=function(_0xcab67f,_0x259945){_0xcab67f=_0xcab67f-0xa7;let _0x2204a4=_0x46611c[_0xcab67f];return _0x2204a4;},_0xcab6(_0x1ee3f4,_0x1abda0);}function exportTickets(){const _0x8b75d8=_0x1c44f8,_0x33451a=_0x8b75d8(0xd7)+encodeURIComponent(JSON[_0x8b75d8(0x165)](allTickets,null,0x2)),_0x47f72a=document[_0x8b75d8(0x171)]('a');_0x47f72a[_0x8b75d8(0x12d)](_0x8b75d8(0xdd),_0x33451a),_0x47f72a[_0x8b75d8(0x12d)](_0x8b75d8(0x172),_0x8b75d8(0x166)+currentDatabase+_0x8b75d8(0xba)),document[_0x8b75d8(0xb3)][_0x8b75d8(0x13d)](_0x47f72a),_0x47f72a['click'](),_0x47f72a[_0x8b75d8(0xd3)]();}function exportFilteredTickets(){const _0x4ff242=_0x1c44f8,_0x4a4804=document[_0x4ff242(0x170)](_0x4ff242(0x14f))[_0x4ff242(0xe0)][_0x4ff242(0x125)](),_0x105538={};if(currentDatabase===_0x4ff242(0xfb))for(let _0x3a8aef in allTickets){(!_0x4a4804||matchesSearchTransit(allTickets[_0x3a8aef],_0x4a4804))&&(_0x105538[_0x3a8aef]=allTickets[_0x3a8aef]);}else for(let _0x3a1793 in allTickets){const _0x4945e8=allTickets[_0x3a1793];_0x105538[_0x3a1793]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x1b4b55=0x0;_0x1b4b55<_0x4945e8['motDePasse'][_0x4ff242(0x13f)];_0x1b4b55++){(!_0x4a4804||matchesSearchTotal(_0x4945e8,_0x1b4b55,_0x4a4804))&&(_0x105538[_0x3a1793][_0x4ff242(0x140)][_0x4ff242(0xd1)](_0x4945e8[_0x4ff242(0x140)][_0x1b4b55]),_0x105538[_0x3a1793][_0x4ff242(0x176)][_0x4ff242(0xd1)](_0x4945e8[_0x4ff242(0x176)][_0x1b4b55]),_0x105538[_0x3a1793][_0x4ff242(0xf8)][_0x4ff242(0xd1)](_0x4945e8[_0x4ff242(0xf8)][_0x1b4b55]));}}const _0x45c6d4=_0x4ff242(0xd7)+encodeURIComponent(JSON[_0x4ff242(0x165)](_0x105538,null,0x2)),_0x127b52=document[_0x4ff242(0x171)]('a');_0x127b52['setAttribute'](_0x4ff242(0xdd),_0x45c6d4),_0x127b52[_0x4ff242(0x12d)](_0x4ff242(0x172),_0x4ff242(0xbc)+currentDatabase+_0x4ff242(0xba)),document[_0x4ff242(0xb3)][_0x4ff242(0x13d)](_0x127b52),_0x127b52[_0x4ff242(0x101)](),_0x127b52['remove']();}function handleJsonImport(_0x4a7636){const _0x4ceeda=_0x1c44f8,_0x735e89=JSON['parse'](_0x4a7636);if(confirm(_0x4ceeda(0xae))){(!allTickets||Object[_0x4ceeda(0xf7)](allTickets)['length']===0x0)&&(allTickets=currentDatabase===_0x4ceeda(0xfb)?{}:{});const _0x3cc4bb={};if(currentDatabase===_0x4ceeda(0xfb)){let _0x976dd4={};for(let _0x2cf52d in _0x735e89){let _0x19a3d9=_0x2cf52d;while(allTickets[_0x19a3d9]){_0x19a3d9=_0x4ceeda(0x128)+Date[_0x4ceeda(0xc8)]()+'-'+Math[_0x4ceeda(0x121)](Math['random']()*0x3e8);}_0x976dd4[_0x19a3d9]={..._0x735e89[_0x2cf52d],'id':_0x19a3d9};}for(let _0x43bc55 in _0x976dd4){_0x3cc4bb[currentDatabase+'/'+_0x43bc55]=_0x976dd4[_0x43bc55];}}else for(let _0x40b9b9 in _0x735e89){allTickets[_0x40b9b9]?_0x3cc4bb[currentDatabase+'/'+_0x40b9b9]={'motDePasse':[...allTickets[_0x40b9b9][_0x4ceeda(0x140)],..._0x735e89[_0x40b9b9]['motDePasse']],'prix':[...allTickets[_0x40b9b9]['prix'],..._0x735e89[_0x40b9b9][_0x4ceeda(0x176)]],'utilisateur':[...allTickets[_0x40b9b9][_0x4ceeda(0xf8)],..._0x735e89[_0x40b9b9][_0x4ceeda(0xf8)]]}:_0x3cc4bb[currentDatabase+'/'+_0x40b9b9]=_0x735e89[_0x40b9b9];}mergeTicketsToCategory(null,_0x3cc4bb);}else hideLoading();}function handleCsvImport(_0x460ade){const _0x5eb949=_0x1c44f8,_0x82078b=_0x460ade[_0x5eb949(0xbf)]('\x0a');let _0x1c3777={};if(currentDatabase==='TicketsTransit'){for(let _0x2576e6=0x1;_0x2576e6<_0x82078b['length'];_0x2576e6++){if(!_0x82078b[_0x2576e6]['trim']())continue;const _0x56bfd3=_0x82078b[_0x2576e6][_0x5eb949(0xbf)](','),_0x143aa6=_0x5eb949(0x128)+Date[_0x5eb949(0xc8)]()+'-'+Math[_0x5eb949(0x121)](Math[_0x5eb949(0x137)]()*0x3e8);_0x1c3777[_0x143aa6]={'id':_0x143aa6,'category':_0x56bfd3[0x1]?_0x56bfd3[0x1][_0x5eb949(0x125)]():_0x5eb949(0xf6),'password':_0x56bfd3[0x2]?_0x56bfd3[0x2][_0x5eb949(0x125)]():'','price':_0x56bfd3[0x3]?_0x56bfd3[0x3][_0x5eb949(0x125)]():'','user':_0x56bfd3[0x4]?_0x56bfd3[0x4][_0x5eb949(0x125)]():''};}tempImportData={'tickets':_0x1c3777},tempCategory=_0x5eb949(0xfb),showPriceModal('TicketsTransit\x20Import');}else{for(let _0x58ab0a=0x1;_0x58ab0a<_0x82078b[_0x5eb949(0x13f)];_0x58ab0a++){if(!_0x82078b[_0x58ab0a][_0x5eb949(0x125)]())continue;const _0x2ae148=_0x82078b[_0x58ab0a][_0x5eb949(0xbf)](','),_0x511ea6=_0x2ae148[0x2]['trim']();!_0x1c3777[_0x511ea6]&&(_0x1c3777[_0x511ea6]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x1c3777[_0x511ea6][_0x5eb949(0xf8)][_0x5eb949(0xd1)](_0x2ae148[0x0][_0x5eb949(0x125)]()),_0x1c3777[_0x511ea6][_0x5eb949(0x140)][_0x5eb949(0xd1)](_0x2ae148[0x1][_0x5eb949(0x125)]());}tempImportData=_0x1c3777;const _0x5cca67=Object[_0x5eb949(0xf7)](_0x1c3777)[0x0];showPriceModal(_0x5cca67);}}function handleTxtImport(_0x17fd22){const _0x21262f=_0x1c44f8,_0x4f2613=_0x17fd22[_0x21262f(0xbf)]('\x0a');let _0x2b6b7e={};if(currentDatabase===_0x21262f(0xfb)){const _0x11a391=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x20c6b7 of _0x4f2613){_0x20c6b7=_0x20c6b7[_0x21262f(0x125)]();if(!_0x20c6b7||_0x20c6b7===_0x21262f(0xcb))continue;const _0x3976d6=_0x20c6b7['match'](_0x11a391);if(_0x3976d6){const [_0x136ca5,_0x16fde7,_0x3b453a,_0x5749ab]=_0x3976d6,_0x235bd2='id-'+Date[_0x21262f(0xc8)]()+'-'+Math['floor'](Math[_0x21262f(0x137)]()*0x3e8);_0x2b6b7e[_0x235bd2]={'id':_0x235bd2,'category':_0x5749ab,'password':_0x3b453a,'price':'','user':_0x16fde7};}}tempImportData={'tickets':_0x2b6b7e},tempCategory=_0x21262f(0xfb),showPriceModal(_0x21262f(0x142));}else{const _0x3d84a0=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x3c0fb1 of _0x4f2613){_0x3c0fb1=_0x3c0fb1[_0x21262f(0x125)]();if(!_0x3c0fb1||_0x3c0fb1===_0x21262f(0xcb))continue;const _0xe11d48=_0x3c0fb1[_0x21262f(0xa8)](_0x3d84a0);if(_0xe11d48){const [_0x1d4046,_0x301b02,_0x284b22,_0x51ded4]=_0xe11d48;!_0x2b6b7e[_0x51ded4]&&(_0x2b6b7e[_0x51ded4]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x2b6b7e[_0x51ded4]['utilisateur'][_0x21262f(0xd1)](_0x301b02),_0x2b6b7e[_0x51ded4][_0x21262f(0x140)][_0x21262f(0xd1)](_0x284b22);}}if(Object[_0x21262f(0xf7)](_0x2b6b7e)[_0x21262f(0x13f)]===0x0){hideLoading(),alert('Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier');return;}tempImportData=_0x2b6b7e;const _0x24a649=Object[_0x21262f(0xf7)](_0x2b6b7e)[0x0];showPriceModal(_0x24a649);}}function showPriceModal(_0xfd96c6){const _0xa941ab=_0x1c44f8;tempCategory=_0xfd96c6,document[_0xa941ab(0x170)](_0xa941ab(0x11b))['textContent']=_0xfd96c6,document['getElementById']('priceModal')[_0xa941ab(0x119)][_0xa941ab(0x16a)]=_0xa941ab(0x10b),document['getElementById'](_0xa941ab(0x135))['value']='';}function confirmPrice(){const _0x4b1e0f=_0x1c44f8,_0xe8faf1=document['getElementById'](_0x4b1e0f(0x135))[_0x4b1e0f(0xe0)][_0x4b1e0f(0x125)]();if(!_0xe8faf1){alert('Veuillez\x20entrer\x20un\x20prix');return;}if(currentDatabase===_0x4b1e0f(0xfb)){for(let _0x222786 in tempImportData['tickets']){tempImportData[_0x4b1e0f(0xfd)][_0x222786][_0x4b1e0f(0x14c)]=_0xe8faf1;}finishImport();}else{tempImportData[tempCategory]['prix']=Array(tempImportData[tempCategory][_0x4b1e0f(0x140)]['length'])[_0x4b1e0f(0xd0)](_0xe8faf1);const _0x25e6cc=Object[_0x4b1e0f(0xf7)](tempImportData),_0x5b8367=_0x25e6cc[_0x4b1e0f(0x179)](tempCategory);_0x5b8367<_0x25e6cc[_0x4b1e0f(0x13f)]-0x1?(document[_0x4b1e0f(0x170)](_0x4b1e0f(0x135))[_0x4b1e0f(0xe0)]='',showPriceModal(_0x25e6cc[_0x5b8367+0x1])):finishImport();}}function cancelImport(){const _0x2b10c2=_0x1c44f8;document['getElementById'](_0x2b10c2(0x10c))['style']['display']='none',currentDatabase===_0x2b10c2(0xfb)&&(tempImportData=null),document['getElementById']('importFile')[_0x2b10c2(0xe0)]='',tempCategory=null,hideLoading();}async function finishImport(){const _0x154944=_0x1c44f8,_0x1e33dc=sessionStorage['getItem'](_0x154944(0xc1));if(!_0x1e33dc){alert('Vous\x20devez\x20être\x20connecté\x20pour\x20importer\x20des\x20tickets.');return;}if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.')){showLoading(),await initializeDatabase();(!allTickets||Object[_0x154944(0xf7)](allTickets)[_0x154944(0x13f)]===0x0)&&(allTickets=currentDatabase===_0x154944(0xfb)?{}:{});const _0xd18162={};if(currentDatabase===_0x154944(0xfb))for(let _0x2db378 in tempImportData[_0x154944(0xfd)]){_0xd18162[_0x154944(0xcd)+_0x1e33dc+'/'+currentDatabase+'/'+_0x2db378]=tempImportData['tickets'][_0x2db378];}else for(let _0x1b5910 in tempImportData){allTickets[_0x1b5910]?_0xd18162[_0x154944(0xcd)+_0x1e33dc+'/'+currentDatabase+'/'+_0x1b5910]={'motDePasse':[...allTickets[_0x1b5910]['motDePasse'],...tempImportData[_0x1b5910][_0x154944(0x140)]],'prix':[...allTickets[_0x1b5910][_0x154944(0x176)],...tempImportData[_0x1b5910][_0x154944(0x176)]],'utilisateur':[...allTickets[_0x1b5910][_0x154944(0xf8)],...tempImportData[_0x1b5910][_0x154944(0xf8)]]}:_0xd18162['users-data/'+_0x1e33dc+'/'+currentDatabase+'/'+_0x1b5910]=tempImportData[_0x1b5910];}update(ref(db),_0xd18162)[_0x154944(0xff)](()=>{const _0x4643db=_0x154944;document[_0x4643db(0x170)](_0x4643db(0x10c))['style'][_0x4643db(0x16a)]='none',document[_0x4643db(0x170)](_0x4643db(0x144))[_0x4643db(0xe0)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x4643db(0xc6));})[_0x154944(0x168)](_0x534a77=>{const _0x3678b8=_0x154944;console[_0x3678b8(0xb0)](_0x3678b8(0x11e),_0x534a77),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.');});}else cancelImport();}function importTickets(_0x286046){const _0x2f6af8=_0x1c44f8,_0x217bd8=_0x286046['target']['files'][0x0];if(!_0x217bd8)return;showLoading();const _0x578e19=new FileReader();_0x578e19['onload']=function(_0x2f7626){const _0xb072f8=_0xcab6;try{const _0x5077b7=_0x217bd8[_0xb072f8(0x124)]['split']('.')[_0xb072f8(0x16e)]()[_0xb072f8(0xe2)]();if(_0x5077b7===_0xb072f8(0xd6))handleJsonImport(_0x2f7626[_0xb072f8(0x145)][_0xb072f8(0x14b)]);else{if(_0x5077b7===_0xb072f8(0x13b))handleCsvImport(_0x2f7626[_0xb072f8(0x145)][_0xb072f8(0x14b)]);else{if(_0x5077b7===_0xb072f8(0x10e))handleTxtImport(_0x2f7626[_0xb072f8(0x145)]['result']);else throw new Error(_0xb072f8(0xa9));}}}catch(_0x3b672d){console[_0xb072f8(0xb0)](_0xb072f8(0x14e),_0x3b672d),hideLoading(),alert(_0xb072f8(0xe9));}},_0x578e19[_0x2f6af8(0xe5)](_0x217bd8);}function _0x4661(){const _0x404718=['newUser','editCategoryModal','log','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.','TicketsTotal','747525qXreXW','newPassword','clear','.json,.csv,.txt','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket','closeAddTicketModal','\x27,\x20','password','showAddTicketModal','\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22window.editTicketTransit(\x27','N/A','keys','utilisateur','accept','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTotal!','TicketsTransit','Tous\x20les\x20tickets\x20ont\x20été\x20supprimés\x20avec\x20succès!','tickets','replace','then','</span>','click','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Vous\x20devez\x20être\x20connecté\x20pour\x20supprimer\x20des\x20tickets.','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22window.editCategory(\x27','Erreur\x20lors\x20de\x20la\x20modification\x20groupée\x20des\x20tickets','bulkEditCategory','includes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_','45CEvBoS','Catégorie\x20modifiée\x20avec\x20succès!','block','priceModal','notification','txt','forEach','status','/admin/subscription','Vous\x20devez\x20être\x20connecté\x20pour\x20ajouter\x20un\x20ticket.','5062841Uxxuno','bulkEditUser','innerHTML','editCategoryName','sort','Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!','style','editPrice','categoryName','data','Vous\x20devez\x20être\x20connecté\x20pour\x20modifier\x20des\x20tickets.','Erreur\x20lors\x20de\x20l\x27importation:','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','Erreur\x20lors\x20de\x20la\x20modification\x20groupée:','floor','newCategory','Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket','name','trim','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22window.editTicketTotal(\x27','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','id-','none','458670cQMDeT','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','setAttribute','Ticket\x20supprimé\x20avec\x20succès!','Current\x20user\x20ID\x20is\x20not\x20found\x20in\x20sessionStorage.','deleteAllTicketsInCategory','\x22]:checked','from','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?','priceInput','input','random','index','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','exportFilteredTickets','csv','getItem','appendChild','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','length','motDePasse','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20modifier','TicketsTransit\x20Import','487JAFvCg','importFile','target','newPrice','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer','onload','Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!','deleteSelectedTickets','result','price','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22window.deleteSelectedTickets(null)\x22>Supprimer\x20les\x20tickets\x20sélectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20d\x27importation:','searchBar','selectedTicketsData','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Tickets\x20en\x20transit</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22window.showAddTicketModal(null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_Transit\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20TicketsTransit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a<input\x20type=\x22file\x22\x20id=\x22importFile_Transit\x22\x0a\x20\x20\x20\x20accept=\x22.txt,.json\x22\x0a\x20\x20\x20\x20style=\x22display:\x20none;\x22\x0a\x20\x20\x20\x20onchange=\x22importTickets(event)\x22>\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22window.deleteAllTicketsInCategory(null)\x22>Supprimer\x20tous\x20les\x20tickets</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22window.editSelectedTickets(null)\x22>Modifier\x20les\x20tickets\x20selectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_Transit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Tous\x20les\x20champs\x20sont\x20obligatoires','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22window.editSelectedTickets(\x27','editTicketTransit','closeEditModal','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','changeDatabase','Erreur\x20lors\x20de\x20la\x20suppression:','43144poCVHK','ticketCategories','saveNewTicket','146uXsorD','bulkEditModal','user','User\x20not\x20logged\x20in.','Ticket\x20modifié\x20avec\x20succès!','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide,\x20et\x20vous\x20devez\x20être\x20connecté.','exportTickets','splice','active','stringify','tickets_export_','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','catch','true','display','searchTickets','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','pop','index.html','getElementById','createElement','download','saveBulkEdit','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:','Vous\x20devez\x20être\x20connecté\x20pour\x20supprimer\x20un\x20ticket.','prix','addTicketModal','editId','indexOf','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement:','databaseSelect','\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22window.showAddTicketModal(\x27','map','querySelectorAll','Erreur\x20lors\x20de\x20la\x20modification:','Ticket\x20introuvable.','match','Format\x20de\x20fichier\x20non\x20supporté','\x22\x20value=\x22','notificationMessage','notification\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22window.deleteTicket(\x27','error','Importation\x20réussie\x20dans\x20','editSelectedTickets','body','saveTicketEdit','closeEditCategoryModal','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22window.deleteTicket(null,null,\x20\x27','val','location','logout','.json','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_','filtered_tickets_export_','Abonnement\x20requis.\x20Veuillez\x20vous\x20abonner\x20pour\x20accéder\x20à\x20cette\x20page.','confirmPrice','split','category','currentUserId','3201040gWjVTx','20QrhBsP','loginAccueil.html','editUser','Importation\x20réussie\x20!','saveCategoryEdit','now','textContent','loadingIndicator','/ip\x20hotspot\x20user','editTicketTotal','users-data/','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20et\x20vous\x20assurer\x20que\x20vous\x20êtes\x20connecté.','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','fill','push','Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.','remove',',null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Transit','json','data:text/json;charset=utf-8,','closeBulkEditModal','editTicketModal','2784397RiTgRl','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','className','href','6ckHzky','editCategory','value','Tickets\x20sélectionnés\x20modifiés\x20avec\x20succès!','toLowerCase','input[name^=\x22ticketSelect_','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22window.deleteSelectedTickets(\x27','readAsText'];_0x4661=function(){return _0x404718;};return _0x4661();}async function deleteSearchResults(){const _0x536515=_0x1c44f8,_0x15a838=document[_0x536515(0x170)](_0x536515(0x14f))[_0x536515(0xe0)][_0x536515(0x125)](),_0x364b69=sessionStorage[_0x536515(0x13c)](_0x536515(0xc1));if(!_0x15a838||!_0x364b69){alert(_0x536515(0xce));return;}if(confirm(_0x536515(0xcf))){showLoading(),await initializeDatabase();const _0x2f8084={};if(currentDatabase===_0x536515(0xfb))for(let _0xb2b13c in allTickets){matchesSearchTransit(allTickets[_0xb2b13c],_0x15a838)&&(_0x2f8084[_0x536515(0xcd)+_0x364b69+'/'+currentDatabase+'/'+_0xb2b13c]=null);}else for(let _0x28bc4 in allTickets){const _0x28f836=allTickets[_0x28bc4],_0x3e41ac={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x17c923=0x0;_0x17c923<_0x28f836[_0x536515(0x140)]['length'];_0x17c923++){!matchesSearchTotal(_0x28f836,_0x17c923,_0x15a838)&&(_0x3e41ac['motDePasse'][_0x536515(0xd1)](_0x28f836[_0x536515(0x140)][_0x17c923]),_0x3e41ac[_0x536515(0x176)][_0x536515(0xd1)](_0x28f836[_0x536515(0x176)][_0x17c923]),_0x3e41ac[_0x536515(0xf8)][_0x536515(0xd1)](_0x28f836['utilisateur'][_0x17c923]));}_0x2f8084[_0x536515(0xcd)+_0x364b69+'/'+currentDatabase+'/'+_0x28bc4]=_0x3e41ac;}update(ref(db),_0x2f8084)['then'](()=>{const _0x41dae0=_0x536515;hideLoading(),alert(_0x41dae0(0xd2));})['catch'](_0x234f47=>{const _0x3afd33=_0x536515;console[_0x3afd33(0xb0)](_0x3afd33(0x174),_0x234f47),hideLoading(),alert(_0x3afd33(0x167));});}}function searchTickets(){const _0x5b08b7=_0x1c44f8,_0x3ad869=document['getElementById'](_0x5b08b7(0x14f))['value'][_0x5b08b7(0x125)]();displayTickets(allTickets,_0x3ad869);}function changeDatabase(){const _0xa56b9c=_0x1c44f8;currentDatabase=document[_0xa56b9c(0x170)](_0xa56b9c(0x17b))[_0xa56b9c(0xe0)],updateImportFileAccept(),loadTickets();}function updateImportFileAccept(){const _0x2b64ab=_0x1c44f8,_0x875599=document[_0x2b64ab(0x170)](_0x2b64ab(0x144));currentDatabase===_0x2b64ab(0xfb)?_0x875599[_0x2b64ab(0xf9)]='.txt,.json':_0x875599[_0x2b64ab(0xf9)]=_0x2b64ab(0xee);}window[_0x1c44f8(0xdf)]=editCategory,window[_0x1c44f8(0xf3)]=showAddTicketModal,window[_0x1c44f8(0x130)]=deleteAllTicketsInCategory,window[_0x1c44f8(0xb2)]=editSelectedTickets,window[_0x1c44f8(0x14a)]=deleteSelectedTickets,window[_0x1c44f8(0xcc)]=editTicketTotal,window[_0x1c44f8(0x154)]=editTicketTransit,window[_0x1c44f8(0xb4)]=saveTicketEdit,window[_0x1c44f8(0xc7)]=saveCategoryEdit,window[_0x1c44f8(0x15b)]=saveNewTicket,window[_0x1c44f8(0x155)]=closeEditModal,window[_0x1c44f8(0xb5)]=closeEditCategoryModal,window[_0x1c44f8(0xf0)]=closeAddTicketModal,window[_0x1c44f8(0x162)]=exportTickets,window[_0x1c44f8(0x13a)]=exportFilteredTickets,window[_0x1c44f8(0xbe)]=confirmPrice,window['cancelImport']=cancelImport,window['deleteSearchResults']=deleteSearchResults,window[_0x1c44f8(0x16b)]=searchTickets,window[_0x1c44f8(0x157)]=changeDatabase,window[_0x1c44f8(0xb9)]=logout,window['importTickets']=importTickets,window[_0x1c44f8(0x173)]=saveBulkEdit,window[_0x1c44f8(0xd8)]=closeBulkEditModal,document[_0x1c44f8(0x170)](_0x1c44f8(0x14f))['addEventListener'](_0x1c44f8(0x136),searchTickets),window[_0x1c44f8(0x148)]=async()=>{await initializeDatabase();const _0x27bd67=await checkLoginAndSubscription();_0x27bd67&&(updateImportFileAccept(),loadTickets());};
    </script>

</body>
</html>