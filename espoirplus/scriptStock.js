const _0x217af1=_0x349a;(function(_0xca24b9,_0x50b0a4){const _0x3d3c8b=_0x349a,_0x5bcdea=_0xca24b9();while(!![]){try{const _0x36daeb=-parseInt(_0x3d3c8b(0xd9))/0x1*(parseInt(_0x3d3c8b(0xf1))/0x2)+parseInt(_0x3d3c8b(0xf4))/0x3*(parseInt(_0x3d3c8b(0x10c))/0x4)+parseInt(_0x3d3c8b(0x102))/0x5+-parseInt(_0x3d3c8b(0xdd))/0x6*(-parseInt(_0x3d3c8b(0xaf))/0x7)+-parseInt(_0x3d3c8b(0x117))/0x8+parseInt(_0x3d3c8b(0xae))/0x9*(-parseInt(_0x3d3c8b(0xd7))/0xa)+parseInt(_0x3d3c8b(0x139))/0xb*(parseInt(_0x3d3c8b(0x134))/0xc);if(_0x36daeb===_0x50b0a4)break;else _0x5bcdea['push'](_0x5bcdea['shift']());}catch(_0x71a1ce){_0x5bcdea['push'](_0x5bcdea['shift']());}}}(_0x18be,0x6db95));const firebaseConfig={'apiKey':_0x217af1(0x9a),'authDomain':_0x217af1(0x99),'databaseURL':_0x217af1(0xa6),'projectId':_0x217af1(0x112),'storageBucket':'espoirplus-d68c2.firebasestorage.app','messagingSenderId':_0x217af1(0x121),'appId':'1:671203292972:web:42765e95e987ace1349e89','measurementId':_0x217af1(0x123)};firebase[_0x217af1(0x131)](firebaseConfig);const database=firebase['database'](),adminRef=database[_0x217af1(0xbe)](_0x217af1(0xef)),loginForm=document[_0x217af1(0xa2)](_0x217af1(0xe5)),signupForm=document[_0x217af1(0xa2)](_0x217af1(0xe1)),loginContainer=document['getElementById'](_0x217af1(0xba)),signupContainer=document[_0x217af1(0xa2)]('signupContainer'),dashboardContainer=document[_0x217af1(0xa2)](_0x217af1(0xfe)),salesForm=document[_0x217af1(0xa2)](_0x217af1(0xf7)),salesTable=document[_0x217af1(0xa2)](_0x217af1(0x9f)),totalSalesElement=document[_0x217af1(0xa2)](_0x217af1(0x8c)),averageSalesElement=document[_0x217af1(0xa2)](_0x217af1(0xb9)),userInfoElement=document['getElementById'](_0x217af1(0xd3)),toggleAnalysisButton=document[_0x217af1(0xa2)](_0x217af1(0x113)),toggleSalesButton=document[_0x217af1(0xa2)]('toggleSalesButton'),analysisSection=document['getElementById'](_0x217af1(0xe2)),salesDetailsSection=document[_0x217af1(0xa2)](_0x217af1(0xb0)),signupButton=document[_0x217af1(0xa2)](_0x217af1(0x110)),loginFromSignup=document[_0x217af1(0xa2)](_0x217af1(0xcb)),productSelect=document[_0x217af1(0xa2)]('product'),stockTableGlobal=document[_0x217af1(0xa2)](_0x217af1(0x10d));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x217af1(0xa2)](_0x217af1(0x8b))[_0x217af1(0xd8)]=new Date()[_0x217af1(0xfb)]()['slice'](0x0,0x10);function fetchTicketCategories(){const _0x4a86e3=_0x217af1;database[_0x4a86e3(0xbe)]('TicketsTotal')[_0x4a86e3(0x10f)](_0x4a86e3(0xd8))['then'](_0xaeec2d=>{const _0x966c66=_0x4a86e3;ticketCategories=_0xaeec2d[_0x966c66(0xb6)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x38dfa4=_0x217af1;productSelect[_0x38dfa4(0xed)]=_0x38dfa4(0xa3);for(const _0x48e574 in ticketCategories){const _0x4aed88=ticketCategories[_0x48e574]['prix'][0x0],_0x5850d0=document[_0x38dfa4(0xbf)](_0x38dfa4(0xff));_0x5850d0[_0x38dfa4(0xd8)]=_0x48e574,_0x5850d0[_0x38dfa4(0x12b)]=_0x48e574+'\x20('+_0x4aed88+_0x38dfa4(0xc7),productSelect[_0x38dfa4(0xe6)](_0x5850d0);}}fetchTicketCategories(),loginForm[_0x217af1(0xc2)]('submit',function(_0x3b6ac0){const _0x5f0156=_0x217af1;_0x3b6ac0[_0x5f0156(0x124)]();const _0x436749=document[_0x5f0156(0xa2)](_0x5f0156(0xa1))['value'],_0xdbb5b5=document[_0x5f0156(0xa2)](_0x5f0156(0x94))[_0x5f0156(0xd8)];database['ref']('users/'+_0x436749)['once']('value')[_0x5f0156(0xeb)](_0xad342c=>{const _0x1e1ff6=_0x5f0156;_0xad342c[_0x1e1ff6(0xfa)]()?_0xad342c[_0x1e1ff6(0xb6)]()['password']===_0xdbb5b5?loginSuccess(_0x436749):alert(_0x1e1ff6(0xc0)):alert('Utilisateur\x20introuvable');});}),signupForm['addEventListener'](_0x217af1(0xa7),function(_0x325d2c){const _0x29b464=_0x217af1;_0x325d2c[_0x29b464(0x124)]();const _0x407df0=document[_0x29b464(0xa2)](_0x29b464(0xea))[_0x29b464(0xd8)],_0x398a4f=document[_0x29b464(0xa2)](_0x29b464(0xc9))[_0x29b464(0xd8)];database[_0x29b464(0xbe)](_0x29b464(0xfd)+_0x407df0)[_0x29b464(0x10f)](_0x29b464(0xd8))[_0x29b464(0xeb)](_0x3ff5bf=>{const _0x35d6b9=_0x29b464;_0x3ff5bf[_0x35d6b9(0xfa)]()?alert(_0x35d6b9(0xdf)):database[_0x35d6b9(0xbe)](_0x35d6b9(0xfd)+_0x407df0)[_0x35d6b9(0xee)]({'password':_0x398a4f})[_0x35d6b9(0xeb)](()=>{const _0x48f40a=_0x35d6b9;alert(_0x48f40a(0x132)),signupContainer[_0x48f40a(0x89)][_0x48f40a(0x11c)]='none',loginContainer[_0x48f40a(0x89)]['display']=_0x48f40a(0x10a);})[_0x35d6b9(0xad)](_0x5b844a=>{const _0x4c5abe=_0x35d6b9;console[_0x4c5abe(0x11a)](_0x4c5abe(0x11d),_0x5b844a),alert(_0x4c5abe(0xd0));});});}),signupButton[_0x217af1(0xc2)](_0x217af1(0xf3),function(){const _0x1297f7=_0x217af1;loginContainer[_0x1297f7(0x89)]['display']='none',signupContainer[_0x1297f7(0x89)][_0x1297f7(0x11c)]=_0x1297f7(0x10a);}),loginFromSignup[_0x217af1(0xc2)](_0x217af1(0xf3),function(){const _0x121ad9=_0x217af1;signupContainer[_0x121ad9(0x89)][_0x121ad9(0x11c)]=_0x121ad9(0x10b),loginContainer[_0x121ad9(0x89)]['display']=_0x121ad9(0x10a);});function loginSuccess(_0x123135){const _0xbe1dc1=_0x217af1;currentUser=_0x123135,loginContainer[_0xbe1dc1(0x89)][_0xbe1dc1(0x11c)]=_0xbe1dc1(0x10b),signupContainer[_0xbe1dc1(0x89)][_0xbe1dc1(0x11c)]=_0xbe1dc1(0x10b),dashboardContainer[_0xbe1dc1(0x89)][_0xbe1dc1(0x11c)]=_0xbe1dc1(0x10a),userInfoElement[_0xbe1dc1(0x12b)]='Utilisateur:\x20'+_0x123135,checkSubscriptionStatus()[_0xbe1dc1(0xeb)](_0x21dd8c=>{_0x21dd8c?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0xbe1dc1(0xad)](_0x59744c=>{const _0x1046a5=_0xbe1dc1;console['error'](_0x1046a5(0xa0),_0x59744c),alert('Erreur\x20lors\x20de\x20la\x20vÃ©rification\x20de\x20l\x27abonnement.');});}function listenForSalesDataChanges(){const _0x4543c2=_0x217af1;salesDataListener=database[_0x4543c2(0xbe)](_0x4543c2(0xcf)+currentUser)['on'](_0x4543c2(0xd8),_0x288503=>{const _0x2f87b9=_0x4543c2;salesData=[],_0x288503[_0x2f87b9(0x136)](_0x3e013e=>{const _0x3ae9b2=_0x2f87b9,_0x33cc42=_0x3e013e['val']();_0x33cc42['key']=_0x3e013e[_0x3ae9b2(0xa5)],_0x33cc42[_0x3ae9b2(0xa9)]=(_0x33cc42['V']*_0x33cc42['PV'])[_0x3ae9b2(0xb5)](0x2),salesData[_0x3ae9b2(0x127)](_0x33cc42);}),analysisSection['style'][_0x2f87b9(0x11c)]===_0x2f87b9(0x10a)&&updateAnalysis(salesData);});}document[_0x217af1(0xa2)](_0x217af1(0xe4))[_0x217af1(0xc2)]('change',function(){const _0x27eefb=_0x217af1,_0x460b0d=this[_0x27eefb(0xd8)];database['ref'](_0x27eefb(0xcf)+currentUser)[_0x27eefb(0xc6)](_0x27eefb(0xe4))[_0x27eefb(0xf8)](_0x460b0d)[_0x27eefb(0xc8)](0x1)['once']('value')[_0x27eefb(0xeb)](_0x113f4f=>{const _0x4b07df=_0x27eefb;if(_0x113f4f[_0x4b07df(0xfa)]()){const _0x5d8987=Object[_0x4b07df(0x116)](_0x113f4f[_0x4b07df(0xb6)]())[0x0];document[_0x4b07df(0xa2)]('SI')[_0x4b07df(0xd8)]=_0x5d8987['SF']||0x0;}else document[_0x4b07df(0xa2)]('SI')[_0x4b07df(0xd8)]=0x0;}),updatePV();}),document[_0x217af1(0xa2)]('V')[_0x217af1(0xc2)](_0x217af1(0x91),updateSF),document[_0x217af1(0xa2)](_0x217af1(0x12e))[_0x217af1(0xc2)](_0x217af1(0x91),updateSF);function updateSF(){const _0x32b2d8=_0x217af1,_0x43b2aa=parseInt(document[_0x32b2d8(0xa2)]('SI')[_0x32b2d8(0xd8)])||0x0,_0x4aa657=parseInt(document['getElementById'](_0x32b2d8(0x12e))['value'])||0x0,_0x5a9ca2=parseInt(document[_0x32b2d8(0xa2)]('V')[_0x32b2d8(0xd8)])||0x0;document[_0x32b2d8(0xa2)]('SF')[_0x32b2d8(0xd8)]=_0x43b2aa+_0x4aa657-_0x5a9ca2;}function updatePV(){const _0x21713e=_0x217af1,_0x4ea816=document[_0x21713e(0xa2)](_0x21713e(0xe4))[_0x21713e(0xd8)],_0x5247bb=ticketCategories[_0x4ea816]?.[_0x21713e(0x92)][0x0];document[_0x21713e(0xa2)]('PV')[_0x21713e(0xd8)]=_0x5247bb||0x0;}salesForm[_0x217af1(0xc2)](_0x217af1(0xa7),function(_0x361c89){const _0x18cec5=_0x217af1;_0x361c89[_0x18cec5(0x124)]();const _0x566f11={'dateTime':document[_0x18cec5(0xa2)](_0x18cec5(0x8b))[_0x18cec5(0xd8)],'product':document[_0x18cec5(0xa2)]('product')[_0x18cec5(0xd8)],'SI':parseInt(document['getElementById']('SI')[_0x18cec5(0xd8)])||0x0,'APP':parseInt(document[_0x18cec5(0xa2)]('APP')[_0x18cec5(0xd8)])||0x0,'V':parseInt(document[_0x18cec5(0xa2)]('V')[_0x18cec5(0xd8)])||0x0,'SF':parseInt(document[_0x18cec5(0xa2)]('SF')[_0x18cec5(0xd8)])||0x0,'PV':parseFloat(document[_0x18cec5(0xa2)]('PV')[_0x18cec5(0xd8)])||0x0};database['ref'](_0x18cec5(0xcf)+currentUser)[_0x18cec5(0x127)](_0x566f11)[_0x18cec5(0xeb)](()=>{const _0x393d89=_0x18cec5;updateTable(),updateStockTables(),updateAnalysis(),salesForm['reset'](),document[_0x393d89(0xa2)](_0x393d89(0x8b))['value']=new Date()[_0x393d89(0xfb)]()[_0x393d89(0xde)](0x0,0x10);})[_0x18cec5(0xad)](_0x536d71=>{const _0x4527f4=_0x18cec5;console[_0x4527f4(0x11a)](_0x4527f4(0x9c),_0x536d71),alert(_0x4527f4(0xb8));});});function updateTable(){const _0x31b896=_0x217af1,_0x148567=salesTable[_0x31b896(0x125)](_0x31b896(0x138));_0x148567[_0x31b896(0xed)]='',database[_0x31b896(0xbe)](_0x31b896(0xcf)+currentUser)[_0x31b896(0x10f)](_0x31b896(0xd8))[_0x31b896(0xeb)](_0x5e28e9=>{const _0x337401=_0x31b896;salesData=[],_0x5e28e9[_0x337401(0x136)](_0x2f88dd=>{const _0x4a4a4c=_0x337401,_0x114fba=_0x2f88dd[_0x4a4a4c(0xb6)]();_0x114fba[_0x4a4a4c(0xa9)]=(_0x114fba['V']*_0x114fba['PV'])['toFixed'](0x2),salesData[_0x4a4a4c(0x127)](_0x114fba);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function _0x349a(_0xd6450d,_0x21ff09){const _0x18be46=_0x18be();return _0x349a=function(_0x349abc,_0x4a09d7){_0x349abc=_0x349abc-0x89;let _0x10ca95=_0x18be46[_0x349abc];return _0x10ca95;},_0x349a(_0xd6450d,_0x21ff09);}function updateStockTables(){const _0x47b995=_0x217af1,_0x4fc81f=document[_0x47b995(0xa2)]('stockTableGlobal');_0x4fc81f[_0x47b995(0x125)]('tbody')[_0x47b995(0xed)]='',database[_0x47b995(0xbe)](_0x47b995(0xcf)+currentUser)[_0x47b995(0x10f)](_0x47b995(0xd8))['then'](_0x6d3c14=>{const _0x325950=_0x47b995,_0xfdf0bb={};_0x6d3c14[_0x325950(0x136)](_0x12e50e=>{const _0x27ff69=_0x325950,_0x37d579=_0x12e50e['val']();(!_0xfdf0bb[_0x37d579['product']]||new Date(_0x37d579['dateTime'])>new Date(_0xfdf0bb[_0x37d579['product']][_0x27ff69(0x8b)]))&&(_0xfdf0bb[_0x37d579[_0x27ff69(0xe4)]]=_0x37d579);}),Object['values'](_0xfdf0bb)['forEach'](_0x2732aa=>{const _0x20f7e=_0x325950,_0x3d69be=_0x4fc81f[_0x20f7e(0x125)]('tbody')[_0x20f7e(0xbd)]();_0x3d69be[_0x20f7e(0xfc)](0x0)['textContent']=_0x2732aa[_0x20f7e(0xe4)],_0x3d69be['insertCell'](0x1)[_0x20f7e(0x12b)]=_0x2732aa['SF'],_0x3d69be[_0x20f7e(0xfc)](0x2)['textContent']=new Date(_0x2732aa[_0x20f7e(0x8b)])[_0x20f7e(0x115)]();}),setupSort(_0x4fc81f);});}function exportToExcel(){const _0xe8f2af=_0x217af1,_0x8d91ed=XLSX['utils'][_0xe8f2af(0xe0)](),_0x3ead87=XLSX[_0xe8f2af(0xb2)][_0xe8f2af(0x128)](document['getElementById'](_0xe8f2af(0x9f)));XLSX[_0xe8f2af(0xb2)][_0xe8f2af(0x108)](_0x8d91ed,_0x3ead87,_0xe8f2af(0x119)),XLSX[_0xe8f2af(0xac)](_0x8d91ed,'ventes_wifi_zone.xlsx');}document[_0x217af1(0xa2)](_0x217af1(0x12d))[_0x217af1(0xc2)](_0x217af1(0xf3),exportToExcel);function deleteEntry(_0x4221b7){const _0x41794f=_0x217af1;database[_0x41794f(0xbe)]('sales/'+currentUser+'/'+_0x4221b7)[_0x41794f(0x10f)]('value')[_0x41794f(0xeb)](_0x3e63e8=>{const _0x489025=_0x41794f,_0xcf4183=_0x3e63e8[_0x489025(0xb6)]();return database[_0x489025(0xbe)](_0x489025(0xcf)+currentUser+'/'+_0x4221b7)[_0x489025(0xd1)]()[_0x489025(0xeb)](()=>{const _0xc47e6=_0x489025;return console[_0xc47e6(0xc1)](_0xc47e6(0xe7)),updateStockAfterDeletion(_0xcf4183);});})[_0x41794f(0xeb)](()=>{return updateTable();})[_0x41794f(0xeb)](()=>{updateStockTables(),updateAnalysis();})[_0x41794f(0xad)](_0x445c18=>{console['error']('Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrÃ©e:',_0x445c18);});}function updateStockAfterDeletion(_0x30ba20){const _0x1c0b65=_0x217af1;return database['ref'](_0x1c0b65(0xcf)+currentUser)[_0x1c0b65(0xc6)](_0x1c0b65(0x8b))['endAt'](_0x30ba20[_0x1c0b65(0x8b)])['limitToLast'](0x2)[_0x1c0b65(0x10f)]('value')['then'](_0x10c40e=>{const _0x59410c=_0x1c0b65;let _0x5ac6b4=[];_0x10c40e[_0x59410c(0x136)](_0xc8ee3d=>{const _0x4c4cab=_0x59410c;_0x5ac6b4[_0x4c4cab(0x127)]({'key':_0xc8ee3d['key'],..._0xc8ee3d[_0x4c4cab(0xb6)]()});}),_0x5ac6b4['sort']((_0x3724e3,_0x4a9a4c)=>new Date(_0x4a9a4c[_0x59410c(0x8b)])-new Date(_0x3724e3[_0x59410c(0x8b)]));if(_0x5ac6b4['length']>0x1&&_0x5ac6b4[0x0]['key']!==_0x30ba20['key']){const _0x426954=_0x5ac6b4[0x1],_0x3a5ff4=_0x426954['SF']+_0x30ba20['V']-_0x30ba20['APP'];return database[_0x59410c(0xbe)](_0x59410c(0xcf)+currentUser+'/'+_0x426954[_0x59410c(0xa5)])[_0x59410c(0x109)]({'SF':_0x3a5ff4});}return Promise['resolve']();});}function updateTable(){const _0x5d8cb5=_0x217af1;return database[_0x5d8cb5(0xbe)](_0x5d8cb5(0xcf)+currentUser)[_0x5d8cb5(0x10f)](_0x5d8cb5(0xd8))[_0x5d8cb5(0xeb)](_0x1632b6=>{salesData=[],_0x1632b6['forEach'](_0x7db465=>{const _0x1a0165=_0x349a,_0x512a47=_0x7db465[_0x1a0165(0xb6)]();_0x512a47[_0x1a0165(0xa5)]=_0x7db465['key'],_0x512a47['total']=(_0x512a47['V']*_0x512a47['PV'])[_0x1a0165(0xb5)](0x2),salesData[_0x1a0165(0x127)](_0x512a47);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x27048b){const _0x30ea40=_0x217af1,_0x4f3dc0=salesTable[_0x30ea40(0x125)](_0x30ea40(0x138));_0x4f3dc0['innerHTML']='',_0x27048b[_0x30ea40(0x136)](_0x36bbfe=>{const _0x11d0a5=_0x30ea40,_0x3310d6=_0x4f3dc0['insertRow']();_0x3310d6[_0x11d0a5(0xf5)][_0x11d0a5(0xa5)]=_0x36bbfe[_0x11d0a5(0xa5)],_0x3310d6[_0x11d0a5(0xfc)](0x0)[_0x11d0a5(0x12b)]=new Date(_0x36bbfe[_0x11d0a5(0x8b)])[_0x11d0a5(0x115)](),_0x3310d6['insertCell'](0x1)[_0x11d0a5(0x12b)]=_0x36bbfe[_0x11d0a5(0xe4)],_0x3310d6[_0x11d0a5(0xfc)](0x2)[_0x11d0a5(0x12b)]=_0x36bbfe['SI'],_0x3310d6[_0x11d0a5(0xfc)](0x3)[_0x11d0a5(0x12b)]=_0x36bbfe[_0x11d0a5(0x12e)],_0x3310d6['insertCell'](0x4)['textContent']=_0x36bbfe['V'],_0x3310d6['insertCell'](0x5)[_0x11d0a5(0x12b)]=_0x36bbfe['SF'],_0x3310d6[_0x11d0a5(0xfc)](0x6)[_0x11d0a5(0x12b)]=_0x36bbfe['PV'],_0x3310d6[_0x11d0a5(0xfc)](0x7)['textContent']=_0x36bbfe[_0x11d0a5(0xa9)];}),addDeleteIcons();}function addDeleteIcons(){const _0x7b2ddc=_0x217af1,_0x434a19=salesTable[_0x7b2ddc(0xab)]('tbody\x20tr');_0x434a19[_0x7b2ddc(0x136)](_0x925838=>{const _0x5ed645=_0x7b2ddc,_0x4c5601=document['createElement']('span');_0x4c5601[_0x5ed645(0xed)]='â',_0x4c5601[_0x5ed645(0xdb)]=_0x5ed645(0xe8),_0x4c5601[_0x5ed645(0xd2)]=_0x3c69c9=>{const _0x5d73d7=_0x5ed645;_0x3c69c9['stopPropagation'](),showConfirmDialog(_0x925838['dataset'][_0x5d73d7(0xa5)]);},_0x925838[_0x5ed645(0x125)]('td:first-child')[_0x5ed645(0xe6)](_0x4c5601);});}function showConfirmDialog(_0x21fd25){const _0x3124af=_0x217af1,_0x41bd62=document['createElement'](_0x3124af(0x107));_0x41bd62[_0x3124af(0xdb)]='confirm-dialog',_0x41bd62[_0x3124af(0xed)]=_0x3124af(0x130),document[_0x3124af(0xc3)][_0x3124af(0xe6)](_0x41bd62),document[_0x3124af(0xa2)](_0x3124af(0x93))[_0x3124af(0xd2)]=()=>{const _0x3b9f06=_0x3124af;deleteEntry(_0x21fd25),document[_0x3b9f06(0xc3)][_0x3b9f06(0x111)](_0x41bd62);},document[_0x3124af(0xa2)](_0x3124af(0x129))[_0x3124af(0xd2)]=()=>{const _0xe3b409=_0x3124af;document[_0xe3b409(0xc3)][_0xe3b409(0x111)](_0x41bd62);};}function setupSearch(){const _0x3f57f3=_0x217af1,_0x1f697c=document[_0x3f57f3(0xab)](_0x3f57f3(0x118));_0x1f697c[_0x3f57f3(0x136)](_0x578b22=>{const _0x480569=_0x3f57f3;_0x578b22[_0x480569(0xc2)](_0x480569(0x91),()=>{const _0x1a096c=salesData['filter'](_0x4cd31a=>{const _0x986075=_0x349a;return Object[_0x986075(0x135)](_0x4cd31a)[_0x986075(0xf6)](_0x345466=>{const _0x33a960=_0x986075,_0x11fb9f=document[_0x33a960(0xa2)]('search'+(_0x345466[_0x33a960(0xd6)](0x0)[_0x33a960(0xcd)]()+_0x345466[_0x33a960(0xde)](0x1)))?.[_0x33a960(0xd8)][_0x33a960(0xe3)]()||'';return _0x4cd31a[_0x345466]['toString']()['toLowerCase']()[_0x33a960(0x101)](_0x11fb9f);});});renderTable(_0x1a096c),updateAnalysis(_0x1a096c);});});}function setupSort(_0x365b62){const _0x229626=_0x217af1,_0x145787=_0x365b62[_0x229626(0xab)](_0x229626(0x137));_0x145787[_0x229626(0x136)](_0x39bdb9=>{const _0xed806a=_0x229626;_0x39bdb9[_0xed806a(0xc2)](_0xed806a(0xf3),()=>{const _0x46b107=_0xed806a,_0x76c84a=_0x39bdb9['dataset'][_0x46b107(0x8a)],_0x441cb2=_0x365b62['id']==='salesTable'?salesData:stockData;_0x441cb2[_0x46b107(0x8a)]((_0x9c6c4e,_0x19ba0f)=>{if(_0x9c6c4e[_0x76c84a]<_0x19ba0f[_0x76c84a])return-0x1;if(_0x9c6c4e[_0x76c84a]>_0x19ba0f[_0x76c84a])return 0x1;return 0x0;}),_0x365b62['id']===_0x46b107(0x9f)?(renderTable(_0x441cb2),updateAnalysis(_0x441cb2)):renderStockTable(_0x441cb2,_0x365b62);});});}function renderStockTable(_0x26d651,_0x153eb7){const _0x35b21f=_0x217af1,_0x1e6665=_0x153eb7[_0x35b21f(0x125)](_0x35b21f(0x138));_0x1e6665['innerHTML']='',_0x26d651[_0x35b21f(0x136)](_0x246ada=>{const _0x7aa9f3=_0x35b21f,_0x33814f=_0x1e6665[_0x7aa9f3(0xbd)]();_0x33814f[_0x7aa9f3(0xfc)](0x0)[_0x7aa9f3(0x12b)]=_0x246ada[_0x7aa9f3(0xe4)],_0x33814f[_0x7aa9f3(0xfc)](0x1)[_0x7aa9f3(0x12b)]=_0x246ada['SF'],_0x33814f[_0x7aa9f3(0xfc)](0x2)[_0x7aa9f3(0x12b)]=new Date(_0x246ada[_0x7aa9f3(0x8b)])[_0x7aa9f3(0x115)]();});}function updateAnalysis(_0x591ef0=salesData){const _0x53ee7b=_0x217af1;let _0x3d4263=0x0,_0x40b603=0x0;const _0x4a64c9={'labels':[],'sales':[],'prices':[]};_0x591ef0[_0x53ee7b(0x136)](_0x42c910=>{const _0x4177d7=_0x53ee7b;_0x3d4263+=_0x42c910['V']*_0x42c910['PV'],_0x40b603++,_0x4a64c9[_0x4177d7(0xf0)][_0x4177d7(0x127)](new Date(_0x42c910['dateTime'])['toLocaleString']()),_0x4a64c9[_0x4177d7(0x96)][_0x4177d7(0x127)](_0x42c910['V']),_0x4a64c9[_0x4177d7(0x8f)][_0x4177d7(0x127)](_0x42c910['PV']);});const _0x431847=_0x3d4263/_0x40b603||0x0;totalSalesElement[_0x53ee7b(0x12b)]='Total\x20des\x20ventes:\x20'+_0x3d4263['toFixed'](0x2)+'\x20FCFA',averageSalesElement[_0x53ee7b(0x12b)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x431847['toFixed'](0x2)+_0x53ee7b(0xcc),updateChart(_0x4a64c9),updatePeriodAnalysis(_0x591ef0);}function updateChart(_0x112252){const _0x20f964=_0x217af1,_0x7d2120=document[_0x20f964(0xa2)](_0x20f964(0x97))[_0x20f964(0xa4)]('2d');salesChart&&salesChart[_0x20f964(0xaa)](),salesChart=new Chart(_0x7d2120,{'type':_0x20f964(0x126),'data':{'labels':_0x112252[_0x20f964(0xf0)],'datasets':[{'label':_0x20f964(0x119),'data':_0x112252[_0x20f964(0x96)],'borderColor':'rgb(0,\x20255,\x20255)','tension':0.1},{'label':'Prix\x20de\x20vente','data':_0x112252[_0x20f964(0x8f)],'borderColor':_0x20f964(0x8d),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x20f964(0xf9)}},'x':{'grid':{'color':_0x20f964(0xb3)},'ticks':{'color':_0x20f964(0xf9)}}},'plugins':{'legend':{'labels':{'color':_0x20f964(0xf9)}}}}});}function updatePeriodAnalysis(_0x239575){const _0x3b1a0b=_0x217af1,_0x1e2b58=new Date(),_0x4169bd=new Date(_0x1e2b58[_0x3b1a0b(0x11e)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x1f9458=new Date(_0x1e2b58[_0x3b1a0b(0x11e)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x1f21fb=new Date(_0x1e2b58[_0x3b1a0b(0x11e)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x484552=_0x239575[_0x3b1a0b(0x11b)](_0xb1a090=>new Date(_0xb1a090[_0x3b1a0b(0x8b)])>=_0x4169bd),_0x2f9825=_0x239575[_0x3b1a0b(0x11b)](_0x27a379=>new Date(_0x27a379[_0x3b1a0b(0x8b)])>=_0x1f9458),_0x2fb109=_0x239575['filter'](_0x45b08c=>new Date(_0x45b08c[_0x3b1a0b(0x8b)])>=_0x1f21fb);updatePeriodStats(_0x484552,_0x3b1a0b(0x11f)),updatePeriodStats(_0x2f9825,_0x3b1a0b(0xb7)),updatePeriodStats(_0x2fb109,_0x3b1a0b(0xd5));}function updatePeriodStats(_0x5438bd,_0x1041f7){const _0x392316=_0x217af1,_0xf5853a=_0x5438bd[_0x392316(0x103)]((_0x20a374,_0xd99f20)=>_0x20a374+_0xd99f20['V']*_0xd99f20['PV'],0x0),_0x44fc62=_0xf5853a/_0x5438bd[_0x392316(0xca)]||0x0;document[_0x392316(0xa2)](_0x1041f7+_0x392316(0x95))[_0x392316(0x12b)]='Total\x20des\x20ventes:\x20'+_0xf5853a[_0x392316(0xb5)](0x2)+'\x20FCFA',document[_0x392316(0xa2)](_0x1041f7+_0x392316(0xe9))[_0x392316(0x12b)]=_0x392316(0x98)+_0x44fc62[_0x392316(0xb5)](0x2)+'\x20FCFA';}toggleAnalysisButton[_0x217af1(0xc2)]('click',function(){const _0x4b4418=_0x217af1;analysisSection[_0x4b4418(0x89)][_0x4b4418(0x11c)]===_0x4b4418(0x10b)||analysisSection[_0x4b4418(0x89)][_0x4b4418(0x11c)]===''?(analysisSection[_0x4b4418(0x89)]['display']='block',salesDetailsSection[_0x4b4418(0x89)][_0x4b4418(0x11c)]=_0x4b4418(0x10b),this[_0x4b4418(0x12b)]=_0x4b4418(0x8e),toggleSalesButton[_0x4b4418(0x12b)]=_0x4b4418(0x10e),updateAnalysis(salesData)):(analysisSection['style']['display']=_0x4b4418(0x10b),this[_0x4b4418(0x12b)]='Analyse\x20des\x20ventes');}),toggleSalesButton[_0x217af1(0xc2)](_0x217af1(0xf3),function(){const _0x491425=_0x217af1;salesDetailsSection[_0x491425(0x89)][_0x491425(0x11c)]===_0x491425(0x10b)||salesDetailsSection[_0x491425(0x89)]['display']===''?(salesDetailsSection[_0x491425(0x89)][_0x491425(0x11c)]=_0x491425(0x10a),analysisSection[_0x491425(0x89)]['display']=_0x491425(0x10b),this[_0x491425(0x12b)]=_0x491425(0xb1),toggleAnalysisButton[_0x491425(0x12b)]=_0x491425(0x100)):(salesDetailsSection['style'][_0x491425(0x11c)]='none',this[_0x491425(0x12b)]=_0x491425(0x10e));});const themeToggle=document[_0x217af1(0xa2)](_0x217af1(0x114)),root=document['documentElement'];let isDarkTheme=!![];function setTheme(_0x50ff57){const _0x289f97=_0x217af1;_0x50ff57?(root[_0x289f97(0x12c)][_0x289f97(0xd1)](_0x289f97(0x9b)),themeToggle[_0x289f97(0x12b)]='ð',themeToggle[_0x289f97(0xda)]('aria-label',_0x289f97(0x12f))):(root[_0x289f97(0x12c)][_0x289f97(0xb4)](_0x289f97(0x9b)),themeToggle[_0x289f97(0x12b)]='âï¸',themeToggle[_0x289f97(0xda)](_0x289f97(0xc4),_0x289f97(0xbb))),isDarkTheme=_0x50ff57,localStorage[_0x289f97(0x133)](_0x289f97(0x12a),_0x50ff57);}themeToggle['addEventListener'](_0x217af1(0xf3),()=>{setTheme(!isDarkTheme);}),document['addEventListener'](_0x217af1(0xdc),()=>{const _0x323d98=_0x217af1,_0x5d4717=localStorage['getItem']('darkTheme');_0x5d4717!==null?setTheme(_0x5d4717===_0x323d98(0xd4)):setTheme(![]);}),document[_0x217af1(0xa2)](_0x217af1(0x122))['addEventListener'](_0x217af1(0xf3),function(){const _0x4b27e5=_0x217af1,_0x363477=new Date(document[_0x4b27e5(0xa2)](_0x4b27e5(0xc5))[_0x4b27e5(0xd8)]),_0x2ba10f=new Date(document[_0x4b27e5(0xa2)](_0x4b27e5(0xce))[_0x4b27e5(0xd8)]);updateStockTables(_0x363477,_0x2ba10f);}),document[_0x217af1(0xa2)](_0x217af1(0xf2))['addEventListener'](_0x217af1(0xf3),function(){const _0xaf1e35=_0x217af1,_0x100648=new Date(document[_0xaf1e35(0xa2)](_0xaf1e35(0x104))[_0xaf1e35(0xd8)]),_0x1e2dd9=new Date(document[_0xaf1e35(0xa2)](_0xaf1e35(0x105))['value']),_0x7b4ffc=salesData[_0xaf1e35(0x11b)](_0xc1ff1=>{const _0x3a73c6=new Date(_0xc1ff1['dateTime']);return(!_0x100648||_0x3a73c6>=_0x100648)&&(!_0x1e2dd9||_0x3a73c6<=_0x1e2dd9);});renderTable(_0x7b4ffc),updateAnalysis(_0x7b4ffc);});function updateStockTables(_0x3292a1,_0x5eb597){const _0x54f06e=_0x217af1,_0x23409d=document['getElementById'](_0x54f06e(0x10d));_0x23409d[_0x54f06e(0x125)]('tbody')[_0x54f06e(0xed)]='',database['ref'](_0x54f06e(0xcf)+currentUser)['once'](_0x54f06e(0xd8))[_0x54f06e(0xeb)](_0x115681=>{const _0x27ff2b=_0x54f06e,_0x1ed2eb={};_0x115681[_0x27ff2b(0x136)](_0x296b12=>{const _0x108881=_0x27ff2b,_0x834e40=_0x296b12[_0x108881(0xb6)](),_0x54fac4=new Date(_0x834e40['dateTime']);(!_0x3292a1||_0x54fac4>=_0x3292a1)&&(!_0x5eb597||_0x54fac4<=_0x5eb597)&&((!_0x1ed2eb[_0x834e40[_0x108881(0xe4)]]||_0x54fac4>new Date(_0x1ed2eb[_0x834e40[_0x108881(0xe4)]]['dateTime']))&&(_0x1ed2eb[_0x834e40['product']]=_0x834e40));}),Object['values'](_0x1ed2eb)[_0x27ff2b(0x136)](_0x38d56e=>{const _0x6e7d6a=_0x27ff2b,_0x3fb1fb=_0x23409d[_0x6e7d6a(0x125)](_0x6e7d6a(0x138))[_0x6e7d6a(0xbd)]();_0x3fb1fb[_0x6e7d6a(0xfc)](0x0)[_0x6e7d6a(0x12b)]=_0x38d56e['product'],_0x3fb1fb[_0x6e7d6a(0xfc)](0x1)['textContent']=_0x38d56e['SF'],_0x3fb1fb[_0x6e7d6a(0xfc)](0x2)[_0x6e7d6a(0x12b)]=new Date(_0x38d56e[_0x6e7d6a(0x8b)])[_0x6e7d6a(0x115)]();}),setupSort(_0x23409d);});}function _0x18be(){const _0x4d958d=['signupPassword','length','loginFromSignup','\x20FCFA','toUpperCase','stockEndDate','sales/','Erreur\x20lors\x20de\x20la\x20crÃ©ation\x20du\x20compte','remove','onclick','userInfo','true','threeMonth','charAt','59700NXtZvI','value','320nogVxy','setAttribute','className','DOMContentLoaded','6Xljvgk','slice','Ce\x20nom\x20d\x27utilisateur\x20est\x20dÃ©jÃ \x20utilisÃ©.','book_new','signupForm','analysisSection','toLowerCase','product','loginForm','appendChild','EntrÃ©e\x20supprimÃ©e\x20avec\x20succÃ¨s','delete-icon','AverageSales','signupUsername','then','endDate','innerHTML','set','admin/subscription','labels','2956uVojbF','filterSalesDates','click','6pJTmWw','dataset','every','salesForm','equalTo','rgb(0,\x20255,\x20255)','exists','toISOString','insertCell','users/','dashboardContainer','option','Analyse\x20des\x20ventes','includes','3496430rfHUBT','reduce','salesStartDate','salesEndDate','location','div','book_append_sheet','update','block','none','164708WUvKCV','stockTableGlobal','DÃ©tail\x20des\x20ventes','once','signupButton','removeChild','espoirplus-d68c2','toggleAnalysisButton','theme-toggle','toLocaleString','values','3824048APdFoI','#searchInputs\x20input','Ventes','error','filter','display','Error\x20creating\x20user:','getTime','week','getItem','671203292972','filterStockDates','G-BNCZW7CZ4F','preventDefault','querySelector','line','push','table_to_sheet','cancelDelete','darkTheme','textContent','classList','exportExcel','APP','Activer\x20le\x20mode\x20clair','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Ãtes-vous\x20sÃ»r\x20de\x20vouloir\x20supprimer\x20cette\x20entrÃ©e\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','initializeApp','Inscription\x20rÃ©ussie\x20!\x20Connectez-vous.','setItem','800484goFUis','keys','forEach','th[data-sort]','tbody','88tLWFyz','style','sort','dateTime','totalSales','rgb(255,\x2099,\x20132)','Masquer\x20l\x27analyse\x20des\x20ventes','prices','status','input','prix','confirmDelete','password','TotalSales','sales','salesChart','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','espoirplus-d68c2.firebaseapp.com','AIzaSyCLehOgdz90jvaMrq7oZxx1sxY5WEZI7Oo','light-theme','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrÃ©e\x20:','href','subscriptionRequiredModal','salesTable','Erreur\x20lors\x20de\x20la\x20vÃ©rification\x20de\x20l\x27abonnement\x20:','username','getElementById','<option\x20value=\x22\x22>SÃ©lectionner\x20un\x20produit</option>','getContext','key','https://espoirplus-d68c2-default-rtdb.firebaseio.com','submit','active','total','destroy','querySelectorAll','writeFile','catch','63bRSUrD','888223aPSEyb','salesDetailsSection','Masquer\x20le\x20dÃ©tail\x20des\x20ventes','utils','rgba(255,\x20255,\x20255,\x200.1)','add','toFixed','val','month','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrÃ©e.','averageSales','loginContainer','Activer\x20le\x20mode\x20sombre','index.html','insertRow','ref','createElement','Mot\x20de\x20passe\x20incorrect','log','addEventListener','body','aria-label','stockStartDate','orderByChild','\x20FCFA)','limitToLast'];_0x18be=function(){return _0x4d958d;};return _0x18be();}function showSubscriptionRequiredModal(){const _0x2336e9=_0x217af1;document[_0x2336e9(0xa2)](_0x2336e9(0x9e))[_0x2336e9(0x89)][_0x2336e9(0x11c)]='flex';}function hideSubscriptionRequiredModal(){const _0x1d9e81=_0x217af1;document[_0x1d9e81(0xa2)]('subscriptionRequiredModal')['style'][_0x1d9e81(0x11c)]='none';}function redirectToSubscription(){const _0x4efce5=_0x217af1;window[_0x4efce5(0x106)][_0x4efce5(0x9d)]=_0x4efce5(0xbc);}async function checkSubscriptionStatus(){const _0x39e8ce=_0x217af1;try{const _0x528ef8=await adminRef[_0x39e8ce(0x10f)](_0x39e8ce(0xd8)),_0x211b82=_0x528ef8[_0x39e8ce(0xb6)](),_0x4aec6a=new Date();if(_0x211b82&&_0x211b82[_0x39e8ce(0x90)]===_0x39e8ce(0xa8)){const _0x5f19c2=new Date(_0x211b82[_0x39e8ce(0xec)]);return _0x5f19c2>=_0x4aec6a?!![]:(await adminRef[_0x39e8ce(0x109)]({'status':'expired'}),![]);}else return![];}catch(_0x25012c){console['error'](_0x39e8ce(0xa0),_0x25012c);throw _0x25012c;}}updateTable(),updateStockTables(),analysisSection[_0x217af1(0x89)][_0x217af1(0x11c)]='none',salesDetailsSection[_0x217af1(0x89)][_0x217af1(0x11c)]='none',updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x217af1(0x120)](_0x217af1(0x12a));savedTheme!==null&&setTheme(savedTheme===_0x217af1(0xd4));