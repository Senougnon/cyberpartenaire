const _0x4be034=_0x54fd;(function(_0x31ce8f,_0x5c5916){const _0x36b3d3=_0x54fd,_0x34d790=_0x31ce8f();while(!![]){try{const _0x2be610=-parseInt(_0x36b3d3(0x22d))/0x1*(parseInt(_0x36b3d3(0x24a))/0x2)+-parseInt(_0x36b3d3(0x1ce))/0x3*(-parseInt(_0x36b3d3(0x1c2))/0x4)+-parseInt(_0x36b3d3(0x212))/0x5+parseInt(_0x36b3d3(0x1a7))/0x6+-parseInt(_0x36b3d3(0x1e9))/0x7*(parseInt(_0x36b3d3(0x1c6))/0x8)+-parseInt(_0x36b3d3(0x1b0))/0x9+parseInt(_0x36b3d3(0x1db))/0xa*(parseInt(_0x36b3d3(0x249))/0xb);if(_0x2be610===_0x5c5916)break;else _0x34d790['push'](_0x34d790['shift']());}catch(_0x3b45e0){_0x34d790['push'](_0x34d790['shift']());}}}(_0x55cd,0x20f3a));const firebaseConfig={'apiKey':_0x4be034(0x214),'authDomain':_0x4be034(0x1c4),'databaseURL':_0x4be034(0x1bc),'projectId':'abcwifi','storageBucket':_0x4be034(0x21b),'messagingSenderId':'1018273286521','appId':_0x4be034(0x1d5),'measurementId':_0x4be034(0x1fa)};firebase['initializeApp'](firebaseConfig);const database=firebase['database'](),adminRef=database[_0x4be034(0x1ac)](_0x4be034(0x1be)),loginForm=document[_0x4be034(0x232)](_0x4be034(0x1f0)),signupForm=document[_0x4be034(0x232)]('signupForm'),loginContainer=document[_0x4be034(0x232)]('loginContainer'),signupContainer=document[_0x4be034(0x232)](_0x4be034(0x222)),dashboardContainer=document['getElementById'](_0x4be034(0x1e1)),salesForm=document[_0x4be034(0x232)](_0x4be034(0x22c)),salesTable=document['getElementById'](_0x4be034(0x205)),totalSalesElement=document[_0x4be034(0x232)](_0x4be034(0x1f6)),averageSalesElement=document[_0x4be034(0x232)](_0x4be034(0x1ed)),userInfoElement=document[_0x4be034(0x232)]('userInfo'),toggleAnalysisButton=document[_0x4be034(0x232)]('toggleAnalysisButton'),toggleSalesButton=document[_0x4be034(0x232)](_0x4be034(0x1bd)),analysisSection=document['getElementById'](_0x4be034(0x231)),salesDetailsSection=document[_0x4be034(0x232)](_0x4be034(0x241)),signupButton=document[_0x4be034(0x232)](_0x4be034(0x238)),loginFromSignup=document['getElementById'](_0x4be034(0x1ab)),productSelect=document[_0x4be034(0x232)]('product'),stockTableGlobal=document[_0x4be034(0x232)](_0x4be034(0x1ca));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x4be034(0x232)](_0x4be034(0x1f4))[_0x4be034(0x223)]=new Date()[_0x4be034(0x239)]()[_0x4be034(0x1ec)](0x0,0x10);function fetchTicketCategories(){const _0x152f9c=_0x4be034;database[_0x152f9c(0x1ac)](_0x152f9c(0x1ee))[_0x152f9c(0x247)](_0x152f9c(0x223))[_0x152f9c(0x206)](_0x27759e=>{const _0x18434e=_0x152f9c;ticketCategories=_0x27759e[_0x18434e(0x1d3)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x3bde53=_0x4be034;productSelect[_0x3bde53(0x235)]=_0x3bde53(0x23b);for(const _0x989918 in ticketCategories){const _0x40bd7e=ticketCategories[_0x989918][_0x3bde53(0x24d)][0x0],_0x4d90be=document[_0x3bde53(0x1ad)]('option');_0x4d90be['value']=_0x989918,_0x4d90be[_0x3bde53(0x1d4)]=_0x989918+'\x20('+_0x40bd7e+'\x20FCFA)',productSelect[_0x3bde53(0x21e)](_0x4d90be);}}fetchTicketCategories(),loginForm['addEventListener'](_0x4be034(0x203),function(_0x1ab216){const _0x388d00=_0x4be034;_0x1ab216[_0x388d00(0x204)]();const _0x1759cb=document['getElementById'](_0x388d00(0x23f))[_0x388d00(0x223)],_0x68078f=document['getElementById']('password')[_0x388d00(0x223)];database[_0x388d00(0x1ac)](_0x388d00(0x22a)+_0x1759cb)[_0x388d00(0x247)](_0x388d00(0x223))[_0x388d00(0x206)](_0x34ec8f=>{const _0x59c444=_0x388d00;_0x34ec8f[_0x59c444(0x23d)]()?_0x34ec8f[_0x59c444(0x1d3)]()[_0x59c444(0x225)]===_0x68078f?loginSuccess(_0x1759cb):alert(_0x59c444(0x211)):alert(_0x59c444(0x1fd));});}),signupForm[_0x4be034(0x1d6)]('submit',function(_0xa7e583){const _0x223621=_0x4be034;_0xa7e583[_0x223621(0x204)]();const _0x2eb11a=document[_0x223621(0x232)]('signupUsername')[_0x223621(0x223)],_0x311172=document[_0x223621(0x232)](_0x223621(0x20a))[_0x223621(0x223)];database['ref']('users/'+_0x2eb11a)[_0x223621(0x247)]('value')[_0x223621(0x206)](_0x5476a0=>{const _0x54c5a2=_0x223621;_0x5476a0[_0x54c5a2(0x23d)]()?alert(_0x54c5a2(0x1c8)):database[_0x54c5a2(0x1ac)]('users/'+_0x2eb11a)[_0x54c5a2(0x210)]({'password':_0x311172})['then'](()=>{const _0xe15742=_0x54c5a2;alert('Inscription\x20r√©ussie\x20!\x20Connectez-vous.'),signupContainer[_0xe15742(0x1de)][_0xe15742(0x230)]=_0xe15742(0x1e7),loginContainer[_0xe15742(0x1de)][_0xe15742(0x230)]=_0xe15742(0x228);})['catch'](_0xa2199a=>{const _0x1e2f19=_0x54c5a2;console[_0x1e2f19(0x248)](_0x1e2f19(0x1d0),_0xa2199a),alert(_0x1e2f19(0x1e4));});});}),signupButton['addEventListener'](_0x4be034(0x1ff),function(){const _0x53e864=_0x4be034;loginContainer[_0x53e864(0x1de)][_0x53e864(0x230)]=_0x53e864(0x1e7),signupContainer[_0x53e864(0x1de)][_0x53e864(0x230)]=_0x53e864(0x228);}),loginFromSignup['addEventListener'](_0x4be034(0x1ff),function(){const _0x4f0b96=_0x4be034;signupContainer[_0x4f0b96(0x1de)]['display']=_0x4f0b96(0x1e7),loginContainer[_0x4f0b96(0x1de)][_0x4f0b96(0x230)]=_0x4f0b96(0x228);});function loginSuccess(_0xded6c){const _0x4629c8=_0x4be034;currentUser=_0xded6c,loginContainer[_0x4629c8(0x1de)]['display']=_0x4629c8(0x1e7),signupContainer[_0x4629c8(0x1de)][_0x4629c8(0x230)]=_0x4629c8(0x1e7),dashboardContainer[_0x4629c8(0x1de)]['display']='block',userInfoElement[_0x4629c8(0x1d4)]='Utilisateur:\x20'+_0xded6c,checkSubscriptionStatus()[_0x4629c8(0x206)](_0x3e2648=>{_0x3e2648?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x4629c8(0x1a5)](_0x5ee15f=>{const _0x3c6a99=_0x4629c8;console[_0x3c6a99(0x248)](_0x3c6a99(0x1c0),_0x5ee15f),alert(_0x3c6a99(0x1da));});}function listenForSalesDataChanges(){const _0x696f09=_0x4be034;salesDataListener=database[_0x696f09(0x1ac)](_0x696f09(0x233)+currentUser)['on'](_0x696f09(0x223),_0x366b31=>{const _0x115a05=_0x696f09;salesData=[],_0x366b31[_0x115a05(0x1f9)](_0x2787e1=>{const _0x5e06cb=_0x115a05,_0x528530=_0x2787e1[_0x5e06cb(0x1d3)]();_0x528530[_0x5e06cb(0x200)]=_0x2787e1[_0x5e06cb(0x200)],_0x528530[_0x5e06cb(0x1f1)]=(_0x528530['V']*_0x528530['PV'])['toFixed'](0x2),salesData[_0x5e06cb(0x221)](_0x528530);}),analysisSection['style']['display']==='block'&&updateAnalysis(salesData);});}document['getElementById'](_0x4be034(0x1ea))[_0x4be034(0x1d6)](_0x4be034(0x1c1),function(){const _0x4607d7=_0x4be034,_0x5001e0=this[_0x4607d7(0x223)];database[_0x4607d7(0x1ac)](_0x4607d7(0x233)+currentUser)['orderByChild']('product')[_0x4607d7(0x227)](_0x5001e0)[_0x4607d7(0x1d2)](0x1)['once']('value')[_0x4607d7(0x206)](_0x490edf=>{const _0x5a5eab=_0x4607d7;if(_0x490edf['exists']()){const _0x163680=Object[_0x5a5eab(0x20e)](_0x490edf[_0x5a5eab(0x1d3)]())[0x0];document[_0x5a5eab(0x232)]('SI')[_0x5a5eab(0x223)]=_0x163680['SF']||0x0;}else document[_0x5a5eab(0x232)]('SI')[_0x5a5eab(0x223)]=0x0;}),updatePV();}),document[_0x4be034(0x232)]('V')[_0x4be034(0x1d6)](_0x4be034(0x1a4),updateSF),document[_0x4be034(0x232)](_0x4be034(0x246))[_0x4be034(0x1d6)](_0x4be034(0x1a4),updateSF);function updateSF(){const _0x474f7c=_0x4be034,_0x1bf740=parseInt(document[_0x474f7c(0x232)]('SI')['value'])||0x0,_0x28ebfd=parseInt(document['getElementById'](_0x474f7c(0x246))[_0x474f7c(0x223)])||0x0,_0x2e3110=parseInt(document[_0x474f7c(0x232)]('V')[_0x474f7c(0x223)])||0x0;document[_0x474f7c(0x232)]('SF')['value']=_0x1bf740+_0x28ebfd-_0x2e3110;}function updatePV(){const _0x331a25=_0x4be034,_0x9e6d32=document[_0x331a25(0x232)]('product')[_0x331a25(0x223)],_0x2dd9a2=ticketCategories[_0x9e6d32]?.[_0x331a25(0x24d)][0x0];document[_0x331a25(0x232)]('PV')[_0x331a25(0x223)]=_0x2dd9a2||0x0;}salesForm[_0x4be034(0x1d6)](_0x4be034(0x203),function(_0x2dd34d){const _0x41ef0f=_0x4be034;_0x2dd34d[_0x41ef0f(0x204)]();const _0x60d1e2={'dateTime':document[_0x41ef0f(0x232)](_0x41ef0f(0x1f4))[_0x41ef0f(0x223)],'product':document['getElementById']('product')[_0x41ef0f(0x223)],'SI':parseInt(document[_0x41ef0f(0x232)]('SI')[_0x41ef0f(0x223)])||0x0,'APP':parseInt(document[_0x41ef0f(0x232)](_0x41ef0f(0x246))[_0x41ef0f(0x223)])||0x0,'V':parseInt(document[_0x41ef0f(0x232)]('V')['value'])||0x0,'SF':parseInt(document[_0x41ef0f(0x232)]('SF')[_0x41ef0f(0x223)])||0x0,'PV':parseFloat(document[_0x41ef0f(0x232)]('PV')[_0x41ef0f(0x223)])||0x0};database[_0x41ef0f(0x1ac)](_0x41ef0f(0x233)+currentUser)[_0x41ef0f(0x221)](_0x60d1e2)[_0x41ef0f(0x206)](()=>{const _0x1574c9=_0x41ef0f;updateTable(),updateStockTables(),updateAnalysis(),salesForm['reset'](),document[_0x1574c9(0x232)](_0x1574c9(0x1f4))[_0x1574c9(0x223)]=new Date()['toISOString']()[_0x1574c9(0x1ec)](0x0,0x10);})[_0x41ef0f(0x1a5)](_0x2e600c=>{const _0x43b9b2=_0x41ef0f;console[_0x43b9b2(0x248)](_0x43b9b2(0x21d),_0x2e600c),alert(_0x43b9b2(0x20c));});});function updateTable(){const _0x2b02e4=_0x4be034,_0x36b90d=salesTable[_0x2b02e4(0x1d7)](_0x2b02e4(0x22e));_0x36b90d[_0x2b02e4(0x235)]='',database[_0x2b02e4(0x1ac)]('sales/'+currentUser)[_0x2b02e4(0x247)](_0x2b02e4(0x223))[_0x2b02e4(0x206)](_0x2d973c=>{const _0x5840f0=_0x2b02e4;salesData=[],_0x2d973c[_0x5840f0(0x1f9)](_0x184d25=>{const _0x5555fd=_0x5840f0,_0x5a728c=_0x184d25[_0x5555fd(0x1d3)]();_0x5a728c[_0x5555fd(0x1f1)]=(_0x5a728c['V']*_0x5a728c['PV'])[_0x5555fd(0x20b)](0x2),salesData[_0x5555fd(0x221)](_0x5a728c);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function _0x55cd(){const _0x299f29=['documentElement','flex','div','update','labels','D√©tail\x20des\x20ventes','toLocaleString','https://abcwifi-default-rtdb.firebaseio.com','toggleSalesButton','admin/subscription','confirmDelete','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement\x20:','change','100JqhCCK','span','abcwifi.firebaseapp.com','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>√ätes-vous\x20s√ªr\x20de\x20vouloir\x20supprimer\x20cette\x20entr√©e\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','16SrbXRQ','light-theme','Ce\x20nom\x20d\x27utilisateur\x20est\x20d√©j√†\x20utilis√©.','className','stockTableGlobal','location','every','rgba(255,\x20255,\x20255,\x200.1)','21009FdVbAH','filterSalesDates','Error\x20creating\x20user:','table_to_sheet','limitToLast','val','textContent','1:1018273286521:web:acd8d4a2a126246fa007a8','addEventListener','querySelector','#searchInputs\x20input','toLowerCase','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement.','323350zkrAnF','line','salesChart','style','resolve','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','dashboardContainer','querySelectorAll','Total\x20des\x20ventes:\x20','Erreur\x20lors\x20de\x20la\x20cr√©ation\x20du\x20compte','AverageSales','theme-toggle','none','endAt','618366TGiNun','product','status','slice','averageSales','TicketsTotal','stockEndDate','loginForm','total','subscriptionRequiredModal','prices','dateTime','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entr√©e:','totalSales','stockStartDate','getContext','forEach','G-5C9MPNW9T6','toUpperCase','filterStockDates','Utilisateur\x20introuvable','destroy','click','key','true','week','submit','preventDefault','salesTable','then','remove','filter','keys','signupPassword','toFixed','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e.','classList','values','sort','set','Mot\x20de\x20passe\x20incorrect','630005JBMEjv','salesEndDate','AIzaSyCM3XxnV3NZQuZxBl-9ZGLVofMIPm-x5ZY','utils','body','book_new','orderByChild','\x20FCFA','confirm-dialog','abcwifi.firebasestorage.app','TotalSales','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e\x20:','appendChild','dataset','index.html','push','signupContainer','value','sales','password','tbody\x20tr','equalTo','block','rgb(0,\x20255,\x20255)','users/','toString','salesForm','1aajjmy','tbody','salesStartDate','display','analysisSection','getElementById','sales/','cancelDelete','innerHTML','aria-label','Prix\x20de\x20vente','signupButton','toISOString','getItem','<option\x20value=\x22\x22>S√©lectionner\x20un\x20produit</option>','href','exists','includes','username','reduce','salesDetailsSection','insertRow','ventes_wifi_zone.xlsx','removeChild','delete-icon','APP','once','error','99MzcPcz','13448JphVhc','setAttribute','darkTheme','prix','insertCell','month','charAt','td:first-child','input','catch','exportExcel','993690Ftvxya','Masquer\x20l\x27analyse\x20des\x20ventes','Activer\x20le\x20mode\x20sombre','threeMonth','loginFromSignup','ref','createElement','Ventes','active','1686006FdMmza','onclick','writeFile','length','getTime'];_0x55cd=function(){return _0x299f29;};return _0x55cd();}function updateStockTables(){const _0x127782=_0x4be034,_0xe54ddf=document[_0x127782(0x232)](_0x127782(0x1ca));_0xe54ddf[_0x127782(0x1d7)](_0x127782(0x22e))[_0x127782(0x235)]='',database[_0x127782(0x1ac)](_0x127782(0x233)+currentUser)[_0x127782(0x247)]('value')[_0x127782(0x206)](_0x1a21ce=>{const _0x39ef9c=_0x127782,_0x46e90b={};_0x1a21ce[_0x39ef9c(0x1f9)](_0x52b144=>{const _0x4bbb42=_0x39ef9c,_0xd7ab79=_0x52b144[_0x4bbb42(0x1d3)]();(!_0x46e90b[_0xd7ab79[_0x4bbb42(0x1ea)]]||new Date(_0xd7ab79[_0x4bbb42(0x1f4)])>new Date(_0x46e90b[_0xd7ab79[_0x4bbb42(0x1ea)]][_0x4bbb42(0x1f4)]))&&(_0x46e90b[_0xd7ab79[_0x4bbb42(0x1ea)]]=_0xd7ab79);}),Object['values'](_0x46e90b)[_0x39ef9c(0x1f9)](_0x3e94e6=>{const _0x27e2bc=_0x39ef9c,_0x3f8e84=_0xe54ddf[_0x27e2bc(0x1d7)](_0x27e2bc(0x22e))[_0x27e2bc(0x242)]();_0x3f8e84[_0x27e2bc(0x24e)](0x0)[_0x27e2bc(0x1d4)]=_0x3e94e6[_0x27e2bc(0x1ea)],_0x3f8e84[_0x27e2bc(0x24e)](0x1)[_0x27e2bc(0x1d4)]=_0x3e94e6['SF'],_0x3f8e84[_0x27e2bc(0x24e)](0x2)[_0x27e2bc(0x1d4)]=new Date(_0x3e94e6[_0x27e2bc(0x1f4)])[_0x27e2bc(0x1bb)]();}),setupSort(_0xe54ddf);});}function exportToExcel(){const _0xce23fd=_0x4be034,_0x4e90f2=XLSX[_0xce23fd(0x215)][_0xce23fd(0x217)](),_0x16d08f=XLSX[_0xce23fd(0x215)][_0xce23fd(0x1d1)](document[_0xce23fd(0x232)](_0xce23fd(0x205)));XLSX[_0xce23fd(0x215)]['book_append_sheet'](_0x4e90f2,_0x16d08f,_0xce23fd(0x1ae)),XLSX[_0xce23fd(0x1b2)](_0x4e90f2,_0xce23fd(0x243));}document[_0x4be034(0x232)](_0x4be034(0x1a6))['addEventListener'](_0x4be034(0x1ff),exportToExcel);function deleteEntry(_0x8c0c68){const _0x59db3c=_0x4be034;database[_0x59db3c(0x1ac)](_0x59db3c(0x233)+currentUser+'/'+_0x8c0c68)[_0x59db3c(0x247)](_0x59db3c(0x223))[_0x59db3c(0x206)](_0x988579=>{const _0x4c2efc=_0x59db3c,_0x307ed2=_0x988579[_0x4c2efc(0x1d3)]();return database[_0x4c2efc(0x1ac)](_0x4c2efc(0x233)+currentUser+'/'+_0x8c0c68)['remove']()['then'](()=>{return console['log']('Entr√©e\x20supprim√©e\x20avec\x20succ√®s'),updateStockAfterDeletion(_0x307ed2);});})[_0x59db3c(0x206)](()=>{return updateTable();})[_0x59db3c(0x206)](()=>{updateStockTables(),updateAnalysis();})[_0x59db3c(0x1a5)](_0x544b57=>{const _0x103f2a=_0x59db3c;console[_0x103f2a(0x248)](_0x103f2a(0x1f5),_0x544b57);});}function updateStockAfterDeletion(_0x4a37b9){const _0x1f7346=_0x4be034;return database[_0x1f7346(0x1ac)](_0x1f7346(0x233)+currentUser)[_0x1f7346(0x218)](_0x1f7346(0x1f4))[_0x1f7346(0x1e8)](_0x4a37b9['dateTime'])[_0x1f7346(0x1d2)](0x2)[_0x1f7346(0x247)](_0x1f7346(0x223))['then'](_0x2836bf=>{const _0x45ee28=_0x1f7346;let _0x50a407=[];_0x2836bf[_0x45ee28(0x1f9)](_0x4a9de0=>{const _0x314bf4=_0x45ee28;_0x50a407[_0x314bf4(0x221)]({'key':_0x4a9de0['key'],..._0x4a9de0[_0x314bf4(0x1d3)]()});}),_0x50a407[_0x45ee28(0x20f)]((_0x94110b,_0x23ee98)=>new Date(_0x23ee98['dateTime'])-new Date(_0x94110b[_0x45ee28(0x1f4)]));if(_0x50a407['length']>0x1&&_0x50a407[0x0]['key']!==_0x4a37b9[_0x45ee28(0x200)]){const _0x336d7a=_0x50a407[0x1],_0x59b8a3=_0x336d7a['SF']+_0x4a37b9['V']-_0x4a37b9[_0x45ee28(0x246)];return database[_0x45ee28(0x1ac)](_0x45ee28(0x233)+currentUser+'/'+_0x336d7a[_0x45ee28(0x200)])['update']({'SF':_0x59b8a3});}return Promise[_0x45ee28(0x1df)]();});}function updateTable(){const _0x7cba0f=_0x4be034;return database[_0x7cba0f(0x1ac)]('sales/'+currentUser)[_0x7cba0f(0x247)](_0x7cba0f(0x223))[_0x7cba0f(0x206)](_0x4cd9b6=>{const _0x4b529a=_0x7cba0f;salesData=[],_0x4cd9b6[_0x4b529a(0x1f9)](_0x3f1ee7=>{const _0x424e2b=_0x4b529a,_0x5267f6=_0x3f1ee7[_0x424e2b(0x1d3)]();_0x5267f6[_0x424e2b(0x200)]=_0x3f1ee7[_0x424e2b(0x200)],_0x5267f6[_0x424e2b(0x1f1)]=(_0x5267f6['V']*_0x5267f6['PV'])[_0x424e2b(0x20b)](0x2),salesData[_0x424e2b(0x221)](_0x5267f6);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x361089){const _0xbcb73=_0x4be034,_0x3081d7=salesTable[_0xbcb73(0x1d7)](_0xbcb73(0x22e));_0x3081d7[_0xbcb73(0x235)]='',_0x361089[_0xbcb73(0x1f9)](_0x467bfa=>{const _0x31299f=_0xbcb73,_0xfa7c5e=_0x3081d7[_0x31299f(0x242)]();_0xfa7c5e[_0x31299f(0x21f)]['key']=_0x467bfa[_0x31299f(0x200)],_0xfa7c5e[_0x31299f(0x24e)](0x0)['textContent']=new Date(_0x467bfa['dateTime'])[_0x31299f(0x1bb)](),_0xfa7c5e[_0x31299f(0x24e)](0x1)[_0x31299f(0x1d4)]=_0x467bfa[_0x31299f(0x1ea)],_0xfa7c5e[_0x31299f(0x24e)](0x2)[_0x31299f(0x1d4)]=_0x467bfa['SI'],_0xfa7c5e[_0x31299f(0x24e)](0x3)['textContent']=_0x467bfa[_0x31299f(0x246)],_0xfa7c5e['insertCell'](0x4)[_0x31299f(0x1d4)]=_0x467bfa['V'],_0xfa7c5e[_0x31299f(0x24e)](0x5)[_0x31299f(0x1d4)]=_0x467bfa['SF'],_0xfa7c5e[_0x31299f(0x24e)](0x6)[_0x31299f(0x1d4)]=_0x467bfa['PV'],_0xfa7c5e['insertCell'](0x7)[_0x31299f(0x1d4)]=_0x467bfa[_0x31299f(0x1f1)];}),addDeleteIcons();}function addDeleteIcons(){const _0x2d3e92=_0x4be034,_0x17c5a2=salesTable[_0x2d3e92(0x1e2)](_0x2d3e92(0x226));_0x17c5a2[_0x2d3e92(0x1f9)](_0x21e8b0=>{const _0x482c49=_0x2d3e92,_0x466353=document[_0x482c49(0x1ad)](_0x482c49(0x1c3));_0x466353[_0x482c49(0x235)]='‚úñ',_0x466353[_0x482c49(0x1c9)]=_0x482c49(0x245),_0x466353[_0x482c49(0x1b1)]=_0xb67a61=>{const _0x503dd9=_0x482c49;_0xb67a61['stopPropagation'](),showConfirmDialog(_0x21e8b0[_0x503dd9(0x21f)]['key']);},_0x21e8b0[_0x482c49(0x1d7)](_0x482c49(0x1a3))[_0x482c49(0x21e)](_0x466353);});}function showConfirmDialog(_0x41e146){const _0x1d4d00=_0x4be034,_0x3cf7fb=document['createElement'](_0x1d4d00(0x1b7));_0x3cf7fb['className']=_0x1d4d00(0x21a),_0x3cf7fb[_0x1d4d00(0x235)]=_0x1d4d00(0x1c5),document[_0x1d4d00(0x216)][_0x1d4d00(0x21e)](_0x3cf7fb),document['getElementById'](_0x1d4d00(0x1bf))[_0x1d4d00(0x1b1)]=()=>{const _0xd5abcf=_0x1d4d00;deleteEntry(_0x41e146),document['body'][_0xd5abcf(0x244)](_0x3cf7fb);},document['getElementById'](_0x1d4d00(0x234))[_0x1d4d00(0x1b1)]=()=>{const _0x5ab1cb=_0x1d4d00;document[_0x5ab1cb(0x216)][_0x5ab1cb(0x244)](_0x3cf7fb);};}function setupSearch(){const _0xdc64b6=_0x4be034,_0x21affb=document[_0xdc64b6(0x1e2)](_0xdc64b6(0x1d8));_0x21affb[_0xdc64b6(0x1f9)](_0xa77ec3=>{const _0x1edc36=_0xdc64b6;_0xa77ec3[_0x1edc36(0x1d6)](_0x1edc36(0x1a4),()=>{const _0x895cbb=_0x1edc36,_0x13488f=salesData[_0x895cbb(0x208)](_0xfd0d4=>{const _0x235676=_0x895cbb;return Object[_0x235676(0x209)](_0xfd0d4)[_0x235676(0x1cc)](_0x5316c0=>{const _0x7b1c73=_0x235676,_0x49c2b5=document[_0x7b1c73(0x232)]('search'+(_0x5316c0[_0x7b1c73(0x250)](0x0)[_0x7b1c73(0x1fb)]()+_0x5316c0['slice'](0x1)))?.[_0x7b1c73(0x223)][_0x7b1c73(0x1d9)]()||'';return _0xfd0d4[_0x5316c0][_0x7b1c73(0x22b)]()[_0x7b1c73(0x1d9)]()[_0x7b1c73(0x23e)](_0x49c2b5);});});renderTable(_0x13488f),updateAnalysis(_0x13488f);});});}function setupSort(_0x57b1f2){const _0xe95de5=_0x4be034,_0x37ba8a=_0x57b1f2[_0xe95de5(0x1e2)]('th[data-sort]');_0x37ba8a[_0xe95de5(0x1f9)](_0x2dea86=>{const _0x81354d=_0xe95de5;_0x2dea86['addEventListener'](_0x81354d(0x1ff),()=>{const _0x1cd65a=_0x81354d,_0x2bad0d=_0x2dea86['dataset'][_0x1cd65a(0x20f)],_0x23f406=_0x57b1f2['id']===_0x1cd65a(0x205)?salesData:stockData;_0x23f406[_0x1cd65a(0x20f)]((_0x4e9c19,_0x393eb3)=>{if(_0x4e9c19[_0x2bad0d]<_0x393eb3[_0x2bad0d])return-0x1;if(_0x4e9c19[_0x2bad0d]>_0x393eb3[_0x2bad0d])return 0x1;return 0x0;}),_0x57b1f2['id']===_0x1cd65a(0x205)?(renderTable(_0x23f406),updateAnalysis(_0x23f406)):renderStockTable(_0x23f406,_0x57b1f2);});});}function _0x54fd(_0x544422,_0x1807c0){const _0x55cd44=_0x55cd();return _0x54fd=function(_0x54fd21,_0x218537){_0x54fd21=_0x54fd21-0x1a3;let _0x4ae2c2=_0x55cd44[_0x54fd21];return _0x4ae2c2;},_0x54fd(_0x544422,_0x1807c0);}function renderStockTable(_0x4154e2,_0x26102c){const _0x4bea77=_0x4be034,_0x347403=_0x26102c[_0x4bea77(0x1d7)](_0x4bea77(0x22e));_0x347403['innerHTML']='',_0x4154e2['forEach'](_0x1d5f0b=>{const _0x58434e=_0x4bea77,_0x262f60=_0x347403[_0x58434e(0x242)]();_0x262f60[_0x58434e(0x24e)](0x0)['textContent']=_0x1d5f0b['product'],_0x262f60['insertCell'](0x1)[_0x58434e(0x1d4)]=_0x1d5f0b['SF'],_0x262f60[_0x58434e(0x24e)](0x2)[_0x58434e(0x1d4)]=new Date(_0x1d5f0b['dateTime'])[_0x58434e(0x1bb)]();});}function updateAnalysis(_0x167016=salesData){const _0x400e37=_0x4be034;let _0x2fbd14=0x0,_0x524ecd=0x0;const _0x4b568f={'labels':[],'sales':[],'prices':[]};_0x167016['forEach'](_0x49d0ca=>{const _0x36801d=_0x54fd;_0x2fbd14+=_0x49d0ca['V']*_0x49d0ca['PV'],_0x524ecd++,_0x4b568f[_0x36801d(0x1b9)][_0x36801d(0x221)](new Date(_0x49d0ca['dateTime'])[_0x36801d(0x1bb)]()),_0x4b568f[_0x36801d(0x224)][_0x36801d(0x221)](_0x49d0ca['V']),_0x4b568f[_0x36801d(0x1f3)][_0x36801d(0x221)](_0x49d0ca['PV']);});const _0x2e9f08=_0x2fbd14/_0x524ecd||0x0;totalSalesElement[_0x400e37(0x1d4)]=_0x400e37(0x1e3)+_0x2fbd14[_0x400e37(0x20b)](0x2)+_0x400e37(0x219),averageSalesElement[_0x400e37(0x1d4)]=_0x400e37(0x1e0)+_0x2e9f08[_0x400e37(0x20b)](0x2)+_0x400e37(0x219),updateChart(_0x4b568f),updatePeriodAnalysis(_0x167016);}function updateChart(_0x52d194){const _0x13a745=_0x4be034,_0x21c03e=document[_0x13a745(0x232)](_0x13a745(0x1dd))[_0x13a745(0x1f8)]('2d');salesChart&&salesChart[_0x13a745(0x1fe)](),salesChart=new Chart(_0x21c03e,{'type':_0x13a745(0x1dc),'data':{'labels':_0x52d194[_0x13a745(0x1b9)],'datasets':[{'label':_0x13a745(0x1ae),'data':_0x52d194[_0x13a745(0x224)],'borderColor':_0x13a745(0x229),'tension':0.1},{'label':_0x13a745(0x237),'data':_0x52d194[_0x13a745(0x1f3)],'borderColor':'rgb(255,\x2099,\x20132)','tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':_0x13a745(0x1cd)},'ticks':{'color':'rgb(0,\x20255,\x20255)'}},'x':{'grid':{'color':_0x13a745(0x1cd)},'ticks':{'color':_0x13a745(0x229)}}},'plugins':{'legend':{'labels':{'color':_0x13a745(0x229)}}}}});}function updatePeriodAnalysis(_0x5338f8){const _0x63a8a7=_0x4be034,_0x241405=new Date(),_0x146c1a=new Date(_0x241405[_0x63a8a7(0x1b4)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x4c74c1=new Date(_0x241405[_0x63a8a7(0x1b4)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x353858=new Date(_0x241405['getTime']()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x53e37a=_0x5338f8[_0x63a8a7(0x208)](_0xf5fdf7=>new Date(_0xf5fdf7['dateTime'])>=_0x146c1a),_0x39f092=_0x5338f8['filter'](_0x4b2ac6=>new Date(_0x4b2ac6[_0x63a8a7(0x1f4)])>=_0x4c74c1),_0x54aa5d=_0x5338f8[_0x63a8a7(0x208)](_0xc56708=>new Date(_0xc56708[_0x63a8a7(0x1f4)])>=_0x353858);updatePeriodStats(_0x53e37a,_0x63a8a7(0x202)),updatePeriodStats(_0x39f092,_0x63a8a7(0x24f)),updatePeriodStats(_0x54aa5d,_0x63a8a7(0x1aa));}function updatePeriodStats(_0xc96b76,_0x459ea0){const _0x5c6dd2=_0x4be034,_0x59e088=_0xc96b76[_0x5c6dd2(0x240)]((_0x212cc2,_0x12de82)=>_0x212cc2+_0x12de82['V']*_0x12de82['PV'],0x0),_0x19353b=_0x59e088/_0xc96b76[_0x5c6dd2(0x1b3)]||0x0;document[_0x5c6dd2(0x232)](_0x459ea0+_0x5c6dd2(0x21c))[_0x5c6dd2(0x1d4)]=_0x5c6dd2(0x1e3)+_0x59e088[_0x5c6dd2(0x20b)](0x2)+'\x20FCFA',document['getElementById'](_0x459ea0+_0x5c6dd2(0x1e5))[_0x5c6dd2(0x1d4)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x19353b[_0x5c6dd2(0x20b)](0x2)+_0x5c6dd2(0x219);}toggleAnalysisButton[_0x4be034(0x1d6)]('click',function(){const _0x1b3728=_0x4be034;analysisSection[_0x1b3728(0x1de)][_0x1b3728(0x230)]===_0x1b3728(0x1e7)||analysisSection[_0x1b3728(0x1de)][_0x1b3728(0x230)]===''?(analysisSection[_0x1b3728(0x1de)]['display']='block',salesDetailsSection[_0x1b3728(0x1de)][_0x1b3728(0x230)]=_0x1b3728(0x1e7),this['textContent']=_0x1b3728(0x1a8),toggleSalesButton[_0x1b3728(0x1d4)]=_0x1b3728(0x1ba),updateAnalysis(salesData)):(analysisSection[_0x1b3728(0x1de)][_0x1b3728(0x230)]='none',this['textContent']='Analyse\x20des\x20ventes');}),toggleSalesButton[_0x4be034(0x1d6)]('click',function(){const _0x5d1a3b=_0x4be034;salesDetailsSection[_0x5d1a3b(0x1de)][_0x5d1a3b(0x230)]==='none'||salesDetailsSection[_0x5d1a3b(0x1de)][_0x5d1a3b(0x230)]===''?(salesDetailsSection[_0x5d1a3b(0x1de)]['display']='block',analysisSection['style'][_0x5d1a3b(0x230)]=_0x5d1a3b(0x1e7),this[_0x5d1a3b(0x1d4)]='Masquer\x20le\x20d√©tail\x20des\x20ventes',toggleAnalysisButton[_0x5d1a3b(0x1d4)]='Analyse\x20des\x20ventes'):(salesDetailsSection[_0x5d1a3b(0x1de)][_0x5d1a3b(0x230)]='none',this[_0x5d1a3b(0x1d4)]=_0x5d1a3b(0x1ba));});const themeToggle=document['getElementById'](_0x4be034(0x1e6)),root=document[_0x4be034(0x1b5)];let isDarkTheme=!![];function setTheme(_0x39875f){const _0x532380=_0x4be034;_0x39875f?(root[_0x532380(0x20d)][_0x532380(0x207)](_0x532380(0x1c7)),themeToggle[_0x532380(0x1d4)]='üåô',themeToggle[_0x532380(0x24b)](_0x532380(0x236),'Activer\x20le\x20mode\x20clair')):(root[_0x532380(0x20d)]['add'](_0x532380(0x1c7)),themeToggle[_0x532380(0x1d4)]='‚òÄÔ∏è',themeToggle[_0x532380(0x24b)]('aria-label',_0x532380(0x1a9))),isDarkTheme=_0x39875f,localStorage['setItem'](_0x532380(0x24c),_0x39875f);}themeToggle[_0x4be034(0x1d6)]('click',()=>{setTheme(!isDarkTheme);}),document[_0x4be034(0x1d6)]('DOMContentLoaded',()=>{const _0x3d3f41=_0x4be034,_0x5b7ebf=localStorage[_0x3d3f41(0x23a)]('darkTheme');_0x5b7ebf!==null?setTheme(_0x5b7ebf===_0x3d3f41(0x201)):setTheme(![]);}),document[_0x4be034(0x232)](_0x4be034(0x1fc))[_0x4be034(0x1d6)](_0x4be034(0x1ff),function(){const _0x3b46db=_0x4be034,_0x489411=new Date(document['getElementById'](_0x3b46db(0x1f7))['value']),_0x3c5377=new Date(document[_0x3b46db(0x232)](_0x3b46db(0x1ef))['value']);updateStockTables(_0x489411,_0x3c5377);}),document[_0x4be034(0x232)](_0x4be034(0x1cf))[_0x4be034(0x1d6)](_0x4be034(0x1ff),function(){const _0x2662b8=_0x4be034,_0x31d533=new Date(document[_0x2662b8(0x232)](_0x2662b8(0x22f))[_0x2662b8(0x223)]),_0x1d2e10=new Date(document[_0x2662b8(0x232)](_0x2662b8(0x213))[_0x2662b8(0x223)]),_0x5a3384=salesData[_0x2662b8(0x208)](_0x1e174a=>{const _0x17a495=_0x2662b8,_0x50da7d=new Date(_0x1e174a[_0x17a495(0x1f4)]);return(!_0x31d533||_0x50da7d>=_0x31d533)&&(!_0x1d2e10||_0x50da7d<=_0x1d2e10);});renderTable(_0x5a3384),updateAnalysis(_0x5a3384);});function updateStockTables(_0x4b4037,_0x2e81e9){const _0x1f6bc9=_0x4be034,_0x50de9f=document[_0x1f6bc9(0x232)](_0x1f6bc9(0x1ca));_0x50de9f['querySelector'](_0x1f6bc9(0x22e))[_0x1f6bc9(0x235)]='',database[_0x1f6bc9(0x1ac)](_0x1f6bc9(0x233)+currentUser)[_0x1f6bc9(0x247)](_0x1f6bc9(0x223))[_0x1f6bc9(0x206)](_0x2aa1eb=>{const _0x37a65b=_0x1f6bc9,_0x57622b={};_0x2aa1eb[_0x37a65b(0x1f9)](_0x4e2224=>{const _0x4dbc9f=_0x37a65b,_0x27f772=_0x4e2224[_0x4dbc9f(0x1d3)](),_0x28ce88=new Date(_0x27f772[_0x4dbc9f(0x1f4)]);(!_0x4b4037||_0x28ce88>=_0x4b4037)&&(!_0x2e81e9||_0x28ce88<=_0x2e81e9)&&((!_0x57622b[_0x27f772[_0x4dbc9f(0x1ea)]]||_0x28ce88>new Date(_0x57622b[_0x27f772[_0x4dbc9f(0x1ea)]][_0x4dbc9f(0x1f4)]))&&(_0x57622b[_0x27f772[_0x4dbc9f(0x1ea)]]=_0x27f772));}),Object[_0x37a65b(0x20e)](_0x57622b)[_0x37a65b(0x1f9)](_0x2a7955=>{const _0x2ddc53=_0x37a65b,_0x3a2698=_0x50de9f[_0x2ddc53(0x1d7)](_0x2ddc53(0x22e))[_0x2ddc53(0x242)]();_0x3a2698[_0x2ddc53(0x24e)](0x0)[_0x2ddc53(0x1d4)]=_0x2a7955['product'],_0x3a2698[_0x2ddc53(0x24e)](0x1)[_0x2ddc53(0x1d4)]=_0x2a7955['SF'],_0x3a2698[_0x2ddc53(0x24e)](0x2)[_0x2ddc53(0x1d4)]=new Date(_0x2a7955[_0x2ddc53(0x1f4)])[_0x2ddc53(0x1bb)]();}),setupSort(_0x50de9f);});}function showSubscriptionRequiredModal(){const _0x17fe28=_0x4be034;document[_0x17fe28(0x232)](_0x17fe28(0x1f2))[_0x17fe28(0x1de)]['display']=_0x17fe28(0x1b6);}function hideSubscriptionRequiredModal(){const _0x39ddd7=_0x4be034;document[_0x39ddd7(0x232)](_0x39ddd7(0x1f2))[_0x39ddd7(0x1de)][_0x39ddd7(0x230)]=_0x39ddd7(0x1e7);}function redirectToSubscription(){const _0x5f0c44=_0x4be034;window[_0x5f0c44(0x1cb)][_0x5f0c44(0x23c)]=_0x5f0c44(0x220);}async function checkSubscriptionStatus(){const _0x48b2fc=_0x4be034;try{const _0x34c879=await adminRef['once'](_0x48b2fc(0x223)),_0x4b1ee0=_0x34c879[_0x48b2fc(0x1d3)](),_0x470139=new Date();if(_0x4b1ee0&&_0x4b1ee0[_0x48b2fc(0x1eb)]===_0x48b2fc(0x1af)){const _0x4e5098=new Date(_0x4b1ee0['endDate']);return _0x4e5098>=_0x470139?!![]:(await adminRef[_0x48b2fc(0x1b8)]({'status':'expired'}),![]);}else return![];}catch(_0x1963d4){console[_0x48b2fc(0x248)](_0x48b2fc(0x1c0),_0x1963d4);throw _0x1963d4;}}updateTable(),updateStockTables(),analysisSection[_0x4be034(0x1de)][_0x4be034(0x230)]='none',salesDetailsSection[_0x4be034(0x1de)][_0x4be034(0x230)]=_0x4be034(0x1e7),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x4be034(0x23a)](_0x4be034(0x24c));savedTheme!==null&&setTheme(savedTheme==='true');