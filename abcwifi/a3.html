<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* ... (vos variables CSS) ... */
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
        .logout-button {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        background-color: #e74c3c;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button:hover {
        background-color: #c0392b;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .logout-button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button i {
        font-size: 16px;
    }

    @media (max-width: 768px) {
        .logout-button {
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 12px;
        }
    }
      .database-selector {
        margin-bottom: 20px;
    }

    .database-selector select {
        padding: 10px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        color: var(--text-color);
        cursor: pointer;
    }

    .database-selector select:focus {
        outline: none;
        border-color: var(--primary-color);
    }
    </style>
</head>
<body>
<button onclick="logout()" class="logout-button">
    <i class="fas fa-sign-out-alt"></i> Déconnexion
</button>
    <div class="container">
        <h1>Gestion des tickets</h1>

        <div class="database-selector">
            <label for="databaseSelect">Choisir la base de données : </label>
            <select id="databaseSelect" onchange="changeDatabase()">
                <option value="TicketsTotal">TicketsTotal</option>
                <option value="TicketsTransit">TicketsTransit</option>
            </select>
        </div>

        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".json,.csv,.txt" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editId" placeholder="ID" disabled>
            <input type="text" id="editCategory" placeholder="Catégorie">
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newCategory" placeholder="Catégorie">
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
const _0x44b2e0=_0x699b;(function(_0x35ed1e,_0x5de9a2){const _0x50cce9=_0x699b,_0xa6d3cf=_0x35ed1e();while(!![]){try{const _0x23e89b=parseInt(_0x50cce9(0x167))/0x1*(parseInt(_0x50cce9(0x18e))/0x2)+parseInt(_0x50cce9(0x127))/0x3+parseInt(_0x50cce9(0x158))/0x4+-parseInt(_0x50cce9(0x186))/0x5*(parseInt(_0x50cce9(0xf7))/0x6)+-parseInt(_0x50cce9(0x19d))/0x7*(parseInt(_0x50cce9(0x173))/0x8)+-parseInt(_0x50cce9(0x19b))/0x9*(parseInt(_0x50cce9(0x13f))/0xa)+-parseInt(_0x50cce9(0x16a))/0xb*(parseInt(_0x50cce9(0xf5))/0xc);if(_0x23e89b===_0x5de9a2)break;else _0xa6d3cf['push'](_0xa6d3cf['shift']());}catch(_0x87d733){_0xa6d3cf['push'](_0xa6d3cf['shift']());}}}(_0x4c44,0x320b1));const firebaseConfig={'apiKey':_0x44b2e0(0x104),'authDomain':_0x44b2e0(0x111),'databaseURL':_0x44b2e0(0x12c),'projectId':_0x44b2e0(0x15c),'storageBucket':'abcwifi.firebasestorage.app','messagingSenderId':_0x44b2e0(0x166),'appId':'1:1018273286521:web:acd8d4a2a126246fa007a8','measurementId':_0x44b2e0(0x114)};firebase[_0x44b2e0(0x176)](firebaseConfig);const database=firebase['database']();let allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,currentDatabase=_0x44b2e0(0x11d),editingCategory='',editingIndex=-0x1,editingId='';function _0x4c44(){const _0x5d5d65=['name','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:','Erreur\x20d\x27importation:','persisted','innerHTML','readAsText','Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket','createElement','TicketsTotal','setAttribute','pop','block','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.','indexOf','none','\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(\x27','appendChild','editCategory','898548JaobBH','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','Ticket\x20supprimé\x20avec\x20succès!','target','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.','https://abcwifi-default-rtdb.firebaseio.com','getElementById','</span>','newUser','remove','loadingIndicator','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?','forEach','Ticket\x20introuvable.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','sort','querySelectorAll','Erreur\x20lors\x20de\x20l\x27importation:','category','splice','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTotal(\x27','databaseSelect','then','15270hdKitU','price','categoryName','match','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_Transit\x22\x20value=\x22','value','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:','flex','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','N/A','getItem','motDePasse','ticketCategories','login.html','input',',null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22]:checked','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide','editTicketModal','user','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:','click','display','Ticket\x20modifié\x20avec\x20succès!','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20','506856cjZdAL','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','tickets_export_','Catégorie\x20modifiée\x20avec\x20succès!','abcwifi','Format\x20de\x20fichier\x20non\x20supporté','utilisateur','csv','importFile','editCategoryModal','isLoggedIn','Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie','length','1018273286521','1iVfXvf','split','result','11qOJRnn','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_','stringify','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_','href','/ip\x20hotspot\x20user','newPrice','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?','update','1134704GuvKCc','toLowerCase','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(null)\x22>Supprimer\x20les\x20tickets\x20sélectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','initializeApp','TicketsTransit','editCategoryName',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(\x27','addTicketModal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>','location','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','onload','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','includes','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?','clear','parse','5cuNCiP','files','keys','filtered_tickets_export_','Aucun\x20ticket\x20valide\x20trouvé\x20dans\x20le\x20fichier\x20pour\x20TicketsTransit','replace','priceModal','editUser','399770wPwcfU','\x27,\x20','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','priceInput','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.','txt','ref','addEventListener','download','Format\x20JSON\x20invalide\x20pour\x20TicketsTransit','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27','531pNBigq','style','7dptWXw','searchBar','editPassword','trim','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(null,null,\x20\x27','input[name^=\x22ticketSelect_','Importation\x20réussie\x20!','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','.json','1945092IghTYm','body','162696zrIGQl','catch','\x22\x20value=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_','\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20','pageshow','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTransit!','TicketsTransit\x20Import','editId','Erreur\x20lors\x20de\x20la\x20suppression:','Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier','prix','map','AIzaSyCM3XxnV3NZQuZxBl-9ZGLVofMIPm-x5ZY','error','<span\x20class=\x22highlight\x22>','val','Erreur\x20lors\x20de\x20la\x20modification:','now','DOMContentLoaded','set','id-','Cadeau','password','push','data:text/json;charset=utf-8,','abcwifi.firebaseapp.com','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20','G-5C9MPNW9T6'];_0x4c44=function(){return _0x5d5d65;};return _0x4c44();}(function(){const _0x1c9cf8=_0x44b2e0,_0x4772cf=sessionStorage['getItem'](_0x1c9cf8(0x162));!_0x4772cf&&window[_0x1c9cf8(0x17c)][_0x1c9cf8(0x18b)](_0x1c9cf8(0x14c));}()),document[_0x44b2e0(0x197)](_0x44b2e0(0x10a),function(){const _0x25880a=_0x44b2e0;!sessionStorage['getItem']('isLoggedIn')&&window['location'][_0x25880a(0x18b)](_0x25880a(0x14c));}),window['addEventListener'](_0x44b2e0(0xfc),function(_0x5f3bdb){const _0x4f2b93=_0x44b2e0;(_0x5f3bdb[_0x4f2b93(0x118)]||!sessionStorage[_0x4f2b93(0x149)](_0x4f2b93(0x162)))&&window[_0x4f2b93(0x17c)]['replace']('login.html');});function showLoading(){const _0x43c92e=_0x44b2e0;document['getElementById'](_0x43c92e(0x131))['style'][_0x43c92e(0x155)]=_0x43c92e(0x146);}function hideLoading(){const _0x1488ae=_0x44b2e0;document[_0x1488ae(0x12d)](_0x1488ae(0x131))[_0x1488ae(0x19c)][_0x1488ae(0x155)]=_0x1488ae(0x123);}function loadTickets(){const _0x53e026=_0x44b2e0;showLoading();const _0x5a95a3=database[_0x53e026(0x196)](currentDatabase);_0x5a95a3['on'](_0x53e026(0x144),_0x47b598=>{const _0xa6f658=_0x53e026;allTickets=_0x47b598[_0xa6f658(0x107)]()||{},displayTickets(allTickets),hideLoading();},_0x19a520=>{const _0x5a60ad=_0x53e026;console[_0x5a60ad(0x105)](_0x5a60ad(0x159),_0x19a520),hideLoading(),alert(_0x5a60ad(0x182));});}function displayTickets(_0x2e78aa,_0x5ed49f=''){const _0x3e27ad=_0x44b2e0,_0x365e77=document['getElementById'](_0x3e27ad(0x14b));_0x365e77['innerHTML']='';if(currentDatabase===_0x3e27ad(0x11d))displayTicketsTotal(_0x2e78aa,_0x5ed49f);else currentDatabase===_0x3e27ad(0x177)&&displayTicketsTransit(_0x2e78aa,_0x5ed49f);}function displayTicketsTotal(_0x54d54b,_0x4f7dbb=''){const _0x29f7ae=_0x44b2e0,_0x449be8=document[_0x29f7ae(0x12d)](_0x29f7ae(0x14b));for(let _0xa3d2d1 in _0x54d54b){const _0x386d96=_0x54d54b[_0xa3d2d1],_0x4e6db3=_0x29f7ae(0x17b)+_0xa3d2d1+'</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22editCategory(\x27'+_0xa3d2d1+_0x29f7ae(0x124)+_0xa3d2d1+_0x29f7ae(0x16b)+_0xa3d2d1+_0x29f7ae(0xfb)+_0xa3d2d1+_0x29f7ae(0xfa)+_0xa3d2d1+_0x29f7ae(0x19a)+_0xa3d2d1+'\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27'+_0xa3d2d1+_0x29f7ae(0x113)+_0xa3d2d1+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_'+_0xa3d2d1+_0x29f7ae(0x112)+generateTicketRowsTotal(_0xa3d2d1,_0x386d96,_0x4f7dbb)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27'+_0xa3d2d1+_0x29f7ae(0x17e)+_0xa3d2d1+_0x29f7ae(0x136);_0x449be8[_0x29f7ae(0x119)]+=_0x4e6db3;}}function generateTicketRowsTotal(_0x4b98b3,_0x2be310,_0x357e20){const _0x4171a5=_0x44b2e0;let _0x13a13d='';for(let _0x5e0903=0x0;_0x5e0903<_0x2be310[_0x4171a5(0x14a)][_0x4171a5(0x165)];_0x5e0903++){if(_0x357e20&&!matchesSearchTotal(_0x2be310,_0x5e0903,_0x357e20))continue;_0x13a13d+=_0x4171a5(0x16d)+_0x4b98b3+_0x4171a5(0xf9)+_0x5e0903+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x2be310['motDePasse'][_0x5e0903],_0x357e20)+_0x4171a5(0x135)+highlightMatch(_0x2be310['prix'][_0x5e0903],_0x357e20)+_0x4171a5(0x135)+highlightMatch(_0x2be310[_0x4171a5(0x15e)][_0x5e0903],_0x357e20)+_0x4171a5(0x13c)+_0x4b98b3+'\x27,\x20'+_0x5e0903+_0x4171a5(0x179)+_0x4b98b3+_0x4171a5(0x18f)+_0x5e0903+_0x4171a5(0x14e);}return _0x13a13d;}function displayTicketsTransit(_0x59f269,_0x17c520=''){const _0x265f3f=_0x44b2e0,_0x28e77d=document[_0x265f3f(0x12d)](_0x265f3f(0x14b));_0x28e77d[_0x265f3f(0x119)]='';const _0x1329d1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Tickets\x20en\x20transit</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_Transit\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20TicketsTransit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_Transit\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27TicketsTransit\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(null)\x22>Supprimer\x20tous\x20les\x20tickets</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_Transit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+generateTicketRowsTransit(_0x59f269,_0x17c520)+_0x265f3f(0x175);_0x28e77d[_0x265f3f(0x119)]=_0x1329d1;}function generateTicketRowsTransit(_0x2d128c,_0x5b0bb4){const _0x25893e=_0x44b2e0;let _0x4ff845='';for(let _0x19c5b3 in _0x2d128c){const _0x332476=_0x2d128c[_0x19c5b3];if(_0x5b0bb4&&!matchesSearchTransit(_0x332476,_0x5b0bb4))continue;_0x4ff845+=_0x25893e(0x143)+_0x19c5b3+_0x25893e(0xf3)+highlightMatch(_0x19c5b3,_0x5b0bb4)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x332476[_0x25893e(0x13a)],_0x5b0bb4)+_0x25893e(0x135)+highlightMatch(_0x332476['password'],_0x5b0bb4)+_0x25893e(0x135)+highlightMatch(_0x332476[_0x25893e(0x140)],_0x5b0bb4)+_0x25893e(0x135)+highlightMatch(_0x332476[_0x25893e(0x152)],_0x5b0bb4)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTransit(\x27'+_0x19c5b3+_0x25893e(0xf0)+_0x19c5b3+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}return _0x4ff845;}function editTicketTransit(_0x2f3b1a){const _0x5a135c=_0x44b2e0,_0x3215f5=allTickets[_0x2f3b1a];_0x3215f5?(editingId=_0x2f3b1a,document[_0x5a135c(0x12d)]('editId')[_0x5a135c(0x144)]=_0x2f3b1a,document[_0x5a135c(0x12d)](_0x5a135c(0x126))[_0x5a135c(0x144)]=_0x3215f5[_0x5a135c(0x13a)],document[_0x5a135c(0x12d)]('editPassword')[_0x5a135c(0x144)]=_0x3215f5[_0x5a135c(0x10e)],document['getElementById']('editPrice')['value']=_0x3215f5[_0x5a135c(0x140)],document[_0x5a135c(0x12d)](_0x5a135c(0x18d))[_0x5a135c(0x144)]=_0x3215f5[_0x5a135c(0x152)],document[_0x5a135c(0x12d)](_0x5a135c(0x151))[_0x5a135c(0x19c)][_0x5a135c(0x155)]=_0x5a135c(0x120)):alert(_0x5a135c(0x134));}function saveTicketEdit(){const _0x3fc5a1=_0x44b2e0,_0x317042=document[_0x3fc5a1(0x12d)](_0x3fc5a1(0xee))[_0x3fc5a1(0x144)],_0x401790=document[_0x3fc5a1(0x12d)]('editPrice')['value'],_0x38925b=document[_0x3fc5a1(0x12d)](_0x3fc5a1(0x18d))[_0x3fc5a1(0x144)],_0x4c5357=document[_0x3fc5a1(0x12d)](_0x3fc5a1(0x126))['value'];if(!_0x317042||!_0x401790||!_0x38925b||!_0x4c5357){alert('Tous\x20les\x20champs\x20sont\x20obligatoires');return;}showLoading();if(currentDatabase===_0x3fc5a1(0x11d)){const _0x34a908=allTickets[editingCategory];_0x34a908[_0x3fc5a1(0x14a)][editingIndex]=_0x317042,_0x34a908['prix'][editingIndex]=_0x401790,_0x34a908[_0x3fc5a1(0x15e)][editingIndex]=_0x38925b;const _0x375f93={[currentDatabase+'/'+editingCategory]:_0x34a908};database[_0x3fc5a1(0x196)]()['update'](_0x375f93)['then'](()=>{const _0x14650c=_0x3fc5a1;hideLoading(),closeEditModal(),alert(_0x14650c(0x156));})[_0x3fc5a1(0xf8)](_0x5b9a1b=>{const _0x537980=_0x3fc5a1;console[_0x537980(0x105)](_0x537980(0x108),_0x5b9a1b),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket');});}else{if(currentDatabase===_0x3fc5a1(0x177)){const _0x2380fd=database[_0x3fc5a1(0x196)](currentDatabase+'/'+editingId);_0x2380fd[_0x3fc5a1(0x172)]({'category':_0x4c5357,'password':_0x317042,'price':_0x401790,'user':_0x38925b})[_0x3fc5a1(0x13e)](()=>{const _0x24acae=_0x3fc5a1;hideLoading(),closeEditModal(),alert(_0x24acae(0x156));})[_0x3fc5a1(0xf8)](_0x168715=>{const _0x22033f=_0x3fc5a1;console[_0x22033f(0x105)]('Erreur\x20lors\x20de\x20la\x20modification:',_0x168715),hideLoading(),alert(_0x22033f(0x11b));});}}}function editTicketTotal(_0x2c7fc3,_0x567181){const _0x22a302=_0x44b2e0;editingCategory=_0x2c7fc3,editingIndex=_0x567181;const _0x25e084=allTickets[_0x2c7fc3];document[_0x22a302(0x12d)](_0x22a302(0xff))[_0x22a302(0x144)]='',document['getElementById'](_0x22a302(0x126))[_0x22a302(0x144)]=_0x2c7fc3,document[_0x22a302(0x12d)](_0x22a302(0xee))[_0x22a302(0x144)]=_0x25e084[_0x22a302(0x14a)][_0x567181],document['getElementById']('editPrice')[_0x22a302(0x144)]=_0x25e084[_0x22a302(0x102)][_0x567181],document[_0x22a302(0x12d)](_0x22a302(0x18d))['value']=_0x25e084['utilisateur'][_0x567181],document['getElementById'](_0x22a302(0x151))[_0x22a302(0x19c)][_0x22a302(0x155)]=_0x22a302(0x120);}function importTicketsToCategory(_0x2a54bd,_0x17ddd5){const _0x3b42f3=_0x44b2e0,_0x373321=_0x17ddd5[_0x3b42f3(0x12a)][_0x3b42f3(0x187)][0x0];if(!_0x373321)return;showLoading();const _0x22f2df=new FileReader();_0x22f2df[_0x3b42f3(0x17f)]=function(_0x19fdd5){const _0x417a1e=_0x3b42f3;try{const _0x5b6287=_0x373321[_0x417a1e(0x115)][_0x417a1e(0x168)]('.')[_0x417a1e(0x11f)]()[_0x417a1e(0x174)]();if(_0x5b6287==='json')handleJsonImportToCategory(_0x19fdd5[_0x417a1e(0x12a)][_0x417a1e(0x169)],_0x2a54bd);else{if(_0x5b6287===_0x417a1e(0x15f))handleCsvImportToCategory(_0x19fdd5[_0x417a1e(0x12a)]['result'],_0x2a54bd);else{if(_0x5b6287===_0x417a1e(0x195))handleTxtImportToCategory(_0x19fdd5[_0x417a1e(0x12a)]['result'],_0x2a54bd);else throw new Error(_0x417a1e(0x15d));}}}catch(_0x548e66){console[_0x417a1e(0x105)](_0x417a1e(0x117),_0x548e66),hideLoading(),alert(_0x417a1e(0x194));}},_0x22f2df['readAsText'](_0x373321);}function handleJsonImportToCategory(_0x3e7b86,_0x245219){const _0x4a828a=_0x44b2e0,_0x16a33f=JSON[_0x4a828a(0x185)](_0x3e7b86);if(currentDatabase===_0x4a828a(0x177))for(let _0x5351f3 in _0x16a33f){if(!_0x16a33f[_0x5351f3][_0x4a828a(0x13a)]||!_0x16a33f[_0x5351f3]['password']||!_0x16a33f[_0x5351f3][_0x4a828a(0x140)]||!_0x16a33f[_0x5351f3][_0x4a828a(0x152)]){hideLoading(),alert(_0x4a828a(0x199));return;}}else{if(_0x245219==='TicketsTransit')for(let _0x48717e in _0x16a33f){if(!_0x16a33f[_0x48717e]['category']||!_0x16a33f[_0x48717e][_0x4a828a(0x10e)]||!_0x16a33f[_0x48717e][_0x4a828a(0x140)]||!_0x16a33f[_0x48717e]['user']){hideLoading(),alert(_0x4a828a(0x199));return;}}else{if(!_0x16a33f[_0x245219]||!_0x16a33f[_0x245219][_0x4a828a(0x14a)]||!_0x16a33f[_0x245219][_0x4a828a(0x102)]||!_0x16a33f[_0x245219][_0x4a828a(0x15e)]){hideLoading(),alert('Format\x20JSON\x20invalide\x20pour\x20TicketsTotal');return;}}}mergeTicketsToCategory(_0x245219,_0x16a33f);}function handleCsvImportToCategory(_0x436428,_0x2f0682){const _0x49a698=_0x44b2e0,_0x15cb5b=_0x436428[_0x49a698(0x168)]('\x0a');let _0x33e8af={};if(currentDatabase==='TicketsTransit'){let _0x3f6cdd=[];for(let _0x55cb1b=0x1;_0x55cb1b<_0x15cb5b[_0x49a698(0x165)];_0x55cb1b++){if(!_0x15cb5b[_0x55cb1b][_0x49a698(0xef)]())continue;const _0x4c74e8=_0x15cb5b[_0x55cb1b][_0x49a698(0x168)](','),_0x133f33=_0x4c74e8[0x0]?_0x4c74e8[0x0][_0x49a698(0xef)]():_0x49a698(0x10c)+Date['now']()+'-'+_0x55cb1b;_0x3f6cdd[_0x49a698(0x10f)]({'id':_0x133f33,'category':_0x4c74e8[0x1]?_0x4c74e8[0x1]['trim']():_0x49a698(0x148),'password':_0x4c74e8[0x2]?_0x4c74e8[0x2]['trim']():'','price':_0x4c74e8[0x3]?_0x4c74e8[0x3][_0x49a698(0xef)]():'','user':_0x4c74e8[0x4]?_0x4c74e8[0x4][_0x49a698(0xef)]():''});}tempImportData={'tickets':_0x3f6cdd},tempCategory=_0x49a698(0x177),showPriceModal('TicketsTransit\x20Import');}else{const _0x587076={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x18697f=0x1;_0x18697f<_0x15cb5b[_0x49a698(0x165)];_0x18697f++){if(!_0x15cb5b[_0x18697f][_0x49a698(0xef)]())continue;const _0x13b3d7=_0x15cb5b[_0x18697f][_0x49a698(0x168)](',');_0x587076[_0x49a698(0x15e)]['push'](_0x13b3d7[0x0][_0x49a698(0xef)]()),_0x587076[_0x49a698(0x14a)][_0x49a698(0x10f)](_0x13b3d7[0x1][_0x49a698(0xef)]()),_0x13b3d7[0x3]&&_0x587076[_0x49a698(0x102)][_0x49a698(0x10f)](_0x13b3d7[0x3][_0x49a698(0xef)]());}!_0x587076[_0x49a698(0x102)][_0x49a698(0x165)]?(tempImportData={[_0x2f0682]:_0x587076},tempCategory=_0x2f0682,showPriceModal(_0x2f0682)):mergeTicketsToCategory(_0x2f0682,_0x587076);}}function handleTxtImportToCategory(_0x175aad,_0x12c87c){const _0x1914d5=_0x44b2e0,_0x20994e=_0x175aad[_0x1914d5(0x168)]('\x0a');let _0x8737ba={};if(currentDatabase===_0x1914d5(0x177)){const _0x620568=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0xc7cd0a={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x9a4bee of _0x20994e){_0x9a4bee=_0x9a4bee[_0x1914d5(0xef)]();if(!_0x9a4bee||_0x9a4bee===_0x1914d5(0x16f))continue;const _0x30dda2=_0x9a4bee[_0x1914d5(0x142)](_0x620568);if(_0x30dda2){const [_0x4a9bf6,_0x5e1f4e,_0x25413c,_0x1e61c5]=_0x30dda2;_0xc7cd0a['utilisateur'][_0x1914d5(0x10f)](_0x5e1f4e),_0xc7cd0a[_0x1914d5(0x14a)][_0x1914d5(0x10f)](_0x25413c),_0xc7cd0a['prix'][_0x1914d5(0x10f)](_0x1e61c5);}}for(let _0xbc56a=0x0;_0xbc56a<_0xc7cd0a[_0x1914d5(0x15e)][_0x1914d5(0x165)];_0xbc56a++){const _0x5da462=_0x1914d5(0x10c)+Date[_0x1914d5(0x109)]()+'-'+_0xbc56a;_0x8737ba[_0x5da462]={'id':_0x5da462,'category':_0x1914d5(0x10d),'password':_0xc7cd0a['motDePasse'][_0xbc56a],'price':'1','user':_0xc7cd0a[_0x1914d5(0x15e)][_0xbc56a]};}Object[_0x1914d5(0x188)](_0x8737ba)[_0x1914d5(0x165)]>0x0?mergeTicketsToCategory(null,_0x8737ba):(hideLoading(),alert(_0x1914d5(0x18a)));}else{const _0x379830=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x53389d of _0x20994e){_0x53389d=_0x53389d[_0x1914d5(0xef)]();if(!_0x53389d||_0x53389d===_0x1914d5(0x16f))continue;const _0x1acdfe=_0x53389d[_0x1914d5(0x142)](_0x379830);if(_0x1acdfe){const [_0x32f859,_0x4229eb,_0x37f12e,_0x5f25ba]=_0x1acdfe;!_0x8737ba[_0x5f25ba]&&(_0x8737ba[_0x5f25ba]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x8737ba[_0x5f25ba][_0x1914d5(0x15e)]['push'](_0x4229eb),_0x8737ba[_0x5f25ba]['motDePasse']['push'](_0x37f12e);}}if(Object[_0x1914d5(0x188)](_0x8737ba)[_0x1914d5(0x165)]===0x0){hideLoading(),alert(_0x1914d5(0x101));return;}tempImportData=_0x8737ba;const _0x331ba5=Object[_0x1914d5(0x188)](_0x8737ba)[0x0];showPriceModal(_0x331ba5);}}function mergeTicketsToCategory(_0x6ebe32,_0x30864e){const _0x55cdf5=_0x44b2e0;let _0x160bbc={};if(currentDatabase==='TicketsTransit')for(let _0x239fbb in _0x30864e){_0x160bbc[currentDatabase+'/'+_0x239fbb]=_0x30864e[_0x239fbb];}else{!allTickets[_0x6ebe32]&&(allTickets[_0x6ebe32]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0xacfe60=allTickets[_0x6ebe32],_0x513dfb={'motDePasse':[..._0xacfe60[_0x55cdf5(0x14a)],..._0x30864e[_0x55cdf5(0x14a)]],'prix':[..._0xacfe60[_0x55cdf5(0x102)],..._0x30864e[_0x55cdf5(0x102)]],'utilisateur':[..._0xacfe60[_0x55cdf5(0x15e)],..._0x30864e[_0x55cdf5(0x15e)]]};_0x160bbc[currentDatabase+'/'+_0x6ebe32]=_0x513dfb;}database[_0x55cdf5(0x196)]()[_0x55cdf5(0x172)](_0x160bbc)[_0x55cdf5(0x13e)](()=>{const _0x228d8c=_0x55cdf5;hideLoading(),alert('Importation\x20réussie\x20dans\x20'+(_0x6ebe32||_0x228d8c(0x177))+'!');})[_0x55cdf5(0xf8)](_0x59c5f3=>{const _0x4377ce=_0x55cdf5;console[_0x4377ce(0x105)](_0x4377ce(0x139),_0x59c5f3),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.');});}function editCategory(_0x4b57ef){const _0x15e1e1=_0x44b2e0;currentEditingCategory=_0x4b57ef,document[_0x15e1e1(0x12d)](_0x15e1e1(0x178))['value']=_0x4b57ef,document['getElementById']('editCategoryModal')[_0x15e1e1(0x19c)][_0x15e1e1(0x155)]=_0x15e1e1(0x120);}function saveCategoryEdit(){const _0x197100=_0x44b2e0,_0x647bb8=document[_0x197100(0x12d)]('editCategoryName')[_0x197100(0x144)]['trim']();if(!_0x647bb8){alert(_0x197100(0x150));return;}if(_0x647bb8===currentEditingCategory){closeEditCategoryModal();return;}showLoading();const _0x14fd76=allTickets[currentEditingCategory],_0x2045e5={[currentDatabase+'/'+currentEditingCategory]:null,[currentDatabase+'/'+_0x647bb8]:_0x14fd76};database[_0x197100(0x196)]()[_0x197100(0x172)](_0x2045e5)[_0x197100(0x13e)](()=>{const _0x28cfc7=_0x197100;hideLoading(),closeEditCategoryModal(),alert(_0x28cfc7(0x15b));})[_0x197100(0xf8)](_0xe18771=>{const _0x112845=_0x197100;console[_0x112845(0x105)](_0x112845(0x145),_0xe18771),hideLoading(),alert(_0x112845(0x164));});}function showAddTicketModal(_0x12edfd){const _0x45dadb=_0x44b2e0;currentEditingCategory=_0x12edfd,document[_0x45dadb(0x12d)]('newPassword')[_0x45dadb(0x144)]='',document[_0x45dadb(0x12d)](_0x45dadb(0x170))[_0x45dadb(0x144)]='',document['getElementById'](_0x45dadb(0x12f))[_0x45dadb(0x144)]='',document[_0x45dadb(0x12d)]('newCategory')[_0x45dadb(0x144)]='',document['getElementById'](_0x45dadb(0x17a))['style'][_0x45dadb(0x155)]=_0x45dadb(0x120);}function saveNewTicket(){const _0x1ebdef=_0x44b2e0;showLoading();if(currentDatabase==='TicketsTransit'){const _0x87c270=_0x1ebdef(0x10c)+Date[_0x1ebdef(0x109)](),_0x3bc684={'id':_0x87c270,'category':document[_0x1ebdef(0x12d)]('newCategory')[_0x1ebdef(0x144)][_0x1ebdef(0xef)](),'password':document['getElementById']('newPassword')[_0x1ebdef(0x144)][_0x1ebdef(0xef)](),'price':document[_0x1ebdef(0x12d)]('newPrice')[_0x1ebdef(0x144)][_0x1ebdef(0xef)](),'user':document[_0x1ebdef(0x12d)](_0x1ebdef(0x12f))[_0x1ebdef(0x144)][_0x1ebdef(0xef)]()};database[_0x1ebdef(0x196)](currentDatabase+'/'+_0x87c270)['set'](_0x3bc684)[_0x1ebdef(0x13e)](()=>{const _0x1664cf=_0x1ebdef;hideLoading(),closeAddTicketModal(),alert(_0x1664cf(0xfd));})['catch'](_0x1da816=>{const _0x587239=_0x1ebdef;console[_0x587239(0x105)](_0x587239(0x153),_0x1da816),hideLoading(),alert(_0x587239(0x128));});}else{const _0x2f4b7f=currentEditingCategory,_0x3cb785={'password':document[_0x1ebdef(0x12d)]('newPassword')[_0x1ebdef(0x144)][_0x1ebdef(0xef)](),'price':document[_0x1ebdef(0x12d)](_0x1ebdef(0x170))[_0x1ebdef(0x144)][_0x1ebdef(0xef)](),'user':document[_0x1ebdef(0x12d)]('newUser')[_0x1ebdef(0x144)][_0x1ebdef(0xef)]()},_0x346b33=allTickets[_0x2f4b7f]||{'motDePasse':[],'prix':[],'utilisateur':[]};_0x346b33[_0x1ebdef(0x14a)][_0x1ebdef(0x10f)](_0x3cb785[_0x1ebdef(0x10e)]),_0x346b33[_0x1ebdef(0x102)][_0x1ebdef(0x10f)](_0x3cb785[_0x1ebdef(0x140)]),_0x346b33['utilisateur'][_0x1ebdef(0x10f)](_0x3cb785[_0x1ebdef(0x152)]),database['ref'](currentDatabase+'/'+_0x2f4b7f)[_0x1ebdef(0x10b)](_0x346b33)['then'](()=>{hideLoading(),closeAddTicketModal(),alert('Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTotal!');})[_0x1ebdef(0xf8)](_0x1bdc74=>{const _0x49339c=_0x1ebdef;console[_0x49339c(0x105)](_0x49339c(0x153),_0x1bdc74),hideLoading(),alert(_0x49339c(0x128));});}}function _0x699b(_0x3f7bb0,_0x227255){const _0x4c4443=_0x4c44();return _0x699b=function(_0x699ba7,_0x45be2e){_0x699ba7=_0x699ba7-0xed;let _0x140603=_0x4c4443[_0x699ba7];return _0x140603;},_0x699b(_0x3f7bb0,_0x227255);}function closeEditModal(){const _0x28a193=_0x44b2e0;document[_0x28a193(0x12d)](_0x28a193(0x151))[_0x28a193(0x19c)][_0x28a193(0x155)]=_0x28a193(0x123),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0x53656f=_0x44b2e0;document[_0x53656f(0x12d)](_0x53656f(0x161))['style']['display']=_0x53656f(0x123),currentEditingCategory=null;}function closeAddTicketModal(){const _0x59118c=_0x44b2e0;document['getElementById'](_0x59118c(0x17a))[_0x59118c(0x19c)][_0x59118c(0x155)]='none',currentEditingCategory=null;}function matchesSearchTotal(_0xf659fb,_0x7be037,_0xe4acde){const _0x375863=_0x44b2e0,_0x2caac7=_0xe4acde[_0x375863(0x174)]();return _0xf659fb['motDePasse'][_0x7be037]['toLowerCase']()['includes'](_0x2caac7)||_0xf659fb[_0x375863(0x102)][_0x7be037]['toLowerCase']()['includes'](_0x2caac7)||_0xf659fb[_0x375863(0x15e)][_0x7be037]['toLowerCase']()[_0x375863(0x181)](_0x2caac7);}function matchesSearchTransit(_0x5758b9,_0x3831ff){const _0x5c5b99=_0x44b2e0,_0x24e7eb=_0x3831ff[_0x5c5b99(0x174)]();return _0x5758b9['id']&&_0x5758b9['id'][_0x5c5b99(0x174)]()[_0x5c5b99(0x181)](_0x24e7eb)||_0x5758b9[_0x5c5b99(0x13a)]&&_0x5758b9['category'][_0x5c5b99(0x174)]()[_0x5c5b99(0x181)](_0x24e7eb)||_0x5758b9['password']&&_0x5758b9['password'][_0x5c5b99(0x174)]()[_0x5c5b99(0x181)](_0x24e7eb)||_0x5758b9[_0x5c5b99(0x140)]&&_0x5758b9['price'][_0x5c5b99(0x174)]()['includes'](_0x24e7eb)||_0x5758b9[_0x5c5b99(0x152)]&&_0x5758b9[_0x5c5b99(0x152)][_0x5c5b99(0x174)]()[_0x5c5b99(0x181)](_0x24e7eb);}function matchesSearch(_0x49005a,_0x17b8c0,_0x5665e0){const _0x430143=_0x44b2e0;if(currentDatabase===_0x430143(0x11d))return matchesSearchTotal(_0x49005a,_0x17b8c0,_0x5665e0);else{if(currentDatabase===_0x430143(0x177))return matchesSearchTransit(_0x49005a,_0x5665e0);}return![];}function highlightMatch(_0x5b89d4,_0x293bd8){const _0x43a48c=_0x44b2e0;if(!_0x293bd8)return _0x5b89d4;const _0x1d4820=new RegExp(_0x293bd8,'gi');return _0x5b89d4[_0x43a48c(0x18b)](_0x1d4820,_0x271212=>_0x43a48c(0x106)+_0x271212+_0x43a48c(0x12e));}function deleteTicket(_0x100a8c,_0x522a3e,_0x516078){const _0x176c65=_0x44b2e0;if(confirm(_0x176c65(0x183))){showLoading();if(currentDatabase===_0x176c65(0x177))database[_0x176c65(0x196)](currentDatabase+'/'+_0x516078)[_0x176c65(0x130)]()[_0x176c65(0x13e)](()=>{const _0x596cd2=_0x176c65;hideLoading(),alert(_0x596cd2(0x129));})['catch'](_0x1fd458=>{const _0x2ac0ea=_0x176c65;console[_0x2ac0ea(0x105)](_0x2ac0ea(0x100),_0x1fd458),hideLoading(),alert(_0x2ac0ea(0x17d));});else{const _0x2e4378=allTickets[_0x100a8c];_0x2e4378[_0x176c65(0x14a)][_0x176c65(0x13b)](_0x522a3e,0x1),_0x2e4378[_0x176c65(0x102)][_0x176c65(0x13b)](_0x522a3e,0x1),_0x2e4378[_0x176c65(0x15e)][_0x176c65(0x13b)](_0x522a3e,0x1),database['ref'](currentDatabase+'/'+_0x100a8c)[_0x176c65(0x10b)](_0x2e4378)['then'](()=>{const _0x413e8d=_0x176c65;hideLoading(),alert(_0x413e8d(0x129));})[_0x176c65(0xf8)](_0x255ee3=>{const _0xce6a6a=_0x176c65;console[_0xce6a6a(0x105)](_0xce6a6a(0x100),_0x255ee3),hideLoading(),alert(_0xce6a6a(0x17d));});}}}function deleteSelectedTickets(_0xb601ce){const _0x32a339=_0x44b2e0,_0x383048=document[_0x32a339(0x138)](_0x32a339(0xf1)+(_0xb601ce||'Transit')+_0x32a339(0x14f));if(_0x383048['length']===0x0){alert(_0x32a339(0x193));return;}if(confirm(_0x32a339(0x132))){showLoading();const _0x281119={};if(currentDatabase==='TicketsTransit')_0x383048[_0x32a339(0x133)](_0x259675=>{const _0x58ead6=_0x32a339,_0x4234ae=_0x259675[_0x58ead6(0x144)];_0x281119[currentDatabase+'/'+_0x4234ae]=null;});else{const _0x2c396e=allTickets[_0xb601ce],_0x1850a2=Array['from'](_0x383048)[_0x32a339(0x103)](_0x35c3e8=>parseInt(_0x35c3e8[_0x32a339(0x144)]))[_0x32a339(0x137)]((_0x58e514,_0x43f2fb)=>_0x43f2fb-_0x58e514);_0x1850a2['forEach'](_0x2f726e=>{const _0x2a3c6e=_0x32a339;_0x2c396e['motDePasse'][_0x2a3c6e(0x13b)](_0x2f726e,0x1),_0x2c396e['prix'][_0x2a3c6e(0x13b)](_0x2f726e,0x1),_0x2c396e[_0x2a3c6e(0x15e)][_0x2a3c6e(0x13b)](_0x2f726e,0x1);}),_0x281119[currentDatabase+'/'+_0xb601ce]=_0x2c396e;}database[_0x32a339(0x196)]()['update'](_0x281119)[_0x32a339(0x13e)](()=>{hideLoading(),alert('Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!');})[_0x32a339(0xf8)](_0x42fc0d=>{const _0x5774c6=_0x32a339;console[_0x5774c6(0x105)](_0x5774c6(0x100),_0x42fc0d),hideLoading(),alert(_0x5774c6(0x190));});}}function deleteAllTicketsInCategory(_0x4d10ef){const _0x5ce3f8=_0x44b2e0;confirm(_0x5ce3f8(0x157)+(_0x4d10ef||_0x5ce3f8(0x177))+'\x20?')&&(showLoading(),currentDatabase===_0x5ce3f8(0x177)?database[_0x5ce3f8(0x196)](currentDatabase)[_0x5ce3f8(0x10b)]({})[_0x5ce3f8(0x13e)](()=>{hideLoading(),alert('Tous\x20les\x20tickets\x20ont\x20été\x20supprimés\x20avec\x20succès!');})['catch'](_0x21a160=>{const _0x65b0f7=_0x5ce3f8;console[_0x65b0f7(0x105)](_0x65b0f7(0x100),_0x21a160),hideLoading(),alert(_0x65b0f7(0x190));}):database['ref'](currentDatabase+'/'+_0x4d10ef)[_0x5ce3f8(0x10b)]({'motDePasse':[],'prix':[],'utilisateur':[]})['then'](()=>{const _0xb68b85=_0x5ce3f8;hideLoading(),alert(_0xb68b85(0x163));})[_0x5ce3f8(0xf8)](_0x2189b5=>{const _0x293dcb=_0x5ce3f8;console[_0x293dcb(0x105)](_0x293dcb(0x100),_0x2189b5),hideLoading(),alert(_0x293dcb(0x190));}));}function exportTickets(){const _0x539849=_0x44b2e0,_0x437f0e=_0x539849(0x110)+encodeURIComponent(JSON[_0x539849(0x16c)](allTickets,null,0x2)),_0x57cac0=document[_0x539849(0x11c)]('a');_0x57cac0[_0x539849(0x11e)]('href',_0x437f0e),_0x57cac0[_0x539849(0x11e)](_0x539849(0x198),_0x539849(0x15a)+currentDatabase+_0x539849(0xf4)),document['body'][_0x539849(0x125)](_0x57cac0),_0x57cac0[_0x539849(0x154)](),_0x57cac0['remove']();}function exportFilteredTickets(){const _0x59faec=_0x44b2e0,_0x4cb62d=document['getElementById'](_0x59faec(0xed))[_0x59faec(0x144)][_0x59faec(0xef)](),_0x255a77={};if(currentDatabase===_0x59faec(0x177))for(let _0x1f7479 in allTickets){(!_0x4cb62d||matchesSearchTransit(allTickets[_0x1f7479],_0x4cb62d))&&(_0x255a77[_0x1f7479]=allTickets[_0x1f7479]);}else for(let _0x5c3ed0 in allTickets){const _0x206fd1=allTickets[_0x5c3ed0];_0x255a77[_0x5c3ed0]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x22cf7b=0x0;_0x22cf7b<_0x206fd1['motDePasse'][_0x59faec(0x165)];_0x22cf7b++){(!_0x4cb62d||matchesSearchTotal(_0x206fd1,_0x22cf7b,_0x4cb62d))&&(_0x255a77[_0x5c3ed0][_0x59faec(0x14a)]['push'](_0x206fd1[_0x59faec(0x14a)][_0x22cf7b]),_0x255a77[_0x5c3ed0]['prix']['push'](_0x206fd1['prix'][_0x22cf7b]),_0x255a77[_0x5c3ed0]['utilisateur'][_0x59faec(0x10f)](_0x206fd1[_0x59faec(0x15e)][_0x22cf7b]));}}const _0x2cd790=_0x59faec(0x110)+encodeURIComponent(JSON[_0x59faec(0x16c)](_0x255a77,null,0x2)),_0x4a7e2d=document[_0x59faec(0x11c)]('a');_0x4a7e2d[_0x59faec(0x11e)](_0x59faec(0x16e),_0x2cd790),_0x4a7e2d[_0x59faec(0x11e)](_0x59faec(0x198),_0x59faec(0x189)+currentDatabase+'.json'),document[_0x59faec(0xf6)][_0x59faec(0x125)](_0x4a7e2d),_0x4a7e2d[_0x59faec(0x154)](),_0x4a7e2d[_0x59faec(0x130)]();}function handleJsonImport(_0x5e4040){const _0x5dc6e5=_0x44b2e0,_0x421a81=JSON[_0x5dc6e5(0x185)](_0x5e4040);if(confirm(_0x5dc6e5(0x121))){const _0x1e19c6={};for(let _0x5915ff in _0x421a81){allTickets[_0x5915ff]?_0x1e19c6[currentDatabase+'/'+_0x5915ff]={'motDePasse':[...allTickets[_0x5915ff][_0x5dc6e5(0x14a)],..._0x421a81[_0x5915ff]['motDePasse']],'prix':[...allTickets[_0x5915ff][_0x5dc6e5(0x102)],..._0x421a81[_0x5915ff][_0x5dc6e5(0x102)]],'utilisateur':[...allTickets[_0x5915ff]['utilisateur'],..._0x421a81[_0x5915ff][_0x5dc6e5(0x15e)]]}:_0x1e19c6[currentDatabase+'/'+_0x5915ff]=_0x421a81[_0x5915ff];}database['ref']()['update'](_0x1e19c6)[_0x5dc6e5(0x13e)](()=>{hideLoading(),alert('Importation\x20réussie\x20!');})[_0x5dc6e5(0xf8)](_0xa2df96=>{const _0x7d4fde=_0x5dc6e5;console[_0x7d4fde(0x105)]('Erreur\x20lors\x20de\x20l\x27importation:',_0xa2df96),hideLoading(),alert(_0x7d4fde(0x180));});}else hideLoading();}function handleCsvImport(_0x4b3fc0){const _0x312a59=_0x44b2e0,_0xdb88d9=_0x4b3fc0[_0x312a59(0x168)]('\x0a');let _0x1e9703={};if(currentDatabase==='TicketsTransit'){let _0x3e38ff=[];for(let _0x429c75=0x1;_0x429c75<_0xdb88d9[_0x312a59(0x165)];_0x429c75++){if(!_0xdb88d9[_0x429c75][_0x312a59(0xef)]())continue;const _0x532b35=_0xdb88d9[_0x429c75][_0x312a59(0x168)](','),_0x3165a6=_0x532b35[0x0]?_0x532b35[0x0][_0x312a59(0xef)]():_0x312a59(0x10c)+Date[_0x312a59(0x109)]()+'-'+_0x429c75;_0x3e38ff[_0x312a59(0x10f)]({'id':_0x3165a6,'category':_0x532b35[0x1]?_0x532b35[0x1][_0x312a59(0xef)]():_0x312a59(0x148),'password':_0x532b35[0x2]?_0x532b35[0x2][_0x312a59(0xef)]():'','price':_0x532b35[0x3]?_0x532b35[0x3][_0x312a59(0xef)]():'','user':_0x532b35[0x4]?_0x532b35[0x4][_0x312a59(0xef)]():''});}tempImportData={'tickets':_0x3e38ff},tempCategory='TicketsTransit',showPriceModal('TicketsTransit\x20Import');}else{for(let _0x31b4af=0x1;_0x31b4af<_0xdb88d9['length'];_0x31b4af++){if(!_0xdb88d9[_0x31b4af][_0x312a59(0xef)]())continue;const _0xca7ff1=_0xdb88d9[_0x31b4af][_0x312a59(0x168)](','),_0x2a5041=_0xca7ff1[0x2][_0x312a59(0xef)]();!_0x1e9703[_0x2a5041]&&(_0x1e9703[_0x2a5041]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x1e9703[_0x2a5041][_0x312a59(0x15e)][_0x312a59(0x10f)](_0xca7ff1[0x0][_0x312a59(0xef)]()),_0x1e9703[_0x2a5041][_0x312a59(0x14a)][_0x312a59(0x10f)](_0xca7ff1[0x1][_0x312a59(0xef)]());}tempImportData=_0x1e9703;const _0xbc8ffa=Object[_0x312a59(0x188)](_0x1e9703)[0x0];showPriceModal(_0xbc8ffa);}}function handleTxtImport(_0x3b72cf){const _0x524ee7=_0x44b2e0,_0x2b75d0=_0x3b72cf[_0x524ee7(0x168)]('\x0a');let _0x462104={};if(currentDatabase===_0x524ee7(0x177)){const _0x614a7c=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0x568662=[];for(let _0x286172 of _0x2b75d0){_0x286172=_0x286172[_0x524ee7(0xef)]();if(!_0x286172||_0x286172==='/ip\x20hotspot\x20user')continue;const _0xbd8dfe=_0x286172['match'](_0x614a7c);if(_0xbd8dfe){const [_0x201a75,_0x1707a0,_0x173c3b,_0x43690e]=_0xbd8dfe;_0x568662[_0x524ee7(0x10f)]({'category':_0x43690e,'password':_0x173c3b,'user':_0x1707a0});}}tempImportData={'tickets':_0x568662},tempCategory=_0x524ee7(0x177),showPriceModal(_0x524ee7(0xfe));}else{const _0x5bad2f=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x5ddced of _0x2b75d0){_0x5ddced=_0x5ddced['trim']();if(!_0x5ddced||_0x5ddced===_0x524ee7(0x16f))continue;const _0x129ff9=_0x5ddced[_0x524ee7(0x142)](_0x5bad2f);if(_0x129ff9){const [_0x1f2335,_0x59cd3b,_0x4b1098,_0x270789]=_0x129ff9;!_0x462104[_0x270789]&&(_0x462104[_0x270789]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x462104[_0x270789][_0x524ee7(0x15e)][_0x524ee7(0x10f)](_0x59cd3b),_0x462104[_0x270789][_0x524ee7(0x14a)][_0x524ee7(0x10f)](_0x4b1098);}}if(Object[_0x524ee7(0x188)](_0x462104)[_0x524ee7(0x165)]===0x0){hideLoading(),alert('Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier');return;}tempImportData=_0x462104;const _0x210e38=Object[_0x524ee7(0x188)](_0x462104)[0x0];showPriceModal(_0x210e38);}}function showPriceModal(_0x221453){const _0x17c51a=_0x44b2e0;tempCategory=_0x221453,document[_0x17c51a(0x12d)](_0x17c51a(0x141))['textContent']=_0x221453,document[_0x17c51a(0x12d)](_0x17c51a(0x18c))[_0x17c51a(0x19c)][_0x17c51a(0x155)]='block',document[_0x17c51a(0x12d)](_0x17c51a(0x191))[_0x17c51a(0x144)]='';}function confirmPrice(){const _0x161d72=_0x44b2e0,_0x28d56b=document[_0x161d72(0x12d)]('priceInput')[_0x161d72(0x144)][_0x161d72(0xef)]();if(!_0x28d56b){alert('Veuillez\x20entrer\x20un\x20prix');return;}if(currentDatabase===_0x161d72(0x177))tempImportData['tickets'][_0x161d72(0x133)](_0x1135f5=>{_0x1135f5['price']=_0x28d56b;}),finishImportTransit();else{tempImportData[tempCategory][_0x161d72(0x102)]=Array(tempImportData[tempCategory]['motDePasse'][_0x161d72(0x165)])['fill'](_0x28d56b);const _0x491d0c=Object['keys'](tempImportData),_0x5790ab=_0x491d0c[_0x161d72(0x122)](tempCategory);_0x5790ab<_0x491d0c[_0x161d72(0x165)]-0x1?(document[_0x161d72(0x12d)](_0x161d72(0x191))['value']='',showPriceModal(_0x491d0c[_0x5790ab+0x1])):finishImport();}}function cancelImport(){const _0x11e6e0=_0x44b2e0;document[_0x11e6e0(0x12d)]('priceModal')[_0x11e6e0(0x19c)][_0x11e6e0(0x155)]='none',currentDatabase==='TicketsTransit'&&(tempImportData=null),document[_0x11e6e0(0x12d)](_0x11e6e0(0x160))[_0x11e6e0(0x144)]='',tempCategory=null,hideLoading();}function finishImportTransit(){const _0x279976=_0x44b2e0;if(confirm(_0x279976(0x171))){const _0xa5583d={};tempImportData['tickets']['forEach']((_0x1c3016,_0xfce560)=>{const _0x260a56=_0x279976,_0x20aec4=_0x1c3016['id']||'id-'+Date[_0x260a56(0x109)]()+'-'+_0xfce560;_0xa5583d[currentDatabase+'/'+_0x20aec4]={'id':_0x20aec4,'category':_0x1c3016[_0x260a56(0x13a)],'password':_0x1c3016[_0x260a56(0x10e)],'price':_0x1c3016['price'],'user':_0x1c3016[_0x260a56(0x152)]};}),database[_0x279976(0x196)]()[_0x279976(0x172)](_0xa5583d)[_0x279976(0x13e)](()=>{const _0x27bbfd=_0x279976;document['getElementById'](_0x27bbfd(0x18c))[_0x27bbfd(0x19c)][_0x27bbfd(0x155)]=_0x27bbfd(0x123),document[_0x27bbfd(0x12d)](_0x27bbfd(0x160))[_0x27bbfd(0x144)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x27bbfd(0xf2));})[_0x279976(0xf8)](_0x35a9ba=>{const _0x321066=_0x279976;console[_0x321066(0x105)](_0x321066(0x139),_0x35a9ba),hideLoading(),alert(_0x321066(0x180));});}else cancelImport();}function finishImport(){const _0x2a8a72=_0x44b2e0;if(confirm(_0x2a8a72(0x121))){const _0x26618a={};for(let _0x1fde42 in tempImportData){allTickets[_0x1fde42]?_0x26618a[currentDatabase+'/'+_0x1fde42]={'motDePasse':[...allTickets[_0x1fde42][_0x2a8a72(0x14a)],...tempImportData[_0x1fde42][_0x2a8a72(0x14a)]],'prix':[...allTickets[_0x1fde42][_0x2a8a72(0x102)],...tempImportData[_0x1fde42]['prix']],'utilisateur':[...allTickets[_0x1fde42][_0x2a8a72(0x15e)],...tempImportData[_0x1fde42]['utilisateur']]}:_0x26618a[currentDatabase+'/'+_0x1fde42]=tempImportData[_0x1fde42];}database['ref']()[_0x2a8a72(0x172)](_0x26618a)[_0x2a8a72(0x13e)](()=>{const _0x45243c=_0x2a8a72;document[_0x45243c(0x12d)](_0x45243c(0x18c))['style'][_0x45243c(0x155)]='none',document[_0x45243c(0x12d)]('importFile')['value']='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x45243c(0xf2));})[_0x2a8a72(0xf8)](_0x1606fc=>{const _0x160214=_0x2a8a72;console[_0x160214(0x105)](_0x160214(0x139),_0x1606fc),hideLoading(),alert(_0x160214(0x180));});}else cancelImport();}function importTickets(_0x4d9ed9){const _0x3ebdd1=_0x44b2e0,_0xfcce31=_0x4d9ed9[_0x3ebdd1(0x12a)][_0x3ebdd1(0x187)][0x0];if(!_0xfcce31)return;showLoading();const _0x138058=new FileReader();_0x138058['onload']=function(_0x1ea995){const _0x42ba2e=_0x3ebdd1;try{const _0x573c5e=_0xfcce31[_0x42ba2e(0x115)][_0x42ba2e(0x168)]('.')['pop']()[_0x42ba2e(0x174)]();if(_0x573c5e==='json')handleJsonImport(_0x1ea995[_0x42ba2e(0x12a)][_0x42ba2e(0x169)]);else{if(_0x573c5e===_0x42ba2e(0x15f))handleCsvImport(_0x1ea995['target'][_0x42ba2e(0x169)]);else{if(_0x573c5e==='txt')handleTxtImport(_0x1ea995[_0x42ba2e(0x12a)]['result']);else throw new Error(_0x42ba2e(0x15d));}}}catch(_0x38b2d7){console['error'](_0x42ba2e(0x117),_0x38b2d7),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.');}},_0x138058[_0x3ebdd1(0x11a)](_0xfcce31);}function deleteSearchResults(){const _0x2c04e2=_0x44b2e0,_0x56080b=document[_0x2c04e2(0x12d)](_0x2c04e2(0xed))[_0x2c04e2(0x144)]['trim']();if(!_0x56080b){alert(_0x2c04e2(0x12b));return;}if(confirm(_0x2c04e2(0x147))){showLoading();const _0x5da137={};if(currentDatabase===_0x2c04e2(0x177))for(let _0x1ba458 in allTickets){matchesSearchTransit(allTickets[_0x1ba458],_0x56080b)&&(_0x5da137[currentDatabase+'/'+_0x1ba458]=null);}else for(let _0x4c06e9 in allTickets){const _0x48495d=allTickets[_0x4c06e9],_0x22a62d={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x1a1612=0x0;_0x1a1612<_0x48495d[_0x2c04e2(0x14a)][_0x2c04e2(0x165)];_0x1a1612++){!matchesSearchTotal(_0x48495d,_0x1a1612,_0x56080b)&&(_0x22a62d[_0x2c04e2(0x14a)][_0x2c04e2(0x10f)](_0x48495d[_0x2c04e2(0x14a)][_0x1a1612]),_0x22a62d[_0x2c04e2(0x102)][_0x2c04e2(0x10f)](_0x48495d[_0x2c04e2(0x102)][_0x1a1612]),_0x22a62d[_0x2c04e2(0x15e)][_0x2c04e2(0x10f)](_0x48495d[_0x2c04e2(0x15e)][_0x1a1612]));}_0x5da137[currentDatabase+'/'+_0x4c06e9]=_0x22a62d;}database[_0x2c04e2(0x196)]()[_0x2c04e2(0x172)](_0x5da137)[_0x2c04e2(0x13e)](()=>{hideLoading(),alert('Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.');})[_0x2c04e2(0xf8)](_0x243c13=>{const _0x283cb0=_0x2c04e2;console['error'](_0x283cb0(0x116),_0x243c13),hideLoading(),alert(_0x283cb0(0x192));});}}function searchTickets(){const _0x1cb8b8=_0x44b2e0,_0xbb073e=document[_0x1cb8b8(0x12d)](_0x1cb8b8(0xed))[_0x1cb8b8(0x144)]['trim']();displayTickets(allTickets,_0xbb073e);}function checkAuth(){const _0xf09cd3=_0x44b2e0,_0xb5a68=sessionStorage[_0xf09cd3(0x149)]('isLoggedIn');if(!_0xb5a68)return window[_0xf09cd3(0x17c)][_0xf09cd3(0x18b)](_0xf09cd3(0x14c)),![];return!![];}function changeDatabase(){const _0x36917c=_0x44b2e0;currentDatabase=document[_0x36917c(0x12d)](_0x36917c(0x13d))[_0x36917c(0x144)],loadTickets();}window['onload']=()=>{checkAuth()&&loadTickets();};function logout(){const _0x4e7467=_0x44b2e0;sessionStorage[_0x4e7467(0x184)](),window[_0x4e7467(0x17c)][_0x4e7467(0x18b)](_0x4e7467(0x14c));}document[_0x44b2e0(0x12d)](_0x44b2e0(0xed))[_0x44b2e0(0x197)](_0x44b2e0(0x14d),searchTickets),window[_0x44b2e0(0x17f)]=()=>{checkAuth()&&loadTickets();};
            </script>
    
</body>
</html>