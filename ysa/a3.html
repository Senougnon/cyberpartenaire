<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* ... (vos variables CSS) ... */
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
        .logout-button {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        background-color: #e74c3c;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button:hover {
        background-color: #c0392b;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .logout-button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button i {
        font-size: 16px;
    }

    @media (max-width: 768px) {
        .logout-button {
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 12px;
        }
    }
      .database-selector {
        margin-bottom: 20px;
    }

    .database-selector select {
        padding: 10px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        color: var(--text-color);
        cursor: pointer;
    }

    .database-selector select:focus {
        outline: none;
        border-color: var(--primary-color);
    }
    </style>
</head>
<body>
<button onclick="logout()" class="logout-button">
    <i class="fas fa-sign-out-alt"></i> Déconnexion
</button>
    <div class="container">
        <h1>Gestion des tickets</h1>

        <div class="database-selector">
            <label for="databaseSelect">Choisir la base de données : </label>
            <select id="databaseSelect" onchange="changeDatabase()">
                <option value="TicketsTotal">TicketsTotal</option>
                <option value="TicketsTransit">TicketsTransit</option>
            </select>
        </div>

        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".json,.csv,.txt" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editId" placeholder="ID" disabled>
            <input type="text" id="editCategory" placeholder="Catégorie">
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newCategory" placeholder="Catégorie">
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
const _0x113d6f=_0x4265;(function(_0x8b485a,_0x56c3e4){const _0x438792=_0x4265,_0x170f57=_0x8b485a();while(!![]){try{const _0x591681=-parseInt(_0x438792(0x186))/0x1*(parseInt(_0x438792(0x1a0))/0x2)+parseInt(_0x438792(0x123))/0x3*(parseInt(_0x438792(0x13b))/0x4)+parseInt(_0x438792(0x16a))/0x5*(parseInt(_0x438792(0x1c6))/0x6)+parseInt(_0x438792(0x1b4))/0x7+parseInt(_0x438792(0x163))/0x8+parseInt(_0x438792(0x135))/0x9*(parseInt(_0x438792(0x178))/0xa)+parseInt(_0x438792(0x143))/0xb*(-parseInt(_0x438792(0x129))/0xc);if(_0x591681===_0x56c3e4)break;else _0x170f57['push'](_0x170f57['shift']());}catch(_0x84eafa){_0x170f57['push'](_0x170f57['shift']());}}}(_0x5ea9,0xa2407));const firebaseConfig={'apiKey':'AIzaSyDYjNFHtLL6sZBu7qNPypiFEWcTZg2e9TY','authDomain':_0x113d6f(0x15d),'databaseURL':'https://ysawifi100-default-rtdb.firebaseio.com','projectId':_0x113d6f(0x1c7),'storageBucket':_0x113d6f(0x183),'messagingSenderId':'673271137298','appId':_0x113d6f(0x13a),'measurementId':_0x113d6f(0x142)};firebase[_0x113d6f(0x19b)](firebaseConfig);const database=firebase[_0x113d6f(0x12b)]();let allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,currentDatabase=_0x113d6f(0x17e),editingCategory='',editingIndex=-0x1,editingId='';(function(){const _0x218ccd=_0x113d6f,_0x4f6f52=sessionStorage[_0x218ccd(0x13f)](_0x218ccd(0x140));!_0x4f6f52&&window[_0x218ccd(0x162)][_0x218ccd(0x1a7)]('login.html');}()),document['addEventListener'](_0x113d6f(0x15a),function(){const _0x2276d0=_0x113d6f;!sessionStorage[_0x2276d0(0x13f)](_0x2276d0(0x140))&&window['location'][_0x2276d0(0x1a7)](_0x2276d0(0x195));}),window[_0x113d6f(0x152)]('pageshow',function(_0x5951f3){const _0x974e6a=_0x113d6f;(_0x5951f3['persisted']||!sessionStorage[_0x974e6a(0x13f)](_0x974e6a(0x140)))&&window['location']['replace'](_0x974e6a(0x195));});function showLoading(){const _0x185b81=_0x113d6f;document['getElementById']('loadingIndicator')[_0x185b81(0x12c)]['display']=_0x185b81(0x176);}function hideLoading(){const _0x1ffb27=_0x113d6f;document[_0x1ffb27(0x189)]('loadingIndicator')[_0x1ffb27(0x12c)][_0x1ffb27(0x14f)]='none';}function loadTickets(){const _0x1a952e=_0x113d6f;showLoading();const _0x38bbb5=database[_0x1a952e(0x197)](currentDatabase);_0x38bbb5['on'](_0x1a952e(0x139),_0x258bef=>{const _0x4ba6d2=_0x1a952e;allTickets=_0x258bef[_0x4ba6d2(0x19f)]()||{},displayTickets(allTickets),hideLoading();},_0x3f831b=>{const _0x1fa071=_0x1a952e;console['error']('Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:',_0x3f831b),hideLoading(),alert(_0x1fa071(0x156));});}function displayTickets(_0x42fb2b,_0x11eb16=''){const _0x1ce187=_0x113d6f,_0x3b03ff=document['getElementById'](_0x1ce187(0x1b5));_0x3b03ff[_0x1ce187(0x14e)]='';if(currentDatabase===_0x1ce187(0x17e))displayTicketsTotal(_0x42fb2b,_0x11eb16);else currentDatabase===_0x1ce187(0x15f)&&displayTicketsTransit(_0x42fb2b,_0x11eb16);}function displayTicketsTotal(_0x37478b,_0x2e5b77=''){const _0x50a4fa=_0x113d6f,_0xa38a7c=document['getElementById']('ticketCategories');for(let _0x31447d in _0x37478b){const _0x251353=_0x37478b[_0x31447d],_0x2b259f=_0x50a4fa(0x19d)+_0x31447d+_0x50a4fa(0x17a)+_0x31447d+_0x50a4fa(0x164)+_0x31447d+_0x50a4fa(0x1b1)+_0x31447d+'\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20'+_0x31447d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_'+_0x31447d+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27'+_0x31447d+_0x50a4fa(0x124)+_0x31447d+'\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20'+_0x31447d+_0x50a4fa(0x198)+_0x31447d+_0x50a4fa(0x14b)+generateTicketRowsTotal(_0x31447d,_0x251353,_0x2e5b77)+_0x50a4fa(0x15b)+_0x31447d+_0x50a4fa(0x1be)+_0x31447d+_0x50a4fa(0x199);_0xa38a7c[_0x50a4fa(0x14e)]+=_0x2b259f;}}function generateTicketRowsTotal(_0x7e183e,_0x59cc7e,_0x2d119b){const _0x3dfe80=_0x113d6f;let _0x443075='';for(let _0x32bf77=0x0;_0x32bf77<_0x59cc7e[_0x3dfe80(0x12e)]['length'];_0x32bf77++){if(_0x2d119b&&!matchesSearchTotal(_0x59cc7e,_0x32bf77,_0x2d119b))continue;_0x443075+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_'+_0x7e183e+_0x3dfe80(0x1c4)+_0x32bf77+_0x3dfe80(0x1ce)+highlightMatch(_0x59cc7e[_0x3dfe80(0x12e)][_0x32bf77],_0x2d119b)+_0x3dfe80(0x1a3)+highlightMatch(_0x59cc7e['prix'][_0x32bf77],_0x2d119b)+_0x3dfe80(0x1a3)+highlightMatch(_0x59cc7e[_0x3dfe80(0x1bf)][_0x32bf77],_0x2d119b)+_0x3dfe80(0x161)+_0x7e183e+_0x3dfe80(0x1a1)+_0x32bf77+')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(\x27'+_0x7e183e+'\x27,\x20'+_0x32bf77+_0x3dfe80(0x16b);}return _0x443075;}function displayTicketsTransit(_0x33ad2c,_0x4637b9=''){const _0x4f6597=_0x113d6f,_0x2e0bfa=document['getElementById'](_0x4f6597(0x1b5));_0x2e0bfa[_0x4f6597(0x14e)]='';const _0x538205=_0x4f6597(0x167)+generateTicketRowsTransit(_0x33ad2c,_0x4637b9)+_0x4f6597(0x174);_0x2e0bfa['innerHTML']=_0x538205;}function generateTicketRowsTransit(_0x51c9a2,_0x45236e){const _0x92c4da=_0x113d6f;let _0x57f071='';for(let _0x4525b1 in _0x51c9a2){const _0x2cebf4=_0x51c9a2[_0x4525b1];if(_0x45236e&&!matchesSearchTransit(_0x2cebf4,_0x45236e))continue;_0x57f071+=_0x92c4da(0x19a)+_0x4525b1+_0x92c4da(0x1ce)+highlightMatch(_0x4525b1,_0x45236e)+_0x92c4da(0x1a3)+highlightMatch(_0x2cebf4['category'],_0x45236e)+_0x92c4da(0x1a3)+highlightMatch(_0x2cebf4[_0x92c4da(0x1a8)],_0x45236e)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x2cebf4[_0x92c4da(0x138)],_0x45236e)+_0x92c4da(0x1a3)+highlightMatch(_0x2cebf4[_0x92c4da(0x1ab)],_0x45236e)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTransit(\x27'+_0x4525b1+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(null,null,\x20\x27'+_0x4525b1+_0x92c4da(0x133);}return _0x57f071;}function editTicketTransit(_0x199a47){const _0x382d3e=_0x113d6f,_0x3f947b=allTickets[_0x199a47];_0x3f947b?(editingId=_0x199a47,document[_0x382d3e(0x189)](_0x382d3e(0x11f))[_0x382d3e(0x139)]=_0x199a47,document[_0x382d3e(0x189)]('editCategory')[_0x382d3e(0x139)]=_0x3f947b['category'],document[_0x382d3e(0x189)](_0x382d3e(0x141))[_0x382d3e(0x139)]=_0x3f947b[_0x382d3e(0x1a8)],document[_0x382d3e(0x189)](_0x382d3e(0x159))[_0x382d3e(0x139)]=_0x3f947b[_0x382d3e(0x138)],document[_0x382d3e(0x189)](_0x382d3e(0x175))[_0x382d3e(0x139)]=_0x3f947b['user'],document[_0x382d3e(0x189)](_0x382d3e(0x12f))[_0x382d3e(0x12c)][_0x382d3e(0x14f)]=_0x382d3e(0x149)):alert(_0x382d3e(0x1cd));}function saveTicketEdit(){const _0x4921cd=_0x113d6f,_0x64bdbc=document[_0x4921cd(0x189)](_0x4921cd(0x141))[_0x4921cd(0x139)],_0x3c99c4=document[_0x4921cd(0x189)](_0x4921cd(0x159))[_0x4921cd(0x139)],_0x2bfcb0=document[_0x4921cd(0x189)](_0x4921cd(0x175))[_0x4921cd(0x139)],_0x350daa=document[_0x4921cd(0x189)](_0x4921cd(0x1b0))[_0x4921cd(0x139)];if(!_0x64bdbc||!_0x3c99c4||!_0x2bfcb0||!_0x350daa){alert(_0x4921cd(0x165));return;}showLoading();if(currentDatabase==='TicketsTotal'){const _0x469cb0=allTickets[editingCategory];_0x469cb0[_0x4921cd(0x12e)][editingIndex]=_0x64bdbc,_0x469cb0[_0x4921cd(0x1b9)][editingIndex]=_0x3c99c4,_0x469cb0[_0x4921cd(0x1bf)][editingIndex]=_0x2bfcb0;const _0x28fd61={[currentDatabase+'/'+editingCategory]:_0x469cb0};database[_0x4921cd(0x197)]()[_0x4921cd(0x150)](_0x28fd61)['then'](()=>{hideLoading(),closeEditModal(),alert('Ticket\x20modifié\x20avec\x20succès!');})[_0x4921cd(0x16c)](_0x3101fd=>{const _0x27ada3=_0x4921cd;console[_0x27ada3(0x122)](_0x27ada3(0x1ca),_0x3101fd),hideLoading(),alert(_0x27ada3(0x158));});}else{if(currentDatabase===_0x4921cd(0x15f)){const _0x534e17=database[_0x4921cd(0x197)](currentDatabase+'/'+editingId);_0x534e17['update']({'category':_0x350daa,'password':_0x64bdbc,'price':_0x3c99c4,'user':_0x2bfcb0})[_0x4921cd(0x1c2)](()=>{const _0x4613aa=_0x4921cd;hideLoading(),closeEditModal(),alert(_0x4613aa(0x166));})[_0x4921cd(0x16c)](_0x271418=>{const _0x1e8538=_0x4921cd;console['error'](_0x1e8538(0x1ca),_0x271418),hideLoading(),alert(_0x1e8538(0x158));});}}}function editTicketTotal(_0x501e38,_0x5f51f1){const _0x2faf4c=_0x113d6f;editingCategory=_0x501e38,editingIndex=_0x5f51f1;const _0x3c9308=allTickets[_0x501e38];document['getElementById'](_0x2faf4c(0x11f))[_0x2faf4c(0x139)]='',document[_0x2faf4c(0x189)](_0x2faf4c(0x1b0))['value']=_0x501e38,document[_0x2faf4c(0x189)](_0x2faf4c(0x141))[_0x2faf4c(0x139)]=_0x3c9308[_0x2faf4c(0x12e)][_0x5f51f1],document['getElementById'](_0x2faf4c(0x159))['value']=_0x3c9308['prix'][_0x5f51f1],document['getElementById'](_0x2faf4c(0x175))['value']=_0x3c9308[_0x2faf4c(0x1bf)][_0x5f51f1],document[_0x2faf4c(0x189)]('editTicketModal')[_0x2faf4c(0x12c)][_0x2faf4c(0x14f)]=_0x2faf4c(0x149);}function importTicketsToCategory(_0x4aacfd,_0x342fb5){const _0x317984=_0x113d6f,_0x23acb4=_0x342fb5[_0x317984(0x177)][_0x317984(0x1c0)][0x0];if(!_0x23acb4)return;showLoading();const _0x58e610=new FileReader();_0x58e610[_0x317984(0x181)]=function(_0x64ec1){const _0xefd272=_0x317984;try{const _0x2dda6e=_0x23acb4['name'][_0xefd272(0x169)]('.')[_0xefd272(0x19c)]()[_0xefd272(0x17c)]();if(_0x2dda6e===_0xefd272(0x13c))handleJsonImportToCategory(_0x64ec1[_0xefd272(0x177)][_0xefd272(0x1c3)],_0x4aacfd);else{if(_0x2dda6e===_0xefd272(0x1b7))handleCsvImportToCategory(_0x64ec1[_0xefd272(0x177)]['result'],_0x4aacfd);else{if(_0x2dda6e===_0xefd272(0x126))handleTxtImportToCategory(_0x64ec1[_0xefd272(0x177)]['result'],_0x4aacfd);else throw new Error(_0xefd272(0x13e));}}}catch(_0x29f597){console[_0xefd272(0x122)](_0xefd272(0x1a2),_0x29f597),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.');}},_0x58e610[_0x317984(0x1c5)](_0x23acb4);}function handleJsonImportToCategory(_0x110a99,_0x341c39){const _0x5a8e5c=_0x113d6f,_0x259cd5=JSON[_0x5a8e5c(0x1b8)](_0x110a99);if(currentDatabase===_0x5a8e5c(0x15f))for(let _0x92c85c in _0x259cd5){if(!_0x259cd5[_0x92c85c]['category']||!_0x259cd5[_0x92c85c][_0x5a8e5c(0x1a8)]||!_0x259cd5[_0x92c85c]['price']||!_0x259cd5[_0x92c85c][_0x5a8e5c(0x1ab)]){hideLoading(),alert(_0x5a8e5c(0x128));return;}}else{if(_0x341c39===_0x5a8e5c(0x15f))for(let _0x466da8 in _0x259cd5){if(!_0x259cd5[_0x466da8][_0x5a8e5c(0x16d)]||!_0x259cd5[_0x466da8]['password']||!_0x259cd5[_0x466da8][_0x5a8e5c(0x138)]||!_0x259cd5[_0x466da8]['user']){hideLoading(),alert(_0x5a8e5c(0x128));return;}}else{if(!_0x259cd5[_0x341c39]||!_0x259cd5[_0x341c39]['motDePasse']||!_0x259cd5[_0x341c39][_0x5a8e5c(0x1b9)]||!_0x259cd5[_0x341c39][_0x5a8e5c(0x1bf)]){hideLoading(),alert(_0x5a8e5c(0x191));return;}}}mergeTicketsToCategory(_0x341c39,_0x259cd5);}function handleCsvImportToCategory(_0x24539e,_0x478356){const _0x54cd60=_0x113d6f,_0x276fbe=_0x24539e[_0x54cd60(0x169)]('\x0a');let _0x59acf0={};if(currentDatabase===_0x54cd60(0x15f)){let _0x1dd72d=[];for(let _0x722fe3=0x1;_0x722fe3<_0x276fbe[_0x54cd60(0x1c8)];_0x722fe3++){if(!_0x276fbe[_0x722fe3]['trim']())continue;const _0x1fff54=_0x276fbe[_0x722fe3][_0x54cd60(0x169)](','),_0x10d462=_0x1fff54[0x0]?_0x1fff54[0x0]['trim']():_0x54cd60(0x187)+Date[_0x54cd60(0x131)]()+'-'+_0x722fe3;_0x1dd72d[_0x54cd60(0x18c)]({'id':_0x10d462,'category':_0x1fff54[0x1]?_0x1fff54[0x1][_0x54cd60(0x127)]():_0x54cd60(0x182),'password':_0x1fff54[0x2]?_0x1fff54[0x2][_0x54cd60(0x127)]():'','price':_0x1fff54[0x3]?_0x1fff54[0x3]['trim']():'','user':_0x1fff54[0x4]?_0x1fff54[0x4][_0x54cd60(0x127)]():''});}tempImportData={'tickets':_0x1dd72d},tempCategory='TicketsTransit',showPriceModal('TicketsTransit\x20Import');}else{const _0x285451={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0xfd1aa0=0x1;_0xfd1aa0<_0x276fbe[_0x54cd60(0x1c8)];_0xfd1aa0++){if(!_0x276fbe[_0xfd1aa0][_0x54cd60(0x127)]())continue;const _0x738991=_0x276fbe[_0xfd1aa0][_0x54cd60(0x169)](',');_0x285451[_0x54cd60(0x1bf)][_0x54cd60(0x18c)](_0x738991[0x0][_0x54cd60(0x127)]()),_0x285451[_0x54cd60(0x12e)][_0x54cd60(0x18c)](_0x738991[0x1]['trim']()),_0x738991[0x3]&&_0x285451[_0x54cd60(0x1b9)][_0x54cd60(0x18c)](_0x738991[0x3][_0x54cd60(0x127)]());}!_0x285451[_0x54cd60(0x1b9)][_0x54cd60(0x1c8)]?(tempImportData={[_0x478356]:_0x285451},tempCategory=_0x478356,showPriceModal(_0x478356)):mergeTicketsToCategory(_0x478356,_0x285451);}}function handleTxtImportToCategory(_0x1a8d92,_0x118f6e){const _0x22f50b=_0x113d6f,_0x17c867=_0x1a8d92['split']('\x0a');let _0x309490={};if(currentDatabase===_0x22f50b(0x15f)){const _0x40b882=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0xde690c={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x5b01c4 of _0x17c867){_0x5b01c4=_0x5b01c4['trim']();if(!_0x5b01c4||_0x5b01c4==='/ip\x20hotspot\x20user')continue;const _0xeac1ed=_0x5b01c4['match'](_0x40b882);if(_0xeac1ed){const [_0x3e3bf0,_0x10a43e,_0x221963,_0x2e7f16]=_0xeac1ed;_0xde690c[_0x22f50b(0x1bf)][_0x22f50b(0x18c)](_0x10a43e),_0xde690c['motDePasse'][_0x22f50b(0x18c)](_0x221963),_0xde690c[_0x22f50b(0x1b9)][_0x22f50b(0x18c)](_0x2e7f16);}}for(let _0x1f95ca=0x0;_0x1f95ca<_0xde690c[_0x22f50b(0x1bf)][_0x22f50b(0x1c8)];_0x1f95ca++){const _0x1972f9=_0x22f50b(0x187)+Date[_0x22f50b(0x131)]()+'-'+_0x1f95ca;_0x309490[_0x1972f9]={'id':_0x1972f9,'category':_0x22f50b(0x146),'password':_0xde690c['motDePasse'][_0x1f95ca],'price':'1','user':_0xde690c[_0x22f50b(0x1bf)][_0x1f95ca]};}Object[_0x22f50b(0x125)](_0x309490)[_0x22f50b(0x1c8)]>0x0?mergeTicketsToCategory(null,_0x309490):(hideLoading(),alert(_0x22f50b(0x1cf)));}else{const _0x471529=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x3b1ed6 of _0x17c867){_0x3b1ed6=_0x3b1ed6[_0x22f50b(0x127)]();if(!_0x3b1ed6||_0x3b1ed6===_0x22f50b(0x14a))continue;const _0x2e00bb=_0x3b1ed6['match'](_0x471529);if(_0x2e00bb){const [_0x410322,_0x1610d6,_0x18ff4c,_0x5c344c]=_0x2e00bb;!_0x309490[_0x5c344c]&&(_0x309490[_0x5c344c]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x309490[_0x5c344c][_0x22f50b(0x1bf)][_0x22f50b(0x18c)](_0x1610d6),_0x309490[_0x5c344c][_0x22f50b(0x12e)][_0x22f50b(0x18c)](_0x18ff4c);}}if(Object[_0x22f50b(0x125)](_0x309490)['length']===0x0){hideLoading(),alert(_0x22f50b(0x1c1));return;}tempImportData=_0x309490;const _0x2fa064=Object[_0x22f50b(0x125)](_0x309490)[0x0];showPriceModal(_0x2fa064);}}function mergeTicketsToCategory(_0x155324,_0x16bdbf){const _0x36bf7f=_0x113d6f;let _0x568b3a={};if(currentDatabase===_0x36bf7f(0x15f))for(let _0x4e64ab in _0x16bdbf){_0x568b3a[currentDatabase+'/'+_0x4e64ab]=_0x16bdbf[_0x4e64ab];}else{!allTickets[_0x155324]&&(allTickets[_0x155324]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0x667d15=allTickets[_0x155324],_0x144d58={'motDePasse':[..._0x667d15['motDePasse'],..._0x16bdbf[_0x36bf7f(0x12e)]],'prix':[..._0x667d15[_0x36bf7f(0x1b9)],..._0x16bdbf[_0x36bf7f(0x1b9)]],'utilisateur':[..._0x667d15[_0x36bf7f(0x1bf)],..._0x16bdbf[_0x36bf7f(0x1bf)]]};_0x568b3a[currentDatabase+'/'+_0x155324]=_0x144d58;}database['ref']()['update'](_0x568b3a)['then'](()=>{const _0x7153a8=_0x36bf7f;hideLoading(),alert(_0x7153a8(0x168)+(_0x155324||_0x7153a8(0x15f))+'!');})[_0x36bf7f(0x16c)](_0x2c103d=>{const _0x103047=_0x36bf7f;console['error'](_0x103047(0x1ad),_0x2c103d),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.');});}function editCategory(_0xe06696){const _0x50f53e=_0x113d6f;currentEditingCategory=_0xe06696,document[_0x50f53e(0x189)](_0x50f53e(0x188))[_0x50f53e(0x139)]=_0xe06696,document[_0x50f53e(0x189)](_0x50f53e(0x184))[_0x50f53e(0x12c)][_0x50f53e(0x14f)]=_0x50f53e(0x149);}function saveCategoryEdit(){const _0x598e78=_0x113d6f,_0x41938d=document['getElementById'](_0x598e78(0x188))[_0x598e78(0x139)]['trim']();if(!_0x41938d){alert(_0x598e78(0x1a6));return;}if(_0x41938d===currentEditingCategory){closeEditCategoryModal();return;}showLoading();const _0x33b102=allTickets[currentEditingCategory],_0x19d53b={[currentDatabase+'/'+currentEditingCategory]:null,[currentDatabase+'/'+_0x41938d]:_0x33b102};database[_0x598e78(0x197)]()[_0x598e78(0x150)](_0x19d53b)[_0x598e78(0x1c2)](()=>{const _0x5d35f0=_0x598e78;hideLoading(),closeEditCategoryModal(),alert(_0x5d35f0(0x16e));})['catch'](_0xb0e724=>{const _0xc25023=_0x598e78;console['error'](_0xc25023(0x1b2),_0xb0e724),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie');});}function showAddTicketModal(_0x1c4f08){const _0x387362=_0x113d6f;currentEditingCategory=_0x1c4f08,document[_0x387362(0x189)](_0x387362(0x134))['value']='',document['getElementById'](_0x387362(0x136))[_0x387362(0x139)]='',document[_0x387362(0x189)](_0x387362(0x18e))[_0x387362(0x139)]='',document[_0x387362(0x189)](_0x387362(0x17f))[_0x387362(0x139)]='',document[_0x387362(0x189)](_0x387362(0x1b6))[_0x387362(0x12c)][_0x387362(0x14f)]=_0x387362(0x149);}function saveNewTicket(){const _0x14bed0=_0x113d6f;showLoading();if(currentDatabase==='TicketsTransit'){const _0x210ca8=_0x14bed0(0x187)+Date[_0x14bed0(0x131)](),_0x232296={'id':_0x210ca8,'category':document['getElementById'](_0x14bed0(0x17f))['value'][_0x14bed0(0x127)](),'password':document[_0x14bed0(0x189)]('newPassword')[_0x14bed0(0x139)][_0x14bed0(0x127)](),'price':document[_0x14bed0(0x189)]('newPrice')['value'][_0x14bed0(0x127)](),'user':document[_0x14bed0(0x189)]('newUser')[_0x14bed0(0x139)][_0x14bed0(0x127)]()};database[_0x14bed0(0x197)](currentDatabase+'/'+_0x210ca8)[_0x14bed0(0x137)](_0x232296)[_0x14bed0(0x1c2)](()=>{const _0x5c1828=_0x14bed0;hideLoading(),closeAddTicketModal(),alert(_0x5c1828(0x1a9));})[_0x14bed0(0x16c)](_0x5968b8=>{const _0x1658b8=_0x14bed0;console['error'](_0x1658b8(0x1a4),_0x5968b8),hideLoading(),alert(_0x1658b8(0x1d1));});}else{const _0x517011=currentEditingCategory,_0x1b8718={'password':document[_0x14bed0(0x189)]('newPassword')[_0x14bed0(0x139)][_0x14bed0(0x127)](),'price':document[_0x14bed0(0x189)](_0x14bed0(0x136))[_0x14bed0(0x139)][_0x14bed0(0x127)](),'user':document[_0x14bed0(0x189)]('newUser')[_0x14bed0(0x139)][_0x14bed0(0x127)]()},_0x3d497b=allTickets[_0x517011]||{'motDePasse':[],'prix':[],'utilisateur':[]};_0x3d497b[_0x14bed0(0x12e)][_0x14bed0(0x18c)](_0x1b8718[_0x14bed0(0x1a8)]),_0x3d497b[_0x14bed0(0x1b9)][_0x14bed0(0x18c)](_0x1b8718[_0x14bed0(0x138)]),_0x3d497b[_0x14bed0(0x1bf)][_0x14bed0(0x18c)](_0x1b8718[_0x14bed0(0x1ab)]),database['ref'](currentDatabase+'/'+_0x517011)['set'](_0x3d497b)[_0x14bed0(0x1c2)](()=>{const _0xd182b1=_0x14bed0;hideLoading(),closeAddTicketModal(),alert(_0xd182b1(0x15e));})[_0x14bed0(0x16c)](_0x1699cd=>{const _0x577430=_0x14bed0;console[_0x577430(0x122)](_0x577430(0x1a4),_0x1699cd),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket');});}}function closeEditModal(){const _0x437769=_0x113d6f;document['getElementById'](_0x437769(0x12f))[_0x437769(0x12c)][_0x437769(0x14f)]=_0x437769(0x154),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0xef4b79=_0x113d6f;document['getElementById'](_0xef4b79(0x184))[_0xef4b79(0x12c)]['display']=_0xef4b79(0x154),currentEditingCategory=null;}function closeAddTicketModal(){const _0x57837d=_0x113d6f;document['getElementById'](_0x57837d(0x1b6))[_0x57837d(0x12c)][_0x57837d(0x14f)]='none',currentEditingCategory=null;}function matchesSearchTotal(_0x4e8979,_0x18ea81,_0x59ec9d){const _0x2484ca=_0x113d6f,_0x10dc31=_0x59ec9d[_0x2484ca(0x17c)]();return _0x4e8979[_0x2484ca(0x12e)][_0x18ea81][_0x2484ca(0x17c)]()['includes'](_0x10dc31)||_0x4e8979['prix'][_0x18ea81][_0x2484ca(0x17c)]()['includes'](_0x10dc31)||_0x4e8979[_0x2484ca(0x1bf)][_0x18ea81][_0x2484ca(0x17c)]()[_0x2484ca(0x18d)](_0x10dc31);}function matchesSearchTransit(_0x4a2ae0,_0x3ddde8){const _0x30448d=_0x113d6f,_0x145188=_0x3ddde8['toLowerCase']();return _0x4a2ae0['id']&&_0x4a2ae0['id']['toLowerCase']()[_0x30448d(0x18d)](_0x145188)||_0x4a2ae0[_0x30448d(0x16d)]&&_0x4a2ae0[_0x30448d(0x16d)][_0x30448d(0x17c)]()[_0x30448d(0x18d)](_0x145188)||_0x4a2ae0[_0x30448d(0x1a8)]&&_0x4a2ae0['password'][_0x30448d(0x17c)]()[_0x30448d(0x18d)](_0x145188)||_0x4a2ae0[_0x30448d(0x138)]&&_0x4a2ae0['price'][_0x30448d(0x17c)]()[_0x30448d(0x18d)](_0x145188)||_0x4a2ae0[_0x30448d(0x1ab)]&&_0x4a2ae0[_0x30448d(0x1ab)][_0x30448d(0x17c)]()[_0x30448d(0x18d)](_0x145188);}function matchesSearch(_0xf94874,_0x4175bc,_0x2c4405){const _0x5eacbb=_0x113d6f;if(currentDatabase===_0x5eacbb(0x17e))return matchesSearchTotal(_0xf94874,_0x4175bc,_0x2c4405);else{if(currentDatabase===_0x5eacbb(0x15f))return matchesSearchTransit(_0xf94874,_0x2c4405);}return![];}function highlightMatch(_0x593721,_0x2c48a7){const _0x5d9a1d=_0x113d6f;if(!_0x2c48a7)return _0x593721;const _0x4cba38=new RegExp(_0x2c48a7,'gi');return _0x593721[_0x5d9a1d(0x1a7)](_0x4cba38,_0x4623c4=>_0x5d9a1d(0x1a5)+_0x4623c4+'</span>');}function deleteTicket(_0xbb6f58,_0x5ab0b9,_0x4d47ca){const _0x111e73=_0x113d6f;if(confirm(_0x111e73(0x171))){showLoading();if(currentDatabase===_0x111e73(0x15f))database[_0x111e73(0x197)](currentDatabase+'/'+_0x4d47ca)['remove']()[_0x111e73(0x1c2)](()=>{const _0x46dd1e=_0x111e73;hideLoading(),alert(_0x46dd1e(0x121));})[_0x111e73(0x16c)](_0x315e2e=>{const _0x38ef5a=_0x111e73;console[_0x38ef5a(0x122)]('Erreur\x20lors\x20de\x20la\x20suppression:',_0x315e2e),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket');});else{const _0x528ef6=allTickets[_0xbb6f58];_0x528ef6[_0x111e73(0x12e)]['splice'](_0x5ab0b9,0x1),_0x528ef6[_0x111e73(0x1b9)][_0x111e73(0x1bd)](_0x5ab0b9,0x1),_0x528ef6[_0x111e73(0x1bf)][_0x111e73(0x1bd)](_0x5ab0b9,0x1),database[_0x111e73(0x197)](currentDatabase+'/'+_0xbb6f58)[_0x111e73(0x137)](_0x528ef6)[_0x111e73(0x1c2)](()=>{const _0x1f9f58=_0x111e73;hideLoading(),alert(_0x1f9f58(0x121));})[_0x111e73(0x16c)](_0x1f6875=>{const _0x2696e9=_0x111e73;console[_0x2696e9(0x122)](_0x2696e9(0x17b),_0x1f6875),hideLoading(),alert(_0x2696e9(0x14c));});}}}function deleteSelectedTickets(_0x4d546a){const _0x2d0cf3=_0x113d6f,_0x4174e0=document[_0x2d0cf3(0x18b)](_0x2d0cf3(0x157)+(_0x4d546a||_0x2d0cf3(0x1af))+_0x2d0cf3(0x196));if(_0x4174e0['length']===0x0){alert('Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer');return;}if(confirm(_0x2d0cf3(0x19e))){showLoading();const _0x4eee2a={};if(currentDatabase===_0x2d0cf3(0x15f))_0x4174e0[_0x2d0cf3(0x1ac)](_0x4b474e=>{const _0x1099d1=_0x2d0cf3,_0x406507=_0x4b474e[_0x1099d1(0x139)];_0x4eee2a[currentDatabase+'/'+_0x406507]=null;});else{const _0x4f1459=allTickets[_0x4d546a],_0x5ee080=Array[_0x2d0cf3(0x1b3)](_0x4174e0)['map'](_0x2bb74d=>parseInt(_0x2bb74d['value']))[_0x2d0cf3(0x179)]((_0x1e1fb1,_0x3b9f9d)=>_0x3b9f9d-_0x1e1fb1);_0x5ee080['forEach'](_0x40bd12=>{const _0x2f2164=_0x2d0cf3;_0x4f1459[_0x2f2164(0x12e)][_0x2f2164(0x1bd)](_0x40bd12,0x1),_0x4f1459['prix'][_0x2f2164(0x1bd)](_0x40bd12,0x1),_0x4f1459[_0x2f2164(0x1bf)]['splice'](_0x40bd12,0x1);}),_0x4eee2a[currentDatabase+'/'+_0x4d546a]=_0x4f1459;}database[_0x2d0cf3(0x197)]()[_0x2d0cf3(0x150)](_0x4eee2a)['then'](()=>{hideLoading(),alert('Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!');})[_0x2d0cf3(0x16c)](_0x17d8d3=>{const _0x42b0a3=_0x2d0cf3;console[_0x42b0a3(0x122)](_0x42b0a3(0x17b),_0x17d8d3),hideLoading(),alert(_0x42b0a3(0x120));});}}function _0x5ea9(){const _0x5c9ef3=['Tous\x20les\x20champs\x20sont\x20obligatoires','Ticket\x20modifié\x20avec\x20succès!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Tickets\x20en\x20transit</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_Transit\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20TicketsTransit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_Transit\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27TicketsTransit\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(null)\x22>Supprimer\x20tous\x20les\x20tickets</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_Transit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Importation\x20réussie\x20dans\x20','split','618015EyVaZs',',null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','catch','category','Catégorie\x20modifiée\x20avec\x20succès!','clear','.json','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?','tickets','priceModal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(null)\x22>Supprimer\x20les\x20tickets\x20sélectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','editUser','flex','target','20VrxyVS','sort','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22editCategory(\x27','Erreur\x20lors\x20de\x20la\x20suppression:','toLowerCase','Veuillez\x20entrer\x20un\x20prix','TicketsTotal','newCategory','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:','onload','N/A','ysawifi100.firebasestorage.app','editCategoryModal','Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!','52321gBnrtB','id-','editCategoryName','getElementById','categoryName','querySelectorAll','push','includes','newUser','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','download','Format\x20JSON\x20invalide\x20pour\x20TicketsTotal','fill','Tous\x20les\x20tickets\x20ont\x20été\x20supprimés\x20avec\x20succès!','createElement','login.html','\x22]:checked','ref','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_Transit\x22\x20value=\x22','initializeApp','pop','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?','val','32yLGuGx','\x27,\x20','Erreur\x20d\x27importation:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:','<span\x20class=\x22highlight\x22>','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide','replace','password','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTransit!','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','user','forEach','Erreur\x20lors\x20de\x20l\x27importation:','Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.','Transit','editCategory','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:','from','7708232ycjHPJ','ticketCategories','addTicketModal','csv','parse','prix','tickets_export_','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20','body','splice','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','utilisateur','files','Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier','then','result','\x22\x20value=\x22','readAsText','60TFkzeQ','ysawifi100','length','databaseSelect','Erreur\x20lors\x20de\x20la\x20modification:','priceInput','click','Ticket\x20introuvable.','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Aucun\x20ticket\x20valide\x20trouvé\x20dans\x20le\x20fichier\x20pour\x20TicketsTransit','indexOf','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','editId','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','Ticket\x20supprimé\x20avec\x20succès!','error','903711bazSXa','\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27','keys','txt','trim','Format\x20JSON\x20invalide\x20pour\x20TicketsTransit','34562556nxMrVL','match','database','style','remove','motDePasse','editTicketModal','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.','now','appendChild','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','newPassword','5724333SSPTgA','newPrice','set','price','value','1:673271137298:web:37d619a421882a21dc44cb','4PLrZwa','json','name','Format\x20de\x20fichier\x20non\x20supporté','getItem','isLoggedIn','editPassword','G-WCX5GM4K15','11MLrowL','setAttribute','data:text/json;charset=utf-8,','Cadeau','searchBar','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','block','/ip\x20hotspot\x20user','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket','importFile','innerHTML','display','update','stringify','addEventListener','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?','none','TicketsTransit\x20Import','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','input[name^=\x22ticketSelect_','Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket','editPrice','DOMContentLoaded','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27','Importation\x20réussie\x20!','ysawifi100.firebaseapp.com','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTotal!','TicketsTransit','href','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTotal(\x27','location','3771320FtwaCq','\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(\x27'];_0x5ea9=function(){return _0x5c9ef3;};return _0x5ea9();}function deleteAllTicketsInCategory(_0x5257c6){const _0x4e69a5=_0x113d6f;confirm(_0x4e69a5(0x1bb)+(_0x5257c6||'TicketsTransit')+'\x20?')&&(showLoading(),currentDatabase===_0x4e69a5(0x15f)?database[_0x4e69a5(0x197)](currentDatabase)['set']({})[_0x4e69a5(0x1c2)](()=>{const _0x1d0a7d=_0x4e69a5;hideLoading(),alert(_0x1d0a7d(0x193));})[_0x4e69a5(0x16c)](_0x56fb6b=>{const _0x447c35=_0x4e69a5;console[_0x447c35(0x122)](_0x447c35(0x17b),_0x56fb6b),hideLoading(),alert(_0x447c35(0x120));}):database[_0x4e69a5(0x197)](currentDatabase+'/'+_0x5257c6)[_0x4e69a5(0x137)]({'motDePasse':[],'prix':[],'utilisateur':[]})['then'](()=>{const _0x183cac=_0x4e69a5;hideLoading(),alert(_0x183cac(0x185));})[_0x4e69a5(0x16c)](_0x4aa462=>{const _0x1acd9f=_0x4e69a5;console[_0x1acd9f(0x122)]('Erreur\x20lors\x20de\x20la\x20suppression:',_0x4aa462),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets');}));}function _0x4265(_0x571c15,_0x49de7a){const _0x5ea9f3=_0x5ea9();return _0x4265=function(_0x4265a7,_0x52ee52){_0x4265a7=_0x4265a7-0x11f;let _0x911591=_0x5ea9f3[_0x4265a7];return _0x911591;},_0x4265(_0x571c15,_0x49de7a);}function exportTickets(){const _0x3924cf=_0x113d6f,_0x2856d2='data:text/json;charset=utf-8,'+encodeURIComponent(JSON[_0x3924cf(0x151)](allTickets,null,0x2)),_0x764e87=document[_0x3924cf(0x194)]('a');_0x764e87[_0x3924cf(0x144)](_0x3924cf(0x160),_0x2856d2),_0x764e87['setAttribute'](_0x3924cf(0x190),_0x3924cf(0x1ba)+currentDatabase+_0x3924cf(0x170)),document[_0x3924cf(0x1bc)][_0x3924cf(0x132)](_0x764e87),_0x764e87[_0x3924cf(0x1cc)](),_0x764e87[_0x3924cf(0x12d)]();}function exportFilteredTickets(){const _0x38dcf9=_0x113d6f,_0x6a6fcc=document['getElementById'](_0x38dcf9(0x147))['value'][_0x38dcf9(0x127)](),_0x1a4c57={};if(currentDatabase===_0x38dcf9(0x15f))for(let _0x218796 in allTickets){(!_0x6a6fcc||matchesSearchTransit(allTickets[_0x218796],_0x6a6fcc))&&(_0x1a4c57[_0x218796]=allTickets[_0x218796]);}else for(let _0xb37e10 in allTickets){const _0x240730=allTickets[_0xb37e10];_0x1a4c57[_0xb37e10]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0xf7005a=0x0;_0xf7005a<_0x240730[_0x38dcf9(0x12e)][_0x38dcf9(0x1c8)];_0xf7005a++){(!_0x6a6fcc||matchesSearchTotal(_0x240730,_0xf7005a,_0x6a6fcc))&&(_0x1a4c57[_0xb37e10][_0x38dcf9(0x12e)][_0x38dcf9(0x18c)](_0x240730['motDePasse'][_0xf7005a]),_0x1a4c57[_0xb37e10]['prix'][_0x38dcf9(0x18c)](_0x240730['prix'][_0xf7005a]),_0x1a4c57[_0xb37e10][_0x38dcf9(0x1bf)][_0x38dcf9(0x18c)](_0x240730[_0x38dcf9(0x1bf)][_0xf7005a]));}}const _0x4fad90=_0x38dcf9(0x145)+encodeURIComponent(JSON[_0x38dcf9(0x151)](_0x1a4c57,null,0x2)),_0x537368=document['createElement']('a');_0x537368[_0x38dcf9(0x144)]('href',_0x4fad90),_0x537368[_0x38dcf9(0x144)](_0x38dcf9(0x190),'filtered_tickets_export_'+currentDatabase+'.json'),document[_0x38dcf9(0x1bc)][_0x38dcf9(0x132)](_0x537368),_0x537368[_0x38dcf9(0x1cc)](),_0x537368[_0x38dcf9(0x12d)]();}function handleJsonImport(_0x4abf4a){const _0x295faf=_0x113d6f,_0x3256d2=JSON[_0x295faf(0x1b8)](_0x4abf4a);if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.')){const _0x1de32e={};for(let _0x20c17d in _0x3256d2){allTickets[_0x20c17d]?_0x1de32e[currentDatabase+'/'+_0x20c17d]={'motDePasse':[...allTickets[_0x20c17d][_0x295faf(0x12e)],..._0x3256d2[_0x20c17d][_0x295faf(0x12e)]],'prix':[...allTickets[_0x20c17d][_0x295faf(0x1b9)],..._0x3256d2[_0x20c17d][_0x295faf(0x1b9)]],'utilisateur':[...allTickets[_0x20c17d][_0x295faf(0x1bf)],..._0x3256d2[_0x20c17d][_0x295faf(0x1bf)]]}:_0x1de32e[currentDatabase+'/'+_0x20c17d]=_0x3256d2[_0x20c17d];}database[_0x295faf(0x197)]()[_0x295faf(0x150)](_0x1de32e)[_0x295faf(0x1c2)](()=>{const _0x1ccab3=_0x295faf;hideLoading(),alert(_0x1ccab3(0x15c));})[_0x295faf(0x16c)](_0x3ae073=>{const _0x3d5afe=_0x295faf;console[_0x3d5afe(0x122)](_0x3d5afe(0x1ad),_0x3ae073),hideLoading(),alert(_0x3d5afe(0x1aa));});}else hideLoading();}function handleCsvImport(_0x4a1a33){const _0x187afc=_0x113d6f,_0x1349d7=_0x4a1a33[_0x187afc(0x169)]('\x0a');let _0x478a38={};if(currentDatabase===_0x187afc(0x15f)){let _0xef4a1b=[];for(let _0x306ed1=0x1;_0x306ed1<_0x1349d7[_0x187afc(0x1c8)];_0x306ed1++){if(!_0x1349d7[_0x306ed1][_0x187afc(0x127)]())continue;const _0x1c42fd=_0x1349d7[_0x306ed1]['split'](','),_0x2099bb=_0x1c42fd[0x0]?_0x1c42fd[0x0][_0x187afc(0x127)]():_0x187afc(0x187)+Date[_0x187afc(0x131)]()+'-'+_0x306ed1;_0xef4a1b[_0x187afc(0x18c)]({'id':_0x2099bb,'category':_0x1c42fd[0x1]?_0x1c42fd[0x1][_0x187afc(0x127)]():_0x187afc(0x182),'password':_0x1c42fd[0x2]?_0x1c42fd[0x2][_0x187afc(0x127)]():'','price':_0x1c42fd[0x3]?_0x1c42fd[0x3][_0x187afc(0x127)]():'','user':_0x1c42fd[0x4]?_0x1c42fd[0x4][_0x187afc(0x127)]():''});}tempImportData={'tickets':_0xef4a1b},tempCategory=_0x187afc(0x15f),showPriceModal(_0x187afc(0x155));}else{for(let _0xa7c271=0x1;_0xa7c271<_0x1349d7['length'];_0xa7c271++){if(!_0x1349d7[_0xa7c271][_0x187afc(0x127)]())continue;const _0x14f237=_0x1349d7[_0xa7c271][_0x187afc(0x169)](','),_0x42f66b=_0x14f237[0x2]['trim']();!_0x478a38[_0x42f66b]&&(_0x478a38[_0x42f66b]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x478a38[_0x42f66b][_0x187afc(0x1bf)][_0x187afc(0x18c)](_0x14f237[0x0][_0x187afc(0x127)]()),_0x478a38[_0x42f66b][_0x187afc(0x12e)][_0x187afc(0x18c)](_0x14f237[0x1][_0x187afc(0x127)]());}tempImportData=_0x478a38;const _0x245280=Object[_0x187afc(0x125)](_0x478a38)[0x0];showPriceModal(_0x245280);}}function handleTxtImport(_0x3e36db){const _0x1565b1=_0x113d6f,_0x33761f=_0x3e36db[_0x1565b1(0x169)]('\x0a');let _0x33e419={};if(currentDatabase===_0x1565b1(0x15f)){const _0x58673d=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0x1531ba=[];for(let _0x2feebe of _0x33761f){_0x2feebe=_0x2feebe[_0x1565b1(0x127)]();if(!_0x2feebe||_0x2feebe==='/ip\x20hotspot\x20user')continue;const _0x2954c1=_0x2feebe['match'](_0x58673d);if(_0x2954c1){const [_0x42d3b9,_0x6d4b3c,_0x2824ad,_0x239988]=_0x2954c1;_0x1531ba[_0x1565b1(0x18c)]({'category':_0x239988,'password':_0x2824ad,'user':_0x6d4b3c});}}tempImportData={'tickets':_0x1531ba},tempCategory=_0x1565b1(0x15f),showPriceModal(_0x1565b1(0x155));}else{const _0x495751=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x57c9cf of _0x33761f){_0x57c9cf=_0x57c9cf[_0x1565b1(0x127)]();if(!_0x57c9cf||_0x57c9cf===_0x1565b1(0x14a))continue;const _0x37be36=_0x57c9cf[_0x1565b1(0x12a)](_0x495751);if(_0x37be36){const [_0x465306,_0x30d8c0,_0x482bef,_0x5464f9]=_0x37be36;!_0x33e419[_0x5464f9]&&(_0x33e419[_0x5464f9]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x33e419[_0x5464f9][_0x1565b1(0x1bf)]['push'](_0x30d8c0),_0x33e419[_0x5464f9]['motDePasse'][_0x1565b1(0x18c)](_0x482bef);}}if(Object['keys'](_0x33e419)[_0x1565b1(0x1c8)]===0x0){hideLoading(),alert(_0x1565b1(0x1c1));return;}tempImportData=_0x33e419;const _0x32e515=Object[_0x1565b1(0x125)](_0x33e419)[0x0];showPriceModal(_0x32e515);}}function showPriceModal(_0x3ceb2c){const _0x1d03fd=_0x113d6f;tempCategory=_0x3ceb2c,document[_0x1d03fd(0x189)](_0x1d03fd(0x18a))['textContent']=_0x3ceb2c,document[_0x1d03fd(0x189)](_0x1d03fd(0x173))[_0x1d03fd(0x12c)][_0x1d03fd(0x14f)]=_0x1d03fd(0x149),document[_0x1d03fd(0x189)]('priceInput')[_0x1d03fd(0x139)]='';}function confirmPrice(){const _0x33075e=_0x113d6f,_0x45ea27=document[_0x33075e(0x189)](_0x33075e(0x1cb))[_0x33075e(0x139)][_0x33075e(0x127)]();if(!_0x45ea27){alert(_0x33075e(0x17d));return;}if(currentDatabase===_0x33075e(0x15f))tempImportData[_0x33075e(0x172)][_0x33075e(0x1ac)](_0x37db97=>{const _0x2c3be3=_0x33075e;_0x37db97[_0x2c3be3(0x138)]=_0x45ea27;}),finishImportTransit();else{tempImportData[tempCategory][_0x33075e(0x1b9)]=Array(tempImportData[tempCategory][_0x33075e(0x12e)][_0x33075e(0x1c8)])[_0x33075e(0x192)](_0x45ea27);const _0x3cbf17=Object['keys'](tempImportData),_0x232308=_0x3cbf17[_0x33075e(0x1d0)](tempCategory);_0x232308<_0x3cbf17[_0x33075e(0x1c8)]-0x1?(document[_0x33075e(0x189)](_0x33075e(0x1cb))[_0x33075e(0x139)]='',showPriceModal(_0x3cbf17[_0x232308+0x1])):finishImport();}}function cancelImport(){const _0x5bdd6c=_0x113d6f;document[_0x5bdd6c(0x189)](_0x5bdd6c(0x173))[_0x5bdd6c(0x12c)][_0x5bdd6c(0x14f)]=_0x5bdd6c(0x154),currentDatabase===_0x5bdd6c(0x15f)&&(tempImportData=null),document[_0x5bdd6c(0x189)](_0x5bdd6c(0x14d))['value']='',tempCategory=null,hideLoading();}function finishImportTransit(){const _0x18432c=_0x113d6f;if(confirm(_0x18432c(0x153))){const _0x3634c0={};tempImportData[_0x18432c(0x172)]['forEach']((_0x1c03c7,_0x1173e2)=>{const _0x42cc3a=_0x18432c,_0x55abf5=_0x1c03c7['id']||_0x42cc3a(0x187)+Date[_0x42cc3a(0x131)]()+'-'+_0x1173e2;_0x3634c0[currentDatabase+'/'+_0x55abf5]={'id':_0x55abf5,'category':_0x1c03c7[_0x42cc3a(0x16d)],'password':_0x1c03c7[_0x42cc3a(0x1a8)],'price':_0x1c03c7[_0x42cc3a(0x138)],'user':_0x1c03c7[_0x42cc3a(0x1ab)]};}),database[_0x18432c(0x197)]()[_0x18432c(0x150)](_0x3634c0)['then'](()=>{const _0x493f0d=_0x18432c;document['getElementById']('priceModal')[_0x493f0d(0x12c)][_0x493f0d(0x14f)]=_0x493f0d(0x154),document[_0x493f0d(0x189)](_0x493f0d(0x14d))[_0x493f0d(0x139)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x493f0d(0x15c));})[_0x18432c(0x16c)](_0xb1a28a=>{const _0x50e1fe=_0x18432c;console[_0x50e1fe(0x122)](_0x50e1fe(0x1ad),_0xb1a28a),hideLoading(),alert(_0x50e1fe(0x1aa));});}else cancelImport();}function finishImport(){const _0x2c9aa1=_0x113d6f;if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.')){const _0x2a2599={};for(let _0x5bb375 in tempImportData){allTickets[_0x5bb375]?_0x2a2599[currentDatabase+'/'+_0x5bb375]={'motDePasse':[...allTickets[_0x5bb375][_0x2c9aa1(0x12e)],...tempImportData[_0x5bb375][_0x2c9aa1(0x12e)]],'prix':[...allTickets[_0x5bb375][_0x2c9aa1(0x1b9)],...tempImportData[_0x5bb375][_0x2c9aa1(0x1b9)]],'utilisateur':[...allTickets[_0x5bb375][_0x2c9aa1(0x1bf)],...tempImportData[_0x5bb375][_0x2c9aa1(0x1bf)]]}:_0x2a2599[currentDatabase+'/'+_0x5bb375]=tempImportData[_0x5bb375];}database[_0x2c9aa1(0x197)]()[_0x2c9aa1(0x150)](_0x2a2599)[_0x2c9aa1(0x1c2)](()=>{const _0x500ec5=_0x2c9aa1;document['getElementById']('priceModal')[_0x500ec5(0x12c)][_0x500ec5(0x14f)]='none',document['getElementById']('importFile')[_0x500ec5(0x139)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x500ec5(0x15c));})['catch'](_0x56bcd8=>{const _0x39d5ca=_0x2c9aa1;console[_0x39d5ca(0x122)](_0x39d5ca(0x1ad),_0x56bcd8),hideLoading(),alert(_0x39d5ca(0x1aa));});}else cancelImport();}function importTickets(_0x9755be){const _0x56e11b=_0x113d6f,_0x484d19=_0x9755be['target'][_0x56e11b(0x1c0)][0x0];if(!_0x484d19)return;showLoading();const _0x49cf03=new FileReader();_0x49cf03[_0x56e11b(0x181)]=function(_0x3ba409){const _0x4a94b7=_0x56e11b;try{const _0x5f0935=_0x484d19[_0x4a94b7(0x13d)][_0x4a94b7(0x169)]('.')[_0x4a94b7(0x19c)]()[_0x4a94b7(0x17c)]();if(_0x5f0935===_0x4a94b7(0x13c))handleJsonImport(_0x3ba409[_0x4a94b7(0x177)][_0x4a94b7(0x1c3)]);else{if(_0x5f0935===_0x4a94b7(0x1b7))handleCsvImport(_0x3ba409['target'][_0x4a94b7(0x1c3)]);else{if(_0x5f0935===_0x4a94b7(0x126))handleTxtImport(_0x3ba409[_0x4a94b7(0x177)][_0x4a94b7(0x1c3)]);else throw new Error(_0x4a94b7(0x13e));}}}catch(_0xa7a463){console[_0x4a94b7(0x122)](_0x4a94b7(0x1a2),_0xa7a463),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.');}},_0x49cf03['readAsText'](_0x484d19);}function deleteSearchResults(){const _0x4529c5=_0x113d6f,_0x36e75d=document[_0x4529c5(0x189)]('searchBar')[_0x4529c5(0x139)][_0x4529c5(0x127)]();if(!_0x36e75d){alert(_0x4529c5(0x130));return;}if(confirm(_0x4529c5(0x148))){showLoading();const _0x12be78={};if(currentDatabase===_0x4529c5(0x15f))for(let _0x3f6cd4 in allTickets){matchesSearchTransit(allTickets[_0x3f6cd4],_0x36e75d)&&(_0x12be78[currentDatabase+'/'+_0x3f6cd4]=null);}else for(let _0x482416 in allTickets){const _0x112340=allTickets[_0x482416],_0x338d95={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x12cd2b=0x0;_0x12cd2b<_0x112340[_0x4529c5(0x12e)][_0x4529c5(0x1c8)];_0x12cd2b++){!matchesSearchTotal(_0x112340,_0x12cd2b,_0x36e75d)&&(_0x338d95[_0x4529c5(0x12e)][_0x4529c5(0x18c)](_0x112340[_0x4529c5(0x12e)][_0x12cd2b]),_0x338d95[_0x4529c5(0x1b9)]['push'](_0x112340[_0x4529c5(0x1b9)][_0x12cd2b]),_0x338d95[_0x4529c5(0x1bf)][_0x4529c5(0x18c)](_0x112340[_0x4529c5(0x1bf)][_0x12cd2b]));}_0x12be78[currentDatabase+'/'+_0x482416]=_0x338d95;}database[_0x4529c5(0x197)]()[_0x4529c5(0x150)](_0x12be78)[_0x4529c5(0x1c2)](()=>{const _0xde2930=_0x4529c5;hideLoading(),alert(_0xde2930(0x1ae));})[_0x4529c5(0x16c)](_0x41b6e1=>{const _0x2e5deb=_0x4529c5;console['error'](_0x2e5deb(0x180),_0x41b6e1),hideLoading(),alert(_0x2e5deb(0x18f));});}}function searchTickets(){const _0x3a1008=_0x113d6f,_0x51e380=document[_0x3a1008(0x189)](_0x3a1008(0x147))[_0x3a1008(0x139)][_0x3a1008(0x127)]();displayTickets(allTickets,_0x51e380);}function checkAuth(){const _0x4bd270=_0x113d6f,_0x3d0f58=sessionStorage['getItem'](_0x4bd270(0x140));if(!_0x3d0f58)return window['location'][_0x4bd270(0x1a7)]('login.html'),![];return!![];}function changeDatabase(){const _0x1d44bb=_0x113d6f;currentDatabase=document[_0x1d44bb(0x189)](_0x1d44bb(0x1c9))['value'],loadTickets();}window[_0x113d6f(0x181)]=()=>{checkAuth()&&loadTickets();};function logout(){const _0x32ccd3=_0x113d6f;sessionStorage[_0x32ccd3(0x16f)](),window[_0x32ccd3(0x162)][_0x32ccd3(0x1a7)](_0x32ccd3(0x195));}document['getElementById'](_0x113d6f(0x147))[_0x113d6f(0x152)]('input',searchTickets),window[_0x113d6f(0x181)]=()=>{checkAuth()&&loadTickets();};
            </script>
    
</body>
</html>