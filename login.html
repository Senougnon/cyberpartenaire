<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion Cyber Campus</title>
    <style>
        /* ... (Le CSS de votre ancien login.html, inchangé) ... */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #36ff03, #1900ff, #a7ff03);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }

        header {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .header-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .img1 {
            animation: slide1 10s linear infinite;
        }

        .img2 {
            animation: slide2 10s linear infinite;
        }

        .logo {
            font-size: 2.5em;
            color: white;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }

        .logo::before {
            content: '';
            font-size: 0.8em;
            margin-right: 10px;
            animation: rotate 5s linear infinite;
            display: inline-block;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .moon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: nowrap; /* Empêche le retour à la ligne */
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 0; /* Supprime la largeur minimale */
            text-align: center;
            margin: 5px;
            white-space: nowrap; /* Empêche le texte de passer à la ligne */
            font-size: 14px; /* Taille de police réduite pour mobile */
            flex: 1; /* Les boutons se partagent l'espace disponible */
            max-width: calc(50% - 10px); /* Maximum 50% de la largeur moins la marge */
        }
                .nav-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background-color: rgb(0, 0, 0);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .nav-button:hover::before {
            width: 300px;
            height: 300px;
        }

        @keyframes buttonPulse {
            0% { background-color: #020202; color: #ffffff; }
            50% { background-color: #1a2a6c; color: #c8ff00; }
            100% { background-color: #000000; color: #ffffff; }
        }

        .nav-button.animate-pay {
            animation: buttonPulse 3s ease-in-out infinite;
        }

        @keyframes textChange {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        main {
            display: flex;
            flex-direction: column;
            padding: 20px 10px;
            gap: 20px;
            flex: 1;
        }

        .login-section,
        .rates-section,
        .locations-section,
        .products-section {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        section:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .login-section {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        h2 {
            color: rgb(0, 0, 0);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #fdbb2d;
            transition: width 0.3s;
        }

        section:hover h2::after {
            width: 100%;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input {
            margin-bottom: 10px;
            padding: 12px;
            border: none;
            border-radius: 25px;
            background-color: rgb(255, 253, 250);
            color: rgb(0, 0, 0);
            transition: background-color 0.3s;
        }

        input:focus {
            background-color: rgba(255, 255, 255, 0.3);
            outline: none;
        }

        button {
            background-color: #000000;
            color: #ffffff;
            border: none;
            padding: 10px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        button:hover {
            background-color: #1a2a6c;
            color: #fdbb2d;
        }

        .rates-section {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .rates-section table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 10px 0;
        }

        .rates-section th,
        .rates-section td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .rates-section th:first-child,
        .rates-section td:first-child {
            padding-left: 20px;
        }

        .rates-section th:last-child,
        .rates-section td:last-child {
            padding-right: 20px;
        }

        .rates-section .loading-message {
            text-align: center;
            padding: 20px;
        }

        ul {
            list-style-type: none;
        }

        li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 20px;
        }

        li::before {
            content: '➤';
            position: absolute;
            left: 0;
            color: #fdbb2d;
        }

        footer {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 15px;
            text-align: center;
            margin-top: auto;
        }

        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
            color: #1a2a6c;
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        .notification h2 {
            color: #1a2a6c;
            margin-bottom: 20px;
        }

        .notification p {
            margin-bottom: 15px;
        }

        .close-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
        }

        .notification .ticket-info {
            margin-bottom: 15px;
            text-align: left;
        }

        .notification .ticket-info p {
            margin-bottom: 5px;
        }

        .notification .login-button,
        .notification .delete-button {
            display: inline-block;
            margin: 0 10px;
        }

        .notification .login-button {
            background-color: #fdbb2d;
            color: #1a2a6c;
        }

        .delete-button {
            background-color: #f44336;
            color: white;
        }

        .delete-button:hover {
            background-color: #d32f2f;
        }

        .notification.error {
            background-color: #fdd;
            border: 1px solid #faa;
            color: #f00;
        }

        /* Footer Popup Styles */
        .footer-popup {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translate(-50%, 200%);
            width: 95%;
            max-width: 600px;
            padding: 2rem;
            border-radius: 25px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, rgba(129, 0, 0, 0.95) 0%, rgba(0, 60, 150, 0.95) 100%);
            backdrop-filter: blur(10px);
            color: white;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3),
                        0 0 20px rgba(0, 89, 255, 0.3),
                        inset 0 0 60px rgba(0, 89, 255, 0.1);
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-popup.show {
            transform: translate(-50%, 0);
            opacity: 1;
        }

        .footer-popup .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        /* Animations */
        @keyframes slide1 {
            0% { transform: translateX(0); }
            50% { transform: translateX(-100%); }
            100% { transform: translateX(0); }
        }

        @keyframes slide2 {
            0% { transform: translateX(100%); }
            50% { transform: translateX(0); }
            100% { transform: translateX(100%); }
        }

        /* Media Queries */
        @media screen and (max-width: 768px) {
            .container {
                padding: 5px;
            }

            .logo {
                font-size: 2em;
            }

            nav {
                flex-direction: row; /* Force l'alignement horizontal */
                padding: 0 10px;
            }

            .nav-button {
                width: auto; /* Permet aux boutons de s'adapter à leur contenu */
                margin: 5px;
                font-size: 12px; /* Taille de police encore plus petite pour les très petits écrans */
            }

            main {
                padding: 10px 5px;
            }

            .login-section,
            .rates-section,
            .locations-section,
            .products-section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .rates-section {
                margin: 0 -5px;
                width: calc(100% + 10px);
                border-radius: 0;
            }

            .rates-section table {
                font-size: 14px;
            }

            .rates-section th,
            .rates-section td {
                padding: 8px;
            }

            .footer-popup {
                width: 92%;
                padding: 1.5rem;
            }
        }

        @media screen and (max-width: 480px) {
            .logo {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.2em;
            }

            .rates-section th,
            .rates-section td {
                padding: 6px;
                font-size: 12px;
            }

            .notification {
                width: 95%;
                padding: 15px;
            }
        }
        @media screen and (max-width: 320px) {
            .nav-button {
                padding: 8px 12px; /* Padding réduit pour les très petits écrans */
                font-size: 11px;
            }
        }

    </style>

    $(if chap-id)
    <form name="sendin" action="$(link-login-only)" method="post" style="display:none">
        <input type="hidden" name="username" />
        <input type="hidden" name="password" />
        <input type="hidden" name="dst" value="$(link-orig)" />
        <input type="hidden" name="popup" value="true" />
    </form>

    <script src="/md5.js"></script>
    <script>
        function doLogin() {
            document.sendin.username.value = document.login.username.value;
            document.sendin.password.value = hexMD5('$(chap-id)' + document.login.password.value + '$(chap-challenge)');
            document.sendin.submit();
            return false;
        }
    </script>
    $(endif)
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script type="module">
        import { getActiveDatabase } from './firebase-config-manager.js';
        import { ref, get, set, push, remove } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

        const adminUserId = '<!-- ADMIN_USER_ID -->';
        const networkName = '<!-- NETWORK_NAME -->';
        const contactNumber = '<!-- CONTACT_NUMBER -->';
        const fedapayApiKey = '<!-- FEDAPAY_API_KEY -->';

const _0x170f07=_0x15ba;(function(_0x556207,_0x19541d){const _0x5c4cb4=_0x15ba,_0x3a0ba6=_0x556207();while(!![]){try{const _0x39d3ea=parseInt(_0x5c4cb4(0x175))/0x1+parseInt(_0x5c4cb4(0x130))/0x2*(-parseInt(_0x5c4cb4(0x142))/0x3)+parseInt(_0x5c4cb4(0x167))/0x4*(parseInt(_0x5c4cb4(0x144))/0x5)+parseInt(_0x5c4cb4(0x177))/0x6*(parseInt(_0x5c4cb4(0x162))/0x7)+-parseInt(_0x5c4cb4(0x181))/0x8*(parseInt(_0x5c4cb4(0x17d))/0x9)+-parseInt(_0x5c4cb4(0x13b))/0xa+parseInt(_0x5c4cb4(0x129))/0xb;if(_0x39d3ea===_0x19541d)break;else _0x3a0ba6['push'](_0x3a0ba6['shift']());}catch(_0x44f021){_0x3a0ba6['push'](_0x3a0ba6['shift']());}}}(_0x3dff,0xd04e6));let db,userConfigRef;async function initializeDatabase(){const _0x1ca69c=_0x15ba;db=await getActiveDatabase(),userConfigRef=ref(db,_0x1ca69c(0x15e)+adminUserId+'/portalConfig'),console[_0x1ca69c(0x182)](_0x1ca69c(0x17b));}let localTickets={};async function checkSubscriptionStatus(){const _0xae6a99=_0x15ba;try{const _0x13202e=ref(db,_0xae6a99(0x15e)+adminUserId+_0xae6a99(0x191)),_0x179d64=await get(_0x13202e),_0xc6fdd2=_0x179d64['val'](),_0x51bf82=new Date();if(_0xc6fdd2&&_0xc6fdd2[_0xae6a99(0x157)]===_0xae6a99(0x186)){const _0x24bdce=new Date(_0xc6fdd2[_0xae6a99(0x16c)]);return _0x24bdce<_0x51bf82?(await set(_0x13202e,{..._0xc6fdd2,'status':_0xae6a99(0x172)}),![]):!![];}else return![];}catch(_0x19c914){return console[_0xae6a99(0x15a)](_0xae6a99(0x178),_0x19c914),![];}}async function syncTickets(){const _0x37a03b=_0x15ba;try{const _0x482466=await checkSubscriptionStatus();if(!_0x482466){document[_0x37a03b(0x134)](_0x37a03b(0x155))[_0x37a03b(0x11f)]=_0x37a03b(0x171);return;}const _0x1c715b=ref(db,_0x37a03b(0x15e)+adminUserId+_0x37a03b(0x139)),_0x252ab3=await get(_0x1c715b);localTickets=_0x252ab3['val']()||{};const _0x4852eb=ref(db,_0x37a03b(0x15e)+adminUserId+_0x37a03b(0x13c)),_0x113cdb=await get(_0x4852eb),_0x44f97d=_0x113cdb[_0x37a03b(0x17a)]()||{};for(const _0x19d7ff in _0x44f97d){const _0x321131=_0x44f97d[_0x19d7ff],_0x4b4104=Object[_0x37a03b(0x152)](localTickets)[_0x37a03b(0x148)](_0x1f1860=>localTickets[_0x1f1860]['utilisateur']&&localTickets[_0x1f1860][_0x37a03b(0x180)][_0x37a03b(0x10b)](_0x321131[_0x37a03b(0x18e)]));if(_0x4b4104){const _0xa16e22=localTickets[_0x4b4104][_0x37a03b(0x180)][_0x37a03b(0x131)](_0x321131[_0x37a03b(0x18e)]);_0xa16e22>-0x1&&(localTickets[_0x4b4104]={...localTickets[_0x4b4104],'utilisateur':localTickets[_0x4b4104]['utilisateur'][_0x37a03b(0x169)]((_0x3bbf08,_0x189591)=>_0x189591!==_0xa16e22),'motDePasse':localTickets[_0x4b4104]['motDePasse'][_0x37a03b(0x169)]((_0x173175,_0x4301d4)=>_0x4301d4!==_0xa16e22),'prix':localTickets[_0x4b4104][_0x37a03b(0x11b)]['filter']((_0x292197,_0x41284a)=>_0x41284a!==_0xa16e22)},localTickets[_0x4b4104][_0x37a03b(0x180)][_0x37a03b(0x136)]===0x0&&delete localTickets[_0x4b4104]);}}console[_0x37a03b(0x182)](_0x37a03b(0x11d),localTickets),createTicketTable();}catch(_0x3b23cd){console['error'](_0x37a03b(0x184),_0x3b23cd);}}document[_0x170f07(0x190)](_0x170f07(0x17e),async()=>{const _0x80b0a=_0x170f07;await initializeDatabase(),syncTickets(),setInterval(syncTickets,0x1388),document['querySelector']('.logo')[_0x80b0a(0x11f)]=networkName,document[_0x80b0a(0x134)]('.nav-button')['textContent']=contactNumber;}),document[_0x170f07(0x145)][_0x170f07(0x190)](_0x170f07(0x15f),function(_0x1b0e83){const _0x4a2d3b=_0x170f07;_0x1b0e83[_0x4a2d3b(0x10c)]();const _0x4bfbcb=document[_0x4a2d3b(0x145)]['username'][_0x4a2d3b(0x135)],_0x23d649=document[_0x4a2d3b(0x145)][_0x4a2d3b(0x11c)][_0x4a2d3b(0x135)];storeConnectedTicket(_0x4bfbcb),storeTicketLocally({'user':_0x4bfbcb,'password':_0x23d649,'ticketName':'Manual\x20Login'}),updateButtonText();if(typeof hexMD5==='function')doLogin();else{const _0x46e12d=checkCredentials(_0x4bfbcb,_0x23d649);_0x46e12d?(storeLoginTicket(_0x4bfbcb,_0x23d649),this['submit']()):showNotification(_0x4a2d3b(0x158),_0x4a2d3b(0x195));}});function storeLoginTicket(_0x3ae0a1,_0xe3ec64){const _0x2069d4=_0x170f07;localStorage[_0x2069d4(0x128)]('TicketConnecté',JSON['stringify']({'user':_0x3ae0a1,'password':_0xe3ec64})),console[_0x2069d4(0x182)]('Ticket\x20de\x20connexion\x20stocké:',_0x3ae0a1);}async function storeTicketEnTransit(_0x3c17a2){const _0x574026=_0x170f07,_0x22afe5=await synchronizeAndReserveTicket(_0x3c17a2);if(!_0x22afe5)throw new Error(_0x574026(0x132));const _0x46ddfb=ref(db,_0x574026(0x15e)+adminUserId+_0x574026(0x18b)),_0x49f363=push(_0x46ddfb);return await set(_0x49f363,{'id':_0x49f363[_0x574026(0x141)],'category':_0x3c17a2,..._0x22afe5}),console['log'](_0x574026(0x117),_0x49f363['key']),{'id':_0x49f363['key'],..._0x22afe5};}function _0x15ba(_0x4aa823,_0x49be22){const _0x3dffb6=_0x3dff();return _0x15ba=function(_0x15ba09,_0x343051){_0x15ba09=_0x15ba09-0x10b;let _0x2b260b=_0x3dffb6[_0x15ba09];return _0x2b260b;},_0x15ba(_0x4aa823,_0x49be22);}async function removeTicketFromTransit(_0x51ff89){const _0x36fb57=_0x170f07,_0x59478f=ref(db,_0x36fb57(0x15e)+adminUserId+_0x36fb57(0x14c)+_0x51ff89);await remove(_0x59478f),console[_0x36fb57(0x182)](_0x36fb57(0x116),_0x51ff89);}async function synchronizeAndReserveTicket(_0x17be1f){const _0x4f03c6=_0x170f07;try{const _0x1ed837=ref(db,'users-data/'+adminUserId+_0x4f03c6(0x111)+_0x17be1f),_0x311074=await get(_0x1ed837),_0x4931d6=_0x311074['val']();if(!_0x4931d6||!_0x4931d6[_0x4f03c6(0x180)]||_0x4931d6['utilisateur'][_0x4f03c6(0x136)]===0x0)return null;const _0x229b3c={'user':_0x4931d6[_0x4f03c6(0x180)][0x0],'password':_0x4931d6['motDePasse'][0x0],'price':_0x4931d6[_0x4f03c6(0x11b)][0x0]},_0x2d87f5={..._0x4931d6,'utilisateur':_0x4931d6[_0x4f03c6(0x180)]['filter']((_0x13ec0a,_0x22e224)=>_0x22e224!==0x0),'motDePasse':_0x4931d6[_0x4f03c6(0x13a)]['filter']((_0x40dea4,_0x3961e9)=>_0x3961e9!==0x0),'prix':_0x4931d6[_0x4f03c6(0x11b)][_0x4f03c6(0x169)]((_0x16963c,_0x79a996)=>_0x79a996!==0x0)};return await set(_0x1ed837,_0x2d87f5),_0x229b3c;}catch(_0x5c09ec){console[_0x4f03c6(0x15a)]('Erreur\x20lors\x20de\x20la\x20synchronisation\x20et\x20réservation\x20du\x20ticket:',_0x5c09ec);throw _0x5c09ec;}}async function restoreTicket(_0x1f2ea1,_0x1bb842){const _0x29b515=_0x170f07,_0x207b66=ref(db,_0x29b515(0x15e)+adminUserId+'/TicketsTotal/'+_0x1f2ea1),_0x3f54bf=await get(_0x207b66),_0x385293=_0x3f54bf[_0x29b515(0x17a)]()||{'utilisateur':[],'motDePasse':[],'prix':[]};_0x385293[_0x29b515(0x180)]['unshift'](_0x1bb842[_0x29b515(0x18e)]),_0x385293['motDePasse'][_0x29b515(0x13d)](_0x1bb842[_0x29b515(0x11c)]),_0x385293[_0x29b515(0x11b)][_0x29b515(0x13d)](_0x1bb842[_0x29b515(0x188)]),await set(_0x207b66,_0x385293);}function _0x3dff(){const _0x3dc412=['2772242VhjAbH','Ticket\x20cadeau','storedTicket','\x20FCFA\x0aMerci\x20pour\x20votre\x20achat!\x20🎉','ticket\x20cadeau','ticketName','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Mot\x20de\x20passe:\x20','194XMzbwQ','indexOf','Aucun\x20ticket\x20disponible\x20pour\x20cette\x20catégorie.','forEach','querySelector','value','length','className','reason','/TicketsTotal','motDePasse','7836670qMmpkQ','/TicketsVendus','unshift','/TicketConnecté','Ticket\x20vendu\x20stocké\x20avec\x20succès','.nav-button.animate-pay','key','34581YRuHiX','client@example.com','215xuYYmz','login','Une\x20erreur\x20est\x20survenue.\x20Veuillez\x20réessayer\x20plus\x20tard.','stringify','find','style','Non\x20disponible','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','/TicketsTransit/','innerHTML','.login-button,\x20.delete-button','.rates-section','open','DIALOG_DISMISSED','keys','scrollIntoView','click','.rates-section\x20.loading-message','.rates-section\x20table','status','Erreur','\x0aMot\x20de\x20passe:\x20','error','entries','Vous\x20devez\x20attendre\x207\x20jours\x20entre\x20chaque\x20ticket\x20gratuit.','remove','users-data/','submit','hideNotification','Supprimer','7TslnIX','Connexion','appendChild','createElement','✅\x20Paiement\x20validé\x20pour:\x0aPseudo:\x20','98188IgCOqa','Votre\x20ticket','filter','Aucun\x20ticket\x20disponible\x20pour\x20le\x20moment.','parse','endDate','username','notification-message','removeItem','\x0aPrix:\x20','Pas\x20d\x27abonnement\x20actif','expired','Ticket\x20acheté','delete-button','1485621pTOHDh','Votre\x20ticket\x20a\x20été\x20supprimé\x20avec\x20succès.','5598582KvKfqC','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20onclick=\x22initPayment(\x27','val','Database\x20initialized\x20in\x20login.html','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','25191qWymOs','DOMContentLoaded','lastFreeTicket','utilisateur','2776xAznhW','log','\x20F</p>','Erreur\x20lors\x20de\x20la\x20synchronisation\x20des\x20tickets:','display','active','Erreur\x20lors\x20de\x20l\x27enregistrement\x20du\x20nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté:','price','Payer','initPayment','/TicketsTransit','block','button','user','querySelectorAll','addEventListener','/admin/subscription','floor','insertRow','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Identifiants\x20invalides.','includes','preventDefault','Nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté\x20enregistré\x20dans\x20Firebase\x20avec\x20la\x20clé:','init','warn','CHECKOUT_COMPLETED','/TicketsTotal/','Prix:\x20','Le\x20paiement\x20a\x20été\x20annulé.','Payer\x20un\x20ticket','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Ticket\x20en\x20transit\x20supprimé:','Ticket\x20en\x20transit\x20stocké:','Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20paiement:','none','login-button','prix','password','Données\x20synchronisées:','<p>Prix:\x20','textContent','Ticket\x20supprimé','notification-title','getElementById','notification','Obtenir','Paiement\x20annulé','load','getItem','setItem'];_0x3dff=function(){return _0x3dc412;};return _0x3dff();}function canGetFreeTicket(){const _0x130139=_0x170f07,_0x1e8be9=localStorage[_0x130139(0x127)](_0x130139(0x17f));if(!_0x1e8be9)return!![];const _0x1ef6d7=new Date(parseInt(_0x1e8be9)),_0x34a2c0=new Date(),_0x324647=Math[_0x130139(0x192)]((_0x34a2c0-_0x1ef6d7)/(0x3e8*0x3c*0x3c*0x18));return _0x324647>=0x7;}window[_0x170f07(0x18a)]=async function(_0x29ad54,_0x3f639c){const _0x33ecff=_0x170f07;let _0x4194f4=null;try{if(_0x29ad54['toLowerCase']()[_0x33ecff(0x10b)]('ticket\x20cadeau')){if(!canGetFreeTicket()){showNotification(_0x33ecff(0x14a),_0x33ecff(0x15c),![]);return;}const _0xa4de2=await synchronizeAndReserveTicket(_0x29ad54);localStorage['setItem']('lastFreeTicket',Date['now']()['toString']()),showNotification(_0x33ecff(0x12a),'Félicitations\x20!\x20Vous\x20avez\x20reçu\x20un\x20ticket\x20gratuit.',!![]),displayTicket(_0xa4de2,_0x29ad54),await storeTicketVendu(_0xa4de2);return;}_0x4194f4=await storeTicketEnTransit(_0x29ad54);const _0x28cbb5=_0x29ad54+';\x20'+_0x4194f4[_0x33ecff(0x18e)]+'\x20de\x20'+_0x4194f4[_0x33ecff(0x188)]+'\x20FCFA';var _0x11ce83=FedaPay[_0x33ecff(0x10e)]({'public_key':fedapayApiKey,'transaction':{'amount':_0x3f639c,'description':_0x28cbb5},'customer':{'email':_0x33ecff(0x143)},'onComplete':async function(_0x5188b6){const _0x1b1ec5=_0x33ecff;if(_0x5188b6['reason']===FedaPay[_0x1b1ec5(0x151)])showNotification(_0x1b1ec5(0x125),_0x1b1ec5(0x113)),await restoreTicket(_0x29ad54,_0x4194f4),await removeTicketFromTransit(_0x4194f4['id']);else{if(_0x5188b6[_0x1b1ec5(0x138)]===FedaPay[_0x1b1ec5(0x110)]){const _0x647399=_0x1b1ec5(0x166)+_0x4194f4[_0x1b1ec5(0x18e)]+_0x1b1ec5(0x159)+_0x4194f4[_0x1b1ec5(0x11c)]+'\x0aCatégorie:\x20'+_0x29ad54+_0x1b1ec5(0x170)+_0x4194f4['price']+_0x1b1ec5(0x12c);showNotification('Paiement\x20réussi',_0x647399),await storeTicketVendu(_0x4194f4),displayTicket(_0x4194f4,_0x29ad54);}}}});_0x11ce83[_0x33ecff(0x150)]();}catch(_0x3cde71){console[_0x33ecff(0x15a)](_0x33ecff(0x118),_0x3cde71),showNotification(_0x33ecff(0x158),_0x33ecff(0x146)),_0x4194f4&&(await restoreTicket(_0x29ad54,_0x4194f4),await removeTicketFromTransit(_0x4194f4['id']));}};function showTariffsTable(){const _0x1400a9=_0x170f07,_0x118d99=document[_0x1400a9(0x134)]('.rates-section\x20table'),_0x3d1975=document[_0x1400a9(0x134)](_0x1400a9(0x155));_0x118d99[_0x1400a9(0x149)][_0x1400a9(0x185)]='table',_0x3d1975['style'][_0x1400a9(0x185)]=_0x1400a9(0x119);}async function createTicketTable(){const _0x55f32e=_0x170f07,_0x551157=document[_0x55f32e(0x134)](_0x55f32e(0x156));_0x551157[_0x55f32e(0x14d)]=_0x55f32e(0x115);if(Object['keys'](localTickets)[_0x55f32e(0x136)]===0x0){document[_0x55f32e(0x134)](_0x55f32e(0x155))[_0x55f32e(0x11f)]=_0x55f32e(0x16a);return;}for(const [_0x1c3b6e,_0x5bcc73]of Object[_0x55f32e(0x15b)](localTickets)){if(!_0x5bcc73||!_0x5bcc73[_0x55f32e(0x11b)]||_0x5bcc73['prix'][_0x55f32e(0x136)]===0x0){console[_0x55f32e(0x10f)]('Données\x20incomplètes\x20pour\x20la\x20catégorie:\x20'+_0x1c3b6e);continue;}const _0x2198c2=_0x5bcc73['prix'][0x0],_0x24ff98=_0x551157[_0x55f32e(0x193)](),_0x49f514=_0x1c3b6e['toLowerCase']()[_0x55f32e(0x10b)](_0x55f32e(0x12d))?_0x55f32e(0x124):_0x55f32e(0x189);_0x24ff98[_0x55f32e(0x14d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1c3b6e+_0x55f32e(0x17c)+_0x2198c2+_0x55f32e(0x179)+_0x1c3b6e+'\x27,\x20'+_0x2198c2+')\x22>'+_0x49f514+'</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}showTariffsTable();}function showTicketNotification(_0x12cc4b){const _0x5a2a34=_0x170f07,_0x32193f=document[_0x5a2a34(0x122)]('notification'),_0x4cca77=document['getElementById']('notification-title'),_0xec1bf9=document[_0x5a2a34(0x122)](_0x5a2a34(0x16e));_0x4cca77[_0x5a2a34(0x11f)]=_0x12cc4b[_0x5a2a34(0x12e)]||_0x5a2a34(0x168),_0xec1bf9[_0x5a2a34(0x14d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ticket-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Nom\x20d\x27utilisateur:\x20'+_0x12cc4b[_0x5a2a34(0x18e)]+_0x5a2a34(0x12f)+_0x12cc4b[_0x5a2a34(0x11c)]+_0x5a2a34(0x14b)+(_0x12cc4b[_0x5a2a34(0x188)]?_0x5a2a34(0x11e)+_0x12cc4b[_0x5a2a34(0x188)]+_0x5a2a34(0x183):'')+_0x5a2a34(0x194);const _0x2f5549=_0x32193f[_0x5a2a34(0x18f)](_0x5a2a34(0x14e));_0x2f5549[_0x5a2a34(0x133)](_0x1b9f4e=>_0x1b9f4e['remove']());const _0x503a69=document[_0x5a2a34(0x165)]('button');_0x503a69[_0x5a2a34(0x137)]=_0x5a2a34(0x11a),_0x503a69[_0x5a2a34(0x11f)]=_0x5a2a34(0x163),_0x503a69['addEventListener']('click',()=>{const _0x57288b=_0x5a2a34;storeConnectedTicket(_0x12cc4b[_0x57288b(0x18e)]),autoLogin(_0x12cc4b['user'],_0x12cc4b[_0x57288b(0x11c)]);});const _0x212958=document[_0x5a2a34(0x165)](_0x5a2a34(0x18d));_0x212958[_0x5a2a34(0x137)]=_0x5a2a34(0x174),_0x212958[_0x5a2a34(0x11f)]=_0x5a2a34(0x161),_0x212958[_0x5a2a34(0x190)](_0x5a2a34(0x154),deleteTicket),_0x32193f[_0x5a2a34(0x164)](_0x503a69),_0x32193f[_0x5a2a34(0x164)](_0x212958),_0x32193f[_0x5a2a34(0x149)][_0x5a2a34(0x185)]=_0x5a2a34(0x18c);}function showNotification(_0x58e069,_0x12f7a3,_0x5e691c=![],_0x4f949c=null){const _0x49c197=_0x170f07,_0x2f89cb=document['getElementById'](_0x49c197(0x123)),_0x24c600=document['getElementById'](_0x49c197(0x121)),_0x546252=document['getElementById'](_0x49c197(0x16e));_0x24c600['textContent']=_0x58e069,_0x546252[_0x49c197(0x11f)]=_0x12f7a3;const _0x5a40d6=_0x2f89cb[_0x49c197(0x18f)]('.login-button,\x20.delete-button');_0x5a40d6[_0x49c197(0x133)](_0x3627fc=>_0x3627fc[_0x49c197(0x15d)]());if(_0x5e691c&&_0x4f949c){const _0x6bf99b=document[_0x49c197(0x165)]('button');_0x6bf99b['className']=_0x49c197(0x11a),_0x6bf99b['textContent']=_0x49c197(0x163),_0x6bf99b['addEventListener'](_0x49c197(0x154),()=>{const _0x110307=_0x49c197;storeConnectedTicket(_0x4f949c[_0x110307(0x18e)]),autoLogin(_0x4f949c[_0x110307(0x18e)],_0x4f949c[_0x110307(0x11c)]);}),_0x2f89cb['appendChild'](_0x6bf99b);const _0x41498d=document[_0x49c197(0x165)]('button');_0x41498d[_0x49c197(0x137)]=_0x49c197(0x174),_0x41498d['textContent']='Supprimer',_0x41498d['addEventListener'](_0x49c197(0x154),deleteTicket),_0x2f89cb[_0x49c197(0x164)](_0x41498d);}_0x2f89cb[_0x49c197(0x149)][_0x49c197(0x185)]=_0x49c197(0x18c);}window[_0x170f07(0x160)]=function(){const _0x3d366d=_0x170f07;document[_0x3d366d(0x122)](_0x3d366d(0x123))[_0x3d366d(0x149)][_0x3d366d(0x185)]=_0x3d366d(0x119);};async function storeConnectedTicket(_0x352748){const _0x22be93=_0x170f07;try{const _0x1ffed5=ref(db,_0x22be93(0x15e)+adminUserId+_0x22be93(0x13e)),_0x1b43a6=push(_0x1ffed5);await set(_0x1b43a6,{'username':_0x352748}),console['log'](_0x22be93(0x10d),_0x1b43a6[_0x22be93(0x141)]);}catch(_0x45d300){console[_0x22be93(0x15a)](_0x22be93(0x187),_0x45d300);}}function checkCredentials(_0x413e2e,_0x467bcd){const _0x2a6c1c=_0x170f07;for(const _0x40764e in localTickets){const _0x14335b=localTickets[_0x40764e][_0x2a6c1c(0x180)],_0x5b1870=localTickets[_0x40764e][_0x2a6c1c(0x13a)];if(_0x14335b&&_0x5b1870){const _0x5013c3=_0x14335b[_0x2a6c1c(0x131)](_0x413e2e);if(_0x5013c3>-0x1&&_0x5b1870[_0x5013c3]===_0x467bcd)return!![];}}return![];}function autoLogin(_0x22f4a4,_0x1b13b7){const _0x1e30a5=_0x170f07;document[_0x1e30a5(0x145)][_0x1e30a5(0x16d)]['value']=_0x22f4a4,document[_0x1e30a5(0x145)]['password'][_0x1e30a5(0x135)]=_0x1b13b7,document['login'][_0x1e30a5(0x15f)]();}function deleteTicket(){const _0x433a8d=_0x170f07;localStorage[_0x433a8d(0x16f)](_0x433a8d(0x12b)),showNotification(_0x433a8d(0x120),_0x433a8d(0x176)),updateButtonText();}function updateButtonText(){const _0x503216=_0x170f07,_0x2ca0de=document[_0x503216(0x134)](_0x503216(0x140)),_0x1f826d=localStorage[_0x503216(0x127)](_0x503216(0x12b));_0x1f826d?_0x2ca0de[_0x503216(0x11f)]='Voir\x20mon\x20ticket':_0x2ca0de[_0x503216(0x11f)]=_0x503216(0x114);}window['addEventListener'](_0x170f07(0x126),()=>{const _0x22a7d3=_0x170f07;updateButtonText();const _0x602395=document[_0x22a7d3(0x134)](_0x22a7d3(0x140));_0x602395['addEventListener'](_0x22a7d3(0x154),()=>{const _0x9ed313=_0x22a7d3,_0x431325=localStorage[_0x9ed313(0x127)](_0x9ed313(0x12b));if(_0x431325){const _0x30c6fb=JSON[_0x9ed313(0x16b)](_0x431325);showTicketNotification(_0x30c6fb);}else document[_0x9ed313(0x134)](_0x9ed313(0x14f))[_0x9ed313(0x153)]({'behavior':'smooth'});});});async function storeTicketVendu(_0x57884d){const _0x21e4bc=_0x170f07,_0x5d9dbb=ref(db,_0x21e4bc(0x15e)+adminUserId+_0x21e4bc(0x13c));await push(_0x5d9dbb,{'password':_0x57884d[_0x21e4bc(0x11c)],'price':_0x57884d[_0x21e4bc(0x188)],'user':_0x57884d[_0x21e4bc(0x18e)]}),console[_0x21e4bc(0x182)](_0x21e4bc(0x13f));}function displayTicket(_0x41432d,_0x229d4b){const _0x5d595d=_0x170f07,_0x45d678={'ticketName':_0x229d4b,'user':_0x41432d[_0x5d595d(0x18e)],'password':_0x41432d['password'],'price':_0x41432d[_0x5d595d(0x188)]};showNotification(_0x5d595d(0x173),'Nom\x20d\x27utilisateur:\x20'+_0x41432d[_0x5d595d(0x18e)]+'\x0a'+('Mot\x20de\x20passe:\x20'+_0x41432d[_0x5d595d(0x11c)]+'\x0a')+(_0x5d595d(0x112)+_0x41432d[_0x5d595d(0x188)]+'\x20F'),!![],_0x45d678),updateButtonText(),storeTicketLocally(_0x45d678);}function storeTicketLocally(_0x423e23){const _0x4c144a=_0x170f07;localStorage[_0x4c144a(0x128)](_0x4c144a(0x12b),JSON[_0x4c144a(0x147)](_0x423e23));}

    </script>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo"><!-- NETWORK_NAME --></h1>
            <div class="moon"></div>
            <img class="header-image img1" src="img/img1.jpg" alt="Image de fond">
            <img class="header-image img2" src="img/img2.jpg" alt="Image de fond">
            <nav>
                <button class="nav-button"><!-- CONTACT_NUMBER --></button>
                <button class="nav-button animate-pay">Payer un ticket</button>
            </nav>
        </div>
    </header>

    <main class="container">

        <section class="login-section">
            <h2>Connexion</h2>
            <form name="login" action="$(link-login-only)" method="post" $(if chap-id) onSubmit="return doLogin()" $(endif)>
                <input type="hidden" name="dst" value="$(link-orig)" />
                <input type="hidden" name="popup" value="true" />
                <input type="text" name="username" placeholder="Nom d'utilisateur" value="$(username)" required>
                <input type="password" name="password" placeholder="Mot de passe" required>
                <button type="submit">Se connecter</button>
            </form>
            <p class="info $(if error)alert$(endif)">
                $(if error == "")Veuillez vous connecter pour utiliser le service hotspot Internet $(if trial == 'yes')<br />Essai gratuit disponible, <a href="$(link-login-only)?dst=$(link-orig-esc)&username=T-$(mac-esc)">cliquez ici</a>.$(endif)
                $(endif)
                $(if error)$(error)$(endif)
            </p>
        </section>

        <section class="rates-section">
            <h2>Acheter un ticket par mobile money</h2>
            <div class="loading-message">Chargement des tickets...</div>
            <table style="display: none;"></table>
        </section>


        <section class="locations-section">
            <h2>Ticket payé non reçus ?</h2>
            <ul>
            <li>Récupérer les ID du ticket en contactant le <!-- CONTACT_NUMBER --></li>
            </ul>

        </section>

        <section class="locations-section">
            <h2>Nos tarifs</h2>

            <!-- TARIFFS_TABLE_SIMPLE -->

        </section>

        <section class="locations-section">
            <h2>Bon à savoir !</h2>
            <ul>
                <li>1 ère chose</li>
                <li>2 eme chose</li>
                <li>3 eme chose</li>
            </ul>
        </section>

        <section class="locations-section">
            <h2>Nos sites de connexion</h2>
             <!-- CONNECTION_LOCATIONS -->
        </section>

        <section class="products-section">
            <h2>Nos produits</h2>
            <ul>
               <!-- PRODUCTS_LIST -->
            </ul>
        </section>

    </main>

    <footer>
        <div class="anitext">
            PROPULSE PAR EVISIONS
        </div>
    </footer>

    <div class="notification" id="notification">
        <span class="close-icon" onclick="hideNotification()">×</span>
        <h2 id="notification-title"></h2>
        <p id="notification-message"></p>
    </div>

    <div id="paymentFrame">
        <div>
            <button id="closePaymentFrame" onclick="closePaymentFrame()">×</button>
            <iframe id="paymentIframe"></iframe>
        </div>
    </div>
    <!-- ADMIN_USER_ID -->

</body>
</html>