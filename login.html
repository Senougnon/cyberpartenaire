<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion</title>
    <style>
        /* --- General Styles --- */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #36ff03, #1900ff, #a7ff03);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* --- Header Styles --- */
        header {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 30px 0;
            position: relative;
            overflow: hidden;
        }

        .header-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .img1 { animation: slide1 20s linear infinite; }
        .img2 { animation: slide2 20s linear infinite; }

        .logo {
            font-size: 3em;
            color: white;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 2;
            margin-bottom: 1em;
        }

        /* Floating Icons */
        .floating-icons {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* Above images, below logo and nav */
            pointer-events: none; /* Allows clicks to pass through */
        }

        .icon {
            position: absolute;
            color: rgba(255, 255, 255, 0.5);
            font-size: 1.5em;
            animation: floatIcon linear infinite;
        }

        /* Different animation delays and positions for each icon */
        .icon:nth-child(1) { top: 10%; left: 10%; animation-duration: 8s;  animation-delay: 0s; }
        .icon:nth-child(2) { top: 20%; left: 80%; animation-duration: 10s; animation-delay: 2s;}
        .icon:nth-child(3) { top: 60%; left: 30%; animation-duration: 12s; animation-delay: 1s;}
        .icon:nth-child(4) { top: 70%; left: 60%; animation-duration: 9s;  animation-delay: 3s;}
        .icon:nth-child(5) { top: 30%; left: 50%; animation-duration: 7s;  animation-delay: 1.5s;}
        .icon:nth-child(6) { top: 50%; left: 90%; animation-duration: 11s; animation-delay: 4s; font-size: 2em;}  /* Larger icon */
        .icon:nth-child(7) { top: 80%; left: 15%; animation-duration: 8.5s; animation-delay: 0.5s;}
        .icon:nth-child(8) { top: 40%; left: 5%; animation-duration: 9.5s; animation-delay: 2.5s;}

        @keyframes floatIcon {
            0% { transform: translate(0, 0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(50px, -100px); opacity: 0; } /* Move and fade */
        }



        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .moon {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 2.5em;
            animation: float 5s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            padding: 0 20px;
            flex-wrap: wrap;
            z-index: 2; /* Ensure nav is above floating icons */
            position: relative;
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-size: 16px;
            flex: 1;
            max-width: 250px;
            margin: 5px;
            text-align: center;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.4s ease, height 0.4s ease;
        }

        .nav-button:hover::before {
            width: 400px;
            height: 400px;
        }

        .nav-button:hover {
             transform: translateY(-3px);
        }

       @keyframes buttonPulse {
            0%   { transform: scale(1); }
            50%  { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .nav-button.animate-pay {
            animation: buttonPulse 3s ease-in-out infinite;
            background-color: #1a2a6c; /* Initial background color for Pay button */
            color: #fdbb2d; /* Initial text color for Pay button */
        }

        /* --- Main Content Styles --- */
        main {
            display: flex;
            flex-direction: column;
            padding: 30px 20px;
            gap: 30px;
            flex: 1;
        }

        section {
            background-color: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-bottom: 20px;
        }

        section:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.3);
        }


        .login-section {
            max-width: 600px;
            margin: 0 auto;
        }

        h2 {
            color: rgb(0, 0, 0);
            margin-bottom: 20px;
            position: relative;
            display: inline-block;
            font-size: 1.8em;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 0;
            height: 3px;
            background-color: #fdbb2d;
            transition: width 0.4s ease;
        }

        section:hover h2::after {
            width: 100%;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        input {
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 30px;
            background-color: rgba(255,255,255, 0.5);
            color: rgb(0, 0, 0);
            transition: background-color 0.3s ease, border-color 0.3s ease;
            font-size: 16px;
        }

        input:focus {
            background-color: rgba(255, 255, 255, 0.7);
            border-color: #fdbb2d;
            outline: none;
        }

        button[type="submit"] {
            background-color: #000000;
            color: #ffffff;
            border: none;
            padding: 15px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 16px;
        }

        button[type="submit"]:hover {
            background-color: #1a2a6c;
            color: #fdbb2d;
            transform: translateY(-3px);
        }

        .info {
            margin-top: 15px;
            color: #eee;
            font-size: 14px;
            text-align: center;
        }
        .info.alert {
             color: #ffdddd;
             font-weight: bold;
        }

        /* --- Rates Section Styles --- */
        .rates-section {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .rates-section table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 15px;
            margin: 15px 0;
        }

        .rates-section th,
        .rates-section td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        .rates-section th {
            background-color: rgba(0, 0, 0, 0.2);
            color: white;
            font-weight: 600;
        }


        .rates-section .loading-message {
            text-align: center;
            padding: 30px;
            font-style: italic;
            color: #ddd;
        }

        /* --- List Styles --- */
        ul {
            list-style-type: none;
            padding-left: 20px;
        }

        li {
            margin-bottom: 12px;
            position: relative;
            padding-left: 30px;
            font-size: 16px;
        }

        li::before {
            content: '➤';
            position: absolute;
            left: 0;
            color: #fdbb2d;
            font-size: 1.2em;
        }

        /* --- Footer Styles --- */
        footer {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 20px;
            text-align: center;
            margin-top: auto;
            font-size: 14px;
            color: #ddd;
        }

        /* --- Notification Styles --- */
        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.4);
            z-index: 1000;
            display: none;
            color: #1a2a6c;
            text-align: center;
            width: 90%;
            max-width: 500px;
        }

        .notification h2 {
            color: #1a2a6c;
            margin-bottom: 25px;
        }

        .notification p {
            margin-bottom: 20px;
            line-height: 1.5;
        }


        .close-icon {
            position: absolute;
            top: 15px;
            right: 15px;
            cursor: pointer;
            font-size: 24px;
        }

        .notification .ticket-info {
            margin-bottom: 20px;
            text-align: left;
        }

        .notification .ticket-info p {
            margin-bottom: 8px;
        }


        .notification .login-button,
        .notification .delete-button {
            display: inline-block;
            margin: 10px;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .notification .login-button {
            background-color: #fdbb2d;
            color: #1a2a6c;
        }

        .delete-button {
            background-color: #f44336;
            color: white;
        }

        .delete-button:hover {
            background-color: #d32f2f;
        }

        .notification.error {
            background-color: #fdd;
            border: 1px solid #faa;
            color: #f00;
        }
         .tariffs-section table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .tariffs-section th,
        .tariffs-section td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .tariffs-section th {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
        }

        /* --- Media Queries --- */
        @media screen and (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .logo {
                font-size: 2.5em;
            }

            .header-image {
                height: 300px;
            }

            nav {
                gap: 15px;
                padding: 0 15px;
            }

            .nav-button {
                padding: 10px 20px;
                font-size: 14px;
                max-width: 200px;
            }
            section {
                padding: 20px;
            }

            h2 {
                font-size: 1.5em;
            }

            input {
                padding: 12px;
                font-size: 14px;
            }

            button[type="submit"] {
                padding: 12px;
                font-size: 14px;
            }

            .notification {
                padding: 20px;
                max-width: 400px;
            }

            .tariffs-section th,
            .tariffs-section td {
                padding: 10px 12px;
            }
             /* Adjust floating icons for smaller screens */
            .icon {
                font-size: 1em; /* Smaller icons */
            }
            .icon:nth-child(6) { font-size: 1.5em; } /* Keep one larger */

        }

        @media screen and (max-width: 480px) {
            .logo {
                font-size: 2em;
            }

            .header-image {
                height: 250px;
            }
           nav {
                flex-direction: column;
                align-items: center;
            }

            .nav-button {
                width: 100%;
                max-width: none;
                margin: 5px 0;
                padding: 10px 15px;
                font-size: 13px;
            }

            h2 {
                font-size: 1.3em;
            }


            input, button[type="submit"] {
                padding: 10px;
                font-size: 13px;
            }
            .notification {
                padding: 15px;
                max-width: 90%;
            }

            .tariffs-section th,
            .tariffs-section td {
                padding: 8px 10px;
                font-size: 12px;
            }

            .close-icon {
                font-size: 20px;
            }
             /* Further adjust floating icons */
            .icon {
                font-size: 0.8em; /* Even smaller */
            }
            .icon:nth-child(6) { font-size: 1.2em; } /* Still larger */
        }

    /* --- Login Mode Toggle Styles --- */
        .login-mode-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
        }

        .login-mode-toggle button {
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
    
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 1em;
            margin: 0 4px;
        }

        .login-mode-toggle button.active {
            background-color: #fdbb2d;
            color: #1a2a6c;
        }
          /* Animations */
        @keyframes slide1 {
            0% { transform: translateX(0); }
            50% { transform: translateX(-100%); }
            100% { transform: translateX(0); }
        }

        @keyframes slide2 {
            0% { transform: translateX(100%); }
            50% { transform: translateX(0); }
            100% { transform: translateX(100%); }
        }
    </style>


    $(if chap-id)
    <form name="sendin" action="$(link-login-only)" method="post" style="display:none">
        <input type="hidden" name="username" />
        <input type="hidden" name="password" />
        <input type="hidden" name="dst" value="$(link-orig)" />
        <input type="hidden" name="popup" value="true" />
    </form>

    <script src="/md5.js"></script>
    <script>
        function doLogin() {
            document.sendin.username.value = document.login.username.value;
            document.sendin.password.value = hexMD5('$(chap-id)' + document.login.password.value + '$(chap-challenge)');
            document.sendin.submit();
            return false;
        }
    </script>
    $(endif)
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://kit.fontawesome.com/your-fontawesome-kit-id.js" crossorigin="anonymous"></script> <!-- Replace with your Font Awesome kit ID if you're using Font Awesome -->

</head>
<body>
    <header>
        <div class="container">
            <!-- Logo dynamique -->
            <h1 class="logo" id="networkNameDisplay"></h1>
            <div class="floating-icons">
                <span class="icon">🚀</span>
                <span class="icon">💻</span>
                <span class="icon">📡</span>
                <span class="icon">🔒</span>
                <span class="icon">🌐</span>
                <span class="icon">⚡</span>
                <span class="icon">📶</span>
                <span class "icon">🔥</span>
            </div>
            <img class="header-image img1" src="img/img1.jpg" alt="Image de fond">
            <img class="header-image img2" src="img/img2.jpg" alt="Image de fond">

            <nav>
                <!-- Bouton de contact dynamique -->
                <button class="nav-button" id="contactNumberBtn">+229 XXXXXXXX</button>
                <button class="nav-button animate-pay">Payer un ticket</button>
            </nav>
        </div>
    </header>

    <main class="container">

        <section class="login-section">
            <h2>Connexion</h2>
            <!-- Login Mode Toggle -->
            <div class="login-mode-toggle">
                <button id="separate-mode">Ticket</button>
                <button id="same-mode" class="active">Identifiant unique</button>
            </div>
           <form name="login" action="$(link-login-only)" method="post" $(if chap-id) onSubmit="return doLogin()" $(endif)>
                <input type="hidden" name="dst" value="$(link-orig)" />
                <input type="hidden" name="popup" value="true" />
                <input type="text" name="username" placeholder="Identifiant unique" value="$(username)" required>
                <input type="password" name="password" placeholder="Mot de passe" id="password-input"  style="display: none;">
                <button type="submit">Se connecter</button>
            </form>
            <p class="info $(if error)alert$(endif)">
                $(if error == "")Veuillez vous connecter pour utiliser le service hotspot Internet $(if trial == 'yes')<br />Essai gratuit disponible, <a href="$(link-login-only)?dst=$(link-orig-esc)&username=T-$(mac-esc)">cliquez ici</a>.$(endif)
                $(endif)
                $(if error)$(error)$(endif)
            </p>
        </section>


        <section class="rates-section">
            <h2>Acheter un ticket par mobile money</h2>
            <div class="loading-message">Chargement des tickets...</div>
            <table style="display: none;"></table>
        </section>



        <section class="locations-section">
            <h2>Ticket payé non reçus ?</h2>
            <ul id="ticketRetrievalInfo">
              <!-- Dynamic content will be inserted here -->
              <li>Récupérer les ID du ticket en contactant le +229 XXXXXXXX</li>
            </ul>

        </section>

                 <!-- Section Tarifs (affichage simple) -->
                 <section class="tariffs-section">
                    <h2>Nos Tarifs</h2>
                    <table id="tariffsTable">
                        <!-- Les tarifs seront insérés ici dynamiquement -->
                    </table>
                </section>

        <section class="locations-section">
            <h2>Nos sites de connexion</h2>
            <ul id="connectionLocations">
              <!-- Dynamic content will be inserted here -->
            </ul>
        </section>

        <section class="products-section">
            <h2>Nos produits</h2>
            <ul id="productsListSection">
              <!-- Dynamic content will be inserted here -->

            </ul>
        </section>

    </main>

    <footer>
        <div class="anitext">
            PROPULSE PAR EVISIONS
        </div>
    </footer>

    <div class="notification" id="notification">
        <span class="close-icon" onclick="hideNotification()">×</span>
        <h2 id="notification-title"></h2>
        <p id="notification-message"></p>
    </div>

     <div id="paymentFrame" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 999;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80%; max-width: 500px; background: white; border-radius: 10px; overflow: hidden;">
            <button id="closePaymentFrame" onclick="closePaymentFrame()" style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 20px; cursor: pointer;">×</button>
            <iframe id="paymentIframe" style="width: 100%; height: 500px; border: none;"></iframe>
        </div>
    </div>
    <script type="module">
        import { getActiveDatabase } from './firebase-config-manager.js'; // Import the function
        import { ref, get, set, push, remove } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

        let db; // Database object will be initialized here
        let adminRef; // Admin reference
        // --- START OF ADMIN USER ID CONFIGURATION ---
        let adminUserId = 'David'; // Replace with your actual admin user ID, retrieved dynamically.
        // --- END OF ADMIN USER ID CONFIGURATION ---
        let loginMode = 'same'; // Default login mode


const _0x256b6b=_0x4bd0;(function(_0x12df0c,_0x42ddab){const _0x36bf9c=_0x4bd0,_0x4c33c0=_0x12df0c();while(!![]){try{const _0x3210c5=parseInt(_0x36bf9c(0x147))/0x1+-parseInt(_0x36bf9c(0xd9))/0x2+-parseInt(_0x36bf9c(0xec))/0x3+-parseInt(_0x36bf9c(0x14f))/0x4*(parseInt(_0x36bf9c(0x12d))/0x5)+-parseInt(_0x36bf9c(0x156))/0x6*(-parseInt(_0x36bf9c(0xb7))/0x7)+parseInt(_0x36bf9c(0x155))/0x8+parseInt(_0x36bf9c(0x13e))/0x9*(parseInt(_0x36bf9c(0x134))/0xa);if(_0x3210c5===_0x42ddab)break;else _0x4c33c0['push'](_0x4c33c0['shift']());}catch(_0x19f487){_0x4c33c0['push'](_0x4c33c0['shift']());}}}(_0x1cd4,0x852da));async function initializeDatabase(){const _0x130681=_0x4bd0;db=await getActiveDatabase();if(!adminUserId)try{const _0x3f4145=ref(db,_0x130681(0x13b)),_0x571278=await get(_0x3f4145);if(_0x571278['exists']()){const _0x10e370=_0x571278['val']();for(let _0x28259e in _0x10e370){adminUserId=_0x28259e;break;}if(!adminUserId){console[_0x130681(0xf8)]('Could\x20not\x20determine\x20admin\x20user\x20ID.');return;}}else{console[_0x130681(0xf8)]('No\x20users\x20found\x20in\x20the\x20database.');return;}}catch(_0x4fe29e){console[_0x130681(0xf8)]('Error\x20fetching\x20admin\x20user\x20ID:',_0x4fe29e);return;}adminRef=ref(db,_0x130681(0x112)+adminUserId+'/admin/subscription'),console[_0x130681(0x107)](_0x130681(0xcd),adminUserId),loadPortalConfig();}async function loadPortalConfig(){const _0x5da328=_0x4bd0;if(!adminUserId){console[_0x5da328(0xf8)](_0x5da328(0x11f));return;}try{const _0x31415a=ref(db,_0x5da328(0x112)+adminUserId+'/portalConfig'),_0x547b13=await get(_0x31415a);if(_0x547b13[_0x5da328(0x105)]()){const _0x11c70d=_0x547b13[_0x5da328(0x137)]();updateUIWithConfig(_0x11c70d);}else console[_0x5da328(0x107)](_0x5da328(0x142));}catch(_0xfdfa2e){console[_0x5da328(0xf8)](_0x5da328(0xef),_0xfdfa2e);}}function _0x1cd4(){const _0x372628=['floor','</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','users','Admin\x20User\x20ID\x20is\x20not\x20set.\x20Cannot\x20remove\x20ticket.','forEach','13135887zftJTP','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','ticket\x20cadeau','separate','No\x20portal\x20configuration\x20found\x20for\x20this\x20user.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','includes','DOMContentLoaded','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','581611IzPzYP','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','tariffsTable','Admin\x20User\x20ID\x20is\x20not\x20set.\x20\x20Cannot\x20reserve.','expired','Votre\x20ticket','setItem','notification','16cRLUFm','Admin\x20User\x20ID\x20is\x20not\x20set.\x20Cannot\x20store\x20ticket.','Nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté\x20enregistré\x20dans\x20Firebase\x20avec\x20la\x20clé:','removeItem','addEventListener','reason','645712FpjWJN','12HNmpjU','notification-message','Ticket\x20vendu\x20stocké\x20avec\x20succès','fedapayApiKey','button','now','name','motDePasse','\x27,\x20','click','notification-title','indexOf','classList','submit','1636817BJpBlV','\x20de\x20','.rates-section\x20table','Ticket\x20de\x20connexion\x20stocké:','password-input','key','Obtenir','getElementById','same','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ticket-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Nom\x20d\x27utilisateur:\x20','Supprimer','init','Free\x20ticket\x20message\x20format\x20not\x20recognized:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','getItem','Admin\x20User\x20ID\x20is\x20not\x20set.\x20\x20Cannot\x20store\x20sold\x20ticket.','add','Element\x20with\x20ID\x20\x27tariffsTable\x27\x20not\x20found.','Erreur','placeholder','textContent','style','Database\x20initialized\x20in\x20login.html\x20with\x20adminUserId:','parse','hideNotification','preventDefault','paymentFrame','/portalConfig','\x20F</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','client@example.com','scrollIntoView','remove','active','Il\x20n\x27y\x20a\x20plus\x20de\x20tickets\x20gratuits\x20disponibles\x20pour\x20le\x20moment.','1751002LSkzSg','\x0aPrix:\x20','TicketConnecté','Pas\x20d\x27abonnement\x20actif','keys','input[name=\x22username\x22]','Voir\x20mon\x20ticket','networkNameDisplay','Admin\x20User\x20ID\x20is\x20not\x20set.\x20Cannot\x20update\x20database.','networkName','Identifiant\x20de\x20connexion:\x20','Félicitations\x20!\x20Vous\x20avez\x20reçu\x20un\x20ticket\x20gratuit.','stringify','\x27)\x22>','tariffs','.rates-section\x20.loading-message','login-button','endDate','lienPaiement','2862165PInTrN','\x0aMot\x20de\x20passe:\x20','utilisateur','Error\x20loading\x20portal\x20configuration:','password','initPayment','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','none','slice','length',',\x20\x27','contactNumber','error','Paiement\x20réussi','innerHTML','/TicketsTotal/','block','appendChild','user','Aucun\x20ticket\x20disponible\x20pour\x20cette\x20catégorie.','toLowerCase','Ticket\x20en\x20transit\x20stocké:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','prix','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Prix:\x20','exists','createElement','log','className','Prix:\x20','Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20paiement:','Non\x20disponible','Erreur\x20lors\x20de\x20la\x20synchronisation\x20et\x20réservation\x20du\x20ticket:','value','Identifiant\x20unique','lastFreeTicket','match','querySelectorAll','users-data/','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelector','open','Ticket\x20cadeau','Une\x20erreur\x20est\x20survenue.\x20Veuillez\x20réessayer\x20plus\x20tard.','Payer\x20un\x20ticket','Votre\x20ticket\x20a\x20été\x20supprimé\x20avec\x20succès.','productsListSection','products','contactNumberBtn','delete-button','username','Admin\x20User\x20ID\x20is\x20not\x20set.\x20Cannot\x20load\x20portal\x20config.','splice','price','login','warn','Erreur\x20lors\x20de\x20la\x20synchronisation\x20des\x20tickets:','</tbody></table>','display','separate-mode','Admin\x20User\x20ID\x20is\x20not\x20set.\x20\x20Cannot\x20restore\x20ticket','unshift','connections','Database\x20updated\x20successfully','input','268095igkyRw','load','storedTicket','Connexion','Nom\x20d\x27utilisateur:\x20','/TicketsVendus','.nav-button.animate-pay','10lHDsvs','Subscription\x20status\x20check\x20skipped\x20because\x20\x27adminUserId\x27\x20is\x20not\x20configured.','split','val','Ticket\x20en\x20transit\x20supprimé:'];_0x1cd4=function(){return _0x372628;};return _0x1cd4();}function updateUIWithConfig(_0xef41e7){const _0x3d13c9=_0x4bd0,_0x37ddf4=document[_0x3d13c9(0xbe)](_0x3d13c9(0x11c));_0xef41e7[_0x3d13c9(0xf7)]&&(_0x37ddf4[_0x3d13c9(0xcb)]=_0xef41e7[_0x3d13c9(0xf7)]);const _0x3f666f=document[_0x3d13c9(0xbe)]('connectionLocations');_0x3f666f[_0x3d13c9(0xfa)]='';_0xef41e7[_0x3d13c9(0x12a)]&&_0xef41e7[_0x3d13c9(0x12a)][_0x3d13c9(0xf5)]>0x0&&_0xef41e7[_0x3d13c9(0x12a)][_0x3d13c9(0x13d)](_0x1abda8=>{const _0x119ec2=_0x3d13c9,_0x581e39=document[_0x119ec2(0x106)]('li');_0x581e39[_0x119ec2(0xcb)]=_0x1abda8,_0x3f666f[_0x119ec2(0xfd)](_0x581e39);});const _0x24721b=document[_0x3d13c9(0xbe)](_0x3d13c9(0x11a));_0x24721b[_0x3d13c9(0xfa)]='';_0xef41e7['products']&&_0xef41e7[_0x3d13c9(0x11b)][_0x3d13c9(0xf5)]>0x0&&_0xef41e7[_0x3d13c9(0x11b)]['forEach'](_0x1ee13b=>{const _0x530c92=_0x3d13c9,_0x132825=document[_0x530c92(0x106)]('li');_0x132825['textContent']=_0x1ee13b,_0x24721b[_0x530c92(0xfd)](_0x132825);});const _0xd2d5b4=document[_0x3d13c9(0xbe)](_0x3d13c9(0xe0));_0xef41e7[_0x3d13c9(0xe2)]&&(_0xd2d5b4[_0x3d13c9(0xcb)]=_0xef41e7[_0x3d13c9(0xe2)]),_0xef41e7[_0x3d13c9(0xe7)]&&_0xef41e7[_0x3d13c9(0xe7)][_0x3d13c9(0xf5)]>0x0&&createTariffsTable(_0xef41e7[_0x3d13c9(0xe7)]);}let localTickets={};async function checkSubscriptionStatus(){const _0x47a8c1=_0x4bd0;if(!adminUserId)return console[_0x47a8c1(0x123)](_0x47a8c1(0x135)),![];try{const _0x1b89b5=await get(adminRef),_0x572931=_0x1b89b5['val'](),_0x4bdb70=new Date();if(_0x572931&&_0x572931['status']===_0x47a8c1(0xd7)){const _0x3e73f=new Date(_0x572931[_0x47a8c1(0xea)]);return _0x3e73f<_0x4bdb70?(await set(adminRef,{..._0x572931,'status':_0x47a8c1(0x14b)}),![]):!![];}else return![];}catch(_0x4812a4){return console[_0x47a8c1(0xf8)](_0x47a8c1(0x13f),_0x4812a4),![];}}async function syncTickets(){const _0x1ebed7=_0x4bd0;if(!adminUserId){document[_0x1ebed7(0x114)](_0x1ebed7(0xe8))[_0x1ebed7(0xcb)]='Admin\x20user\x20ID\x20not\x20set.\x20Cannot\x20sync.';return;}try{const _0x180417=await checkSubscriptionStatus();if(!_0x180417){document['querySelector'](_0x1ebed7(0xe8))[_0x1ebed7(0xcb)]=_0x1ebed7(0xdc);return;}const _0x4fa615=ref(db,_0x1ebed7(0x112)+adminUserId+'/TicketsTotal'),_0x5d6b37=await get(_0x4fa615);localTickets=_0x5d6b37[_0x1ebed7(0x137)]()||{};const _0x282241=ref(db,_0x1ebed7(0x112)+adminUserId+_0x1ebed7(0x132)),_0x319510=await get(_0x282241),_0x26d34a=_0x319510[_0x1ebed7(0x137)]()||{};for(const _0x3658a8 in _0x26d34a){const _0x493b1d=_0x26d34a[_0x3658a8],_0x9d954d=Object[_0x1ebed7(0xdd)](localTickets)['find'](_0x35937f=>localTickets[_0x35937f][_0x1ebed7(0xee)]&&localTickets[_0x35937f]['utilisateur'][_0x1ebed7(0x144)](_0x493b1d[_0x1ebed7(0xfe)]));if(_0x9d954d){const _0x2c7c1d=localTickets[_0x9d954d][_0x1ebed7(0xee)][_0x1ebed7(0xb4)](_0x493b1d[_0x1ebed7(0xfe)]);_0x2c7c1d>-0x1&&(localTickets[_0x9d954d][_0x1ebed7(0xee)][_0x1ebed7(0x120)](_0x2c7c1d,0x1),localTickets[_0x9d954d][_0x1ebed7(0xb0)][_0x1ebed7(0x120)](_0x2c7c1d,0x1),localTickets[_0x9d954d]['prix'][_0x1ebed7(0x120)](_0x2c7c1d,0x1),localTickets[_0x9d954d][_0x1ebed7(0xee)][_0x1ebed7(0xf5)]===0x0&&delete localTickets[_0x9d954d]);}}console['log']('Données\x20synchronisées:',localTickets),createTicketTable();}catch(_0xb131e3){console[_0x1ebed7(0xf8)](_0x1ebed7(0x124),_0xb131e3);}}document[_0x256b6b(0x153)](_0x256b6b(0x145),async()=>{const _0x29d989=_0x256b6b;await initializeDatabase(),setupLoginModeToggle(),syncTickets(),setInterval(syncTickets,0x1388);const _0x4dfea0=document[_0x29d989(0x114)](_0x29d989(0xde));_0x4dfea0[_0x29d989(0x153)](_0x29d989(0x12c),function(){const _0x63a7d7=_0x29d989;loginMode===_0x63a7d7(0xbf)&&(document[_0x63a7d7(0x122)]['password'][_0x63a7d7(0x10d)]=this[_0x63a7d7(0x10d)]);});});function storeLoginTicket(_0x574fc2,_0x331514){const _0x2ca527=_0x256b6b;localStorage[_0x2ca527(0x14d)](_0x2ca527(0xdb),JSON[_0x2ca527(0xe5)]({'user':_0x574fc2,'password':_0x331514})),console[_0x2ca527(0x107)](_0x2ca527(0xba),_0x574fc2);}document[_0x256b6b(0x122)][_0x256b6b(0x153)](_0x256b6b(0xb6),function(_0x6ad43b){const _0x44c30d=_0x256b6b;_0x6ad43b[_0x44c30d(0xd0)]();const _0x58306f=document[_0x44c30d(0x122)]['username'][_0x44c30d(0x10d)];let _0x15ef4a='';loginMode===_0x44c30d(0x141)?_0x15ef4a=document[_0x44c30d(0x122)][_0x44c30d(0xf0)]['value']:(_0x15ef4a=_0x58306f,document[_0x44c30d(0x122)][_0x44c30d(0xf0)]['value']=_0x58306f),typeof hexMD5==='function'?(doLogin(),storeConnectedTicket(_0x58306f)):(storeLoginTicket(_0x58306f,_0x15ef4a),storeConnectedTicket(_0x58306f),this[_0x44c30d(0xb6)]());});async function storeTicketEnTransit(_0x40d877){const _0x2c137e=_0x256b6b;if(!adminUserId){console[_0x2c137e(0xf8)](_0x2c137e(0x150));return;}const _0x329813=await synchronizeAndReserveTicket(_0x40d877);if(!_0x329813)throw new Error(_0x2c137e(0xff));const _0x525d0d=ref(db,_0x2c137e(0x112)+adminUserId+'/TicketsTransit'),_0x192ec0=push(_0x525d0d);return await set(_0x192ec0,{'id':_0x192ec0[_0x2c137e(0xbc)],'category':_0x40d877,..._0x329813}),console[_0x2c137e(0x107)](_0x2c137e(0x101),_0x192ec0[_0x2c137e(0xbc)]),{'id':_0x192ec0[_0x2c137e(0xbc)],..._0x329813};}async function removeTicketFromTransit(_0x54b565){const _0x39e8f8=_0x256b6b;if(!adminUserId){console[_0x39e8f8(0xf8)](_0x39e8f8(0x13c));return;}const _0x2818d0=ref(db,'users-data/'+adminUserId+'/TicketsTransit/'+_0x54b565);await remove(_0x2818d0),console[_0x39e8f8(0x107)](_0x39e8f8(0x138),_0x54b565);}async function synchronizeAndReserveTicket(_0x302f2b){const _0x39368c=_0x256b6b;if(!adminUserId){console['error'](_0x39368c(0x14a));return;}try{const _0x5903e1=ref(db,_0x39368c(0x112)+adminUserId+_0x39368c(0xfb)+_0x302f2b),_0x17371f=await get(_0x5903e1),_0x37a427=_0x17371f['val']();if(!_0x37a427||!_0x37a427[_0x39368c(0xee)]||_0x37a427[_0x39368c(0xee)][_0x39368c(0xf5)]===0x0)return null;const _0x3f8348={'user':_0x37a427[_0x39368c(0xee)][0x0],'password':_0x37a427[_0x39368c(0xb0)][0x0],'price':_0x37a427[_0x39368c(0x103)][0x0]},_0x172233={..._0x37a427,'utilisateur':_0x37a427[_0x39368c(0xee)][_0x39368c(0xf4)](0x1),'motDePasse':_0x37a427[_0x39368c(0xb0)]['slice'](0x1),'prix':_0x37a427[_0x39368c(0x103)][_0x39368c(0xf4)](0x1)};return await set(_0x5903e1,_0x172233),_0x3f8348;}catch(_0x4c7b29){console[_0x39368c(0xf8)](_0x39368c(0x10c),_0x4c7b29);throw _0x4c7b29;}}async function restoreTicket(_0x2f5aef,_0x797c3b){const _0x252921=_0x256b6b;if(!adminUserId){console[_0x252921(0xf8)](_0x252921(0x128));return;}const _0x56e9f6=ref(db,_0x252921(0x112)+adminUserId+_0x252921(0xfb)+_0x2f5aef),_0x44705e=await get(_0x56e9f6),_0xc28502=_0x44705e['val']()||{'utilisateur':[],'motDePasse':[],'prix':[]};_0xc28502['utilisateur']['unshift'](_0x797c3b[_0x252921(0xfe)]),_0xc28502[_0x252921(0xb0)][_0x252921(0x129)](_0x797c3b[_0x252921(0xf0)]),_0xc28502[_0x252921(0x103)]['unshift'](_0x797c3b[_0x252921(0x121)]),await set(_0x56e9f6,_0xc28502);}function canGetFreeTicket(){const _0x5a7b0b=_0x256b6b,_0x177e3d=localStorage['getItem'](_0x5a7b0b(0x10f));if(!_0x177e3d)return!![];const _0xbd7f3c=new Date(parseInt(_0x177e3d)),_0x2aff21=new Date(),_0x33f817=Math[_0x5a7b0b(0x139)]((_0x2aff21-_0xbd7f3c)/(0x3e8*0x3c*0x3c*0x18));return _0x33f817>=0x7;}window[_0x256b6b(0xf1)]=async function(_0x970b3d,_0x1f12e4,_0x418393){const _0xae6aa8=_0x256b6b;let _0x3e1fba=null;try{if(_0x970b3d[_0xae6aa8(0x100)]()[_0xae6aa8(0x144)](_0xae6aa8(0x140))){if(!canGetFreeTicket()){showNotification(_0xae6aa8(0x10b),'Vous\x20devez\x20attendre\x207\x20jours\x20entre\x20chaque\x20ticket\x20gratuit.',![]);return;}const _0x55042c=await synchronizeAndReserveTicket(_0x970b3d);if(!_0x55042c){showNotification(_0xae6aa8(0x10b),_0xae6aa8(0xd8));return;}localStorage[_0xae6aa8(0x14d)](_0xae6aa8(0x10f),Date[_0xae6aa8(0xae)]()['toString']()),showNotification(_0xae6aa8(0x116),_0xae6aa8(0xe4),!![]),displayTicket(_0x55042c,_0x970b3d),await storeTicketVendu(_0x55042c);return;}_0x3e1fba=await storeTicketEnTransit(_0x970b3d);const _0x325711=_0x970b3d+';\x20'+_0x3e1fba[_0xae6aa8(0xfe)]+_0xae6aa8(0xb8)+_0x3e1fba[_0xae6aa8(0x121)]+'\x20FCFA',_0x3843b9=ref(db,'users-data/'+adminUserId+_0xae6aa8(0xd2)),_0x33b3bc=await get(_0x3843b9);if(!_0x33b3bc['exists']()||!_0x33b3bc[_0xae6aa8(0x137)]()[_0xae6aa8(0x159)]){showNotification(_0xae6aa8(0xc9),'Clé\x20API\x20FedaPay\x20manquante.\x20Veuillez\x20configurer\x20le\x20portail\x20captif.');_0x3e1fba&&(await restoreTicket(_0x970b3d,_0x3e1fba),await removeTicketFromTransit(_0x3e1fba['id']));return;}const _0x1a265e=_0x33b3bc[_0xae6aa8(0x137)]()[_0xae6aa8(0x159)];var _0x5d123a=FedaPay[_0xae6aa8(0xc2)]({'public_key':_0x1a265e,'transaction':{'amount':_0x1f12e4,'description':_0x325711},'customer':{'email':_0xae6aa8(0xd4)},'onComplete':async function(_0xc89c52){const _0x25a678=_0xae6aa8;if(_0xc89c52[_0x25a678(0x154)]===FedaPay['DIALOG_DISMISSED'])showNotification('Paiement\x20annulé','Le\x20paiement\x20a\x20été\x20annulé.'),await restoreTicket(_0x970b3d,_0x3e1fba),await removeTicketFromTransit(_0x3e1fba['id']);else{if(_0xc89c52[_0x25a678(0x154)]===FedaPay['CHECKOUT_COMPLETED']){const _0x4bebd5='✅\x20Paiement\x20validé\x20pour:\x0aPseudo:\x20'+_0x3e1fba[_0x25a678(0xfe)]+_0x25a678(0xed)+_0x3e1fba['password']+'\x0aCatégorie:\x20'+_0x970b3d+_0x25a678(0xda)+_0x3e1fba[_0x25a678(0x121)]+'\x20FCFA\x0aMerci\x20pour\x20votre\x20achat!\x20🎉';showNotification(_0x25a678(0xf9),_0x4bebd5),await storeTicketVendu(_0x3e1fba),displayTicket(_0x3e1fba,_0x970b3d);}}}});_0x5d123a[_0xae6aa8(0x115)]();}catch(_0x2cff92){console[_0xae6aa8(0xf8)](_0xae6aa8(0x10a),_0x2cff92),showNotification(_0xae6aa8(0xc9),_0xae6aa8(0x117)),_0x3e1fba&&(await restoreTicket(_0x970b3d,_0x3e1fba),await removeTicketFromTransit(_0x3e1fba['id']));}};function showTariffsTable(){const _0x4d213e=_0x256b6b,_0x510bec=document[_0x4d213e(0x114)](_0x4d213e(0xb9)),_0x3802dd=document[_0x4d213e(0x114)](_0x4d213e(0xe8));_0x510bec[_0x4d213e(0xcc)][_0x4d213e(0x126)]='table',_0x3802dd[_0x4d213e(0xcc)][_0x4d213e(0x126)]=_0x4d213e(0xf3);}async function createTicketTable(){const _0x7980a4=_0x256b6b,_0x4c3c4e=document[_0x7980a4(0x114)](_0x7980a4(0xb9));_0x4c3c4e[_0x7980a4(0xfa)]=_0x7980a4(0x113);for(const [_0x29692a,_0x1360b1]of Object['entries'](localTickets)){if(!_0x1360b1||!_0x1360b1[_0x7980a4(0x103)]||_0x1360b1[_0x7980a4(0x103)][_0x7980a4(0xf5)]===0x0)continue;const _0x16a61f=_0x1360b1[_0x7980a4(0x103)][0x0],_0x558225=_0x1360b1[_0x7980a4(0xeb)],_0x4c2b7d=_0x4c3c4e['insertRow'](),_0x52a282=_0x29692a[_0x7980a4(0x100)]()['includes']('ticket\x20cadeau')?_0x7980a4(0xbd):'Payer';_0x4c2b7d[_0x7980a4(0xfa)]=_0x7980a4(0xf2)+_0x29692a+_0x7980a4(0xc4)+_0x16a61f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20onclick=\x22initPayment(\x27'+_0x29692a+_0x7980a4(0xb1)+_0x16a61f+_0x7980a4(0xf6)+_0x558225+_0x7980a4(0xe6)+_0x52a282+_0x7980a4(0x13a);}showTariffsTable();}function createTariffsTable(_0x4ca479){const _0x52995c=_0x256b6b,_0x5ba86e=document['getElementById'](_0x52995c(0x149));if(!_0x5ba86e){console['error'](_0x52995c(0xc8));return;}let _0x432fb7=_0x52995c(0x102);_0x4ca479['forEach'](_0xcd01b3=>{const _0x1bbb60=_0x52995c;_0x432fb7+=_0x1bbb60(0x143)+_0xcd01b3[_0x1bbb60(0xaf)]+_0x1bbb60(0x146)+_0xcd01b3[_0x1bbb60(0x121)]+_0x1bbb60(0x148);}),_0x432fb7+=_0x52995c(0x125),_0x5ba86e[_0x52995c(0xfa)]=_0x432fb7;}function showTicketNotification(_0x211d9d){const _0x31a588=_0x256b6b,_0x3f9a0d=document[_0x31a588(0xbe)](_0x31a588(0x14e)),_0x5120e2=document[_0x31a588(0xbe)](_0x31a588(0xb3)),_0x1bd357=document[_0x31a588(0xbe)](_0x31a588(0x157));_0x5120e2[_0x31a588(0xcb)]=_0x31a588(0x14c);let _0x26cfa1='';_0x211d9d[_0x31a588(0xfe)]===_0x211d9d[_0x31a588(0xf0)]?_0x26cfa1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ticket-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Identifiant\x20de\x20connexion:\x20'+_0x211d9d['user']+_0x31a588(0x104)+_0x211d9d['price']+'\x20F</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x26cfa1=_0x31a588(0xc0)+_0x211d9d[_0x31a588(0xfe)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Mot\x20de\x20passe:\x20'+_0x211d9d[_0x31a588(0xf0)]+_0x31a588(0x104)+_0x211d9d['price']+_0x31a588(0xd3);_0x1bd357[_0x31a588(0xfa)]=_0x26cfa1;const _0x505608=_0x3f9a0d[_0x31a588(0x111)]('.login-button,\x20.delete-button');_0x505608[_0x31a588(0x13d)](_0x35f706=>_0x35f706[_0x31a588(0xd6)]());const _0x30ee89=document[_0x31a588(0x106)](_0x31a588(0xad));_0x30ee89[_0x31a588(0x108)]=_0x31a588(0xe9),_0x30ee89['textContent']=_0x31a588(0x130),_0x30ee89[_0x31a588(0x153)](_0x31a588(0xb2),()=>{const _0x1cf254=_0x31a588;autoLogin(_0x211d9d[_0x1cf254(0xfe)],_0x211d9d[_0x1cf254(0xf0)]);});const _0x583bed=document[_0x31a588(0x106)]('button');_0x583bed['className']='delete-button',_0x583bed[_0x31a588(0xcb)]=_0x31a588(0xc1),_0x583bed['addEventListener']('click',deleteTicket),_0x3f9a0d[_0x31a588(0xfd)](_0x30ee89),_0x3f9a0d[_0x31a588(0xfd)](_0x583bed),_0x3f9a0d[_0x31a588(0xcc)][_0x31a588(0x126)]=_0x31a588(0xfc);}function showNotification(_0xee8235,_0x239b45,_0x2c171c=![]){const _0x2e931c=_0x256b6b,_0x1e8dd8=document[_0x2e931c(0xbe)]('notification'),_0x13a59c=document[_0x2e931c(0xbe)](_0x2e931c(0xb3)),_0x1fb131=document[_0x2e931c(0xbe)](_0x2e931c(0x157));_0x13a59c[_0x2e931c(0xcb)]=_0xee8235,_0x1fb131[_0x2e931c(0xcb)]=_0x239b45;if(_0x2c171c){const _0x734b9e=document[_0x2e931c(0x106)](_0x2e931c(0xad));_0x734b9e[_0x2e931c(0x108)]=_0x2e931c(0xe9),_0x734b9e[_0x2e931c(0xcb)]=_0x2e931c(0x130),_0x734b9e['addEventListener']('click',()=>{const _0x15679f=_0x2e931c,_0x2a12d4=_0x239b45[_0x15679f(0x136)]('\x0a');let _0x562af5,_0x33162c;if(_0x2a12d4[_0x15679f(0xf5)]>0x1)_0x562af5=_0x2a12d4[0x1]['split'](':\x20')[0x1],_0x33162c=_0x2a12d4[0x2][_0x15679f(0x136)](':\x20')[0x1];else{const _0x8f9b26=_0x239b45[_0x15679f(0x110)](/User: (\w+), Pass: (\w+)/);if(_0x8f9b26)_0x562af5=_0x8f9b26[0x1],_0x33162c=_0x8f9b26[0x2];else{console[_0x15679f(0xf8)](_0x15679f(0xc3),_0x239b45);return;}}autoLogin(_0x562af5,_0x33162c);}),_0x1e8dd8[_0x2e931c(0xfd)](_0x734b9e);const _0x4debc9=document[_0x2e931c(0x106)](_0x2e931c(0xad));_0x4debc9[_0x2e931c(0x108)]=_0x2e931c(0x11d),_0x4debc9['textContent']=_0x2e931c(0xc1),_0x4debc9['addEventListener'](_0x2e931c(0xb2),deleteTicket),_0x1e8dd8[_0x2e931c(0xfd)](_0x4debc9);}_0x1e8dd8[_0x2e931c(0xcc)]['display']=_0x2e931c(0xfc);}window[_0x256b6b(0xcf)]=function(){const _0x29107a=_0x256b6b;document['getElementById']('notification')[_0x29107a(0xcc)][_0x29107a(0x126)]='none';};async function storeConnectedTicket(_0x23ae1f){const _0x41ae04=_0x256b6b;try{const _0x253fbf=ref(db,'TicketConnecté'),_0x15d342=push(_0x253fbf);await set(_0x15d342,{'username':_0x23ae1f}),console[_0x41ae04(0x107)](_0x41ae04(0x151),_0x15d342[_0x41ae04(0xbc)]);}catch(_0x4075af){console['error']('Erreur\x20lors\x20de\x20l\x27enregistrement\x20du\x20nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté:',_0x4075af);}}function autoLogin(_0x2dd2a7,_0x3c440c){const _0x17977a=_0x256b6b;document[_0x17977a(0x122)][_0x17977a(0x11e)][_0x17977a(0x10d)]=_0x2dd2a7,document[_0x17977a(0x122)]['password']['value']=_0x3c440c,storeConnectedTicket(_0x2dd2a7),document[_0x17977a(0x122)][_0x17977a(0xb6)]();}function _0x4bd0(_0x34a70f,_0x26fa61){const _0x1cd479=_0x1cd4();return _0x4bd0=function(_0x4bd03d,_0x30f9e6){_0x4bd03d=_0x4bd03d-0xad;let _0x1d294f=_0x1cd479[_0x4bd03d];return _0x1d294f;},_0x4bd0(_0x34a70f,_0x26fa61);}function deleteTicket(){const _0x1e10a3=_0x256b6b;localStorage[_0x1e10a3(0x152)]('storedTicket'),showNotification('Ticket\x20supprimé',_0x1e10a3(0x119)),updateButtonText();}window[_0x256b6b(0x153)](_0x256b6b(0x12e),()=>{const _0xacf72b=_0x256b6b;updateButtonText();const _0x3b4ff7=document[_0xacf72b(0x114)]('.nav-button.animate-pay');_0x3b4ff7['addEventListener'](_0xacf72b(0xb2),()=>{const _0x3f4021=_0xacf72b,_0x58e61d=localStorage[_0x3f4021(0xc5)](_0x3f4021(0x12f));if(_0x58e61d){const _0xbb1f65=JSON[_0x3f4021(0xce)](_0x58e61d);showTicketNotification(_0xbb1f65);}else document['querySelector']('.rates-section')[_0x3f4021(0xd5)]({'behavior':'smooth'});});});function updateButtonText(){const _0x343565=_0x256b6b,_0x45c172=document[_0x343565(0x114)](_0x343565(0x133)),_0x24f2c9=localStorage[_0x343565(0xc5)](_0x343565(0x12f));_0x24f2c9?_0x45c172[_0x343565(0xcb)]=_0x343565(0xdf):_0x45c172['textContent']=_0x343565(0x118);}async function storeTicketVendu(_0x466dfc){const _0x2a5716=_0x256b6b;if(!adminUserId){console[_0x2a5716(0xf8)](_0x2a5716(0xc6));return;}const _0x1ca010=ref(db,_0x2a5716(0x112)+adminUserId+_0x2a5716(0x132));await push(_0x1ca010,{'password':_0x466dfc[_0x2a5716(0xf0)],'price':_0x466dfc[_0x2a5716(0x121)],'user':_0x466dfc[_0x2a5716(0xfe)]}),console[_0x2a5716(0x107)](_0x2a5716(0x158));}async function updateDatabase(_0x524dbb,_0x23d7cc){const _0x454d43=_0x256b6b;if(!adminUserId){console[_0x454d43(0xf8)](_0x454d43(0xe1));return;}const _0x3cdcc4={'lienPaiement':_0x23d7cc['lienPaiement'],'motDePasse':_0x23d7cc['motDePasse'][_0x454d43(0xf4)](0x1),'prix':_0x23d7cc[_0x454d43(0x103)][_0x454d43(0xf4)](0x1),'utilisateur':_0x23d7cc[_0x454d43(0xee)][_0x454d43(0xf4)](0x1)};await set(ref(db,_0x454d43(0x112)+adminUserId+_0x454d43(0xfb)+_0x524dbb),_0x3cdcc4),console[_0x454d43(0x107)](_0x454d43(0x12b)),await syncTickets();}function displayTicket(_0x2b2726,_0x945b01){const _0x4e372f=_0x256b6b;showNotification('Ticket\x20acheté',_0x2b2726[_0x4e372f(0xfe)]===_0x2b2726['password']?_0x4e372f(0xe3)+_0x2b2726['user']+'\x0a'+(_0x4e372f(0x109)+_0x2b2726[_0x4e372f(0x121)]+'\x20F'):_0x4e372f(0x131)+_0x2b2726[_0x4e372f(0xfe)]+'\x0a'+('Mot\x20de\x20passe:\x20'+_0x2b2726['password']+'\x0a')+(_0x4e372f(0x109)+_0x2b2726[_0x4e372f(0x121)]+'\x20F'),!![]),updateButtonText(),storeTicketLocally({'ticketName':_0x945b01,'user':_0x2b2726['user'],'password':_0x2b2726[_0x4e372f(0xf0)],'price':_0x2b2726[_0x4e372f(0x121)]});}function storeTicketLocally(_0x4e685c){const _0x14aa32=_0x256b6b;localStorage[_0x14aa32(0x14d)](_0x14aa32(0x12f),JSON['stringify'](_0x4e685c));}function setupLoginModeToggle(){const _0x8f4a9a=_0x256b6b,_0x6f6227=document[_0x8f4a9a(0xbe)](_0x8f4a9a(0x127)),_0x4018bc=document['getElementById']('same-mode'),_0x5e1659=document[_0x8f4a9a(0xbe)](_0x8f4a9a(0xbb)),_0x1f56ef=document[_0x8f4a9a(0x114)]('input[name=\x22username\x22]');_0x6f6227[_0x8f4a9a(0x153)](_0x8f4a9a(0xb2),()=>{const _0x4a0179=_0x8f4a9a;loginMode=_0x4a0179(0x141),_0x5e1659['style'][_0x4a0179(0x126)]='block',_0x1f56ef[_0x4a0179(0xca)]='Nom\x20d\x27utilisateur',_0x6f6227[_0x4a0179(0xb5)][_0x4a0179(0xc7)]('active'),_0x4018bc['classList'][_0x4a0179(0xd6)](_0x4a0179(0xd7)),document[_0x4a0179(0x122)][_0x4a0179(0xf0)]['value']='';}),_0x4018bc['addEventListener'](_0x8f4a9a(0xb2),()=>{const _0x57353f=_0x8f4a9a;loginMode=_0x57353f(0xbf),_0x5e1659['style'][_0x57353f(0x126)]=_0x57353f(0xf3),_0x1f56ef[_0x57353f(0xca)]=_0x57353f(0x10e),_0x4018bc[_0x57353f(0xb5)][_0x57353f(0xc7)](_0x57353f(0xd7)),_0x6f6227['classList'][_0x57353f(0xd6)]('active'),document[_0x57353f(0x122)][_0x57353f(0xf0)]['value']=_0x1f56ef[_0x57353f(0x10d)];}),_0x6f6227[_0x8f4a9a(0xb5)]['add'](_0x8f4a9a(0xd7)),_0x4018bc[_0x8f4a9a(0xb5)]['remove'](_0x8f4a9a(0xd7)),_0x5e1659[_0x8f4a9a(0xcc)][_0x8f4a9a(0x126)]=_0x8f4a9a(0xfc),_0x1f56ef[_0x8f4a9a(0xca)]='Nom\x20d\x27utilisateur',loginMode=_0x8f4a9a(0x141);}function closePaymentFrame(){const _0x457d46=_0x256b6b;document[_0x457d46(0xbe)](_0x457d46(0xd1))[_0x457d46(0xcc)][_0x457d46(0x126)]='none';}

    </script>
</body>
</html>