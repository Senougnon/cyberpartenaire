<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion Cyber Campus</title>
    <style>
        /* ... (Le CSS de votre ancien login.html, inchangé) ... */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #36ff03, #1900ff, #a7ff03);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }

        header {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .header-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .img1 {
            animation: slide1 10s linear infinite;
        }

        .img2 {
            animation: slide2 10s linear infinite;
        }

        .logo {
            font-size: 2.5em;
            color: white;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }

        .logo::before {
            content: '';
            font-size: 0.8em;
            margin-right: 10px;
            animation: rotate 5s linear infinite;
            display: inline-block;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .moon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: wrap;
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 150px;
            text-align: center;
            margin: 5px;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background-color: rgb(0, 0, 0);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .nav-button:hover::before {
            width: 300px;
            height: 300px;
        }

        @keyframes buttonPulse {
            0% { background-color: #020202; color: #ffffff; }
            50% { background-color: #1a2a6c; color: #c8ff00; }
            100% { background-color: #000000; color: #ffffff; }
        }

        .nav-button.animate-pay {
            animation: buttonPulse 3s ease-in-out infinite;
        }

        @keyframes textChange {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        main {
            display: flex;
            flex-direction: column;
            padding: 20px 10px;
            gap: 20px;
            flex: 1;
        }

        .login-section,
        .rates-section,
        .locations-section,
        .products-section {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        section:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .login-section {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        h2 {
            color: rgb(0, 0, 0);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #fdbb2d;
            transition: width 0.3s;
        }

        section:hover h2::after {
            width: 100%;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input {
            margin-bottom: 10px;
            padding: 12px;
            border: none;
            border-radius: 25px;
            background-color: rgb(255, 253, 250);
            color: rgb(0, 0, 0);
            transition: background-color 0.3s;
        }

        input:focus {
            background-color: rgba(255, 255, 255, 0.3);
            outline: none;
        }

        button {
            background-color: #000000;
            color: #ffffff;
            border: none;
            padding: 10px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        button:hover {
            background-color: #1a2a6c;
            color: #fdbb2d;
        }

        .rates-section {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .rates-section table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 10px 0;
        }

        .rates-section th,
        .rates-section td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .rates-section th:first-child,
        .rates-section td:first-child {
            padding-left: 20px;
        }

        .rates-section th:last-child,
        .rates-section td:last-child {
            padding-right: 20px;
        }

        .rates-section .loading-message {
            text-align: center;
            padding: 20px;
        }

        ul {
            list-style-type: none;
        }

        li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 20px;
        }

        li::before {
            content: '➤';
            position: absolute;
            left: 0;
            color: #fdbb2d;
        }

        footer {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 15px;
            text-align: center;
            margin-top: auto;
        }

        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
            color: #1a2a6c;
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        .notification h2 {
            color: #1a2a6c;
            margin-bottom: 20px;
        }

        .notification p {
            margin-bottom: 15px;
        }

        .close-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
        }

        .notification .ticket-info {
            margin-bottom: 15px;
            text-align: left;
        }

        .notification .ticket-info p {
            margin-bottom: 5px;
        }

        .notification .login-button,
        .notification .delete-button {
            display: inline-block;
            margin: 0 10px;
        }

        .notification .login-button {
            background-color: #fdbb2d;
            color: #1a2a6c;
        }

        .delete-button {
            background-color: #f44336;
            color: white;
        }

        .delete-button:hover {
            background-color: #d32f2f;
        }

        .notification.error {
            background-color: #fdd;
            border: 1px solid #faa;
            color: #f00;
        }

        /* Footer Popup Styles */
        .footer-popup {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translate(-50%, 200%);
            width: 95%;
            max-width: 600px;
            padding: 2rem;
            border-radius: 25px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, rgba(129, 0, 0, 0.95) 0%, rgba(0, 60, 150, 0.95) 100%);
            backdrop-filter: blur(10px);
            color: white;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3),
                        0 0 20px rgba(0, 89, 255, 0.3),
                        inset 0 0 60px rgba(0, 89, 255, 0.1);
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-popup.show {
            transform: translate(-50%, 0);
            opacity: 1;
        }

        .footer-popup .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        /* Animations */
        @keyframes slide1 {
            0% { transform: translateX(0); }
            50% { transform: translateX(-100%); }
            100% { transform: translateX(0); }
        }

        @keyframes slide2 {
            0% { transform: translateX(100%); }
            50% { transform: translateX(0); }
            100% { transform: translateX(100%); }
        }

        /* Media Queries */
        @media screen and (max-width: 768px) {
            .container {
                padding: 5px;
            }

            .logo {
                font-size: 2em;
            }

            nav {
                flex-direction: column;
                padding: 0 15px;
            }

            .nav-button {
                width: 100%;
                margin: 5px 0;
            }

            main {
                padding: 10px 5px;
            }

            .login-section,
            .rates-section,
            .locations-section,
            .products-section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .rates-section {
                margin: 0 -5px;
                width: calc(100% + 10px);
                border-radius: 0;
            }

            .rates-section table {
                font-size: 14px;
            }

            .rates-section th,
            .rates-section td {
                padding: 8px;
            }

            .footer-popup {
                width: 92%;
                padding: 1.5rem;
            }
        }

        @media screen and (max-width: 480px) {
            .logo {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.2em;
            }

            .rates-section th,
            .rates-section td {
                padding: 6px;
                font-size: 12px;
            }

            .notification {
                width: 95%;
                padding: 15px;
            }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: nowrap; /* Empêche le retour à la ligne */
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 0; /* Supprime la largeur minimale */
            text-align: center;
            margin: 5px;
            white-space: nowrap; /* Empêche le texte de passer à la ligne */
            font-size: 14px; /* Taille de police réduite pour mobile */
            flex: 1; /* Les boutons se partagent l'espace disponible */
            max-width: calc(50% - 10px); /* Maximum 50% de la largeur moins la marge */
        }

        /* Modification des media queries */
        @media screen and (max-width: 768px) {
            nav {
                flex-direction: row; /* Force l'alignement horizontal */
                padding: 0 10px;
            }

            .nav-button {
                width: auto; /* Permet aux boutons de s'adapter à leur contenu */
                margin: 5px;
                font-size: 12px; /* Taille de police encore plus petite pour les très petits écrans */
            }
        }

        @media screen and (max-width: 320px) {
            .nav-button {
                padding: 8px 12px; /* Padding réduit pour les très petits écrans */
                font-size: 11px;
            }
        }
    </style>

    $(if chap-id)
    <form name="sendin" action="$(link-login-only)" method="post" style="display:none">
        <input type="hidden" name="username" />
        <input type="hidden" name="password" />
        <input type="hidden" name="dst" value="$(link-orig)" />
        <input type="hidden" name="popup" value="true" />
    </form>

    <script src="/md5.js"></script>
    <script>
        function doLogin() {
            document.sendin.username.value = document.login.username.value;
            document.sendin.password.value = hexMD5('$(chap-id)' + document.login.password.value + '$(chap-challenge)');
            document.sendin.submit();
            return false;
        }
    </script>
    $(endif)
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script type="module">
(function(_0x39be78,_0x3faf69){var _0x42b6d1=_0x1f78,_0x4ba071=_0x39be78();while(!![]){try{var _0x27f406=-parseInt(_0x42b6d1(0xd0))/0x1+-parseInt(_0x42b6d1(0xcc))/0x2+-parseInt(_0x42b6d1(0xca))/0x3*(-parseInt(_0x42b6d1(0xd3))/0x4)+parseInt(_0x42b6d1(0xcf))/0x5*(-parseInt(_0x42b6d1(0xd2))/0x6)+parseInt(_0x42b6d1(0xcb))/0x7+-parseInt(_0x42b6d1(0xcd))/0x8*(parseInt(_0x42b6d1(0xce))/0x9)+parseInt(_0x42b6d1(0xd1))/0xa;if(_0x27f406===_0x3faf69)break;else _0x4ba071['push'](_0x4ba071['shift']());}catch(_0x4789e4){_0x4ba071['push'](_0x4ba071['shift']());}}}(_0x562b,0xf28f8));function _0x562b(){var _0xa2db1=['24tBnBHc','3208uTjfQI','1398shPuew','12496246bmGbbY','2522632xVplIM','24zqPwUJ','1483011rEdYSl','2190360UBIjUu','1832478CXWmzE','41750370WlXukV'];_0x562b=function(){return _0xa2db1;};return _0x562b();}function _0x1f78(_0x57b422,_0x47c083){var _0x562b96=_0x562b();return _0x1f78=function(_0x1f78e9,_0x614f15){_0x1f78e9=_0x1f78e9-0xca;var _0x63b0f8=_0x562b96[_0x1f78e9];return _0x63b0f8;},_0x1f78(_0x57b422,_0x47c083);}import{getActiveDatabase}from'./firebase-config-manager.js';import{ref,get,set,push,remove}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';
        const adminUserId = '<!-- ADMIN_USER_ID -->';
        const networkName = '<!-- NETWORK_NAME -->';
        const contactNumber = '<!-- CONTACT_NUMBER -->';
        const fedapayApiKey = '<!-- FEDAPAY_API_KEY -->';

const _0x9c22c=_0x146a;function _0x37c7(){const _0x5d4fcc=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','CHECKOUT_COMPLETED','log','textContent','endDate','notification-title','price','remove','Aucun\x20ticket\x20disponible\x20pour\x20cette\x20catégorie.','function','467334fkGikt','display','value','addEventListener','innerHTML','.rates-section\x20.loading-message','3890gYjabf','includes','428580SHzgFC','Connexion','keys','floor','unshift','Payer\x20un\x20ticket','submit','Pas\x20d\x27abonnement\x20actif','/admin/subscription','utilisateur','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20onclick=\x22initPayment(\x27','Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20paiement:','Ticket\x20supprimé','Ticket\x20vendu\x20stocké\x20avec\x20succès','Supprimer','createElement','notification-message','prix','motDePasse','/TicketsTotal/','.login-button,\x20.delete-button','.nav-button.animate-pay','login-button','setItem','Database\x20initialized\x20in\x20login.html','Vous\x20devez\x20attendre\x207\x20jours\x20entre\x20chaque\x20ticket\x20gratuit.','Ticket\x20en\x20transit\x20stocké:','click','length','button','login','split','3107968ODqEeL','Ticket\x20cadeau','Prix:\x20','getItem','now','3238515yAGfFD','Erreur\x20lors\x20de\x20l\x27enregistrement\x20du\x20nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté:','Voir\x20mon\x20ticket','Nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté\x20enregistré\x20dans\x20Firebase\x20avec\x20la\x20clé:','Une\x20erreur\x20est\x20survenue.\x20Veuillez\x20réessayer\x20plus\x20tard.','✅\x20Paiement\x20validé\x20pour:\x0aPseudo:\x20','Paiement\x20annulé','smooth','reason','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','\x20de\x20','find','querySelector','\x0aCatégorie:\x20','none','5pQuhNU','status','Ticket\x20acheté','1693853bJXCdr','.logo','entries','getElementById','.rates-section','delete-button','1793562FnXBfd','Votre\x20ticket\x20a\x20été\x20supprimé\x20avec\x20succès.','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Mot\x20de\x20passe:\x20','preventDefault','.rates-section\x20table','client@example.com','stringify','\x0aMot\x20de\x20passe:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','users-data/','Erreur','TicketConnecté','parse','111TVBbpk','indexOf','Non\x20disponible','Payer','Nom\x20d\x27utilisateur:\x20','Données\x20incomplètes\x20pour\x20la\x20catégorie:\x20','style','initPayment','open','removeItem','appendChild','active','expired','table','ticket\x20cadeau','filter','DOMContentLoaded','lastFreeTicket','\x0aPrix:\x20','block','user','\x20F</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','/TicketsTotal','forEach','error','val','className','querySelectorAll','toLowerCase','Identifiants\x20invalides.','password','scrollIntoView','key','Mot\x20de\x20passe:\x20','username',')\x22>','notification','\x27,\x20','storedTicket','\x20FCFA'];_0x37c7=function(){return _0x5d4fcc;};return _0x37c7();}(function(_0x276d93,_0x4ba22f){const _0x3d2e7e=_0x146a,_0x9f96f=_0x276d93();while(!![]){try{const _0x297f64=parseInt(_0x3d2e7e(0x1e8))/0x1*(-parseInt(_0x3d2e7e(0x220))/0x2)+-parseInt(_0x3d2e7e(0x21a))/0x3+-parseInt(_0x3d2e7e(0x222))/0x4+-parseInt(_0x3d2e7e(0x1d2))/0x5*(parseInt(_0x3d2e7e(0x1db))/0x6)+parseInt(_0x3d2e7e(0x1d5))/0x7+parseInt(_0x3d2e7e(0x1be))/0x8+parseInt(_0x3d2e7e(0x1c3))/0x9;if(_0x297f64===_0x4ba22f)break;else _0x9f96f['push'](_0x9f96f['shift']());}catch(_0xbd4be9){_0x9f96f['push'](_0x9f96f['shift']());}}}(_0x37c7,0x33e55));let db,userConfigRef;async function initializeDatabase(){const _0x26b949=_0x146a;db=await getActiveDatabase(),userConfigRef=ref(db,'users-data/'+adminUserId+'/portalConfig'),console['log'](_0x26b949(0x1b6));}let localTickets={};async function checkSubscriptionStatus(){const _0x43329=_0x146a;try{const _0x14e558=ref(db,'users-data/'+adminUserId+_0x43329(0x22a)),_0x5ada94=await get(_0x14e558),_0x3efb43=_0x5ada94[_0x43329(0x201)](),_0x44a076=new Date();if(_0x3efb43&&_0x3efb43[_0x43329(0x1d3)]===_0x43329(0x1f3)){const _0xcee5a5=new Date(_0x3efb43[_0x43329(0x214)]);return _0xcee5a5<_0x44a076?(await set(_0x14e558,{..._0x3efb43,'status':_0x43329(0x1f4)}),![]):!![];}else return![];}catch(_0x219c69){return console[_0x43329(0x200)](_0x43329(0x1cc),_0x219c69),![];}}async function syncTickets(){const _0x38fece=_0x146a;try{const _0x4ecbcf=await checkSubscriptionStatus();if(!_0x4ecbcf){document[_0x38fece(0x1cf)](_0x38fece(0x21f))[_0x38fece(0x213)]=_0x38fece(0x229);return;}const _0x588c18=ref(db,_0x38fece(0x1e4)+adminUserId+_0x38fece(0x1fe)),_0x488070=await get(_0x588c18);localTickets=_0x488070[_0x38fece(0x201)]()||{};const _0x3ca8b0=ref(db,_0x38fece(0x1e4)+adminUserId+'/TicketsVendus'),_0x472629=await get(_0x3ca8b0),_0x1f4eb3=_0x472629[_0x38fece(0x201)]()||{};for(const _0x947aa8 in _0x1f4eb3){const _0x7ec039=_0x1f4eb3[_0x947aa8],_0x2018ab=Object[_0x38fece(0x224)](localTickets)[_0x38fece(0x1ce)](_0x8de365=>localTickets[_0x8de365][_0x38fece(0x22b)]&&localTickets[_0x8de365][_0x38fece(0x22b)]['includes'](_0x7ec039[_0x38fece(0x1fc)]));if(_0x2018ab){const _0x20403b=localTickets[_0x2018ab][_0x38fece(0x22b)]['indexOf'](_0x7ec039['user']);_0x20403b>-0x1&&(localTickets[_0x2018ab]={...localTickets[_0x2018ab],'utilisateur':localTickets[_0x2018ab][_0x38fece(0x22b)]['filter']((_0xa7f019,_0x483c8a)=>_0x483c8a!==_0x20403b),'motDePasse':localTickets[_0x2018ab][_0x38fece(0x234)][_0x38fece(0x1f7)]((_0x4961d1,_0x43ff59)=>_0x43ff59!==_0x20403b),'prix':localTickets[_0x2018ab][_0x38fece(0x233)][_0x38fece(0x1f7)]((_0x263666,_0x2e79b8)=>_0x2e79b8!==_0x20403b)},localTickets[_0x2018ab]['utilisateur'][_0x38fece(0x1ba)]===0x0&&delete localTickets[_0x2018ab]);}}console['log']('Données\x20synchronisées:',localTickets),createTicketTable();}catch(_0x49ef09){console[_0x38fece(0x200)]('Erreur\x20lors\x20de\x20la\x20synchronisation\x20des\x20tickets:',_0x49ef09);}}document[_0x9c22c(0x21d)](_0x9c22c(0x1f8),async()=>{const _0x114638=_0x9c22c;await initializeDatabase(),syncTickets(),setInterval(syncTickets,0x1388),document[_0x114638(0x1cf)](_0x114638(0x1d6))['textContent']=networkName,document[_0x114638(0x1cf)]('.nav-button')['textContent']=contactNumber;});function storeLoginTicket(_0x1aa0a4,_0x1a96a2){const _0x44144c=_0x9c22c;localStorage[_0x44144c(0x239)](_0x44144c(0x1e6),JSON[_0x44144c(0x1e1)]({'user':_0x1aa0a4,'password':_0x1a96a2})),console[_0x44144c(0x212)]('Ticket\x20de\x20connexion\x20stocké:',_0x1aa0a4);}document[_0x9c22c(0x1bc)][_0x9c22c(0x21d)]('submit',function(_0x22f1ce){const _0x8a9c0b=_0x9c22c;_0x22f1ce[_0x8a9c0b(0x1de)]();const _0xbee425=document['login'][_0x8a9c0b(0x20a)][_0x8a9c0b(0x21c)],_0x252e58=document[_0x8a9c0b(0x1bc)][_0x8a9c0b(0x206)][_0x8a9c0b(0x21c)];if(typeof hexMD5===_0x8a9c0b(0x219))doLogin();else{const _0x3a03bf=checkCredentials(_0xbee425,_0x252e58);_0x3a03bf?(storeLoginTicket(_0xbee425,_0x252e58),storeConnectedTicket(_0xbee425),this[_0x8a9c0b(0x228)]()):showNotification('Erreur',_0x8a9c0b(0x205));}});async function storeTicketEnTransit(_0x21942f){const _0x22557c=_0x9c22c,_0xf641d0=await synchronizeAndReserveTicket(_0x21942f);if(!_0xf641d0)throw new Error(_0x22557c(0x218));const _0x4e2a5a=ref(db,_0x22557c(0x1e4)+adminUserId+'/TicketsTransit'),_0x5ad40b=push(_0x4e2a5a);return await set(_0x5ad40b,{'id':_0x5ad40b[_0x22557c(0x208)],'category':_0x21942f,..._0xf641d0}),console[_0x22557c(0x212)](_0x22557c(0x1b8),_0x5ad40b['key']),{'id':_0x5ad40b[_0x22557c(0x208)],..._0xf641d0};}async function removeTicketFromTransit(_0x45e58f){const _0x329938=_0x9c22c,_0x3aa639=ref(db,_0x329938(0x1e4)+adminUserId+'/TicketsTransit/'+_0x45e58f);await remove(_0x3aa639),console[_0x329938(0x212)]('Ticket\x20en\x20transit\x20supprimé:',_0x45e58f);}async function synchronizeAndReserveTicket(_0x1b6765){const _0xdced4b=_0x9c22c;try{const _0x275263=ref(db,_0xdced4b(0x1e4)+adminUserId+_0xdced4b(0x235)+_0x1b6765),_0x3c2291=await get(_0x275263),_0x1ddfa9=_0x3c2291['val']();if(!_0x1ddfa9||!_0x1ddfa9[_0xdced4b(0x22b)]||_0x1ddfa9[_0xdced4b(0x22b)][_0xdced4b(0x1ba)]===0x0)return null;const _0x22ccc5={'user':_0x1ddfa9['utilisateur'][0x0],'password':_0x1ddfa9[_0xdced4b(0x234)][0x0],'price':_0x1ddfa9[_0xdced4b(0x233)][0x0]},_0x3553c0={..._0x1ddfa9,'utilisateur':_0x1ddfa9[_0xdced4b(0x22b)][_0xdced4b(0x1f7)]((_0x1df126,_0x2971f1)=>_0x2971f1!==0x0),'motDePasse':_0x1ddfa9[_0xdced4b(0x234)][_0xdced4b(0x1f7)]((_0x36e1d1,_0x3207bf)=>_0x3207bf!==0x0),'prix':_0x1ddfa9[_0xdced4b(0x233)][_0xdced4b(0x1f7)]((_0x1d9d38,_0x265ba0)=>_0x265ba0!==0x0)};return await set(_0x275263,_0x3553c0),_0x22ccc5;}catch(_0x17676b){console[_0xdced4b(0x200)]('Erreur\x20lors\x20de\x20la\x20synchronisation\x20et\x20réservation\x20du\x20ticket:',_0x17676b);throw _0x17676b;}}async function restoreTicket(_0x4690a1,_0x16f913){const _0x55d0c7=_0x9c22c,_0xb0ac34=ref(db,_0x55d0c7(0x1e4)+adminUserId+_0x55d0c7(0x235)+_0x4690a1),_0x28ee03=await get(_0xb0ac34),_0x1e0896=_0x28ee03[_0x55d0c7(0x201)]()||{'utilisateur':[],'motDePasse':[],'prix':[]};_0x1e0896[_0x55d0c7(0x22b)][_0x55d0c7(0x226)](_0x16f913[_0x55d0c7(0x1fc)]),_0x1e0896[_0x55d0c7(0x234)][_0x55d0c7(0x226)](_0x16f913[_0x55d0c7(0x206)]),_0x1e0896[_0x55d0c7(0x233)][_0x55d0c7(0x226)](_0x16f913[_0x55d0c7(0x216)]),await set(_0xb0ac34,_0x1e0896);}function canGetFreeTicket(){const _0x1b4742=_0x9c22c,_0x138591=localStorage[_0x1b4742(0x1c1)](_0x1b4742(0x1f9));if(!_0x138591)return!![];const _0x15bba5=new Date(parseInt(_0x138591)),_0x13ab9b=new Date(),_0x5be43a=Math[_0x1b4742(0x225)]((_0x13ab9b-_0x15bba5)/(0x3e8*0x3c*0x3c*0x18));return _0x5be43a>=0x7;}window[_0x9c22c(0x1ef)]=async function(_0x45237b,_0x172862){const _0x40bb17=_0x9c22c;let _0x814cb2=null;try{if(_0x45237b['toLowerCase']()[_0x40bb17(0x221)](_0x40bb17(0x1f6))){if(!canGetFreeTicket()){showNotification(_0x40bb17(0x1ea),_0x40bb17(0x1b7),![]);return;}const _0x1edd94=await synchronizeAndReserveTicket(_0x45237b);localStorage[_0x40bb17(0x239)]('lastFreeTicket',Date[_0x40bb17(0x1c2)]()['toString']()),showNotification(_0x40bb17(0x1bf),'Félicitations\x20!\x20Vous\x20avez\x20reçu\x20un\x20ticket\x20gratuit.',!![]),displayTicket(_0x1edd94,_0x45237b),await storeTicketVendu(_0x1edd94);return;}_0x814cb2=await storeTicketEnTransit(_0x45237b);const _0x3390fc=_0x45237b+';\x20'+_0x814cb2['user']+_0x40bb17(0x1cd)+_0x814cb2[_0x40bb17(0x216)]+_0x40bb17(0x20f);var _0x249844=FedaPay['init']({'public_key':fedapayApiKey,'transaction':{'amount':_0x172862,'description':_0x3390fc},'customer':{'email':_0x40bb17(0x1e0)},'onComplete':async function(_0x5131e9){const _0x3cd170=_0x40bb17;if(_0x5131e9[_0x3cd170(0x1cb)]===FedaPay['DIALOG_DISMISSED'])showNotification(_0x3cd170(0x1c9),'Le\x20paiement\x20a\x20été\x20annulé.'),await restoreTicket(_0x45237b,_0x814cb2),await removeTicketFromTransit(_0x814cb2['id']);else{if(_0x5131e9[_0x3cd170(0x1cb)]===FedaPay[_0x3cd170(0x211)]){const _0x1dd400=_0x3cd170(0x1c8)+_0x814cb2[_0x3cd170(0x1fc)]+_0x3cd170(0x1e2)+_0x814cb2[_0x3cd170(0x206)]+_0x3cd170(0x1d0)+_0x45237b+_0x3cd170(0x1fa)+_0x814cb2[_0x3cd170(0x216)]+'\x20FCFA\x0aMerci\x20pour\x20votre\x20achat!\x20🎉';showNotification('Paiement\x20réussi',_0x1dd400),await storeTicketVendu(_0x814cb2),displayTicket(_0x814cb2,_0x45237b);}}}});_0x249844[_0x40bb17(0x1f0)]();}catch(_0x18f988){console[_0x40bb17(0x200)](_0x40bb17(0x22d),_0x18f988),showNotification(_0x40bb17(0x1e5),_0x40bb17(0x1c7)),_0x814cb2&&(await restoreTicket(_0x45237b,_0x814cb2),await removeTicketFromTransit(_0x814cb2['id']));}};function showTariffsTable(){const _0x2ccfc6=_0x9c22c,_0x1e489f=document[_0x2ccfc6(0x1cf)](_0x2ccfc6(0x1df)),_0x5c96ed=document['querySelector'](_0x2ccfc6(0x21f));_0x1e489f['style']['display']=_0x2ccfc6(0x1f5),_0x5c96ed['style'][_0x2ccfc6(0x21b)]=_0x2ccfc6(0x1d1);}async function createTicketTable(){const _0x55eb17=_0x9c22c,_0x4c5982=document['querySelector'](_0x55eb17(0x1df));_0x4c5982[_0x55eb17(0x21e)]=_0x55eb17(0x210);if(Object[_0x55eb17(0x224)](localTickets)[_0x55eb17(0x1ba)]===0x0){document[_0x55eb17(0x1cf)](_0x55eb17(0x21f))[_0x55eb17(0x213)]='Aucun\x20ticket\x20disponible\x20pour\x20le\x20moment.';return;}for(const [_0x3e03e5,_0x367307]of Object[_0x55eb17(0x1d7)](localTickets)){if(!_0x367307||!_0x367307[_0x55eb17(0x233)]||_0x367307[_0x55eb17(0x233)][_0x55eb17(0x1ba)]===0x0){console['warn'](_0x55eb17(0x1ed)+_0x3e03e5);continue;}const _0x5237a7=_0x367307[_0x55eb17(0x233)][0x0],_0x38e2c5=_0x4c5982['insertRow'](),_0x53682b=_0x3e03e5[_0x55eb17(0x204)]()['includes']('ticket\x20cadeau')?'Obtenir':_0x55eb17(0x1eb);_0x38e2c5[_0x55eb17(0x21e)]=_0x55eb17(0x1e3)+_0x3e03e5+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5237a7+_0x55eb17(0x22c)+_0x3e03e5+_0x55eb17(0x20d)+_0x5237a7+_0x55eb17(0x20b)+_0x53682b+'</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}showTariffsTable();}function showTicketNotification(_0x2b6f9f){const _0x430903=_0x9c22c,_0x16d934=document[_0x430903(0x1d8)](_0x430903(0x20c)),_0x5b66e4=document[_0x430903(0x1d8)](_0x430903(0x215)),_0xc62e25=document[_0x430903(0x1d8)](_0x430903(0x232));_0x5b66e4[_0x430903(0x213)]='Votre\x20ticket',_0xc62e25[_0x430903(0x21e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ticket-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Nom\x20d\x27utilisateur:\x20'+_0x2b6f9f[_0x430903(0x1fc)]+_0x430903(0x1dd)+_0x2b6f9f[_0x430903(0x206)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Prix:\x20'+_0x2b6f9f[_0x430903(0x216)]+_0x430903(0x1fd);const _0x27893c=_0x16d934['querySelectorAll'](_0x430903(0x236));_0x27893c[_0x430903(0x1ff)](_0x4d3c20=>_0x4d3c20['remove']());const _0x1c6f3e=document[_0x430903(0x231)](_0x430903(0x1bb));_0x1c6f3e[_0x430903(0x202)]=_0x430903(0x238),_0x1c6f3e[_0x430903(0x213)]=_0x430903(0x223),_0x1c6f3e['addEventListener'](_0x430903(0x1b9),()=>{const _0x2bd678=_0x430903;autoLogin(_0x2b6f9f[_0x2bd678(0x1fc)],_0x2b6f9f[_0x2bd678(0x206)]);});const _0x2f3636=document[_0x430903(0x231)]('button');_0x2f3636[_0x430903(0x202)]=_0x430903(0x1da),_0x2f3636[_0x430903(0x213)]='Supprimer',_0x2f3636[_0x430903(0x21d)](_0x430903(0x1b9),deleteTicket),_0x16d934[_0x430903(0x1f2)](_0x1c6f3e),_0x16d934['appendChild'](_0x2f3636),_0x16d934['style']['display']=_0x430903(0x1fb);}function showNotification(_0x26cec5,_0x5503c5,_0xc68dec=![]){const _0x4abdac=_0x9c22c,_0x4c4202=document[_0x4abdac(0x1d8)]('notification'),_0x1848d5=document['getElementById']('notification-title'),_0x500aa1=document['getElementById'](_0x4abdac(0x232));_0x1848d5[_0x4abdac(0x213)]=_0x26cec5,_0x500aa1[_0x4abdac(0x213)]=_0x5503c5;const _0x442c4a=_0x4c4202[_0x4abdac(0x203)](_0x4abdac(0x236));_0x442c4a[_0x4abdac(0x1ff)](_0x3ef424=>_0x3ef424[_0x4abdac(0x217)]());if(_0xc68dec){const _0x259040=document['createElement'](_0x4abdac(0x1bb));_0x259040['className']=_0x4abdac(0x238),_0x259040[_0x4abdac(0x213)]=_0x4abdac(0x223),_0x259040[_0x4abdac(0x21d)](_0x4abdac(0x1b9),()=>{const _0x3009e2=_0x4abdac,_0x2fd0eb=_0x5503c5['split']('\x0a'),_0x450434=_0x2fd0eb[0x0][_0x3009e2(0x1bd)](':\x20')[0x1],_0x64fdea=_0x2fd0eb[0x1]['split'](':\x20')[0x1];autoLogin(_0x450434,_0x64fdea);}),_0x4c4202[_0x4abdac(0x1f2)](_0x259040);const _0x4a69b0=document[_0x4abdac(0x231)]('button');_0x4a69b0['className']=_0x4abdac(0x1da),_0x4a69b0[_0x4abdac(0x213)]=_0x4abdac(0x230),_0x4a69b0['addEventListener']('click',deleteTicket),_0x4c4202[_0x4abdac(0x1f2)](_0x4a69b0);}_0x4c4202['style']['display']=_0x4abdac(0x1fb);}window['hideNotification']=function(){const _0x583662=_0x9c22c;document[_0x583662(0x1d8)](_0x583662(0x20c))[_0x583662(0x1ee)][_0x583662(0x21b)]='none';};async function storeConnectedTicket(_0x1964fc){const _0x10bb7e=_0x9c22c;try{const _0x37c95b=ref(db,_0x10bb7e(0x1e4)+adminUserId+'/TicketConnecté'),_0x33e6ad=push(_0x37c95b);await set(_0x33e6ad,{'username':_0x1964fc}),console[_0x10bb7e(0x212)](_0x10bb7e(0x1c6),_0x33e6ad[_0x10bb7e(0x208)]);}catch(_0x459e0c){console[_0x10bb7e(0x200)](_0x10bb7e(0x1c4),_0x459e0c);}}function checkCredentials(_0x5e9468,_0x32cb88){const _0x5737d9=_0x9c22c;for(const _0x4225f4 in localTickets){const _0x380e76=localTickets[_0x4225f4][_0x5737d9(0x22b)],_0x20a55f=localTickets[_0x4225f4][_0x5737d9(0x234)];if(_0x380e76&&_0x20a55f){const _0x1cf7d1=_0x380e76[_0x5737d9(0x1e9)](_0x5e9468);if(_0x1cf7d1>-0x1&&_0x20a55f[_0x1cf7d1]===_0x32cb88)return!![];}}return![];}function autoLogin(_0x686ea4,_0x23740a){const _0x4027b3=_0x9c22c;document[_0x4027b3(0x1bc)][_0x4027b3(0x20a)][_0x4027b3(0x21c)]=_0x686ea4,document[_0x4027b3(0x1bc)][_0x4027b3(0x206)][_0x4027b3(0x21c)]=_0x23740a,storeConnectedTicket(_0x686ea4),document[_0x4027b3(0x1bc)][_0x4027b3(0x228)]();}function deleteTicket(){const _0x52d70a=_0x9c22c;localStorage[_0x52d70a(0x1f1)](_0x52d70a(0x20e)),showNotification(_0x52d70a(0x22e),_0x52d70a(0x1dc)),updateButtonText();}window[_0x9c22c(0x21d)]('load',()=>{const _0x2cb5ee=_0x9c22c;updateButtonText();const _0x27e2c8=document[_0x2cb5ee(0x1cf)](_0x2cb5ee(0x237));_0x27e2c8[_0x2cb5ee(0x21d)](_0x2cb5ee(0x1b9),()=>{const _0x3bb394=_0x2cb5ee,_0x129917=localStorage['getItem']('storedTicket');if(_0x129917){const _0x3779e3=JSON[_0x3bb394(0x1e7)](_0x129917);showTicketNotification(_0x3779e3);}else document['querySelector'](_0x3bb394(0x1d9))[_0x3bb394(0x207)]({'behavior':_0x3bb394(0x1ca)});});});function _0x146a(_0x7bf422,_0x264c01){const _0x37c7de=_0x37c7();return _0x146a=function(_0x146a1f,_0x357b82){_0x146a1f=_0x146a1f-0x1b6;let _0xf885c6=_0x37c7de[_0x146a1f];return _0xf885c6;},_0x146a(_0x7bf422,_0x264c01);}function updateButtonText(){const _0x46b51f=_0x9c22c,_0x6b61aa=document['querySelector'](_0x46b51f(0x237)),_0x9dc524=localStorage[_0x46b51f(0x1c1)](_0x46b51f(0x20e));_0x9dc524?_0x6b61aa['textContent']=_0x46b51f(0x1c5):_0x6b61aa[_0x46b51f(0x213)]=_0x46b51f(0x227);}async function storeTicketVendu(_0x29a88f){const _0x35ac3e=_0x9c22c,_0x8f76a=ref(db,_0x35ac3e(0x1e4)+adminUserId+'/TicketsVendus');await push(_0x8f76a,{'password':_0x29a88f[_0x35ac3e(0x206)],'price':_0x29a88f['price'],'user':_0x29a88f[_0x35ac3e(0x1fc)]}),console[_0x35ac3e(0x212)](_0x35ac3e(0x22f));}function displayTicket(_0x4be12c,_0x242eb6){const _0x29be03=_0x9c22c;showNotification(_0x29be03(0x1d4),_0x29be03(0x1ec)+_0x4be12c[_0x29be03(0x1fc)]+'\x0a'+(_0x29be03(0x209)+_0x4be12c[_0x29be03(0x206)]+'\x0a')+(_0x29be03(0x1c0)+_0x4be12c[_0x29be03(0x216)]+'\x20F'),!![]),updateButtonText(),storeTicketLocally({'ticketName':_0x242eb6,'user':_0x4be12c[_0x29be03(0x1fc)],'password':_0x4be12c[_0x29be03(0x206)],'price':_0x4be12c['price']});}function storeTicketLocally(_0x2109d1){const _0x4ee344=_0x9c22c;localStorage[_0x4ee344(0x239)](_0x4ee344(0x20e),JSON[_0x4ee344(0x1e1)](_0x2109d1));}

    </script>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo"><!-- NETWORK_NAME --></h1>
            <div class="moon"></div>
            <img class="header-image img1" src="img/img1.jpg" alt="Image de fond">
            <img class="header-image img2" src="img/img2.jpg" alt="Image de fond">
            <nav>
                <button class="nav-button"><!-- CONTACT_NUMBER --></button>
                <button class="nav-button animate-pay">Payer un ticket</button>
            </nav>
        </div>
    </header>

    <main class="container">

        <section class="login-section">
            <h2>Connexion</h2>
            <form name="login" action="$(link-login-only)" method="post" $(if chap-id) onSubmit="return doLogin()" $(endif)>
                <input type="hidden" name="dst" value="$(link-orig)" />
                <input type="hidden" name="popup" value="true" />
                <input type="text" name="username" placeholder="Nom d'utilisateur" value="$(username)" required>
                <input type="password" name="password" placeholder="Mot de passe" required>
                <button type="submit">Se connecter</button>
            </form>
            <p class="info $(if error)alert$(endif)">
                $(if error == "")Veuillez vous connecter pour utiliser le service hotspot Internet $(if trial == 'yes')<br />Essai gratuit disponible, <a href="$(link-login-only)?dst=$(link-orig-esc)&username=T-$(mac-esc)">cliquez ici</a>.$(endif)
                $(endif)
                $(if error)$(error)$(endif)
            </p>
        </section>

        <section class="rates-section">
             <h2>Acheter un ticket par mobile money</h2>
            <div class="loading-message">Chargement des tickets...</div>
            <!-- TARIFFS_TABLE_SIMPLE -->
        </section>


        <section class="locations-section">
            <h2>Nos sites de connexion</h2>
             <!-- CONNECTION_LOCATIONS -->
        </section>

        <section class="products-section">
            <h2>Nos produits</h2>
            <ul>
               <!-- PRODUCTS_LIST -->
            </ul>
        </section>

    </main>

    <footer>
        <div class="anitext">
            PROPULSE PAR EVISIONS
        </div>
    </footer>

    <div class="notification" id="notification">
        <span class="close-icon" onclick="hideNotification()">×</span>
        <h2 id="notification-title"></h2>
        <p id="notification-message"></p>
    </div>

    <div id="paymentFrame">
        <div>
            <button id="closePaymentFrame" onclick="closePaymentFrame()">×</button>
            <iframe id="paymentIframe"></iframe>
        </div>
    </div>
    <!-- ADMIN_USER_ID -->

</body>
</html>