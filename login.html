<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion Cyber Campus</title>
    <style>
        /* ... (Le CSS de votre ancien login.html, inchangé) ... */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #36ff03, #1900ff, #a7ff03);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }

        header {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .header-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .img1 {
            animation: slide1 10s linear infinite;
        }

        .img2 {
            animation: slide2 10s linear infinite;
        }

        .logo {
            font-size: 2.5em;
            color: white;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }

        .logo::before {
            content: '';
            font-size: 0.8em;
            margin-right: 10px;
            animation: rotate 5s linear infinite;
            display: inline-block;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .moon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: wrap;
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 150px;
            text-align: center;
            margin: 5px;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background-color: rgb(0, 0, 0);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .nav-button:hover::before {
            width: 300px;
            height: 300px;
        }

        @keyframes buttonPulse {
            0% { background-color: #020202; color: #ffffff; }
            50% { background-color: #1a2a6c; color: #c8ff00; }
            100% { background-color: #000000; color: #ffffff; }
        }

        .nav-button.animate-pay {
            animation: buttonPulse 3s ease-in-out infinite;
        }

        @keyframes textChange {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        main {
            display: flex;
            flex-direction: column;
            padding: 20px 10px;
            gap: 20px;
            flex: 1;
        }

        .login-section,
        .rates-section,
        .locations-section,
        .products-section {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        section:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .login-section {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        h2 {
            color: rgb(0, 0, 0);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #fdbb2d;
            transition: width 0.3s;
        }

        section:hover h2::after {
            width: 100%;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input {
            margin-bottom: 10px;
            padding: 12px;
            border: none;
            border-radius: 25px;
            background-color: rgb(255, 253, 250);
            color: rgb(0, 0, 0);
            transition: background-color 0.3s;
        }

        input:focus {
            background-color: rgba(255, 255, 255, 0.3);
            outline: none;
        }

        button {
            background-color: #000000;
            color: #ffffff;
            border: none;
            padding: 10px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        button:hover {
            background-color: #1a2a6c;
            color: #fdbb2d;
        }

        .rates-section {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .rates-section table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 10px 0;
        }

        .rates-section th,
        .rates-section td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .rates-section th:first-child,
        .rates-section td:first-child {
            padding-left: 20px;
        }

        .rates-section th:last-child,
        .rates-section td:last-child {
            padding-right: 20px;
        }

        .rates-section .loading-message {
            text-align: center;
            padding: 20px;
        }

        ul {
            list-style-type: none;
        }

        li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 20px;
        }

        li::before {
            content: '➤';
            position: absolute;
            left: 0;
            color: #fdbb2d;
        }

        footer {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 15px;
            text-align: center;
            margin-top: auto;
        }

        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
            color: #1a2a6c;
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        .notification h2 {
            color: #1a2a6c;
            margin-bottom: 20px;
        }

        .notification p {
            margin-bottom: 15px;
        }

        .close-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
        }

        .notification .ticket-info {
            margin-bottom: 15px;
            text-align: left;
        }

        .notification .ticket-info p {
            margin-bottom: 5px;
        }

        .notification .login-button,
        .notification .delete-button {
            display: inline-block;
            margin: 0 10px;
        }

        .notification .login-button {
            background-color: #fdbb2d;
            color: #1a2a6c;
        }

        .delete-button {
            background-color: #f44336;
            color: white;
        }

        .delete-button:hover {
            background-color: #d32f2f;
        }

        .notification.error {
            background-color: #fdd;
            border: 1px solid #faa;
            color: #f00;
        }

        /* Footer Popup Styles */
        .footer-popup {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translate(-50%, 200%);
            width: 95%;
            max-width: 600px;
            padding: 2rem;
            border-radius: 25px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, rgba(129, 0, 0, 0.95) 0%, rgba(0, 60, 150, 0.95) 100%);
            backdrop-filter: blur(10px);
            color: white;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3),
                        0 0 20px rgba(0, 89, 255, 0.3),
                        inset 0 0 60px rgba(0, 89, 255, 0.1);
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-popup.show {
            transform: translate(-50%, 0);
            opacity: 1;
        }

        .footer-popup .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        /* Animations */
        @keyframes slide1 {
            0% { transform: translateX(0); }
            50% { transform: translateX(-100%); }
            100% { transform: translateX(0); }
        }

        @keyframes slide2 {
            0% { transform: translateX(100%); }
            50% { transform: translateX(0); }
            100% { transform: translateX(100%); }
        }

        /* Media Queries */
        @media screen and (max-width: 768px) {
            .container {
                padding: 5px;
            }

            .logo {
                font-size: 2em;
            }

            nav {
                flex-direction: column;
                padding: 0 15px;
            }

            .nav-button {
                width: 100%;
                margin: 5px 0;
            }

            main {
                padding: 10px 5px;
            }

            .login-section,
            .rates-section,
            .locations-section,
            .products-section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .rates-section {
                margin: 0 -5px;
                width: calc(100% + 10px);
                border-radius: 0;
            }

            .rates-section table {
                font-size: 14px;
            }

            .rates-section th,
            .rates-section td {
                padding: 8px;
            }

            .footer-popup {
                width: 92%;
                padding: 1.5rem;
            }
        }

        @media screen and (max-width: 480px) {
            .logo {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.2em;
            }

            .rates-section th,
            .rates-section td {
                padding: 6px;
                font-size: 12px;
            }

            .notification {
                width: 95%;
                padding: 15px;
            }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: nowrap; /* Empêche le retour à la ligne */
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 0; /* Supprime la largeur minimale */
            text-align: center;
            margin: 5px;
            white-space: nowrap; /* Empêche le texte de passer à la ligne */
            font-size: 14px; /* Taille de police réduite pour mobile */
            flex: 1; /* Les boutons se partagent l'espace disponible */
            max-width: calc(50% - 10px); /* Maximum 50% de la largeur moins la marge */
        }

        /* Modification des media queries */
        @media screen and (max-width: 768px) {
            nav {
                flex-direction: row; /* Force l'alignement horizontal */
                padding: 0 10px;
            }

            .nav-button {
                width: auto; /* Permet aux boutons de s'adapter à leur contenu */
                margin: 5px;
                font-size: 12px; /* Taille de police encore plus petite pour les très petits écrans */
            }
        }

        @media screen and (max-width: 320px) {
            .nav-button {
                padding: 8px 12px; /* Padding réduit pour les très petits écrans */
                font-size: 11px;
            }
        }
    </style>

    $(if chap-id)
    <form name="sendin" action="$(link-login-only)" method="post" style="display:none">
        <input type="hidden" name="username" />
        <input type="hidden" name="password" />
        <input type="hidden" name="dst" value="$(link-orig)" />
        <input type="hidden" name="popup" value="true" />
    </form>

    <script src="/md5.js"></script>
    <script>
        function doLogin() {
            document.sendin.username.value = document.login.username.value;
            document.sendin.password.value = hexMD5('$(chap-id)' + document.login.password.value + '$(chap-challenge)');
            document.sendin.submit();
            return false;
        }
    </script>
    $(endif)
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script type="module">
        import { getActiveDatabase } from './firebase-config-manager.js';
        import { ref, get, set, push, remove } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

        const adminUserId = '<!-- ADMIN_USER_ID -->';
        const networkName = '<!-- NETWORK_NAME -->';
        const contactNumber = '<!-- CONTACT_NUMBER -->';
        const fedapayApiKey = '<!-- FEDAPAY_API_KEY -->';

function _0x4332(_0x38648b,_0x6aaf9b){const _0x433265=_0x8495();return _0x4332=function(_0x516536,_0x268c06){_0x516536=_0x516536-0xb3;let _0x55949d=_0x433265[_0x516536];return _0x55949d;},_0x4332(_0x38648b,_0x6aaf9b);}const _0x45aab4=_0x4332;(function(_0x1ed39d,_0x4a6a7c){const _0x184b54=_0x4332,_0x3b91d1=_0x1ed39d();while(!![]){try{const _0x29b447=parseInt(_0x184b54(0xc8))/0x1+-parseInt(_0x184b54(0xc0))/0x2*(-parseInt(_0x184b54(0x13a))/0x3)+parseInt(_0x184b54(0xf5))/0x4*(parseInt(_0x184b54(0x135))/0x5)+-parseInt(_0x184b54(0xfb))/0x6+parseInt(_0x184b54(0x128))/0x7*(-parseInt(_0x184b54(0xee))/0x8)+-parseInt(_0x184b54(0xfe))/0x9*(parseInt(_0x184b54(0xd4))/0xa)+parseInt(_0x184b54(0xea))/0xb;if(_0x29b447===_0x4a6a7c)break;else _0x3b91d1['push'](_0x3b91d1['shift']());}catch(_0x43e688){_0x3b91d1['push'](_0x3b91d1['shift']());}}}(_0x8495,0xd400a));let db,userConfigRef;async function initializeDatabase(){const _0x335721=_0x4332;db=await getActiveDatabase(),userConfigRef=ref(db,_0x335721(0x107)+adminUserId+_0x335721(0xd8)),console[_0x335721(0x11c)](_0x335721(0x11a));}let localTickets={};async function checkSubscriptionStatus(){const _0x367d05=_0x4332;try{const _0x472a92=ref(db,_0x367d05(0x107)+adminUserId+'/admin/subscription'),_0x5a3d00=await get(_0x472a92),_0xe45a31=_0x5a3d00[_0x367d05(0x134)](),_0x45f959=new Date();if(_0xe45a31&&_0xe45a31['status']===_0x367d05(0xfc)){const _0x5b4a62=new Date(_0xe45a31[_0x367d05(0x11d)]);return _0x5b4a62<_0x45f959?(await set(_0x472a92,{..._0xe45a31,'status':_0x367d05(0x136)}),![]):!![];}else return![];}catch(_0x16acec){return console[_0x367d05(0x139)](_0x367d05(0xce),_0x16acec),![];}}async function syncTickets(){const _0x56a7df=_0x4332;try{const _0x53046b=await checkSubscriptionStatus();if(!_0x53046b){document[_0x56a7df(0xf8)](_0x56a7df(0x13b))[_0x56a7df(0xf9)]=_0x56a7df(0x10d);return;}const _0x4623a4=ref(db,'users-data/'+adminUserId+'/TicketsTotal'),_0x3781d0=await get(_0x4623a4);localTickets=_0x3781d0['val']()||{};const _0x5cabdd=ref(db,_0x56a7df(0x107)+adminUserId+'/TicketsVendus'),_0x599c0d=await get(_0x5cabdd),_0x4a2b03=_0x599c0d[_0x56a7df(0x134)]()||{};for(const _0xf1214a in _0x4a2b03){const _0x33a8f0=_0x4a2b03[_0xf1214a],_0x38d6df=Object['keys'](localTickets)[_0x56a7df(0xe8)](_0x571e35=>localTickets[_0x571e35]['utilisateur']&&localTickets[_0x571e35][_0x56a7df(0xcb)]['includes'](_0x33a8f0[_0x56a7df(0x13d)]));if(_0x38d6df){const _0xb2949d=localTickets[_0x38d6df]['utilisateur'][_0x56a7df(0x12a)](_0x33a8f0[_0x56a7df(0x13d)]);_0xb2949d>-0x1&&(localTickets[_0x38d6df]={...localTickets[_0x38d6df],'utilisateur':localTickets[_0x38d6df][_0x56a7df(0xcb)][_0x56a7df(0xf2)]((_0x399871,_0x1960c3)=>_0x1960c3!==_0xb2949d),'motDePasse':localTickets[_0x38d6df][_0x56a7df(0x109)][_0x56a7df(0xf2)]((_0x588d75,_0x31363a)=>_0x31363a!==_0xb2949d),'prix':localTickets[_0x38d6df][_0x56a7df(0xfd)][_0x56a7df(0xf2)]((_0x3daa41,_0x2e7d16)=>_0x2e7d16!==_0xb2949d)},localTickets[_0x38d6df][_0x56a7df(0xcb)][_0x56a7df(0x12d)]===0x0&&delete localTickets[_0x38d6df]);}}console['log'](_0x56a7df(0x130),localTickets),createTicketTable();}catch(_0xfa40b1){console[_0x56a7df(0x139)](_0x56a7df(0xcf),_0xfa40b1);}}document['addEventListener']('DOMContentLoaded',async()=>{const _0x4e7e34=_0x4332;await initializeDatabase(),syncTickets(),setInterval(syncTickets,0x1388),document[_0x4e7e34(0xf8)](_0x4e7e34(0x111))[_0x4e7e34(0xf9)]=networkName,document[_0x4e7e34(0xf8)](_0x4e7e34(0x122))[_0x4e7e34(0xf9)]=contactNumber;});function storeLoginTicket(_0x492f0c,_0x5eaee2){const _0x3a6d18=_0x4332;localStorage['setItem'](_0x3a6d18(0x10a),JSON['stringify']({'user':_0x492f0c,'password':_0x5eaee2})),console[_0x3a6d18(0x11c)](_0x3a6d18(0xc1),_0x492f0c);}document[_0x45aab4(0x138)]['addEventListener'](_0x45aab4(0xcc),function(_0x4aa406){const _0x56c497=_0x45aab4;_0x4aa406[_0x56c497(0xdd)]();const _0x261ea0=document['login'][_0x56c497(0x105)][_0x56c497(0x102)],_0x3e82c0=document['login'][_0x56c497(0xb6)]['value'];if(typeof hexMD5===_0x56c497(0xe2))doLogin();else{const _0x48f273=checkCredentials(_0x261ea0,_0x3e82c0);_0x48f273?(storeLoginTicket(_0x261ea0,_0x3e82c0),storeConnectedTicket(_0x261ea0),this[_0x56c497(0xcc)]()):showNotification('Erreur',_0x56c497(0x10c));}});async function storeTicketEnTransit(_0x40b6ad){const _0x2c7acd=_0x45aab4,_0x4af8d3=await synchronizeAndReserveTicket(_0x40b6ad);if(!_0x4af8d3)throw new Error(_0x2c7acd(0x108));const _0x128cdc=ref(db,'users-data/'+adminUserId+'/TicketsTransit'),_0x50424f=push(_0x128cdc);return await set(_0x50424f,{'id':_0x50424f[_0x2c7acd(0x12f)],'category':_0x40b6ad,..._0x4af8d3}),console[_0x2c7acd(0x11c)](_0x2c7acd(0xc4),_0x50424f[_0x2c7acd(0x12f)]),{'id':_0x50424f[_0x2c7acd(0x12f)],..._0x4af8d3};}async function removeTicketFromTransit(_0x5081fa){const _0x219aaa=_0x45aab4,_0xfc6a5c=ref(db,_0x219aaa(0x107)+adminUserId+_0x219aaa(0x12c)+_0x5081fa);await remove(_0xfc6a5c),console[_0x219aaa(0x11c)](_0x219aaa(0x125),_0x5081fa);}async function synchronizeAndReserveTicket(_0x50c33b){const _0x12cf6c=_0x45aab4;try{const _0x16b16c=ref(db,_0x12cf6c(0x107)+adminUserId+_0x12cf6c(0xf7)+_0x50c33b),_0x3b9fc8=await get(_0x16b16c),_0x3e1555=_0x3b9fc8['val']();if(!_0x3e1555||!_0x3e1555[_0x12cf6c(0xcb)]||_0x3e1555[_0x12cf6c(0xcb)][_0x12cf6c(0x12d)]===0x0)return null;const _0x151c76={'user':_0x3e1555[_0x12cf6c(0xcb)][0x0],'password':_0x3e1555[_0x12cf6c(0x109)][0x0],'price':_0x3e1555['prix'][0x0]},_0x5241e1={..._0x3e1555,'utilisateur':_0x3e1555[_0x12cf6c(0xcb)]['filter']((_0x58a89f,_0x58c2a1)=>_0x58c2a1!==0x0),'motDePasse':_0x3e1555[_0x12cf6c(0x109)][_0x12cf6c(0xf2)]((_0x5c9573,_0x166f64)=>_0x166f64!==0x0),'prix':_0x3e1555['prix'][_0x12cf6c(0xf2)]((_0x2ae2d0,_0x44a890)=>_0x44a890!==0x0)};return await set(_0x16b16c,_0x5241e1),_0x151c76;}catch(_0x4ed8bc){console['error'](_0x12cf6c(0x13c),_0x4ed8bc);throw _0x4ed8bc;}}function _0x8495(){const _0x5f0062=['.logo','✅\x20Paiement\x20validé\x20pour:\x0aPseudo:\x20','Aucun\x20ticket\x20disponible\x20pour\x20le\x20moment.','block','\x0aCatégorie:\x20','Félicitations\x20!\x20Vous\x20avez\x20reçu\x20un\x20ticket\x20gratuit.','warn','Le\x20paiement\x20a\x20été\x20annulé.','insertRow','Database\x20initialized\x20in\x20login.html','querySelectorAll','log','endDate','Ticket\x20acheté','notification-title','Erreur','.login-button,\x20.delete-button','.nav-button','Payer\x20un\x20ticket','Votre\x20ticket','Ticket\x20en\x20transit\x20supprimé:','now','split','1519BiwKsJ','setItem','indexOf','floor','/TicketsTransit/','length','Connexion','key','Données\x20synchronisées:','forEach','.nav-button.animate-pay','Nom\x20d\x27utilisateur:\x20','val','644695uAbyzp','expired','delete-button','login','error','3pqVtiX','.rates-section\x20.loading-message','Erreur\x20lors\x20de\x20la\x20synchronisation\x20et\x20réservation\x20du\x20ticket:','user','load','hideNotification','button','password','keys','innerHTML','Paiement\x20réussi','table','entries','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Mot\x20de\x20passe:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Prix:\x20',')\x22>','createElement','364052fibrNW','Ticket\x20de\x20connexion\x20stocké:','getElementById','click','Ticket\x20en\x20transit\x20stocké:','Voir\x20mon\x20ticket','parse','stringify','1529905flXVET','getItem','notification','utilisateur','submit','Prix:\x20','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','Erreur\x20lors\x20de\x20la\x20synchronisation\x20des\x20tickets:','client@example.com','\x0aPrix:\x20','addEventListener','\x20FCFA','22010ABupOd','Mot\x20de\x20passe:\x20','display','price','/portalConfig','\x20FCFA\x0aMerci\x20pour\x20votre\x20achat!\x20🎉','storedTicket','Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20paiement:','includes','preventDefault','Payer','/TicketsVendus','Votre\x20ticket\x20a\x20été\x20supprimé\x20avec\x20succès.','DIALOG_DISMISSED','function','toString','unshift','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x27,\x20','Non\x20disponible','find','className','30466788POcvzh','Obtenir','init','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','49640JpJMXn','reason','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ticket-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Nom\x20d\x27utilisateur:\x20','CHECKOUT_COMPLETED','filter','ticket\x20cadeau','Ticket\x20cadeau','24uQgaRQ','lastFreeTicket','/TicketsTotal/','querySelector','textContent','Une\x20erreur\x20est\x20survenue.\x20Veuillez\x20réessayer\x20plus\x20tard.','9236064AJHOxO','active','prix','6138oXLjni','notification-message','.rates-section\x20table','Erreur\x20lors\x20de\x20l\x27enregistrement\x20du\x20nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté:','value','appendChild','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20onclick=\x22initPayment(\x27','username','initPayment','users-data/','Aucun\x20ticket\x20disponible\x20pour\x20cette\x20catégorie.','motDePasse','TicketConnecté','style','Identifiants\x20invalides.','Pas\x20d\x27abonnement\x20actif','scrollIntoView','Ticket\x20supprimé','.rates-section'];_0x8495=function(){return _0x5f0062;};return _0x8495();}async function restoreTicket(_0x3bd765,_0x3abbdc){const _0x133fd7=_0x45aab4,_0x5e2e35=ref(db,_0x133fd7(0x107)+adminUserId+'/TicketsTotal/'+_0x3bd765),_0x451a5d=await get(_0x5e2e35),_0x24bcb7=_0x451a5d['val']()||{'utilisateur':[],'motDePasse':[],'prix':[]};_0x24bcb7['utilisateur']['unshift'](_0x3abbdc[_0x133fd7(0x13d)]),_0x24bcb7['motDePasse'][_0x133fd7(0xe4)](_0x3abbdc['password']),_0x24bcb7[_0x133fd7(0xfd)][_0x133fd7(0xe4)](_0x3abbdc['price']),await set(_0x5e2e35,_0x24bcb7);}function canGetFreeTicket(){const _0xa9dc=_0x45aab4,_0x2e1bda=localStorage['getItem']('lastFreeTicket');if(!_0x2e1bda)return!![];const _0x294db4=new Date(parseInt(_0x2e1bda)),_0x55dd82=new Date(),_0x4e8bbc=Math[_0xa9dc(0x12b)]((_0x55dd82-_0x294db4)/(0x3e8*0x3c*0x3c*0x18));return _0x4e8bbc>=0x7;}window[_0x45aab4(0x106)]=async function(_0x2426f5,_0x2f997f){const _0x47e47f=_0x45aab4;let _0x10055b=null;try{if(_0x2426f5['toLowerCase']()[_0x47e47f(0xdc)](_0x47e47f(0xf3))){if(!canGetFreeTicket()){showNotification(_0x47e47f(0xe7),'Vous\x20devez\x20attendre\x207\x20jours\x20entre\x20chaque\x20ticket\x20gratuit.',![]);return;}const _0x566299=await synchronizeAndReserveTicket(_0x2426f5);localStorage[_0x47e47f(0x129)](_0x47e47f(0xf6),Date[_0x47e47f(0x126)]()[_0x47e47f(0xe3)]()),showNotification(_0x47e47f(0xf4),_0x47e47f(0x116),!![]),displayTicket(_0x566299,_0x2426f5),await storeTicketVendu(_0x566299);return;}_0x10055b=await storeTicketEnTransit(_0x2426f5);const _0x249793=_0x2426f5+';\x20'+_0x10055b[_0x47e47f(0x13d)]+'\x20de\x20'+_0x10055b[_0x47e47f(0xd7)]+_0x47e47f(0xd3);var _0x49098f=FedaPay[_0x47e47f(0xec)]({'public_key':fedapayApiKey,'transaction':{'amount':_0x2f997f,'description':_0x249793},'customer':{'email':_0x47e47f(0xd0)},'onComplete':async function(_0x2986ec){const _0x22d3dc=_0x47e47f;if(_0x2986ec[_0x22d3dc(0xef)]===FedaPay[_0x22d3dc(0xe1)])showNotification('Paiement\x20annulé',_0x22d3dc(0x118)),await restoreTicket(_0x2426f5,_0x10055b),await removeTicketFromTransit(_0x10055b['id']);else{if(_0x2986ec[_0x22d3dc(0xef)]===FedaPay[_0x22d3dc(0xf1)]){const _0x5daae1=_0x22d3dc(0x112)+_0x10055b[_0x22d3dc(0x13d)]+'\x0aMot\x20de\x20passe:\x20'+_0x10055b['password']+_0x22d3dc(0x115)+_0x2426f5+_0x22d3dc(0xd1)+_0x10055b[_0x22d3dc(0xd7)]+_0x22d3dc(0xd9);showNotification(_0x22d3dc(0xb9),_0x5daae1),await storeTicketVendu(_0x10055b),displayTicket(_0x10055b,_0x2426f5);}}}});_0x49098f['open']();}catch(_0x50002f){console[_0x47e47f(0x139)](_0x47e47f(0xdb),_0x50002f),showNotification(_0x47e47f(0x120),_0x47e47f(0xfa)),_0x10055b&&(await restoreTicket(_0x2426f5,_0x10055b),await removeTicketFromTransit(_0x10055b['id']));}};function showTariffsTable(){const _0x3c2ffd=_0x45aab4,_0x46da18=document[_0x3c2ffd(0xf8)](_0x3c2ffd(0x100)),_0x4587c8=document['querySelector'](_0x3c2ffd(0x13b));_0x46da18[_0x3c2ffd(0x10b)][_0x3c2ffd(0xd6)]=_0x3c2ffd(0xba),_0x4587c8[_0x3c2ffd(0x10b)][_0x3c2ffd(0xd6)]='none';}async function createTicketTable(){const _0x4c9090=_0x45aab4,_0x358f54=document['querySelector']('.rates-section\x20table');_0x358f54[_0x4c9090(0xb8)]=_0x4c9090(0xe5);if(Object[_0x4c9090(0xb7)](localTickets)['length']===0x0){document[_0x4c9090(0xf8)](_0x4c9090(0x13b))[_0x4c9090(0xf9)]=_0x4c9090(0x113);return;}for(const [_0xa99957,_0x4e0b74]of Object[_0x4c9090(0xbb)](localTickets)){if(!_0x4e0b74||!_0x4e0b74[_0x4c9090(0xfd)]||_0x4e0b74[_0x4c9090(0xfd)][_0x4c9090(0x12d)]===0x0){console[_0x4c9090(0x117)]('Données\x20incomplètes\x20pour\x20la\x20catégorie:\x20'+_0xa99957);continue;}const _0x11d2d6=_0x4e0b74[_0x4c9090(0xfd)][0x0],_0x19fef3=_0x358f54[_0x4c9090(0x119)](),_0x20a728=_0xa99957['toLowerCase']()['includes']('ticket\x20cadeau')?_0x4c9090(0xeb):_0x4c9090(0xde);_0x19fef3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xa99957+_0x4c9090(0xed)+_0x11d2d6+_0x4c9090(0x104)+_0xa99957+_0x4c9090(0xe6)+_0x11d2d6+_0x4c9090(0xbe)+_0x20a728+'</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}showTariffsTable();}function showTicketNotification(_0x589029){const _0x2f9545=_0x45aab4,_0x5cf86c=document['getElementById']('notification'),_0x49af90=document[_0x2f9545(0xc2)](_0x2f9545(0x11f)),_0x451710=document[_0x2f9545(0xc2)](_0x2f9545(0xff));_0x49af90[_0x2f9545(0xf9)]=_0x2f9545(0x124),_0x451710['innerHTML']=_0x2f9545(0xf0)+_0x589029[_0x2f9545(0x13d)]+_0x2f9545(0xbc)+_0x589029[_0x2f9545(0xb6)]+_0x2f9545(0xbd)+_0x589029[_0x2f9545(0xd7)]+'\x20F</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x3ff97f=_0x5cf86c[_0x2f9545(0x11b)]('.login-button,\x20.delete-button');_0x3ff97f[_0x2f9545(0x131)](_0x37cb55=>_0x37cb55['remove']());const _0x284ec7=document[_0x2f9545(0xbf)](_0x2f9545(0xb5));_0x284ec7[_0x2f9545(0xe9)]='login-button',_0x284ec7[_0x2f9545(0xf9)]=_0x2f9545(0x12e),_0x284ec7['addEventListener'](_0x2f9545(0xc3),()=>{const _0x46a925=_0x2f9545;autoLogin(_0x589029[_0x46a925(0x13d)],_0x589029[_0x46a925(0xb6)]);});const _0x6bc75=document[_0x2f9545(0xbf)](_0x2f9545(0xb5));_0x6bc75[_0x2f9545(0xe9)]=_0x2f9545(0x137),_0x6bc75[_0x2f9545(0xf9)]='Supprimer',_0x6bc75['addEventListener'](_0x2f9545(0xc3),deleteTicket),_0x5cf86c[_0x2f9545(0x103)](_0x284ec7),_0x5cf86c[_0x2f9545(0x103)](_0x6bc75),_0x5cf86c[_0x2f9545(0x10b)][_0x2f9545(0xd6)]=_0x2f9545(0x114);}function showNotification(_0x5748c5,_0x50bf3e,_0x1d2e64=![]){const _0x53cc2d=_0x45aab4,_0x331eb2=document[_0x53cc2d(0xc2)](_0x53cc2d(0xca)),_0x290c35=document[_0x53cc2d(0xc2)](_0x53cc2d(0x11f)),_0x3a2920=document[_0x53cc2d(0xc2)]('notification-message');_0x290c35[_0x53cc2d(0xf9)]=_0x5748c5,_0x3a2920[_0x53cc2d(0xf9)]=_0x50bf3e;const _0x55f91f=_0x331eb2[_0x53cc2d(0x11b)](_0x53cc2d(0x121));_0x55f91f[_0x53cc2d(0x131)](_0x45bbd5=>_0x45bbd5['remove']());if(_0x1d2e64){const _0x5826ab=document[_0x53cc2d(0xbf)](_0x53cc2d(0xb5));_0x5826ab['className']='login-button',_0x5826ab[_0x53cc2d(0xf9)]=_0x53cc2d(0x12e),_0x5826ab[_0x53cc2d(0xd2)](_0x53cc2d(0xc3),()=>{const _0x34a1ee=_0x53cc2d,_0x1b1fe3=_0x50bf3e[_0x34a1ee(0x127)]('\x0a'),_0x18ef0f=_0x1b1fe3[0x0][_0x34a1ee(0x127)](':\x20')[0x1],_0x1c2c5d=_0x1b1fe3[0x1]['split'](':\x20')[0x1];autoLogin(_0x18ef0f,_0x1c2c5d);}),_0x331eb2[_0x53cc2d(0x103)](_0x5826ab);const _0x396ab2=document['createElement'](_0x53cc2d(0xb5));_0x396ab2[_0x53cc2d(0xe9)]=_0x53cc2d(0x137),_0x396ab2[_0x53cc2d(0xf9)]='Supprimer',_0x396ab2[_0x53cc2d(0xd2)](_0x53cc2d(0xc3),deleteTicket),_0x331eb2[_0x53cc2d(0x103)](_0x396ab2);}_0x331eb2[_0x53cc2d(0x10b)][_0x53cc2d(0xd6)]=_0x53cc2d(0x114);}window[_0x45aab4(0xb4)]=function(){const _0x48402b=_0x45aab4;document[_0x48402b(0xc2)](_0x48402b(0xca))[_0x48402b(0x10b)][_0x48402b(0xd6)]='none';};async function storeConnectedTicket(_0x25a2a0){const _0xe1f39b=_0x45aab4;try{const _0x3bb2f8=ref(db,_0xe1f39b(0x107)+adminUserId+'/TicketConnecté'),_0x54be50=push(_0x3bb2f8);await set(_0x54be50,{'username':_0x25a2a0}),console['log']('Nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté\x20enregistré\x20dans\x20Firebase\x20avec\x20la\x20clé:',_0x54be50['key']);}catch(_0x4913d1){console['error'](_0xe1f39b(0x101),_0x4913d1);}}function checkCredentials(_0x3c81aa,_0x5e42e7){const _0x257884=_0x45aab4;for(const _0x78c7ca in localTickets){const _0x492dff=localTickets[_0x78c7ca]['utilisateur'],_0x42f41e=localTickets[_0x78c7ca][_0x257884(0x109)];if(_0x492dff&&_0x42f41e){const _0x987359=_0x492dff[_0x257884(0x12a)](_0x3c81aa);if(_0x987359>-0x1&&_0x42f41e[_0x987359]===_0x5e42e7)return!![];}}return![];}function autoLogin(_0x2a963e,_0x3876f1){const _0x197687=_0x45aab4;document[_0x197687(0x138)][_0x197687(0x105)]['value']=_0x2a963e,document['login']['password'][_0x197687(0x102)]=_0x3876f1,storeConnectedTicket(_0x2a963e),document[_0x197687(0x138)]['submit']();}function deleteTicket(){const _0x44c430=_0x45aab4;localStorage['removeItem'](_0x44c430(0xda)),showNotification(_0x44c430(0x10f),_0x44c430(0xe0)),updateButtonText();}window[_0x45aab4(0xd2)](_0x45aab4(0xb3),()=>{const _0x3cd193=_0x45aab4;updateButtonText();const _0x1dca46=document['querySelector'](_0x3cd193(0x132));_0x1dca46[_0x3cd193(0xd2)](_0x3cd193(0xc3),()=>{const _0x28bf05=_0x3cd193,_0x506857=localStorage[_0x28bf05(0xc9)]('storedTicket');if(_0x506857){const _0x3114c3=JSON[_0x28bf05(0xc6)](_0x506857);showTicketNotification(_0x3114c3);}else document[_0x28bf05(0xf8)](_0x28bf05(0x110))[_0x28bf05(0x10e)]({'behavior':'smooth'});});});function updateButtonText(){const _0x9f0b1e=_0x45aab4,_0x4ea36a=document[_0x9f0b1e(0xf8)](_0x9f0b1e(0x132)),_0x9e711e=localStorage[_0x9f0b1e(0xc9)](_0x9f0b1e(0xda));_0x9e711e?_0x4ea36a[_0x9f0b1e(0xf9)]=_0x9f0b1e(0xc5):_0x4ea36a[_0x9f0b1e(0xf9)]=_0x9f0b1e(0x123);}async function storeTicketVendu(_0x2479b7){const _0x36966a=_0x45aab4,_0x29c39e=ref(db,_0x36966a(0x107)+adminUserId+_0x36966a(0xdf));await push(_0x29c39e,{'password':_0x2479b7['password'],'price':_0x2479b7[_0x36966a(0xd7)],'user':_0x2479b7['user']}),console[_0x36966a(0x11c)]('Ticket\x20vendu\x20stocké\x20avec\x20succès');}function displayTicket(_0x5d2b9c,_0x52de43){const _0x6a0612=_0x45aab4;showNotification(_0x6a0612(0x11e),_0x6a0612(0x133)+_0x5d2b9c[_0x6a0612(0x13d)]+'\x0a'+(_0x6a0612(0xd5)+_0x5d2b9c['password']+'\x0a')+(_0x6a0612(0xcd)+_0x5d2b9c[_0x6a0612(0xd7)]+'\x20F'),!![]),updateButtonText(),storeTicketLocally({'ticketName':_0x52de43,'user':_0x5d2b9c['user'],'password':_0x5d2b9c['password'],'price':_0x5d2b9c['price']});}function storeTicketLocally(_0x13dea9){const _0x44bdab=_0x45aab4;localStorage[_0x44bdab(0x129)](_0x44bdab(0xda),JSON[_0x44bdab(0xc7)](_0x13dea9));}

    </script>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo"><!-- NETWORK_NAME --></h1>
            <div class="moon"></div>
            <img class="header-image img1" src="img/img1.jpg" alt="Image de fond">
            <img class="header-image img2" src="img/img2.jpg" alt="Image de fond">
            <nav>
                <button class="nav-button"><!-- CONTACT_NUMBER --></button>
                <button class="nav-button animate-pay">Payer un ticket</button>
            </nav>
        </div>
    </header>

    <main class="container">

        <section class="login-section">
            <h2>Connexion</h2>
            <form name="login" action="$(link-login-only)" method="post" $(if chap-id) onSubmit="return doLogin()" $(endif)>
                <input type="hidden" name="dst" value="$(link-orig)" />
                <input type="hidden" name="popup" value="true" />
                <input type="text" name="username" placeholder="Nom d'utilisateur" value="$(username)" required>
                <input type="password" name="password" placeholder="Mot de passe" required>
                <button type="submit">Se connecter</button>
            </form>
            <p class="info $(if error)alert$(endif)">
                $(if error == "")Veuillez vous connecter pour utiliser le service hotspot Internet $(if trial == 'yes')<br />Essai gratuit disponible, <a href="$(link-login-only)?dst=$(link-orig-esc)&username=T-$(mac-esc)">cliquez ici</a>.$(endif)
                $(endif)
                $(if error)$(error)$(endif)
            </p>
        </section>

        <section class="rates-section">
            <h2>Acheter un ticket par mobile money</h2>
            <div class="loading-message">Chargement des tickets...</div>
            <table style="display: none;"></table>
        </section>


        <section class="locations-section">
            <h2>Ticket payé non reçus ?</h2>
            <ul>
            <li>Récupérer les ID du ticket en contactant le <!-- CONTACT_NUMBER --></li>
            </ul>

        </section>

        <section class="locations-section">
            <h2>Nos tarifs</h2>

            <!-- TARIFFS_TABLE_SIMPLE -->

        </section>
        
        <section class="locations-section">
            <h2>Bon à savoir !</h2>
            <ul>
                <li>1 ère chose</li>
                <li>2 eme chose</li>
                <li>3 eme chose</li>
            </ul>
        </section>

        <section class="locations-section">
            <h2>Nos sites de connexion</h2>
             <!-- CONNECTION_LOCATIONS -->
        </section>

        <section class="products-section">
            <h2>Nos produits</h2>
            <ul>
               <!-- PRODUCTS_LIST -->
            </ul>
        </section>

    </main>

    <footer>
        <div class="anitext">
            PROPULSE PAR EVISIONS
        </div>
    </footer>

    <div class="notification" id="notification">
        <span class="close-icon" onclick="hideNotification()">×</span>
        <h2 id="notification-title"></h2>
        <p id="notification-message"></p>
    </div>

    <div id="paymentFrame">
        <div>
            <button id="closePaymentFrame" onclick="closePaymentFrame()">×</button>
            <iframe id="paymentIframe"></iframe>
        </div>
    </div>
    <!-- ADMIN_USER_ID -->

</body>
</html>