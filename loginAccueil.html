<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion / Inscription Administrateur</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* (Your existing CSS styles remain unchanged) */
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #fff;
            background: linear-gradient(135deg, #1a2a6c, #fdbb2d);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 0;
        }

        .login-container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 400px;
            text-align: center;
            color: #333;
        }

        h1 {
            text-align: center;
            color: #1a2a6c;
            margin-bottom: 2rem;
            font-size: 2rem;
        }

        .input-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            text-align: left;
            color: #333;
        }

        input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        input:focus {
            outline: none;
            border-color: #1a2a6c;
        }

        button {
            width: 100%;
            padding: 1rem;
            background-color: #1a2a6c;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 0.5rem; /* Add some spacing between buttons */
        }

        button:hover {
            background-color: #0e1639;
        }

        .error-message {
            color: #e74c3c;
            text-align: center;
            margin-top: 1rem;
            display: none; /* Hide by default */
        }

        .form-switcher {
            margin-top: 1rem;
            text-align: center;
            color: #333;
        }

        .form-switcher a {
            color: #1a2a6c;
            text-decoration: none;
            font-weight: bold;
        }

        /* Media query pour les écrans plus petits (smartphones) */
        @media (max-width: 600px) {
            .login-container {
                padding: 1.5rem;
                max-width: 90%;
            }

            h1 {
                font-size: 1.8rem;
                margin-bottom: 1.5rem;
            }

            input {
                padding: 0.6rem;
                font-size: 0.9rem;
            }

            button {
                padding: 0.8rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="login-container">
        <h1>Connexion / Inscription Administrateur</h1>

        <!-- Formulaire de connexion -->
        <form id="loginForm">
            <div class="input-group">
                <label for="username">Nom d'utilisateur</label>
                <input type="text" id="username" required>
            </div>
            <div class="input-group">
                <label for="password">Mot de passe</label>
                <input type="password" id="password" required>
            </div>
            <button type="submit">Se connecter</button>
            <div class="form-switcher">
                Pas encore de compte ? <a href="#" id="switchToSignup">S'inscrire</a>
            </div>
        </form>


        <!-- Formulaire d'inscription -->
        <form id="signupForm" style="display: none;">
            <div class="input-group">
                <label for="signupUsername">Nom d'utilisateur</label>
                <input type="text" id="signupUsername" required>
            </div>
            <div class="input-group">
                <label for="signupPassword">Mot de passe</label>
                <input type="password" id="signupPassword" required>
            </div>
            <button type="submit">S'inscrire</button>
            <div class="form-switcher">
                Déjà un compte ? <a href="#" id="switchToLogin">Se connecter</a>
            </div>
        </form>

        <div id="errorMessage" class="error-message"></div>
    </div>

    <script type="module">
const _0x154afc=_0x1979;(function(_0x16981d,_0x1202b1){const _0x27cf0a=_0x1979,_0x44f7f8=_0x16981d();while(!![]){try{const _0x2bf621=parseInt(_0x27cf0a(0xb0))/0x1*(-parseInt(_0x27cf0a(0xa7))/0x2)+parseInt(_0x27cf0a(0xb3))/0x3+parseInt(_0x27cf0a(0xe6))/0x4+parseInt(_0x27cf0a(0xbb))/0x5+-parseInt(_0x27cf0a(0xe4))/0x6*(parseInt(_0x27cf0a(0xac))/0x7)+parseInt(_0x27cf0a(0xe7))/0x8+parseInt(_0x27cf0a(0xbd))/0x9*(parseInt(_0x27cf0a(0xd2))/0xa);if(_0x2bf621===_0x1202b1)break;else _0x44f7f8['push'](_0x44f7f8['shift']());}catch(_0x4ac40d){_0x44f7f8['push'](_0x44f7f8['shift']());}}}(_0x12fd,0x6c36f));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';function _0x1979(_0x32ca63,_0x40187a){const _0x12fd09=_0x12fd();return _0x1979=function(_0x1979b9,_0x19f9ec){_0x1979b9=_0x1979b9-0xa6;let _0x15dcfd=_0x12fd09[_0x1979b9];return _0x15dcfd;},_0x1979(_0x32ca63,_0x40187a);}import{getDatabase,ref,get,set,push,update}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';import{getActiveDatabase}from'./firebase-config-manager.js';let db;const targetDatabaseURL=_0x154afc(0xb2);function initializeTargetApp(){const _0x15803b=_0x154afc;try{const _0x30a42a=initializeApp({'databaseURL':targetDatabaseURL},_0x15803b(0xdb));return getDatabase(_0x30a42a);}catch(_0x4b1f1d){if(_0x4b1f1d[_0x15803b(0xca)]===_0x15803b(0xdd))return getDatabase(firebase[_0x15803b(0xcc)](_0x15803b(0xdb)));else throw _0x4b1f1d;}}function _0x12fd(){const _0x3ae57b=['Data\x20synchronized\x20for\x20path:\x20','users-data/','signupPassword','Erreur\x20lors\x20de\x20l\x27inscription:','submit','log','switchToLogin','targetApp','\x20to\x20target\x20DB','app/duplicate-app','block','users','style','login','Error\x20during\x20synchronization\x20to\x20target:\x20','signupUsername','132gYpSFF','signupForm','549520yhPMMm','3217048CzGkTL','currentUserId','val','Base\x20de\x20données\x20non\x20initialisée.\x20Veuillez\x20réessayer.','159362ORXcBh','setItem','password','value','Database\x20synchronization\x20to\x20target\x20complete.','234682xRywnx','Database\x20initialization\x20failed:','Inscription\x20réussie\x20!\x20Vous\x20pouvez\x20maintenant\x20vous\x20connecter.','getElementById','1jHrEcp','Erreur\x20lors\x20de\x20l\x27inscription.','https://test-d5828-default-rtdb.firebaseio.com','928287LYikjG','DOMContentLoaded','Error\x20synchronizing\x20path\x20','synced','users/','true','click','error','1542220sWkgxM','Veuillez\x20remplir\x20tous\x20les\x20champs.','108MBMXRu','index.html','display','exists','inactive','location','none','Nom\x20d\x20utilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.','message','addEventListener','Erreur\x20de\x20connexion:','syncStatus','preventDefault','code','trim','app','errorMessage','keys','textContent','username','isLoggedIn','85930SZPEyO','Une\x20erreur\x20est\x20survenue.\x20Veuillez\x20réessayer.'];_0x12fd=function(){return _0x3ae57b;};return _0x12fd();}async function synchronizeToTargetDatabase(_0x159a4e){const _0x4a0c0a=_0x154afc,_0x5b11d3=initializeTargetApp(),_0x42747d=[_0x4a0c0a(0xdf),'users-data'];for(const _0x476887 of _0x42747d){try{const _0x1f46d1=ref(_0x159a4e,_0x476887),_0x1c1666=ref(_0x5b11d3,_0x476887),_0x211a13=await get(_0x1f46d1),_0x438f01=_0x211a13[_0x4a0c0a(0xe9)]();_0x438f01&&(await set(_0x1c1666,_0x438f01),console[_0x4a0c0a(0xd9)](_0x4a0c0a(0xd4)+_0x476887+_0x4a0c0a(0xdc)));}catch(_0xc1ca29){console['error'](_0x4a0c0a(0xb5)+_0x476887+':',_0xc1ca29);throw new Error(_0x4a0c0a(0xe2)+_0xc1ca29[_0x4a0c0a(0xc5)]);}}console[_0x4a0c0a(0xd9)](_0x4a0c0a(0xab));}async function initializeDatabase(){const _0x35df90=_0x154afc;try{if(sessionStorage['getItem'](_0x35df90(0xc8))!==_0x35df90(0xb6)){const _0x3f6110=await getActiveDatabase();await synchronizeToTargetDatabase(_0x3f6110),sessionStorage[_0x35df90(0xa8)](_0x35df90(0xc8),_0x35df90(0xb6));}db=await getActiveDatabase(),console['log']('Database\x20initialized\x20in\x20loginAccueil.html');}catch(_0x5153e0){console[_0x35df90(0xba)](_0x35df90(0xad),_0x5153e0),displayError('Erreur\x20lors\x20de\x20la\x20connexion\x20à\x20la\x20base\x20de\x20données.');}}function displayError(_0x34def9){const _0x1c62aa=_0x154afc,_0x4ffd50=document[_0x1c62aa(0xaf)](_0x1c62aa(0xcd));_0x4ffd50[_0x1c62aa(0xcf)]=_0x34def9,_0x4ffd50['style'][_0x1c62aa(0xbf)]=_0x1c62aa(0xde);}async function signup(_0x1e693a){const _0xf3ef7a=_0x154afc;_0x1e693a[_0xf3ef7a(0xc9)]();if(!db){displayError(_0xf3ef7a(0xa6));return;}const _0x1f31b8=document[_0xf3ef7a(0xaf)](_0xf3ef7a(0xe3))[_0xf3ef7a(0xaa)][_0xf3ef7a(0xcb)](),_0x14a52b=document[_0xf3ef7a(0xaf)](_0xf3ef7a(0xd6))['value'][_0xf3ef7a(0xcb)]();if(!_0x1f31b8||!_0x14a52b){displayError('Veuillez\x20remplir\x20tous\x20les\x20champs.');return;}try{const _0x1e0430=ref(db,'users'),_0x10dcae=await get(_0x1e0430),_0x27fb3f=_0x10dcae[_0xf3ef7a(0xe9)]();if(_0x27fb3f&&Object[_0xf3ef7a(0xce)](_0x27fb3f)['includes'](_0x1f31b8)){displayError('Ce\x20nom\x20d\x27utilisateur\x20existe\x20déjà.');return;}const _0x2a3bb5=ref(db,_0xf3ef7a(0xb7)+_0x1f31b8);await set(_0x2a3bb5,{'password':_0x14a52b});const _0x3cc11f=ref(db,_0xf3ef7a(0xd5)+_0x1f31b8);await set(_0x3cc11f,{'admin':{'subscription':{'status':_0xf3ef7a(0xc1)}},'TicketsTotal':{},'TicketsVendus':{},'TicketsTransit':{},'TicketConnecté':{},'Vendors':{},'VendorsHistory':{},'sales':{}}),alert(_0xf3ef7a(0xae)),switchForm(_0xf3ef7a(0xe1));}catch(_0x4f32dd){console[_0xf3ef7a(0xba)](_0xf3ef7a(0xd7),_0x4f32dd),displayError(_0xf3ef7a(0xb1));}}async function login(_0x376b13){const _0x10ada9=_0x154afc;_0x376b13[_0x10ada9(0xc9)]();if(!db){displayError('Base\x20de\x20données\x20non\x20initialisée.\x20Veuillez\x20réessayer.');return;}const _0x2c4502=document[_0x10ada9(0xaf)](_0x10ada9(0xd0))['value']['trim'](),_0x314866=document[_0x10ada9(0xaf)](_0x10ada9(0xa9))['value'][_0x10ada9(0xcb)]();if(!_0x2c4502||!_0x314866){displayError(_0x10ada9(0xbc));return;}try{const _0x4f980c=ref(db,_0x10ada9(0xb7)+_0x2c4502),_0x434121=await get(_0x4f980c);if(_0x434121[_0x10ada9(0xc0)]()){const _0x3db1e6=_0x434121[_0x10ada9(0xe9)]();_0x3db1e6[_0x10ada9(0xa9)]===_0x314866?(sessionStorage['setItem'](_0x10ada9(0xd1),_0x10ada9(0xb8)),sessionStorage[_0x10ada9(0xa8)](_0x10ada9(0xe8),_0x2c4502),window[_0x10ada9(0xc2)]['href']=_0x10ada9(0xbe)):displayError(_0x10ada9(0xc4));}else displayError(_0x10ada9(0xc4));}catch(_0x1d6c35){console[_0x10ada9(0xba)](_0x10ada9(0xc7),_0x1d6c35),displayError(_0x10ada9(0xd3));}}function switchForm(_0x3e9e7d){const _0x46255f=_0x154afc,_0x405723=document[_0x46255f(0xaf)]('loginForm'),_0xcf823e=document[_0x46255f(0xaf)](_0x46255f(0xe5));_0x3e9e7d==='login'?(_0x405723[_0x46255f(0xe0)][_0x46255f(0xbf)]='block',_0xcf823e[_0x46255f(0xe0)][_0x46255f(0xbf)]='none'):(_0x405723['style']['display']=_0x46255f(0xc3),_0xcf823e[_0x46255f(0xe0)]['display']=_0x46255f(0xde));}document['addEventListener'](_0x154afc(0xb4),async()=>{const _0x5ad8ba=_0x154afc;await initializeDatabase(),document['getElementById']('loginForm')[_0x5ad8ba(0xc6)](_0x5ad8ba(0xd8),login),document[_0x5ad8ba(0xaf)](_0x5ad8ba(0xe5))[_0x5ad8ba(0xc6)]('submit',signup),document[_0x5ad8ba(0xaf)]('switchToSignup')[_0x5ad8ba(0xc6)](_0x5ad8ba(0xb9),()=>switchForm('signup')),document['getElementById'](_0x5ad8ba(0xda))[_0x5ad8ba(0xc6)](_0x5ad8ba(0xb9),()=>switchForm(_0x5ad8ba(0xe1)));});

    </script>
</body>
</html>