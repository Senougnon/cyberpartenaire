const _0x58a0d4=_0x271b;(function(_0x390084,_0x452439){const _0x1aa01f=_0x271b,_0x1ba5be=_0x390084();while(!![]){try{const _0x4844a9=-parseInt(_0x1aa01f(0x10a))/0x1*(parseInt(_0x1aa01f(0xab))/0x2)+parseInt(_0x1aa01f(0xf7))/0x3*(parseInt(_0x1aa01f(0xf3))/0x4)+parseInt(_0x1aa01f(0xfb))/0x5+parseInt(_0x1aa01f(0xd3))/0x6+parseInt(_0x1aa01f(0xfd))/0x7*(parseInt(_0x1aa01f(0x91))/0x8)+parseInt(_0x1aa01f(0xe6))/0x9+-parseInt(_0x1aa01f(0xfc))/0xa*(parseInt(_0x1aa01f(0xd8))/0xb);if(_0x4844a9===_0x452439)break;else _0x1ba5be['push'](_0x1ba5be['shift']());}catch(_0x505862){_0x1ba5be['push'](_0x1ba5be['shift']());}}}(_0xe553,0x40253));const firebaseConfig={'apiKey':'AIzaSyAyrniQKyBc9zTwUCbHlryyR411HLzbDkk','authDomain':_0x58a0d4(0x106),'databaseURL':_0x58a0d4(0xcd),'projectId':'sikaconnect-2f279','storageBucket':_0x58a0d4(0x8a),'messagingSenderId':_0x58a0d4(0x8c),'appId':_0x58a0d4(0x102),'measurementId':_0x58a0d4(0xdb)};firebase[_0x58a0d4(0xe9)](firebaseConfig);const database=firebase['database'](),adminRef=database[_0x58a0d4(0xb8)](_0x58a0d4(0xc0)),loginForm=document['getElementById']('loginForm'),signupForm=document[_0x58a0d4(0x119)](_0x58a0d4(0xe7)),loginContainer=document['getElementById'](_0x58a0d4(0xf2)),signupContainer=document[_0x58a0d4(0x119)](_0x58a0d4(0xdd)),dashboardContainer=document[_0x58a0d4(0x119)](_0x58a0d4(0xee)),salesForm=document[_0x58a0d4(0x119)](_0x58a0d4(0x115)),salesTable=document[_0x58a0d4(0x119)](_0x58a0d4(0xfe)),totalSalesElement=document[_0x58a0d4(0x119)](_0x58a0d4(0x9b)),averageSalesElement=document[_0x58a0d4(0x119)](_0x58a0d4(0xc2)),userInfoElement=document[_0x58a0d4(0x119)](_0x58a0d4(0xd4)),toggleAnalysisButton=document[_0x58a0d4(0x119)]('toggleAnalysisButton'),toggleSalesButton=document[_0x58a0d4(0x119)](_0x58a0d4(0xa7)),analysisSection=document[_0x58a0d4(0x119)]('analysisSection'),salesDetailsSection=document[_0x58a0d4(0x119)]('salesDetailsSection'),signupButton=document[_0x58a0d4(0x119)]('signupButton'),loginFromSignup=document[_0x58a0d4(0x119)]('loginFromSignup'),productSelect=document['getElementById']('product'),stockTableGlobal=document[_0x58a0d4(0x119)](_0x58a0d4(0xd9));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x58a0d4(0x119)](_0x58a0d4(0xe3))['value']=new Date()['toISOString']()[_0x58a0d4(0xa9)](0x0,0x10);function fetchTicketCategories(){const _0xcfb96c=_0x58a0d4;database['ref'](_0xcfb96c(0x114))[_0xcfb96c(0x87)](_0xcfb96c(0x95))[_0xcfb96c(0xdf)](_0x37e281=>{ticketCategories=_0x37e281['val']()||{},populateProductSelect();});}function populateProductSelect(){const _0x576f5e=_0x58a0d4;productSelect[_0x576f5e(0x81)]=_0x576f5e(0x11d);for(const _0xf816e9 in ticketCategories){const _0x4a186f=ticketCategories[_0xf816e9]['prix'][0x0],_0x50ff92=document[_0x576f5e(0x124)]('option');_0x50ff92[_0x576f5e(0x95)]=_0xf816e9,_0x50ff92[_0x576f5e(0x127)]=_0xf816e9+'\x20('+_0x4a186f+_0x576f5e(0x10b),productSelect['appendChild'](_0x50ff92);}}function _0xe553(){const _0x559f54=['exists','Total\x20des\x20ventes:\x20','expired','once','writeFile','querySelector','sikaconnect-2f279.firebasestorage.app','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée\x20:','980825684625','insertCell','Détail\x20des\x20ventes','querySelectorAll','div','279544qiOPxO','style','Prix\x20de\x20vente','block','value','APP','href','confirmDelete','Ce\x20nom\x20d\x27utilisateur\x20est\x20déjà\x20utilisé.','setAttribute','totalSales','submit','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.','Inscription\x20réussie\x20!\x20Connectez-vous.','prix','status','length','log','rgb(0,\x20255,\x20255)','toLowerCase','book_new','filterSalesDates','toggleSalesButton','delete-icon','slice','filter','262aEgxWc','toString','push','TotalSales','true','signupPassword','sales/','Utilisateur:\x20','preventDefault','endAt','removeChild','active','light-theme','ref','theme-toggle','ventes_wifi_zone.xlsx','exportExcel','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrée:','month','location','confirm-dialog','admin/subscription','total','averageSales','search','cancelDelete','onclick','appendChild','product','tbody','rgb(255,\x2099,\x20132)','Masquer\x20le\x20détail\x20des\x20ventes','table_to_sheet','insertRow','https://sikaconnect-2f279-default-rtdb.firebaseio.com','flex','darkTheme','utils','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','Masquer\x20l\x27analyse\x20des\x20ventes','383844UUrJGl','userInfo','error','Ventes','#searchInputs\x20input','11ippRQt','stockTableGlobal','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée.','G-579KVT1Y97','line','signupContainer','AverageSales','then','forEach','sort','Analyse\x20des\x20ventes','dateTime','stopPropagation','Error\x20creating\x20user:','4696974ltdaqQ','signupForm','click','initializeApp','Entrée\x20supprimée\x20avec\x20succès','toLocaleString','toFixed','getTime','dashboardContainer','aria-label','users/','reduce','loginContainer','628veamAQ','subscriptionRequiredModal','Activer\x20le\x20mode\x20clair','className','1758TFcpkz','password','values','username','2256815NwaWcf','10390610gqENrm','98OmErvV','salesTable','getItem','rgba(255,\x20255,\x20255,\x200.1)','val','1:980825684625:web:dbf5a31b93db0d13261d30','input','catch','labels','sikaconnect-2f279.firebaseapp.com','td:first-child','signupUsername','th[data-sort]','2417LTKEaV','\x20FCFA)','sales','Erreur\x20lors\x20de\x20la\x20création\x20du\x20compte','\x20FCFA','remove','change','salesEndDate','keys','salesStartDate','TicketsTotal','salesForm','addEventListener','equalTo','display','getElementById','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','endDate','prices','<option\x20value=\x22\x22>Sélectionner\x20un\x20produit</option>','charAt','orderByChild','reset','none','key','setItem','createElement','getContext','update','textContent','classList','dataset','body','innerHTML','week','span'];_0xe553=function(){return _0x559f54;};return _0xe553();}fetchTicketCategories(),loginForm[_0x58a0d4(0x116)]('submit',function(_0x23c45a){const _0x5bc9be=_0x58a0d4;_0x23c45a['preventDefault']();const _0x1ddc98=document['getElementById'](_0x5bc9be(0xfa))[_0x5bc9be(0x95)],_0x2cf7a4=document[_0x5bc9be(0x119)](_0x5bc9be(0xf8))[_0x5bc9be(0x95)];database['ref']('users/'+_0x1ddc98)[_0x5bc9be(0x87)](_0x5bc9be(0x95))[_0x5bc9be(0xdf)](_0xee9191=>{const _0x521a7e=_0x5bc9be;_0xee9191[_0x521a7e(0x84)]()?_0xee9191[_0x521a7e(0x101)]()[_0x521a7e(0xf8)]===_0x2cf7a4?loginSuccess(_0x1ddc98):alert('Mot\x20de\x20passe\x20incorrect'):alert('Utilisateur\x20introuvable');});}),signupForm[_0x58a0d4(0x116)](_0x58a0d4(0x9c),function(_0xa201f8){const _0x5ce50a=_0x58a0d4;_0xa201f8['preventDefault']();const _0x15348d=document[_0x5ce50a(0x119)](_0x5ce50a(0x108))[_0x5ce50a(0x95)],_0x579b81=document[_0x5ce50a(0x119)](_0x5ce50a(0xb0))[_0x5ce50a(0x95)];database['ref']('users/'+_0x15348d)['once'](_0x5ce50a(0x95))[_0x5ce50a(0xdf)](_0x1ee792=>{const _0x245139=_0x5ce50a;_0x1ee792[_0x245139(0x84)]()?alert(_0x245139(0x99)):database['ref'](_0x245139(0xf0)+_0x15348d)['set']({'password':_0x579b81})[_0x245139(0xdf)](()=>{const _0x2c7a6e=_0x245139;alert(_0x2c7a6e(0x9e)),signupContainer[_0x2c7a6e(0x92)][_0x2c7a6e(0x118)]=_0x2c7a6e(0x121),loginContainer[_0x2c7a6e(0x92)][_0x2c7a6e(0x118)]=_0x2c7a6e(0x94);})[_0x245139(0x104)](_0x438c65=>{const _0x2e4da8=_0x245139;console[_0x2e4da8(0xd5)](_0x2e4da8(0xe5),_0x438c65),alert(_0x2e4da8(0x10d));});});}),signupButton['addEventListener']('click',function(){const _0x31a9cc=_0x58a0d4;loginContainer[_0x31a9cc(0x92)][_0x31a9cc(0x118)]=_0x31a9cc(0x121),signupContainer[_0x31a9cc(0x92)][_0x31a9cc(0x118)]=_0x31a9cc(0x94);}),loginFromSignup[_0x58a0d4(0x116)]('click',function(){const _0x4460bd=_0x58a0d4;signupContainer['style']['display']=_0x4460bd(0x121),loginContainer[_0x4460bd(0x92)][_0x4460bd(0x118)]=_0x4460bd(0x94);});function loginSuccess(_0x189cf6){const _0x3aefd8=_0x58a0d4;currentUser=_0x189cf6,loginContainer[_0x3aefd8(0x92)][_0x3aefd8(0x118)]='none',signupContainer[_0x3aefd8(0x92)]['display']=_0x3aefd8(0x121),dashboardContainer['style'][_0x3aefd8(0x118)]=_0x3aefd8(0x94),userInfoElement[_0x3aefd8(0x127)]=_0x3aefd8(0xb2)+_0x189cf6,checkSubscriptionStatus()[_0x3aefd8(0xdf)](_0x370e76=>{_0x370e76?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x3aefd8(0x104)](_0x4a627a=>{const _0x5ee566=_0x3aefd8;console[_0x5ee566(0xd5)]('Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:',_0x4a627a),alert(_0x5ee566(0x9d));});}function listenForSalesDataChanges(){const _0x2b1345=_0x58a0d4;salesDataListener=database['ref'](_0x2b1345(0xb1)+currentUser)['on'](_0x2b1345(0x95),_0x5788c2=>{const _0x56c425=_0x2b1345;salesData=[],_0x5788c2[_0x56c425(0xe0)](_0x565218=>{const _0x5ab70d=_0x56c425,_0x1eefb0=_0x565218[_0x5ab70d(0x101)]();_0x1eefb0[_0x5ab70d(0x122)]=_0x565218[_0x5ab70d(0x122)],_0x1eefb0[_0x5ab70d(0xc1)]=(_0x1eefb0['V']*_0x1eefb0['PV'])[_0x5ab70d(0xec)](0x2),salesData[_0x5ab70d(0xad)](_0x1eefb0);}),analysisSection['style'][_0x56c425(0x118)]===_0x56c425(0x94)&&updateAnalysis(salesData);});}document['getElementById'](_0x58a0d4(0xc7))[_0x58a0d4(0x116)](_0x58a0d4(0x110),function(){const _0x4a6d4a=_0x58a0d4,_0x225cbd=this['value'];database[_0x4a6d4a(0xb8)]('sales/'+currentUser)['orderByChild'](_0x4a6d4a(0xc7))[_0x4a6d4a(0x117)](_0x225cbd)['limitToLast'](0x1)[_0x4a6d4a(0x87)](_0x4a6d4a(0x95))['then'](_0x172071=>{const _0x348f77=_0x4a6d4a;if(_0x172071[_0x348f77(0x84)]()){const _0x12597b=Object[_0x348f77(0xf9)](_0x172071[_0x348f77(0x101)]())[0x0];document['getElementById']('SI')[_0x348f77(0x95)]=_0x12597b['SF']||0x0;}else document[_0x348f77(0x119)]('SI')[_0x348f77(0x95)]=0x0;}),updatePV();}),document[_0x58a0d4(0x119)]('V')[_0x58a0d4(0x116)]('input',updateSF),document['getElementById']('APP')['addEventListener'](_0x58a0d4(0x103),updateSF);function updateSF(){const _0x3ef857=_0x58a0d4,_0x1628c0=parseInt(document[_0x3ef857(0x119)]('SI')['value'])||0x0,_0x393cf2=parseInt(document[_0x3ef857(0x119)]('APP')['value'])||0x0,_0x242382=parseInt(document[_0x3ef857(0x119)]('V')[_0x3ef857(0x95)])||0x0;document[_0x3ef857(0x119)]('SF')[_0x3ef857(0x95)]=_0x1628c0+_0x393cf2-_0x242382;}function updatePV(){const _0x46484f=_0x58a0d4,_0x4eab99=document['getElementById']('product')['value'],_0x72d68d=ticketCategories[_0x4eab99]?.[_0x46484f(0x9f)][0x0];document[_0x46484f(0x119)]('PV')[_0x46484f(0x95)]=_0x72d68d||0x0;}salesForm[_0x58a0d4(0x116)](_0x58a0d4(0x9c),function(_0x2865dc){const _0x1631e8=_0x58a0d4;_0x2865dc[_0x1631e8(0xb3)]();const _0x5b8126={'dateTime':document['getElementById'](_0x1631e8(0xe3))[_0x1631e8(0x95)],'product':document['getElementById']('product')[_0x1631e8(0x95)],'SI':parseInt(document[_0x1631e8(0x119)]('SI')[_0x1631e8(0x95)])||0x0,'APP':parseInt(document[_0x1631e8(0x119)]('APP')[_0x1631e8(0x95)])||0x0,'V':parseInt(document[_0x1631e8(0x119)]('V')[_0x1631e8(0x95)])||0x0,'SF':parseInt(document[_0x1631e8(0x119)]('SF')[_0x1631e8(0x95)])||0x0,'PV':parseFloat(document[_0x1631e8(0x119)]('PV')[_0x1631e8(0x95)])||0x0};database[_0x1631e8(0xb8)](_0x1631e8(0xb1)+currentUser)[_0x1631e8(0xad)](_0x5b8126)[_0x1631e8(0xdf)](()=>{const _0x576873=_0x1631e8;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x576873(0x120)](),document['getElementById'](_0x576873(0xe3))['value']=new Date()['toISOString']()[_0x576873(0xa9)](0x0,0x10);})[_0x1631e8(0x104)](_0x1cefed=>{const _0x3cfa24=_0x1631e8;console[_0x3cfa24(0xd5)](_0x3cfa24(0x8b),_0x1cefed),alert(_0x3cfa24(0xda));});});function updateTable(){const _0x5418ce=_0x58a0d4,_0x5664c7=salesTable[_0x5418ce(0x89)](_0x5418ce(0xc8));_0x5664c7['innerHTML']='',database[_0x5418ce(0xb8)](_0x5418ce(0xb1)+currentUser)['once'](_0x5418ce(0x95))[_0x5418ce(0xdf)](_0x3f0b8d=>{const _0x10114f=_0x5418ce;salesData=[],_0x3f0b8d[_0x10114f(0xe0)](_0x1bf9fa=>{const _0x45397d=_0x10114f,_0x20a61d=_0x1bf9fa[_0x45397d(0x101)]();_0x20a61d[_0x45397d(0xc1)]=(_0x20a61d['V']*_0x20a61d['PV'])['toFixed'](0x2),salesData[_0x45397d(0xad)](_0x20a61d);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x4a1cef=_0x58a0d4,_0x1d9894=document['getElementById'](_0x4a1cef(0xd9));_0x1d9894[_0x4a1cef(0x89)](_0x4a1cef(0xc8))[_0x4a1cef(0x81)]='',database[_0x4a1cef(0xb8)](_0x4a1cef(0xb1)+currentUser)['once'](_0x4a1cef(0x95))[_0x4a1cef(0xdf)](_0x54084b=>{const _0x2da46d=_0x4a1cef,_0x40af1a={};_0x54084b[_0x2da46d(0xe0)](_0x254088=>{const _0x435664=_0x2da46d,_0x1cd6c6=_0x254088['val']();(!_0x40af1a[_0x1cd6c6['product']]||new Date(_0x1cd6c6[_0x435664(0xe3)])>new Date(_0x40af1a[_0x1cd6c6['product']][_0x435664(0xe3)]))&&(_0x40af1a[_0x1cd6c6[_0x435664(0xc7)]]=_0x1cd6c6);}),Object[_0x2da46d(0xf9)](_0x40af1a)['forEach'](_0x422440=>{const _0x226b9b=_0x2da46d,_0x4e2dab=_0x1d9894[_0x226b9b(0x89)]('tbody')[_0x226b9b(0xcc)]();_0x4e2dab[_0x226b9b(0x8d)](0x0)[_0x226b9b(0x127)]=_0x422440[_0x226b9b(0xc7)],_0x4e2dab[_0x226b9b(0x8d)](0x1)['textContent']=_0x422440['SF'],_0x4e2dab[_0x226b9b(0x8d)](0x2)['textContent']=new Date(_0x422440[_0x226b9b(0xe3)])[_0x226b9b(0xeb)]();}),setupSort(_0x1d9894);});}function exportToExcel(){const _0xbc4fea=_0x58a0d4,_0x52e0b6=XLSX[_0xbc4fea(0xd0)][_0xbc4fea(0xa5)](),_0x3eea48=XLSX['utils'][_0xbc4fea(0xcb)](document[_0xbc4fea(0x119)](_0xbc4fea(0xfe)));XLSX[_0xbc4fea(0xd0)]['book_append_sheet'](_0x52e0b6,_0x3eea48,_0xbc4fea(0xd6)),XLSX[_0xbc4fea(0x88)](_0x52e0b6,_0xbc4fea(0xba));}document['getElementById'](_0x58a0d4(0xbb))[_0x58a0d4(0x116)](_0x58a0d4(0xe8),exportToExcel);function deleteEntry(_0xb167ba){const _0x3372de=_0x58a0d4;database[_0x3372de(0xb8)](_0x3372de(0xb1)+currentUser+'/'+_0xb167ba)[_0x3372de(0x87)](_0x3372de(0x95))[_0x3372de(0xdf)](_0x51d8cb=>{const _0x1b5640=_0x3372de,_0x1d7cf5=_0x51d8cb['val']();return database[_0x1b5640(0xb8)]('sales/'+currentUser+'/'+_0xb167ba)[_0x1b5640(0x10f)]()[_0x1b5640(0xdf)](()=>{const _0x371f5d=_0x1b5640;return console[_0x371f5d(0xa2)](_0x371f5d(0xea)),updateStockAfterDeletion(_0x1d7cf5);});})['then'](()=>{return updateTable();})[_0x3372de(0xdf)](()=>{updateStockTables(),updateAnalysis();})[_0x3372de(0x104)](_0xe5416e=>{const _0xf9a0c0=_0x3372de;console[_0xf9a0c0(0xd5)](_0xf9a0c0(0xbc),_0xe5416e);});}function _0x271b(_0x28f2da,_0x77543a){const _0xe55349=_0xe553();return _0x271b=function(_0x271b10,_0x2fc163){_0x271b10=_0x271b10-0x81;let _0xbb25d=_0xe55349[_0x271b10];return _0xbb25d;},_0x271b(_0x28f2da,_0x77543a);}function updateStockAfterDeletion(_0x3a68eb){const _0x1911df=_0x58a0d4;return database[_0x1911df(0xb8)](_0x1911df(0xb1)+currentUser)[_0x1911df(0x11f)](_0x1911df(0xe3))[_0x1911df(0xb4)](_0x3a68eb[_0x1911df(0xe3)])['limitToLast'](0x2)['once'](_0x1911df(0x95))[_0x1911df(0xdf)](_0x1f37f1=>{const _0x47292f=_0x1911df;let _0x57e535=[];_0x1f37f1[_0x47292f(0xe0)](_0x4888aa=>{const _0x392265=_0x47292f;_0x57e535[_0x392265(0xad)]({'key':_0x4888aa[_0x392265(0x122)],..._0x4888aa[_0x392265(0x101)]()});}),_0x57e535['sort']((_0x532c04,_0x17ea86)=>new Date(_0x17ea86[_0x47292f(0xe3)])-new Date(_0x532c04['dateTime']));if(_0x57e535[_0x47292f(0xa1)]>0x1&&_0x57e535[0x0][_0x47292f(0x122)]!==_0x3a68eb[_0x47292f(0x122)]){const _0x215543=_0x57e535[0x1],_0x46a3f4=_0x215543['SF']+_0x3a68eb['V']-_0x3a68eb[_0x47292f(0x96)];return database[_0x47292f(0xb8)](_0x47292f(0xb1)+currentUser+'/'+_0x215543[_0x47292f(0x122)])[_0x47292f(0x126)]({'SF':_0x46a3f4});}return Promise['resolve']();});}function updateTable(){const _0x2149ea=_0x58a0d4;return database[_0x2149ea(0xb8)]('sales/'+currentUser)[_0x2149ea(0x87)]('value')[_0x2149ea(0xdf)](_0x176257=>{salesData=[],_0x176257['forEach'](_0x3ab4a9=>{const _0x566ecd=_0x271b,_0x363a60=_0x3ab4a9['val']();_0x363a60[_0x566ecd(0x122)]=_0x3ab4a9[_0x566ecd(0x122)],_0x363a60[_0x566ecd(0xc1)]=(_0x363a60['V']*_0x363a60['PV'])['toFixed'](0x2),salesData['push'](_0x363a60);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x3dfaab){const _0x3c2de2=_0x58a0d4,_0x2c2869=salesTable[_0x3c2de2(0x89)](_0x3c2de2(0xc8));_0x2c2869[_0x3c2de2(0x81)]='',_0x3dfaab[_0x3c2de2(0xe0)](_0x409e1e=>{const _0xb3c4bc=_0x3c2de2,_0xfa7942=_0x2c2869['insertRow']();_0xfa7942[_0xb3c4bc(0x129)][_0xb3c4bc(0x122)]=_0x409e1e[_0xb3c4bc(0x122)],_0xfa7942[_0xb3c4bc(0x8d)](0x0)[_0xb3c4bc(0x127)]=new Date(_0x409e1e['dateTime'])[_0xb3c4bc(0xeb)](),_0xfa7942['insertCell'](0x1)['textContent']=_0x409e1e['product'],_0xfa7942[_0xb3c4bc(0x8d)](0x2)[_0xb3c4bc(0x127)]=_0x409e1e['SI'],_0xfa7942[_0xb3c4bc(0x8d)](0x3)[_0xb3c4bc(0x127)]=_0x409e1e[_0xb3c4bc(0x96)],_0xfa7942[_0xb3c4bc(0x8d)](0x4)[_0xb3c4bc(0x127)]=_0x409e1e['V'],_0xfa7942['insertCell'](0x5)['textContent']=_0x409e1e['SF'],_0xfa7942[_0xb3c4bc(0x8d)](0x6)[_0xb3c4bc(0x127)]=_0x409e1e['PV'],_0xfa7942[_0xb3c4bc(0x8d)](0x7)[_0xb3c4bc(0x127)]=_0x409e1e[_0xb3c4bc(0xc1)];}),addDeleteIcons();}function addDeleteIcons(){const _0x192b58=_0x58a0d4,_0x5cb7d1=salesTable[_0x192b58(0x8f)]('tbody\x20tr');_0x5cb7d1[_0x192b58(0xe0)](_0x25a319=>{const _0x32a10e=_0x192b58,_0x5ad8d3=document[_0x32a10e(0x124)](_0x32a10e(0x83));_0x5ad8d3[_0x32a10e(0x81)]='✖',_0x5ad8d3[_0x32a10e(0xf6)]=_0x32a10e(0xa8),_0x5ad8d3[_0x32a10e(0xc5)]=_0x297b82=>{const _0x9a63b=_0x32a10e;_0x297b82[_0x9a63b(0xe4)](),showConfirmDialog(_0x25a319[_0x9a63b(0x129)]['key']);},_0x25a319['querySelector'](_0x32a10e(0x107))['appendChild'](_0x5ad8d3);});}function showConfirmDialog(_0x5b17d7){const _0x47f3ff=_0x58a0d4,_0x48e52d=document[_0x47f3ff(0x124)](_0x47f3ff(0x90));_0x48e52d[_0x47f3ff(0xf6)]=_0x47f3ff(0xbf),_0x48e52d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20entrée\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20',document['body'][_0x47f3ff(0xc6)](_0x48e52d),document[_0x47f3ff(0x119)](_0x47f3ff(0x98))[_0x47f3ff(0xc5)]=()=>{const _0xc71b59=_0x47f3ff;deleteEntry(_0x5b17d7),document[_0xc71b59(0x12a)]['removeChild'](_0x48e52d);},document[_0x47f3ff(0x119)](_0x47f3ff(0xc4))['onclick']=()=>{const _0x47954e=_0x47f3ff;document['body'][_0x47954e(0xb5)](_0x48e52d);};}function setupSearch(){const _0x57d24b=_0x58a0d4,_0x3bbcff=document['querySelectorAll'](_0x57d24b(0xd7));_0x3bbcff[_0x57d24b(0xe0)](_0x6b199c=>{const _0x5d366a=_0x57d24b;_0x6b199c[_0x5d366a(0x116)](_0x5d366a(0x103),()=>{const _0x257e22=salesData['filter'](_0x42a709=>{const _0x4a30fa=_0x271b;return Object[_0x4a30fa(0x112)](_0x42a709)['every'](_0x574f30=>{const _0x182646=_0x4a30fa,_0x7da1c6=document[_0x182646(0x119)](_0x182646(0xc3)+(_0x574f30[_0x182646(0x11e)](0x0)['toUpperCase']()+_0x574f30[_0x182646(0xa9)](0x1)))?.[_0x182646(0x95)][_0x182646(0xa4)]()||'';return _0x42a709[_0x574f30][_0x182646(0xac)]()[_0x182646(0xa4)]()['includes'](_0x7da1c6);});});renderTable(_0x257e22),updateAnalysis(_0x257e22);});});}function setupSort(_0x27e4f0){const _0x2e5485=_0x58a0d4,_0x6ab248=_0x27e4f0['querySelectorAll'](_0x2e5485(0x109));_0x6ab248[_0x2e5485(0xe0)](_0xcfbfe5=>{const _0x5148d6=_0x2e5485;_0xcfbfe5[_0x5148d6(0x116)](_0x5148d6(0xe8),()=>{const _0x1ddd3e=_0x5148d6,_0x46dbc4=_0xcfbfe5['dataset']['sort'],_0x26d3b0=_0x27e4f0['id']==='salesTable'?salesData:stockData;_0x26d3b0[_0x1ddd3e(0xe1)]((_0x125001,_0x430bfa)=>{if(_0x125001[_0x46dbc4]<_0x430bfa[_0x46dbc4])return-0x1;if(_0x125001[_0x46dbc4]>_0x430bfa[_0x46dbc4])return 0x1;return 0x0;}),_0x27e4f0['id']===_0x1ddd3e(0xfe)?(renderTable(_0x26d3b0),updateAnalysis(_0x26d3b0)):renderStockTable(_0x26d3b0,_0x27e4f0);});});}function renderStockTable(_0x53bc38,_0x5c167a){const _0x3c7eba=_0x58a0d4,_0xf4a810=_0x5c167a[_0x3c7eba(0x89)](_0x3c7eba(0xc8));_0xf4a810[_0x3c7eba(0x81)]='',_0x53bc38[_0x3c7eba(0xe0)](_0x8b9e1=>{const _0x57ebe3=_0x3c7eba,_0x16941e=_0xf4a810[_0x57ebe3(0xcc)]();_0x16941e[_0x57ebe3(0x8d)](0x0)[_0x57ebe3(0x127)]=_0x8b9e1[_0x57ebe3(0xc7)],_0x16941e['insertCell'](0x1)[_0x57ebe3(0x127)]=_0x8b9e1['SF'],_0x16941e[_0x57ebe3(0x8d)](0x2)[_0x57ebe3(0x127)]=new Date(_0x8b9e1[_0x57ebe3(0xe3)])[_0x57ebe3(0xeb)]();});}function updateAnalysis(_0x280dfd=salesData){const _0x1479d3=_0x58a0d4;let _0xa94dfa=0x0,_0x47fa77=0x0;const _0x3a539e={'labels':[],'sales':[],'prices':[]};_0x280dfd[_0x1479d3(0xe0)](_0x5a697d=>{const _0x39166c=_0x1479d3;_0xa94dfa+=_0x5a697d['V']*_0x5a697d['PV'],_0x47fa77++,_0x3a539e[_0x39166c(0x105)]['push'](new Date(_0x5a697d['dateTime'])['toLocaleString']()),_0x3a539e[_0x39166c(0x10c)][_0x39166c(0xad)](_0x5a697d['V']),_0x3a539e[_0x39166c(0x11c)][_0x39166c(0xad)](_0x5a697d['PV']);});const _0x252771=_0xa94dfa/_0x47fa77||0x0;totalSalesElement['textContent']=_0x1479d3(0x85)+_0xa94dfa[_0x1479d3(0xec)](0x2)+_0x1479d3(0x10e),averageSalesElement[_0x1479d3(0x127)]=_0x1479d3(0xd1)+_0x252771[_0x1479d3(0xec)](0x2)+_0x1479d3(0x10e),updateChart(_0x3a539e),updatePeriodAnalysis(_0x280dfd);}function updateChart(_0x303373){const _0x47852e=_0x58a0d4,_0x309ab3=document['getElementById']('salesChart')[_0x47852e(0x125)]('2d');salesChart&&salesChart['destroy'](),salesChart=new Chart(_0x309ab3,{'type':_0x47852e(0xdc),'data':{'labels':_0x303373[_0x47852e(0x105)],'datasets':[{'label':_0x47852e(0xd6),'data':_0x303373['sales'],'borderColor':_0x47852e(0xa3),'tension':0.1},{'label':_0x47852e(0x93),'data':_0x303373[_0x47852e(0x11c)],'borderColor':_0x47852e(0xc9),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x47852e(0xa3)}},'x':{'grid':{'color':_0x47852e(0x100)},'ticks':{'color':'rgb(0,\x20255,\x20255)'}}},'plugins':{'legend':{'labels':{'color':_0x47852e(0xa3)}}}}});}function updatePeriodAnalysis(_0x363ace){const _0x58cf37=_0x58a0d4,_0x2d694e=new Date(),_0x175490=new Date(_0x2d694e['getTime']()-0x7*0x18*0x3c*0x3c*0x3e8),_0x53ef5c=new Date(_0x2d694e[_0x58cf37(0xed)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x23fcd4=new Date(_0x2d694e[_0x58cf37(0xed)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x4af195=_0x363ace[_0x58cf37(0xaa)](_0x2d74ae=>new Date(_0x2d74ae[_0x58cf37(0xe3)])>=_0x175490),_0x52e247=_0x363ace['filter'](_0x5a5425=>new Date(_0x5a5425[_0x58cf37(0xe3)])>=_0x53ef5c),_0x4aa26d=_0x363ace['filter'](_0x53c95f=>new Date(_0x53c95f['dateTime'])>=_0x23fcd4);updatePeriodStats(_0x4af195,_0x58cf37(0x82)),updatePeriodStats(_0x52e247,_0x58cf37(0xbd)),updatePeriodStats(_0x4aa26d,'threeMonth');}function updatePeriodStats(_0xfea9e6,_0x211013){const _0x55f44e=_0x58a0d4,_0x49bbd2=_0xfea9e6[_0x55f44e(0xf1)]((_0x28ffbd,_0x5a4cf5)=>_0x28ffbd+_0x5a4cf5['V']*_0x5a4cf5['PV'],0x0),_0xa37b00=_0x49bbd2/_0xfea9e6[_0x55f44e(0xa1)]||0x0;document[_0x55f44e(0x119)](_0x211013+_0x55f44e(0xae))[_0x55f44e(0x127)]='Total\x20des\x20ventes:\x20'+_0x49bbd2[_0x55f44e(0xec)](0x2)+_0x55f44e(0x10e),document[_0x55f44e(0x119)](_0x211013+_0x55f44e(0xde))['textContent']=_0x55f44e(0xd1)+_0xa37b00[_0x55f44e(0xec)](0x2)+_0x55f44e(0x10e);}toggleAnalysisButton['addEventListener'](_0x58a0d4(0xe8),function(){const _0x13b4ce=_0x58a0d4;analysisSection[_0x13b4ce(0x92)][_0x13b4ce(0x118)]===_0x13b4ce(0x121)||analysisSection[_0x13b4ce(0x92)]['display']===''?(analysisSection['style'][_0x13b4ce(0x118)]=_0x13b4ce(0x94),salesDetailsSection['style'][_0x13b4ce(0x118)]='none',this[_0x13b4ce(0x127)]=_0x13b4ce(0xd2),toggleSalesButton[_0x13b4ce(0x127)]=_0x13b4ce(0x8e),updateAnalysis(salesData)):(analysisSection[_0x13b4ce(0x92)][_0x13b4ce(0x118)]='none',this[_0x13b4ce(0x127)]='Analyse\x20des\x20ventes');}),toggleSalesButton['addEventListener']('click',function(){const _0x140cac=_0x58a0d4;salesDetailsSection[_0x140cac(0x92)][_0x140cac(0x118)]===_0x140cac(0x121)||salesDetailsSection[_0x140cac(0x92)]['display']===''?(salesDetailsSection[_0x140cac(0x92)]['display']=_0x140cac(0x94),analysisSection[_0x140cac(0x92)][_0x140cac(0x118)]=_0x140cac(0x121),this['textContent']=_0x140cac(0xca),toggleAnalysisButton[_0x140cac(0x127)]=_0x140cac(0xe2)):(salesDetailsSection['style'][_0x140cac(0x118)]=_0x140cac(0x121),this[_0x140cac(0x127)]=_0x140cac(0x8e));});const themeToggle=document[_0x58a0d4(0x119)](_0x58a0d4(0xb9)),root=document['documentElement'];let isDarkTheme=!![];function setTheme(_0x335cb2){const _0x19dbcf=_0x58a0d4;_0x335cb2?(root[_0x19dbcf(0x128)][_0x19dbcf(0x10f)](_0x19dbcf(0xb7)),themeToggle[_0x19dbcf(0x127)]='🌙',themeToggle[_0x19dbcf(0x9a)](_0x19dbcf(0xef),_0x19dbcf(0xf5))):(root['classList']['add'](_0x19dbcf(0xb7)),themeToggle[_0x19dbcf(0x127)]='☀️',themeToggle[_0x19dbcf(0x9a)](_0x19dbcf(0xef),'Activer\x20le\x20mode\x20sombre')),isDarkTheme=_0x335cb2,localStorage[_0x19dbcf(0x123)](_0x19dbcf(0xcf),_0x335cb2);}themeToggle['addEventListener']('click',()=>{setTheme(!isDarkTheme);}),document[_0x58a0d4(0x116)]('DOMContentLoaded',()=>{const _0x38d44b=_0x58a0d4,_0x229276=localStorage[_0x38d44b(0xff)]('darkTheme');_0x229276!==null?setTheme(_0x229276===_0x38d44b(0xaf)):setTheme(![]);}),document['getElementById']('filterStockDates')[_0x58a0d4(0x116)](_0x58a0d4(0xe8),function(){const _0x51c84d=_0x58a0d4,_0x30ecd1=new Date(document[_0x51c84d(0x119)]('stockStartDate')[_0x51c84d(0x95)]),_0x375afc=new Date(document[_0x51c84d(0x119)]('stockEndDate')[_0x51c84d(0x95)]);updateStockTables(_0x30ecd1,_0x375afc);}),document['getElementById'](_0x58a0d4(0xa6))[_0x58a0d4(0x116)](_0x58a0d4(0xe8),function(){const _0x6ea458=_0x58a0d4,_0x5526d3=new Date(document[_0x6ea458(0x119)](_0x6ea458(0x113))[_0x6ea458(0x95)]),_0x1803c3=new Date(document['getElementById'](_0x6ea458(0x111))[_0x6ea458(0x95)]),_0x1f7d15=salesData[_0x6ea458(0xaa)](_0xe48845=>{const _0x13ab31=_0x6ea458,_0x366f12=new Date(_0xe48845[_0x13ab31(0xe3)]);return(!_0x5526d3||_0x366f12>=_0x5526d3)&&(!_0x1803c3||_0x366f12<=_0x1803c3);});renderTable(_0x1f7d15),updateAnalysis(_0x1f7d15);});function updateStockTables(_0x1ed6b1,_0x49a7d9){const _0x3b7ab8=_0x58a0d4,_0x455054=document['getElementById']('stockTableGlobal');_0x455054[_0x3b7ab8(0x89)](_0x3b7ab8(0xc8))[_0x3b7ab8(0x81)]='',database['ref'](_0x3b7ab8(0xb1)+currentUser)[_0x3b7ab8(0x87)](_0x3b7ab8(0x95))[_0x3b7ab8(0xdf)](_0x339044=>{const _0x50ec5c=_0x3b7ab8,_0x34ef0a={};_0x339044[_0x50ec5c(0xe0)](_0xfe9903=>{const _0x3d734c=_0x50ec5c,_0x1b5117=_0xfe9903[_0x3d734c(0x101)](),_0x510d62=new Date(_0x1b5117[_0x3d734c(0xe3)]);(!_0x1ed6b1||_0x510d62>=_0x1ed6b1)&&(!_0x49a7d9||_0x510d62<=_0x49a7d9)&&((!_0x34ef0a[_0x1b5117[_0x3d734c(0xc7)]]||_0x510d62>new Date(_0x34ef0a[_0x1b5117[_0x3d734c(0xc7)]][_0x3d734c(0xe3)]))&&(_0x34ef0a[_0x1b5117['product']]=_0x1b5117));}),Object['values'](_0x34ef0a)[_0x50ec5c(0xe0)](_0x1f092c=>{const _0x2b97a3=_0x50ec5c,_0x1b4044=_0x455054[_0x2b97a3(0x89)](_0x2b97a3(0xc8))['insertRow']();_0x1b4044[_0x2b97a3(0x8d)](0x0)['textContent']=_0x1f092c[_0x2b97a3(0xc7)],_0x1b4044[_0x2b97a3(0x8d)](0x1)[_0x2b97a3(0x127)]=_0x1f092c['SF'],_0x1b4044[_0x2b97a3(0x8d)](0x2)['textContent']=new Date(_0x1f092c[_0x2b97a3(0xe3)])['toLocaleString']();}),setupSort(_0x455054);});}function showSubscriptionRequiredModal(){const _0x4d98d1=_0x58a0d4;document[_0x4d98d1(0x119)](_0x4d98d1(0xf4))['style']['display']=_0x4d98d1(0xce);}function hideSubscriptionRequiredModal(){const _0x438185=_0x58a0d4;document[_0x438185(0x119)](_0x438185(0xf4))[_0x438185(0x92)]['display']=_0x438185(0x121);}function redirectToSubscription(){const _0x59678d=_0x58a0d4;window[_0x59678d(0xbe)][_0x59678d(0x97)]='index.html';}async function checkSubscriptionStatus(){const _0x459ec6=_0x58a0d4;try{const _0x5696d2=await adminRef[_0x459ec6(0x87)](_0x459ec6(0x95)),_0x206e89=_0x5696d2[_0x459ec6(0x101)](),_0x47e7c8=new Date();if(_0x206e89&&_0x206e89[_0x459ec6(0xa0)]===_0x459ec6(0xb6)){const _0x2fed4c=new Date(_0x206e89[_0x459ec6(0x11b)]);return _0x2fed4c>=_0x47e7c8?!![]:(await adminRef[_0x459ec6(0x126)]({'status':_0x459ec6(0x86)}),![]);}else return![];}catch(_0x470c3d){console[_0x459ec6(0xd5)](_0x459ec6(0x11a),_0x470c3d);throw _0x470c3d;}}updateTable(),updateStockTables(),analysisSection[_0x58a0d4(0x92)][_0x58a0d4(0x118)]=_0x58a0d4(0x121),salesDetailsSection[_0x58a0d4(0x92)][_0x58a0d4(0x118)]=_0x58a0d4(0x121),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x58a0d4(0xff)](_0x58a0d4(0xcf));savedTheme!==null&&setTheme(savedTheme==='true');