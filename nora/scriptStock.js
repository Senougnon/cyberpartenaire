const _0x2313d9=_0x5168;(function(_0x852941,_0x198210){const _0x1b8329=_0x5168,_0x4df954=_0x852941();while(!![]){try{const _0x14322c=parseInt(_0x1b8329(0x1bf))/0x1+-parseInt(_0x1b8329(0x19c))/0x2+parseInt(_0x1b8329(0x1bb))/0x3+parseInt(_0x1b8329(0x1e5))/0x4+parseInt(_0x1b8329(0x1e7))/0x5+parseInt(_0x1b8329(0x16a))/0x6+parseInt(_0x1b8329(0x1c5))/0x7*(-parseInt(_0x1b8329(0x14b))/0x8);if(_0x14322c===_0x198210)break;else _0x4df954['push'](_0x4df954['shift']());}catch(_0x55df9d){_0x4df954['push'](_0x4df954['shift']());}}}(_0x3367,0x9ff4d));const firebaseConfig={'apiKey':_0x2313d9(0x1d3),'authDomain':'nora-wifi-zone.firebaseapp.com','databaseURL':_0x2313d9(0x15e),'projectId':_0x2313d9(0x192),'storageBucket':_0x2313d9(0x155),'messagingSenderId':_0x2313d9(0x159),'appId':_0x2313d9(0x1b2),'measurementId':_0x2313d9(0x1a9)};firebase[_0x2313d9(0x1f2)](firebaseConfig);const database=firebase[_0x2313d9(0x1b9)](),adminRef=database['ref']('admin/subscription'),loginForm=document['getElementById'](_0x2313d9(0x1c8)),signupForm=document[_0x2313d9(0x15b)](_0x2313d9(0x198)),loginContainer=document[_0x2313d9(0x15b)](_0x2313d9(0x19a)),signupContainer=document['getElementById']('signupContainer'),dashboardContainer=document[_0x2313d9(0x15b)](_0x2313d9(0x165)),salesForm=document[_0x2313d9(0x15b)](_0x2313d9(0x179)),salesTable=document['getElementById']('salesTable'),totalSalesElement=document[_0x2313d9(0x15b)]('totalSales'),averageSalesElement=document[_0x2313d9(0x15b)](_0x2313d9(0x1cc)),userInfoElement=document[_0x2313d9(0x15b)](_0x2313d9(0x1a3)),toggleAnalysisButton=document[_0x2313d9(0x15b)](_0x2313d9(0x1c9)),toggleSalesButton=document[_0x2313d9(0x15b)](_0x2313d9(0x197)),analysisSection=document['getElementById'](_0x2313d9(0x173)),salesDetailsSection=document['getElementById'](_0x2313d9(0x188)),signupButton=document[_0x2313d9(0x15b)](_0x2313d9(0x17f)),loginFromSignup=document[_0x2313d9(0x15b)](_0x2313d9(0x17a)),productSelect=document[_0x2313d9(0x15b)](_0x2313d9(0x161)),stockTableGlobal=document[_0x2313d9(0x15b)](_0x2313d9(0x174));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x2313d9(0x15b)](_0x2313d9(0x195))[_0x2313d9(0x1dd)]=new Date()[_0x2313d9(0x16d)]()[_0x2313d9(0x15a)](0x0,0x10);function fetchTicketCategories(){const _0x21a1f5=_0x2313d9;database[_0x21a1f5(0x14c)](_0x21a1f5(0x160))[_0x21a1f5(0x1e0)](_0x21a1f5(0x1dd))['then'](_0x16d24f=>{const _0x11fde1=_0x21a1f5;ticketCategories=_0x16d24f[_0x11fde1(0x1eb)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x80d788=_0x2313d9;productSelect['innerHTML']='<option\x20value=\x22\x22>Sélectionner\x20un\x20produit</option>';for(const _0x476748 in ticketCategories){const _0x2b5874=ticketCategories[_0x476748][_0x80d788(0x1a4)][0x0],_0x4bcc3=document[_0x80d788(0x1e8)](_0x80d788(0x1b6));_0x4bcc3[_0x80d788(0x1dd)]=_0x476748,_0x4bcc3[_0x80d788(0x1df)]=_0x476748+'\x20('+_0x2b5874+'\x20FCFA)',productSelect[_0x80d788(0x1c4)](_0x4bcc3);}}fetchTicketCategories(),loginForm[_0x2313d9(0x1b4)](_0x2313d9(0x16c),function(_0x6e3a1e){const _0x321371=_0x2313d9;_0x6e3a1e[_0x321371(0x1a0)]();const _0x42c4b9=document[_0x321371(0x15b)](_0x321371(0x152))[_0x321371(0x1dd)],_0x3ab3d6=document[_0x321371(0x15b)](_0x321371(0x1b8))[_0x321371(0x1dd)];database[_0x321371(0x14c)](_0x321371(0x1cf)+_0x42c4b9)['once'](_0x321371(0x1dd))[_0x321371(0x1cb)](_0x3e2d3e=>{const _0x48af6d=_0x321371;_0x3e2d3e['exists']()?_0x3e2d3e[_0x48af6d(0x1eb)]()[_0x48af6d(0x1b8)]===_0x3ab3d6?loginSuccess(_0x42c4b9):alert(_0x48af6d(0x1ee)):alert(_0x48af6d(0x181));});}),signupForm[_0x2313d9(0x1b4)](_0x2313d9(0x16c),function(_0x387483){const _0xb109d4=_0x2313d9;_0x387483[_0xb109d4(0x1a0)]();const _0x92400d=document[_0xb109d4(0x15b)](_0xb109d4(0x153))[_0xb109d4(0x1dd)],_0x363f74=document['getElementById'](_0xb109d4(0x1d5))[_0xb109d4(0x1dd)];database[_0xb109d4(0x14c)](_0xb109d4(0x1cf)+_0x92400d)['once'](_0xb109d4(0x1dd))[_0xb109d4(0x1cb)](_0x52e1b7=>{const _0x1193c2=_0xb109d4;_0x52e1b7['exists']()?alert(_0x1193c2(0x14e)):database[_0x1193c2(0x14c)](_0x1193c2(0x1cf)+_0x92400d)[_0x1193c2(0x1b1)]({'password':_0x363f74})['then'](()=>{const _0x5112b8=_0x1193c2;alert('Inscription\x20réussie\x20!\x20Connectez-vous.'),signupContainer[_0x5112b8(0x1a7)][_0x5112b8(0x1d8)]=_0x5112b8(0x16b),loginContainer[_0x5112b8(0x1a7)][_0x5112b8(0x1d8)]=_0x5112b8(0x180);})[_0x1193c2(0x18f)](_0x2b58e4=>{const _0x428c45=_0x1193c2;console[_0x428c45(0x1ce)](_0x428c45(0x15d),_0x2b58e4),alert(_0x428c45(0x18c));});});}),signupButton[_0x2313d9(0x1b4)](_0x2313d9(0x1db),function(){const _0x31847a=_0x2313d9;loginContainer[_0x31847a(0x1a7)][_0x31847a(0x1d8)]=_0x31847a(0x16b),signupContainer[_0x31847a(0x1a7)][_0x31847a(0x1d8)]=_0x31847a(0x180);}),loginFromSignup['addEventListener']('click',function(){const _0x2e0962=_0x2313d9;signupContainer[_0x2e0962(0x1a7)][_0x2e0962(0x1d8)]=_0x2e0962(0x16b),loginContainer[_0x2e0962(0x1a7)]['display']=_0x2e0962(0x180);});function loginSuccess(_0x1eea4a){const _0x3d9254=_0x2313d9;currentUser=_0x1eea4a,loginContainer[_0x3d9254(0x1a7)]['display']=_0x3d9254(0x16b),signupContainer[_0x3d9254(0x1a7)][_0x3d9254(0x1d8)]=_0x3d9254(0x16b),dashboardContainer[_0x3d9254(0x1a7)][_0x3d9254(0x1d8)]='block',userInfoElement['textContent']=_0x3d9254(0x158)+_0x1eea4a,checkSubscriptionStatus()[_0x3d9254(0x1cb)](_0x25a379=>{_0x25a379?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x3d9254(0x18f)](_0x4208a9=>{const _0x21466e=_0x3d9254;console['error'](_0x21466e(0x1c0),_0x4208a9),alert(_0x21466e(0x1a2));});}function listenForSalesDataChanges(){const _0x1aebe4=_0x2313d9;salesDataListener=database[_0x1aebe4(0x14c)](_0x1aebe4(0x163)+currentUser)['on'](_0x1aebe4(0x1dd),_0x559f32=>{const _0x13bbcc=_0x1aebe4;salesData=[],_0x559f32[_0x13bbcc(0x178)](_0x5d12f3=>{const _0x44235c=_0x13bbcc,_0x4f4d3f=_0x5d12f3[_0x44235c(0x1eb)]();_0x4f4d3f[_0x44235c(0x17e)]=_0x5d12f3['key'],_0x4f4d3f[_0x44235c(0x156)]=(_0x4f4d3f['V']*_0x4f4d3f['PV'])[_0x44235c(0x187)](0x2),salesData[_0x44235c(0x1b3)](_0x4f4d3f);}),analysisSection[_0x13bbcc(0x1a7)][_0x13bbcc(0x1d8)]==='block'&&updateAnalysis(salesData);});}document['getElementById'](_0x2313d9(0x161))[_0x2313d9(0x1b4)](_0x2313d9(0x19b),function(){const _0x1fac9f=_0x2313d9,_0x4264a5=this[_0x1fac9f(0x1dd)];database[_0x1fac9f(0x14c)]('sales/'+currentUser)[_0x1fac9f(0x1a5)](_0x1fac9f(0x161))['equalTo'](_0x4264a5)[_0x1fac9f(0x176)](0x1)[_0x1fac9f(0x1e0)](_0x1fac9f(0x1dd))[_0x1fac9f(0x1cb)](_0x4a8f34=>{const _0x42bcc6=_0x1fac9f;if(_0x4a8f34[_0x42bcc6(0x1f0)]()){const _0x392ef0=Object[_0x42bcc6(0x1bc)](_0x4a8f34[_0x42bcc6(0x1eb)]())[0x0];document['getElementById']('SI')[_0x42bcc6(0x1dd)]=_0x392ef0['SF']||0x0;}else document[_0x42bcc6(0x15b)]('SI')[_0x42bcc6(0x1dd)]=0x0;}),updatePV();}),document[_0x2313d9(0x15b)]('V')['addEventListener'](_0x2313d9(0x19d),updateSF),document['getElementById'](_0x2313d9(0x1d7))[_0x2313d9(0x1b4)](_0x2313d9(0x19d),updateSF);function _0x3367(){const _0x5de120=['filter','then','averageSales','labels','error','users/','prices','tbody\x20tr','endAt','AIzaSyAtObOTrkcnp2rZG9woqmKdqOK8zYAfxck','getContext','signupPassword','DOMContentLoaded','APP','display','onclick','resolve','click','light-theme','value','length','textContent','once','div','#searchInputs\x20input','dataset','confirmDelete','3413976oebNPE','filterStockDates','3429350XuVths','createElement','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée\x20:','sort','val','Ventes','Activer\x20le\x20mode\x20sombre','Mot\x20de\x20passe\x20incorrect','salesEndDate','exists','salesChart','initializeApp','flex','className','9443824aIwcxe','ref','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','Ce\x20nom\x20d\x27utilisateur\x20est\x20déjà\x20utilisé.','toLocaleString','darkTheme','href','username','signupUsername','stopPropagation','nora-wifi-zone.firebasestorage.app','total','threeMonth','Utilisateur:\x20','273027756522','slice','getElementById','salesTable','Error\x20creating\x20user:','https://nora-wifi-zone-default-rtdb.firebaseio.com','setItem','TicketsTotal','product','endDate','sales/','Analyse\x20des\x20ventes','dashboardContainer','Détail\x20des\x20ventes','index.html','toString','update','3443874fgcvjf','none','submit','toISOString','sales','utils','theme-toggle','insertCell','Activer\x20le\x20mode\x20clair','analysisSection','stockTableGlobal','aria-label','limitToLast','th[data-sort]','forEach','salesForm','loginFromSignup','subscriptionRequiredModal','confirm-dialog','toUpperCase','key','signupButton','block','Utilisateur\x20introuvable','book_append_sheet','\x20FCFA','insertRow','getItem','stockStartDate','toFixed','salesDetailsSection','Total\x20des\x20ventes:\x20','AverageSales','table_to_sheet','Erreur\x20lors\x20de\x20la\x20création\x20du\x20compte','body','every','catch','keys','cancelDelete','nora-wifi-zone','querySelectorAll','tbody','dateTime','charAt','toggleSalesButton','signupForm','querySelector','loginContainer','change','2021294sNZegS','input','destroy','active','preventDefault','classList','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.','userInfo','prix','orderByChild','true','style','TotalSales','G-ME2G62WHLL','rgb(255,\x2099,\x20132)','remove','rgba(255,\x20255,\x20255,\x200.1)','week','writeFile','span','reset','set','1:273027756522:web:653a46a1b21e382e8c8293','push','addEventListener','reduce','option','innerHTML','password','database','filterSalesDates','358737xRijjA','values','status','documentElement','613384vOdieF','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','setAttribute','removeChild','ventes_wifi_zone.xlsx','appendChild','7IZnQbo','getTime','rgb(0,\x20255,\x20255)','loginForm','toggleAnalysisButton'];_0x3367=function(){return _0x5de120;};return _0x3367();}function updateSF(){const _0x5eb23f=_0x2313d9,_0x49692f=parseInt(document[_0x5eb23f(0x15b)]('SI')[_0x5eb23f(0x1dd)])||0x0,_0x26e478=parseInt(document[_0x5eb23f(0x15b)](_0x5eb23f(0x1d7))['value'])||0x0,_0x48028b=parseInt(document[_0x5eb23f(0x15b)]('V')[_0x5eb23f(0x1dd)])||0x0;document[_0x5eb23f(0x15b)]('SF')['value']=_0x49692f+_0x26e478-_0x48028b;}function updatePV(){const _0x1e29c0=_0x2313d9,_0x2d4110=document[_0x1e29c0(0x15b)](_0x1e29c0(0x161))['value'],_0x1c8ecf=ticketCategories[_0x2d4110]?.[_0x1e29c0(0x1a4)][0x0];document[_0x1e29c0(0x15b)]('PV')[_0x1e29c0(0x1dd)]=_0x1c8ecf||0x0;}salesForm[_0x2313d9(0x1b4)](_0x2313d9(0x16c),function(_0x32061d){const _0x3b8f65=_0x2313d9;_0x32061d[_0x3b8f65(0x1a0)]();const _0x2613bf={'dateTime':document[_0x3b8f65(0x15b)](_0x3b8f65(0x195))['value'],'product':document[_0x3b8f65(0x15b)](_0x3b8f65(0x161))[_0x3b8f65(0x1dd)],'SI':parseInt(document[_0x3b8f65(0x15b)]('SI')[_0x3b8f65(0x1dd)])||0x0,'APP':parseInt(document[_0x3b8f65(0x15b)](_0x3b8f65(0x1d7))['value'])||0x0,'V':parseInt(document[_0x3b8f65(0x15b)]('V')['value'])||0x0,'SF':parseInt(document[_0x3b8f65(0x15b)]('SF')['value'])||0x0,'PV':parseFloat(document[_0x3b8f65(0x15b)]('PV')[_0x3b8f65(0x1dd)])||0x0};database['ref'](_0x3b8f65(0x163)+currentUser)[_0x3b8f65(0x1b3)](_0x2613bf)[_0x3b8f65(0x1cb)](()=>{const _0x308b70=_0x3b8f65;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x308b70(0x1b0)](),document[_0x308b70(0x15b)](_0x308b70(0x195))[_0x308b70(0x1dd)]=new Date()['toISOString']()[_0x308b70(0x15a)](0x0,0x10);})[_0x3b8f65(0x18f)](_0x6d65f9=>{const _0x1f495e=_0x3b8f65;console['error'](_0x1f495e(0x1e9),_0x6d65f9),alert('Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée.');});});function _0x5168(_0x1659ef,_0x4e2d2f){const _0x3367a4=_0x3367();return _0x5168=function(_0x51683a,_0x4b12b5){_0x51683a=_0x51683a-0x14b;let _0x4d9d55=_0x3367a4[_0x51683a];return _0x4d9d55;},_0x5168(_0x1659ef,_0x4e2d2f);}function updateTable(){const _0x2ed866=_0x2313d9,_0x53dad5=salesTable[_0x2ed866(0x199)](_0x2ed866(0x194));_0x53dad5[_0x2ed866(0x1b7)]='',database['ref']('sales/'+currentUser)[_0x2ed866(0x1e0)](_0x2ed866(0x1dd))[_0x2ed866(0x1cb)](_0x1bd7cc=>{const _0x266dea=_0x2ed866;salesData=[],_0x1bd7cc[_0x266dea(0x178)](_0x3ecbea=>{const _0x5a012d=_0x266dea,_0x849e27=_0x3ecbea['val']();_0x849e27[_0x5a012d(0x156)]=(_0x849e27['V']*_0x849e27['PV'])[_0x5a012d(0x187)](0x2),salesData['push'](_0x849e27);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x7dafb9=_0x2313d9,_0x98f3e4=document['getElementById']('stockTableGlobal');_0x98f3e4[_0x7dafb9(0x199)](_0x7dafb9(0x194))[_0x7dafb9(0x1b7)]='',database[_0x7dafb9(0x14c)](_0x7dafb9(0x163)+currentUser)[_0x7dafb9(0x1e0)](_0x7dafb9(0x1dd))['then'](_0x1c5346=>{const _0x5ec45c=_0x7dafb9,_0x7d3a23={};_0x1c5346[_0x5ec45c(0x178)](_0x5a05c2=>{const _0xe1565a=_0x5ec45c,_0x3812a1=_0x5a05c2[_0xe1565a(0x1eb)]();(!_0x7d3a23[_0x3812a1[_0xe1565a(0x161)]]||new Date(_0x3812a1[_0xe1565a(0x195)])>new Date(_0x7d3a23[_0x3812a1[_0xe1565a(0x161)]]['dateTime']))&&(_0x7d3a23[_0x3812a1[_0xe1565a(0x161)]]=_0x3812a1);}),Object[_0x5ec45c(0x1bc)](_0x7d3a23)['forEach'](_0xef51e4=>{const _0x7157c3=_0x5ec45c,_0x759608=_0x98f3e4[_0x7157c3(0x199)](_0x7157c3(0x194))['insertRow']();_0x759608['insertCell'](0x0)[_0x7157c3(0x1df)]=_0xef51e4[_0x7157c3(0x161)],_0x759608['insertCell'](0x1)[_0x7157c3(0x1df)]=_0xef51e4['SF'],_0x759608['insertCell'](0x2)[_0x7157c3(0x1df)]=new Date(_0xef51e4[_0x7157c3(0x195)])[_0x7157c3(0x14f)]();}),setupSort(_0x98f3e4);});}function exportToExcel(){const _0xd5115a=_0x2313d9,_0x137b56=XLSX[_0xd5115a(0x16f)]['book_new'](),_0x5cd87a=XLSX[_0xd5115a(0x16f)][_0xd5115a(0x18b)](document[_0xd5115a(0x15b)](_0xd5115a(0x15c)));XLSX[_0xd5115a(0x16f)][_0xd5115a(0x182)](_0x137b56,_0x5cd87a,_0xd5115a(0x1ec)),XLSX[_0xd5115a(0x1ae)](_0x137b56,_0xd5115a(0x1c3));}document[_0x2313d9(0x15b)]('exportExcel')[_0x2313d9(0x1b4)](_0x2313d9(0x1db),exportToExcel);function deleteEntry(_0x41cdbb){const _0x5c0694=_0x2313d9;database[_0x5c0694(0x14c)](_0x5c0694(0x163)+currentUser+'/'+_0x41cdbb)[_0x5c0694(0x1e0)](_0x5c0694(0x1dd))[_0x5c0694(0x1cb)](_0x5c720f=>{const _0x2e6bf5=_0x5c0694,_0x3d2897=_0x5c720f['val']();return database[_0x2e6bf5(0x14c)](_0x2e6bf5(0x163)+currentUser+'/'+_0x41cdbb)[_0x2e6bf5(0x1ab)]()[_0x2e6bf5(0x1cb)](()=>{return console['log']('Entrée\x20supprimée\x20avec\x20succès'),updateStockAfterDeletion(_0x3d2897);});})[_0x5c0694(0x1cb)](()=>{return updateTable();})['then'](()=>{updateStockTables(),updateAnalysis();})[_0x5c0694(0x18f)](_0x5c91ad=>{console['error']('Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrée:',_0x5c91ad);});}function updateStockAfterDeletion(_0x39b3bd){const _0x1317b9=_0x2313d9;return database['ref'](_0x1317b9(0x163)+currentUser)[_0x1317b9(0x1a5)]('dateTime')[_0x1317b9(0x1d2)](_0x39b3bd['dateTime'])[_0x1317b9(0x176)](0x2)[_0x1317b9(0x1e0)](_0x1317b9(0x1dd))[_0x1317b9(0x1cb)](_0x2203fa=>{const _0x8a587e=_0x1317b9;let _0x363426=[];_0x2203fa['forEach'](_0x2c960d=>{const _0x308da4=_0x5168;_0x363426['push']({'key':_0x2c960d[_0x308da4(0x17e)],..._0x2c960d[_0x308da4(0x1eb)]()});}),_0x363426[_0x8a587e(0x1ea)]((_0x4b6fd9,_0x23a20e)=>new Date(_0x23a20e[_0x8a587e(0x195)])-new Date(_0x4b6fd9[_0x8a587e(0x195)]));if(_0x363426[_0x8a587e(0x1de)]>0x1&&_0x363426[0x0][_0x8a587e(0x17e)]!==_0x39b3bd['key']){const _0x5a60ef=_0x363426[0x1],_0x55b252=_0x5a60ef['SF']+_0x39b3bd['V']-_0x39b3bd[_0x8a587e(0x1d7)];return database[_0x8a587e(0x14c)](_0x8a587e(0x163)+currentUser+'/'+_0x5a60ef[_0x8a587e(0x17e)])[_0x8a587e(0x169)]({'SF':_0x55b252});}return Promise[_0x8a587e(0x1da)]();});}function updateTable(){const _0x5cb818=_0x2313d9;return database[_0x5cb818(0x14c)](_0x5cb818(0x163)+currentUser)['once'](_0x5cb818(0x1dd))[_0x5cb818(0x1cb)](_0x43f863=>{salesData=[],_0x43f863['forEach'](_0x3aa283=>{const _0xb5e231=_0x5168,_0x250423=_0x3aa283[_0xb5e231(0x1eb)]();_0x250423['key']=_0x3aa283[_0xb5e231(0x17e)],_0x250423['total']=(_0x250423['V']*_0x250423['PV'])['toFixed'](0x2),salesData['push'](_0x250423);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x5c9bd9){const _0x2eb272=_0x2313d9,_0x4eacdc=salesTable[_0x2eb272(0x199)](_0x2eb272(0x194));_0x4eacdc['innerHTML']='',_0x5c9bd9['forEach'](_0x419190=>{const _0x379238=_0x2eb272,_0x20058f=_0x4eacdc[_0x379238(0x184)]();_0x20058f[_0x379238(0x1e3)][_0x379238(0x17e)]=_0x419190['key'],_0x20058f[_0x379238(0x171)](0x0)['textContent']=new Date(_0x419190[_0x379238(0x195)])[_0x379238(0x14f)](),_0x20058f['insertCell'](0x1)[_0x379238(0x1df)]=_0x419190['product'],_0x20058f[_0x379238(0x171)](0x2)[_0x379238(0x1df)]=_0x419190['SI'],_0x20058f['insertCell'](0x3)['textContent']=_0x419190['APP'],_0x20058f[_0x379238(0x171)](0x4)[_0x379238(0x1df)]=_0x419190['V'],_0x20058f[_0x379238(0x171)](0x5)[_0x379238(0x1df)]=_0x419190['SF'],_0x20058f[_0x379238(0x171)](0x6)[_0x379238(0x1df)]=_0x419190['PV'],_0x20058f[_0x379238(0x171)](0x7)['textContent']=_0x419190[_0x379238(0x156)];}),addDeleteIcons();}function addDeleteIcons(){const _0x35178f=_0x2313d9,_0x4edf5d=salesTable['querySelectorAll'](_0x35178f(0x1d1));_0x4edf5d[_0x35178f(0x178)](_0x4b5a6e=>{const _0x104a19=_0x35178f,_0x385a8a=document[_0x104a19(0x1e8)](_0x104a19(0x1af));_0x385a8a[_0x104a19(0x1b7)]='✖',_0x385a8a[_0x104a19(0x1f4)]='delete-icon',_0x385a8a['onclick']=_0x2b5a01=>{const _0x3c9935=_0x104a19;_0x2b5a01[_0x3c9935(0x154)](),showConfirmDialog(_0x4b5a6e[_0x3c9935(0x1e3)][_0x3c9935(0x17e)]);},_0x4b5a6e['querySelector']('td:first-child')[_0x104a19(0x1c4)](_0x385a8a);});}function showConfirmDialog(_0xce0f55){const _0x2ade08=_0x2313d9,_0x7e43b5=document[_0x2ade08(0x1e8)](_0x2ade08(0x1e1));_0x7e43b5[_0x2ade08(0x1f4)]=_0x2ade08(0x17c),_0x7e43b5[_0x2ade08(0x1b7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20entrée\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20',document['body'][_0x2ade08(0x1c4)](_0x7e43b5),document[_0x2ade08(0x15b)](_0x2ade08(0x1e4))['onclick']=()=>{const _0x5c099d=_0x2ade08;deleteEntry(_0xce0f55),document[_0x5c099d(0x18d)]['removeChild'](_0x7e43b5);},document[_0x2ade08(0x15b)](_0x2ade08(0x191))[_0x2ade08(0x1d9)]=()=>{const _0x1ced43=_0x2ade08;document[_0x1ced43(0x18d)][_0x1ced43(0x1c2)](_0x7e43b5);};}function setupSearch(){const _0x216a95=_0x2313d9,_0x41badf=document[_0x216a95(0x193)](_0x216a95(0x1e2));_0x41badf['forEach'](_0x5d4e45=>{const _0x5c9ee9=_0x216a95;_0x5d4e45[_0x5c9ee9(0x1b4)](_0x5c9ee9(0x19d),()=>{const _0x1bcc1d=_0x5c9ee9,_0x40a98e=salesData[_0x1bcc1d(0x1ca)](_0x20e48e=>{const _0x37e2b4=_0x1bcc1d;return Object[_0x37e2b4(0x190)](_0x20e48e)[_0x37e2b4(0x18e)](_0x4575b6=>{const _0x297e1c=_0x37e2b4,_0x475f8a=document['getElementById']('search'+(_0x4575b6[_0x297e1c(0x196)](0x0)[_0x297e1c(0x17d)]()+_0x4575b6[_0x297e1c(0x15a)](0x1)))?.['value']['toLowerCase']()||'';return _0x20e48e[_0x4575b6][_0x297e1c(0x168)]()['toLowerCase']()['includes'](_0x475f8a);});});renderTable(_0x40a98e),updateAnalysis(_0x40a98e);});});}function setupSort(_0x40d443){const _0x2438fa=_0x2313d9,_0x2685e8=_0x40d443[_0x2438fa(0x193)](_0x2438fa(0x177));_0x2685e8[_0x2438fa(0x178)](_0x5cac9c=>{const _0x15ce3c=_0x2438fa;_0x5cac9c['addEventListener'](_0x15ce3c(0x1db),()=>{const _0x49b248=_0x15ce3c,_0x24329c=_0x5cac9c[_0x49b248(0x1e3)][_0x49b248(0x1ea)],_0xfd3b5b=_0x40d443['id']==='salesTable'?salesData:stockData;_0xfd3b5b['sort']((_0x412d79,_0x40c417)=>{if(_0x412d79[_0x24329c]<_0x40c417[_0x24329c])return-0x1;if(_0x412d79[_0x24329c]>_0x40c417[_0x24329c])return 0x1;return 0x0;}),_0x40d443['id']===_0x49b248(0x15c)?(renderTable(_0xfd3b5b),updateAnalysis(_0xfd3b5b)):renderStockTable(_0xfd3b5b,_0x40d443);});});}function renderStockTable(_0x195bb4,_0x1573bd){const _0x492b53=_0x2313d9,_0x125772=_0x1573bd[_0x492b53(0x199)](_0x492b53(0x194));_0x125772[_0x492b53(0x1b7)]='',_0x195bb4[_0x492b53(0x178)](_0x618f35=>{const _0xd67c8=_0x492b53,_0x2374b8=_0x125772[_0xd67c8(0x184)]();_0x2374b8[_0xd67c8(0x171)](0x0)[_0xd67c8(0x1df)]=_0x618f35[_0xd67c8(0x161)],_0x2374b8[_0xd67c8(0x171)](0x1)[_0xd67c8(0x1df)]=_0x618f35['SF'],_0x2374b8[_0xd67c8(0x171)](0x2)['textContent']=new Date(_0x618f35[_0xd67c8(0x195)])[_0xd67c8(0x14f)]();});}function updateAnalysis(_0x20cc77=salesData){const _0xd11b1a=_0x2313d9;let _0x1ffb32=0x0,_0x4f994b=0x0;const _0x24d36e={'labels':[],'sales':[],'prices':[]};_0x20cc77[_0xd11b1a(0x178)](_0x18d2c9=>{const _0x3fd91a=_0xd11b1a;_0x1ffb32+=_0x18d2c9['V']*_0x18d2c9['PV'],_0x4f994b++,_0x24d36e[_0x3fd91a(0x1cd)][_0x3fd91a(0x1b3)](new Date(_0x18d2c9['dateTime'])[_0x3fd91a(0x14f)]()),_0x24d36e[_0x3fd91a(0x16e)]['push'](_0x18d2c9['V']),_0x24d36e[_0x3fd91a(0x1d0)]['push'](_0x18d2c9['PV']);});const _0x1c20ee=_0x1ffb32/_0x4f994b||0x0;totalSalesElement[_0xd11b1a(0x1df)]=_0xd11b1a(0x189)+_0x1ffb32[_0xd11b1a(0x187)](0x2)+_0xd11b1a(0x183),averageSalesElement[_0xd11b1a(0x1df)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x1c20ee[_0xd11b1a(0x187)](0x2)+'\x20FCFA',updateChart(_0x24d36e),updatePeriodAnalysis(_0x20cc77);}function updateChart(_0x4b5e70){const _0xeeeec8=_0x2313d9,_0x5e40a3=document[_0xeeeec8(0x15b)](_0xeeeec8(0x1f1))[_0xeeeec8(0x1d4)]('2d');salesChart&&salesChart[_0xeeeec8(0x19e)](),salesChart=new Chart(_0x5e40a3,{'type':'line','data':{'labels':_0x4b5e70[_0xeeeec8(0x1cd)],'datasets':[{'label':_0xeeeec8(0x1ec),'data':_0x4b5e70[_0xeeeec8(0x16e)],'borderColor':'rgb(0,\x20255,\x20255)','tension':0.1},{'label':'Prix\x20de\x20vente','data':_0x4b5e70[_0xeeeec8(0x1d0)],'borderColor':_0xeeeec8(0x1aa),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':_0xeeeec8(0x1ac)},'ticks':{'color':_0xeeeec8(0x1c7)}},'x':{'grid':{'color':_0xeeeec8(0x1ac)},'ticks':{'color':_0xeeeec8(0x1c7)}}},'plugins':{'legend':{'labels':{'color':'rgb(0,\x20255,\x20255)'}}}}});}function updatePeriodAnalysis(_0x1e930f){const _0xa9c5a8=_0x2313d9,_0x33f111=new Date(),_0x11e2c6=new Date(_0x33f111[_0xa9c5a8(0x1c6)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x58e6a3=new Date(_0x33f111[_0xa9c5a8(0x1c6)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x109a3e=new Date(_0x33f111[_0xa9c5a8(0x1c6)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x29e4a2=_0x1e930f[_0xa9c5a8(0x1ca)](_0x4b07f1=>new Date(_0x4b07f1[_0xa9c5a8(0x195)])>=_0x11e2c6),_0x2449dc=_0x1e930f['filter'](_0x3b293e=>new Date(_0x3b293e[_0xa9c5a8(0x195)])>=_0x58e6a3),_0x2adef8=_0x1e930f['filter'](_0x2a72e3=>new Date(_0x2a72e3[_0xa9c5a8(0x195)])>=_0x109a3e);updatePeriodStats(_0x29e4a2,_0xa9c5a8(0x1ad)),updatePeriodStats(_0x2449dc,'month'),updatePeriodStats(_0x2adef8,_0xa9c5a8(0x157));}function updatePeriodStats(_0xafbc0f,_0x5c449b){const _0x324b57=_0x2313d9,_0x269c3b=_0xafbc0f[_0x324b57(0x1b5)]((_0x3415f6,_0x3396ed)=>_0x3415f6+_0x3396ed['V']*_0x3396ed['PV'],0x0),_0x3d5396=_0x269c3b/_0xafbc0f[_0x324b57(0x1de)]||0x0;document[_0x324b57(0x15b)](_0x5c449b+_0x324b57(0x1a8))['textContent']=_0x324b57(0x189)+_0x269c3b[_0x324b57(0x187)](0x2)+_0x324b57(0x183),document[_0x324b57(0x15b)](_0x5c449b+_0x324b57(0x18a))[_0x324b57(0x1df)]=_0x324b57(0x14d)+_0x3d5396[_0x324b57(0x187)](0x2)+'\x20FCFA';}toggleAnalysisButton['addEventListener'](_0x2313d9(0x1db),function(){const _0x247821=_0x2313d9;analysisSection[_0x247821(0x1a7)][_0x247821(0x1d8)]===_0x247821(0x16b)||analysisSection[_0x247821(0x1a7)][_0x247821(0x1d8)]===''?(analysisSection[_0x247821(0x1a7)][_0x247821(0x1d8)]='block',salesDetailsSection[_0x247821(0x1a7)][_0x247821(0x1d8)]=_0x247821(0x16b),this[_0x247821(0x1df)]='Masquer\x20l\x27analyse\x20des\x20ventes',toggleSalesButton[_0x247821(0x1df)]=_0x247821(0x166),updateAnalysis(salesData)):(analysisSection[_0x247821(0x1a7)][_0x247821(0x1d8)]=_0x247821(0x16b),this[_0x247821(0x1df)]=_0x247821(0x164));}),toggleSalesButton['addEventListener'](_0x2313d9(0x1db),function(){const _0x3870c4=_0x2313d9;salesDetailsSection[_0x3870c4(0x1a7)]['display']===_0x3870c4(0x16b)||salesDetailsSection[_0x3870c4(0x1a7)][_0x3870c4(0x1d8)]===''?(salesDetailsSection[_0x3870c4(0x1a7)][_0x3870c4(0x1d8)]=_0x3870c4(0x180),analysisSection[_0x3870c4(0x1a7)][_0x3870c4(0x1d8)]=_0x3870c4(0x16b),this[_0x3870c4(0x1df)]='Masquer\x20le\x20détail\x20des\x20ventes',toggleAnalysisButton[_0x3870c4(0x1df)]='Analyse\x20des\x20ventes'):(salesDetailsSection[_0x3870c4(0x1a7)][_0x3870c4(0x1d8)]=_0x3870c4(0x16b),this[_0x3870c4(0x1df)]='Détail\x20des\x20ventes');});const themeToggle=document[_0x2313d9(0x15b)](_0x2313d9(0x170)),root=document[_0x2313d9(0x1be)];let isDarkTheme=!![];function setTheme(_0xa34480){const _0x181c16=_0x2313d9;_0xa34480?(root[_0x181c16(0x1a1)][_0x181c16(0x1ab)](_0x181c16(0x1dc)),themeToggle[_0x181c16(0x1df)]='🌙',themeToggle[_0x181c16(0x1c1)](_0x181c16(0x175),_0x181c16(0x172))):(root[_0x181c16(0x1a1)]['add'](_0x181c16(0x1dc)),themeToggle['textContent']='☀️',themeToggle[_0x181c16(0x1c1)](_0x181c16(0x175),_0x181c16(0x1ed))),isDarkTheme=_0xa34480,localStorage[_0x181c16(0x15f)](_0x181c16(0x150),_0xa34480);}themeToggle[_0x2313d9(0x1b4)](_0x2313d9(0x1db),()=>{setTheme(!isDarkTheme);}),document[_0x2313d9(0x1b4)](_0x2313d9(0x1d6),()=>{const _0x1dc46a=_0x2313d9,_0x27d54a=localStorage[_0x1dc46a(0x185)](_0x1dc46a(0x150));_0x27d54a!==null?setTheme(_0x27d54a===_0x1dc46a(0x1a6)):setTheme(![]);}),document[_0x2313d9(0x15b)](_0x2313d9(0x1e6))['addEventListener'](_0x2313d9(0x1db),function(){const _0x46065a=_0x2313d9,_0x1c11b7=new Date(document[_0x46065a(0x15b)](_0x46065a(0x186))[_0x46065a(0x1dd)]),_0x510f42=new Date(document['getElementById']('stockEndDate')[_0x46065a(0x1dd)]);updateStockTables(_0x1c11b7,_0x510f42);}),document['getElementById'](_0x2313d9(0x1ba))['addEventListener']('click',function(){const _0x5a4b91=_0x2313d9,_0xc05ff6=new Date(document[_0x5a4b91(0x15b)]('salesStartDate')[_0x5a4b91(0x1dd)]),_0x500423=new Date(document[_0x5a4b91(0x15b)](_0x5a4b91(0x1ef))[_0x5a4b91(0x1dd)]),_0x314511=salesData['filter'](_0x316b5d=>{const _0x3ec581=_0x5a4b91,_0x271409=new Date(_0x316b5d[_0x3ec581(0x195)]);return(!_0xc05ff6||_0x271409>=_0xc05ff6)&&(!_0x500423||_0x271409<=_0x500423);});renderTable(_0x314511),updateAnalysis(_0x314511);});function updateStockTables(_0x5d79b5,_0x5de897){const _0x2f1c44=_0x2313d9,_0x5591e6=document[_0x2f1c44(0x15b)]('stockTableGlobal');_0x5591e6[_0x2f1c44(0x199)](_0x2f1c44(0x194))[_0x2f1c44(0x1b7)]='',database[_0x2f1c44(0x14c)](_0x2f1c44(0x163)+currentUser)[_0x2f1c44(0x1e0)]('value')['then'](_0x45a91f=>{const _0x46619b=_0x2f1c44,_0x22d87d={};_0x45a91f[_0x46619b(0x178)](_0x398930=>{const _0x371c56=_0x46619b,_0x406cdf=_0x398930[_0x371c56(0x1eb)](),_0x11fea5=new Date(_0x406cdf['dateTime']);(!_0x5d79b5||_0x11fea5>=_0x5d79b5)&&(!_0x5de897||_0x11fea5<=_0x5de897)&&((!_0x22d87d[_0x406cdf['product']]||_0x11fea5>new Date(_0x22d87d[_0x406cdf[_0x371c56(0x161)]][_0x371c56(0x195)]))&&(_0x22d87d[_0x406cdf[_0x371c56(0x161)]]=_0x406cdf));}),Object[_0x46619b(0x1bc)](_0x22d87d)['forEach'](_0x2baa4b=>{const _0x133836=_0x46619b,_0x59f36d=_0x5591e6[_0x133836(0x199)](_0x133836(0x194))[_0x133836(0x184)]();_0x59f36d[_0x133836(0x171)](0x0)[_0x133836(0x1df)]=_0x2baa4b['product'],_0x59f36d[_0x133836(0x171)](0x1)[_0x133836(0x1df)]=_0x2baa4b['SF'],_0x59f36d[_0x133836(0x171)](0x2)[_0x133836(0x1df)]=new Date(_0x2baa4b['dateTime'])[_0x133836(0x14f)]();}),setupSort(_0x5591e6);});}function showSubscriptionRequiredModal(){const _0x5a3847=_0x2313d9;document[_0x5a3847(0x15b)](_0x5a3847(0x17b))[_0x5a3847(0x1a7)][_0x5a3847(0x1d8)]=_0x5a3847(0x1f3);}function hideSubscriptionRequiredModal(){const _0x8a59af=_0x2313d9;document[_0x8a59af(0x15b)](_0x8a59af(0x17b))[_0x8a59af(0x1a7)]['display']=_0x8a59af(0x16b);}function redirectToSubscription(){const _0x509414=_0x2313d9;window['location'][_0x509414(0x151)]=_0x509414(0x167);}async function checkSubscriptionStatus(){const _0x46d36a=_0x2313d9;try{const _0x5a5180=await adminRef[_0x46d36a(0x1e0)](_0x46d36a(0x1dd)),_0x4e4864=_0x5a5180[_0x46d36a(0x1eb)](),_0x87512d=new Date();if(_0x4e4864&&_0x4e4864[_0x46d36a(0x1bd)]===_0x46d36a(0x19f)){const _0x27f945=new Date(_0x4e4864[_0x46d36a(0x162)]);return _0x27f945>=_0x87512d?!![]:(await adminRef[_0x46d36a(0x169)]({'status':'expired'}),![]);}else return![];}catch(_0x5c80f4){console[_0x46d36a(0x1ce)]('Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:',_0x5c80f4);throw _0x5c80f4;}}updateTable(),updateStockTables(),analysisSection[_0x2313d9(0x1a7)][_0x2313d9(0x1d8)]=_0x2313d9(0x16b),salesDetailsSection[_0x2313d9(0x1a7)][_0x2313d9(0x1d8)]=_0x2313d9(0x16b),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x2313d9(0x185)](_0x2313d9(0x150));savedTheme!==null&&setTheme(savedTheme==='true');