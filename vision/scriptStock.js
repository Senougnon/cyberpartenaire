const _0x339065=_0x3a85;(function(_0x1e83d1,_0x10e6d1){const _0x29035f=_0x3a85,_0x2e61b9=_0x1e83d1();while(!![]){try{const _0x222be0=-parseInt(_0x29035f(0x1c2))/0x1*(parseInt(_0x29035f(0x20c))/0x2)+-parseInt(_0x29035f(0x20f))/0x3*(parseInt(_0x29035f(0x1e8))/0x4)+-parseInt(_0x29035f(0x223))/0x5+-parseInt(_0x29035f(0x22e))/0x6+-parseInt(_0x29035f(0x1d8))/0x7*(-parseInt(_0x29035f(0x1fa))/0x8)+parseInt(_0x29035f(0x1b3))/0x9+-parseInt(_0x29035f(0x1b9))/0xa*(-parseInt(_0x29035f(0x229))/0xb);if(_0x222be0===_0x10e6d1)break;else _0x2e61b9['push'](_0x2e61b9['shift']());}catch(_0x908205){_0x2e61b9['push'](_0x2e61b9['shift']());}}}(_0x486d,0x1a407));const firebaseConfig={'apiKey':'AIzaSyBDfZjV-AT8CzI_tsgTh533ro_QGvW1AQU','authDomain':'visionwifi-d4fbf.firebaseapp.com','databaseURL':_0x339065(0x209),'projectId':_0x339065(0x233),'storageBucket':_0x339065(0x1fb),'messagingSenderId':_0x339065(0x1d4),'appId':'1:28800041919:web:b4d01fc60bd9af211c970a','measurementId':_0x339065(0x247)};firebase['initializeApp'](firebaseConfig);const database=firebase[_0x339065(0x1d9)](),adminRef=database['ref']('admin/subscription'),loginForm=document[_0x339065(0x20d)](_0x339065(0x231)),signupForm=document['getElementById'](_0x339065(0x1e9)),loginContainer=document[_0x339065(0x20d)](_0x339065(0x1f8)),signupContainer=document['getElementById'](_0x339065(0x1da)),dashboardContainer=document[_0x339065(0x20d)](_0x339065(0x22c)),salesForm=document['getElementById'](_0x339065(0x205)),salesTable=document[_0x339065(0x20d)](_0x339065(0x239)),totalSalesElement=document[_0x339065(0x20d)]('totalSales'),averageSalesElement=document[_0x339065(0x20d)](_0x339065(0x1df)),userInfoElement=document[_0x339065(0x20d)](_0x339065(0x1e3)),toggleAnalysisButton=document['getElementById'](_0x339065(0x1ca)),toggleSalesButton=document['getElementById'](_0x339065(0x214)),analysisSection=document[_0x339065(0x20d)](_0x339065(0x1bc)),salesDetailsSection=document['getElementById'](_0x339065(0x1cb)),signupButton=document[_0x339065(0x20d)](_0x339065(0x1ac)),loginFromSignup=document['getElementById']('loginFromSignup'),productSelect=document[_0x339065(0x20d)]('product'),stockTableGlobal=document[_0x339065(0x20d)](_0x339065(0x24a));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x339065(0x20d)](_0x339065(0x1ab))[_0x339065(0x1b1)]=new Date()[_0x339065(0x22f)]()[_0x339065(0x1e5)](0x0,0x10);function _0x486d(){const _0x42af53=['createElement','password','error','toString','total','confirmDelete','toggleAnalysisButton','salesDetailsSection','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée.','prices','onclick','charAt','insertRow','theme-toggle','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.','push','28800041919','option','TotalSales','removeChild','1029llyLrJ','database','signupContainer','toLowerCase','subscriptionRequiredModal','submit','destroy','averageSales','keys','addEventListener','exists','userInfo','tbody','slice','Ce\x20nom\x20d\x27utilisateur\x20est\x20déjà\x20utilisé.','resolve','651140dkJWyg','signupForm','none','threeMonth','key','salesEndDate','Inscription\x20réussie\x20!\x20Connectez-vous.','signupUsername','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','Détail\x20des\x20ventes','aria-label','Total\x20des\x20ventes:\x20','setAttribute','rgba(255,\x20255,\x20255,\x200.1)','month','reset','loginContainer','location','7480KpkZiZ','visionwifi-d4fbf.firebasestorage.app','product','\x20FCFA)','AverageSales','getContext','getTime','Erreur\x20lors\x20de\x20la\x20création\x20du\x20compte','insertCell','Error\x20creating\x20user:','length','salesForm','filterStockDates','writeFile','ref','https://visionwifi-d4fbf-default-rtdb.firebaseio.com','Activer\x20le\x20mode\x20clair','light-theme','363898cQaQrm','getElementById','val','3ufDBJk','click','salesChart','#searchInputs\x20input','display','toggleSalesButton','week','active','querySelector','Utilisateur:\x20','Analyse\x20des\x20ventes','querySelectorAll','input','Entrée\x20supprimée\x20avec\x20succès','signupPassword','body','darkTheme','users/','confirm-dialog','rgb(255,\x2099,\x20132)','31615YXzuHV','remove','dataset','toFixed','ventes_wifi_zone.xlsx','values','11zRKHAm','username','Ventes','dashboardContainer','preventDefault','133332IQdxos','toISOString','expired','loginForm','APP','visionwifi-d4fbf','book_append_sheet','once','update','then','sort','salesTable','prix','Masquer\x20l\x27analyse\x20des\x20ventes','line','classList','Activer\x20le\x20mode\x20sombre','toLocaleString','rgb(0,\x20255,\x20255)','cancelDelete','filter','labels','delete-icon','filterSalesDates','sales/','G-KR3B16SRL7','span','equalTo','stockTableGlobal','className','getItem','appendChild','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20entrée\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','reduce','catch','log','dateTime','signupButton','block','set','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','toUpperCase','value','forEach','1655586BqamXX','\x20FCFA','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée\x20:','style','limitToLast','status','1594070LbKUHS','textContent','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrée:','analysisSection','DOMContentLoaded','index.html','innerHTML','utils','every','1FfxALA','orderByChild'];_0x486d=function(){return _0x42af53;};return _0x486d();}function fetchTicketCategories(){const _0x238ccc=_0x339065;database[_0x238ccc(0x208)]('TicketsTotal')['once']('value')[_0x238ccc(0x237)](_0xc4e433=>{const _0x3f91e1=_0x238ccc;ticketCategories=_0xc4e433[_0x3f91e1(0x20e)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x274aa2=_0x339065;productSelect['innerHTML']='<option\x20value=\x22\x22>Sélectionner\x20un\x20produit</option>';for(const _0x644f3b in ticketCategories){const _0x525e8f=ticketCategories[_0x644f3b][_0x274aa2(0x23a)][0x0],_0x2a2cfa=document[_0x274aa2(0x1c4)](_0x274aa2(0x1d5));_0x2a2cfa[_0x274aa2(0x1b1)]=_0x644f3b,_0x2a2cfa[_0x274aa2(0x1ba)]=_0x644f3b+'\x20('+_0x525e8f+_0x274aa2(0x1fd),productSelect['appendChild'](_0x2a2cfa);}}fetchTicketCategories(),loginForm[_0x339065(0x1e1)](_0x339065(0x1dd),function(_0xe4b9f){const _0x2280fb=_0x339065;_0xe4b9f[_0x2280fb(0x22d)]();const _0x4bf92c=document[_0x2280fb(0x20d)](_0x2280fb(0x22a))['value'],_0xf196df=document[_0x2280fb(0x20d)](_0x2280fb(0x1c5))[_0x2280fb(0x1b1)];database[_0x2280fb(0x208)](_0x2280fb(0x220)+_0x4bf92c)[_0x2280fb(0x235)](_0x2280fb(0x1b1))[_0x2280fb(0x237)](_0x4ba3b0=>{const _0x2ba66d=_0x2280fb;_0x4ba3b0[_0x2ba66d(0x1e2)]()?_0x4ba3b0['val']()[_0x2ba66d(0x1c5)]===_0xf196df?loginSuccess(_0x4bf92c):alert('Mot\x20de\x20passe\x20incorrect'):alert('Utilisateur\x20introuvable');});}),signupForm['addEventListener']('submit',function(_0x53c7c9){const _0x49fd9e=_0x339065;_0x53c7c9['preventDefault']();const _0x3bf8e8=document[_0x49fd9e(0x20d)](_0x49fd9e(0x1ef))[_0x49fd9e(0x1b1)],_0x3b2c28=document[_0x49fd9e(0x20d)](_0x49fd9e(0x21d))[_0x49fd9e(0x1b1)];database[_0x49fd9e(0x208)](_0x49fd9e(0x220)+_0x3bf8e8)[_0x49fd9e(0x235)]('value')[_0x49fd9e(0x237)](_0x34250a=>{const _0x492e6d=_0x49fd9e;_0x34250a[_0x492e6d(0x1e2)]()?alert(_0x492e6d(0x1e6)):database['ref'](_0x492e6d(0x220)+_0x3bf8e8)[_0x492e6d(0x1ae)]({'password':_0x3b2c28})[_0x492e6d(0x237)](()=>{const _0x1b4d58=_0x492e6d;alert(_0x1b4d58(0x1ee)),signupContainer[_0x1b4d58(0x1b6)][_0x1b4d58(0x213)]='none',loginContainer[_0x1b4d58(0x1b6)][_0x1b4d58(0x213)]=_0x1b4d58(0x1ad);})[_0x492e6d(0x1a9)](_0x584d77=>{const _0x4d434a=_0x492e6d;console[_0x4d434a(0x1c6)](_0x4d434a(0x203),_0x584d77),alert(_0x4d434a(0x201));});});}),signupButton['addEventListener']('click',function(){const _0x585f57=_0x339065;loginContainer[_0x585f57(0x1b6)][_0x585f57(0x213)]=_0x585f57(0x1ea),signupContainer[_0x585f57(0x1b6)][_0x585f57(0x213)]=_0x585f57(0x1ad);}),loginFromSignup[_0x339065(0x1e1)]('click',function(){const _0x3a9298=_0x339065;signupContainer[_0x3a9298(0x1b6)]['display']=_0x3a9298(0x1ea),loginContainer[_0x3a9298(0x1b6)][_0x3a9298(0x213)]=_0x3a9298(0x1ad);});function loginSuccess(_0x24ec85){const _0x34b218=_0x339065;currentUser=_0x24ec85,loginContainer[_0x34b218(0x1b6)][_0x34b218(0x213)]=_0x34b218(0x1ea),signupContainer['style'][_0x34b218(0x213)]=_0x34b218(0x1ea),dashboardContainer['style'][_0x34b218(0x213)]=_0x34b218(0x1ad),userInfoElement[_0x34b218(0x1ba)]=_0x34b218(0x218)+_0x24ec85,checkSubscriptionStatus()[_0x34b218(0x237)](_0x30f0ed=>{_0x30f0ed?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x34b218(0x1a9)](_0xae009b=>{const _0x50cf3d=_0x34b218;console[_0x50cf3d(0x1c6)](_0x50cf3d(0x1f0),_0xae009b),alert(_0x50cf3d(0x1d2));});}function listenForSalesDataChanges(){const _0x1cb6d8=_0x339065;salesDataListener=database[_0x1cb6d8(0x208)](_0x1cb6d8(0x246)+currentUser)['on'](_0x1cb6d8(0x1b1),_0xb6c3e0=>{const _0x4f5eae=_0x1cb6d8;salesData=[],_0xb6c3e0['forEach'](_0x316f94=>{const _0x5cf43c=_0x3a85,_0xdba233=_0x316f94[_0x5cf43c(0x20e)]();_0xdba233['key']=_0x316f94[_0x5cf43c(0x1ec)],_0xdba233[_0x5cf43c(0x1c8)]=(_0xdba233['V']*_0xdba233['PV'])['toFixed'](0x2),salesData[_0x5cf43c(0x1d3)](_0xdba233);}),analysisSection[_0x4f5eae(0x1b6)][_0x4f5eae(0x213)]===_0x4f5eae(0x1ad)&&updateAnalysis(salesData);});}document[_0x339065(0x20d)](_0x339065(0x1fc))[_0x339065(0x1e1)]('change',function(){const _0x2dfa0f=_0x339065,_0x9c438c=this[_0x2dfa0f(0x1b1)];database[_0x2dfa0f(0x208)]('sales/'+currentUser)[_0x2dfa0f(0x1c3)](_0x2dfa0f(0x1fc))[_0x2dfa0f(0x249)](_0x9c438c)[_0x2dfa0f(0x1b7)](0x1)[_0x2dfa0f(0x235)]('value')[_0x2dfa0f(0x237)](_0x1655d4=>{const _0x339de8=_0x2dfa0f;if(_0x1655d4[_0x339de8(0x1e2)]()){const _0x2db7e3=Object['values'](_0x1655d4[_0x339de8(0x20e)]())[0x0];document[_0x339de8(0x20d)]('SI')[_0x339de8(0x1b1)]=_0x2db7e3['SF']||0x0;}else document[_0x339de8(0x20d)]('SI')['value']=0x0;}),updatePV();}),document[_0x339065(0x20d)]('V')['addEventListener']('input',updateSF),document[_0x339065(0x20d)](_0x339065(0x232))[_0x339065(0x1e1)](_0x339065(0x21b),updateSF);function updateSF(){const _0x5da47d=_0x339065,_0x38cb86=parseInt(document[_0x5da47d(0x20d)]('SI')[_0x5da47d(0x1b1)])||0x0,_0x3c8038=parseInt(document['getElementById']('APP')[_0x5da47d(0x1b1)])||0x0,_0x163bdd=parseInt(document[_0x5da47d(0x20d)]('V')[_0x5da47d(0x1b1)])||0x0;document[_0x5da47d(0x20d)]('SF')['value']=_0x38cb86+_0x3c8038-_0x163bdd;}function updatePV(){const _0x37cdad=_0x339065,_0x662e3b=document[_0x37cdad(0x20d)](_0x37cdad(0x1fc))[_0x37cdad(0x1b1)],_0x379194=ticketCategories[_0x662e3b]?.[_0x37cdad(0x23a)][0x0];document['getElementById']('PV')['value']=_0x379194||0x0;}salesForm['addEventListener'](_0x339065(0x1dd),function(_0x2a5dde){const _0x28d81c=_0x339065;_0x2a5dde['preventDefault']();const _0x43a102={'dateTime':document[_0x28d81c(0x20d)](_0x28d81c(0x1ab))[_0x28d81c(0x1b1)],'product':document['getElementById'](_0x28d81c(0x1fc))[_0x28d81c(0x1b1)],'SI':parseInt(document['getElementById']('SI')[_0x28d81c(0x1b1)])||0x0,'APP':parseInt(document[_0x28d81c(0x20d)](_0x28d81c(0x232))['value'])||0x0,'V':parseInt(document[_0x28d81c(0x20d)]('V')[_0x28d81c(0x1b1)])||0x0,'SF':parseInt(document[_0x28d81c(0x20d)]('SF')[_0x28d81c(0x1b1)])||0x0,'PV':parseFloat(document[_0x28d81c(0x20d)]('PV')['value'])||0x0};database[_0x28d81c(0x208)](_0x28d81c(0x246)+currentUser)['push'](_0x43a102)[_0x28d81c(0x237)](()=>{const _0x174f31=_0x28d81c;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x174f31(0x1f7)](),document[_0x174f31(0x20d)]('dateTime')[_0x174f31(0x1b1)]=new Date()[_0x174f31(0x22f)]()['slice'](0x0,0x10);})[_0x28d81c(0x1a9)](_0x590bae=>{const _0x583c7b=_0x28d81c;console['error'](_0x583c7b(0x1b5),_0x590bae),alert(_0x583c7b(0x1cc));});});function updateTable(){const _0x970ca3=_0x339065,_0x46a70a=salesTable[_0x970ca3(0x217)](_0x970ca3(0x1e4));_0x46a70a[_0x970ca3(0x1bf)]='',database[_0x970ca3(0x208)](_0x970ca3(0x246)+currentUser)[_0x970ca3(0x235)]('value')[_0x970ca3(0x237)](_0x213ca6=>{const _0x14d0a6=_0x970ca3;salesData=[],_0x213ca6[_0x14d0a6(0x1b2)](_0x54e063=>{const _0x255db7=_0x14d0a6,_0x3766d6=_0x54e063['val']();_0x3766d6[_0x255db7(0x1c8)]=(_0x3766d6['V']*_0x3766d6['PV'])[_0x255db7(0x226)](0x2),salesData[_0x255db7(0x1d3)](_0x3766d6);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0xa3bb27=_0x339065,_0x5d8ce2=document[_0xa3bb27(0x20d)](_0xa3bb27(0x24a));_0x5d8ce2[_0xa3bb27(0x217)]('tbody')[_0xa3bb27(0x1bf)]='',database[_0xa3bb27(0x208)](_0xa3bb27(0x246)+currentUser)['once'](_0xa3bb27(0x1b1))['then'](_0x31ecde=>{const _0x21f48f=_0xa3bb27,_0x1ec59c={};_0x31ecde['forEach'](_0x1b23b8=>{const _0x5cc958=_0x3a85,_0x54da0f=_0x1b23b8['val']();(!_0x1ec59c[_0x54da0f[_0x5cc958(0x1fc)]]||new Date(_0x54da0f[_0x5cc958(0x1ab)])>new Date(_0x1ec59c[_0x54da0f[_0x5cc958(0x1fc)]][_0x5cc958(0x1ab)]))&&(_0x1ec59c[_0x54da0f[_0x5cc958(0x1fc)]]=_0x54da0f);}),Object[_0x21f48f(0x228)](_0x1ec59c)[_0x21f48f(0x1b2)](_0xdd5e89=>{const _0x1d3b91=_0x21f48f,_0x3132d9=_0x5d8ce2[_0x1d3b91(0x217)](_0x1d3b91(0x1e4))[_0x1d3b91(0x1d0)]();_0x3132d9[_0x1d3b91(0x202)](0x0)[_0x1d3b91(0x1ba)]=_0xdd5e89['product'],_0x3132d9['insertCell'](0x1)[_0x1d3b91(0x1ba)]=_0xdd5e89['SF'],_0x3132d9['insertCell'](0x2)[_0x1d3b91(0x1ba)]=new Date(_0xdd5e89['dateTime'])[_0x1d3b91(0x23f)]();}),setupSort(_0x5d8ce2);});}function exportToExcel(){const _0x4e8b07=_0x339065,_0x1ce20b=XLSX['utils']['book_new'](),_0x2b4237=XLSX[_0x4e8b07(0x1c0)]['table_to_sheet'](document[_0x4e8b07(0x20d)]('salesTable'));XLSX[_0x4e8b07(0x1c0)][_0x4e8b07(0x234)](_0x1ce20b,_0x2b4237,_0x4e8b07(0x22b)),XLSX[_0x4e8b07(0x207)](_0x1ce20b,_0x4e8b07(0x227));}function _0x3a85(_0x34d2e6,_0x1a7594){const _0x486d82=_0x486d();return _0x3a85=function(_0x3a852b,_0x45009b){_0x3a852b=_0x3a852b-0x1a9;let _0x27ecb4=_0x486d82[_0x3a852b];return _0x27ecb4;},_0x3a85(_0x34d2e6,_0x1a7594);}document[_0x339065(0x20d)]('exportExcel')[_0x339065(0x1e1)](_0x339065(0x210),exportToExcel);function deleteEntry(_0x597ed1){const _0xc81d41=_0x339065;database[_0xc81d41(0x208)]('sales/'+currentUser+'/'+_0x597ed1)['once'](_0xc81d41(0x1b1))[_0xc81d41(0x237)](_0x4181f4=>{const _0x1c7cff=_0xc81d41,_0x2eb67d=_0x4181f4[_0x1c7cff(0x20e)]();return database['ref']('sales/'+currentUser+'/'+_0x597ed1)[_0x1c7cff(0x224)]()['then'](()=>{const _0x49f515=_0x1c7cff;return console[_0x49f515(0x1aa)](_0x49f515(0x21c)),updateStockAfterDeletion(_0x2eb67d);});})[_0xc81d41(0x237)](()=>{return updateTable();})[_0xc81d41(0x237)](()=>{updateStockTables(),updateAnalysis();})[_0xc81d41(0x1a9)](_0x446f04=>{const _0x46fe3e=_0xc81d41;console[_0x46fe3e(0x1c6)](_0x46fe3e(0x1bb),_0x446f04);});}function updateStockAfterDeletion(_0x3b3e50){const _0x1872a8=_0x339065;return database[_0x1872a8(0x208)](_0x1872a8(0x246)+currentUser)[_0x1872a8(0x1c3)](_0x1872a8(0x1ab))['endAt'](_0x3b3e50[_0x1872a8(0x1ab)])[_0x1872a8(0x1b7)](0x2)['once'](_0x1872a8(0x1b1))[_0x1872a8(0x237)](_0x4d52c5=>{const _0x11d55d=_0x1872a8;let _0x20a65a=[];_0x4d52c5['forEach'](_0x3d615a=>{const _0x789aa=_0x3a85;_0x20a65a[_0x789aa(0x1d3)]({'key':_0x3d615a[_0x789aa(0x1ec)],..._0x3d615a[_0x789aa(0x20e)]()});}),_0x20a65a[_0x11d55d(0x238)]((_0x2dfc42,_0x4f35e5)=>new Date(_0x4f35e5['dateTime'])-new Date(_0x2dfc42[_0x11d55d(0x1ab)]));if(_0x20a65a[_0x11d55d(0x204)]>0x1&&_0x20a65a[0x0][_0x11d55d(0x1ec)]!==_0x3b3e50[_0x11d55d(0x1ec)]){const _0x184e58=_0x20a65a[0x1],_0x2f5798=_0x184e58['SF']+_0x3b3e50['V']-_0x3b3e50[_0x11d55d(0x232)];return database[_0x11d55d(0x208)]('sales/'+currentUser+'/'+_0x184e58['key'])[_0x11d55d(0x236)]({'SF':_0x2f5798});}return Promise[_0x11d55d(0x1e7)]();});}function updateTable(){const _0x24b9b9=_0x339065;return database[_0x24b9b9(0x208)](_0x24b9b9(0x246)+currentUser)[_0x24b9b9(0x235)](_0x24b9b9(0x1b1))[_0x24b9b9(0x237)](_0x57550f=>{const _0x33f9bd=_0x24b9b9;salesData=[],_0x57550f[_0x33f9bd(0x1b2)](_0x46ae90=>{const _0x435ef4=_0x33f9bd,_0x58157a=_0x46ae90['val']();_0x58157a['key']=_0x46ae90[_0x435ef4(0x1ec)],_0x58157a[_0x435ef4(0x1c8)]=(_0x58157a['V']*_0x58157a['PV'])['toFixed'](0x2),salesData[_0x435ef4(0x1d3)](_0x58157a);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x383882){const _0x29916b=_0x339065,_0xce6d29=salesTable[_0x29916b(0x217)](_0x29916b(0x1e4));_0xce6d29[_0x29916b(0x1bf)]='',_0x383882[_0x29916b(0x1b2)](_0x480ce8=>{const _0x375f67=_0x29916b,_0x1da1dd=_0xce6d29[_0x375f67(0x1d0)]();_0x1da1dd['dataset'][_0x375f67(0x1ec)]=_0x480ce8['key'],_0x1da1dd[_0x375f67(0x202)](0x0)[_0x375f67(0x1ba)]=new Date(_0x480ce8[_0x375f67(0x1ab)])['toLocaleString'](),_0x1da1dd['insertCell'](0x1)[_0x375f67(0x1ba)]=_0x480ce8[_0x375f67(0x1fc)],_0x1da1dd['insertCell'](0x2)[_0x375f67(0x1ba)]=_0x480ce8['SI'],_0x1da1dd[_0x375f67(0x202)](0x3)[_0x375f67(0x1ba)]=_0x480ce8[_0x375f67(0x232)],_0x1da1dd[_0x375f67(0x202)](0x4)['textContent']=_0x480ce8['V'],_0x1da1dd[_0x375f67(0x202)](0x5)['textContent']=_0x480ce8['SF'],_0x1da1dd[_0x375f67(0x202)](0x6)[_0x375f67(0x1ba)]=_0x480ce8['PV'],_0x1da1dd[_0x375f67(0x202)](0x7)[_0x375f67(0x1ba)]=_0x480ce8['total'];}),addDeleteIcons();}function addDeleteIcons(){const _0x1ef929=_0x339065,_0x8ce791=salesTable[_0x1ef929(0x21a)]('tbody\x20tr');_0x8ce791[_0x1ef929(0x1b2)](_0x4a9722=>{const _0x42bf1d=_0x1ef929,_0x2ab31c=document[_0x42bf1d(0x1c4)](_0x42bf1d(0x248));_0x2ab31c[_0x42bf1d(0x1bf)]='✖',_0x2ab31c[_0x42bf1d(0x24b)]=_0x42bf1d(0x244),_0x2ab31c[_0x42bf1d(0x1ce)]=_0xeaf63f=>{const _0x195d24=_0x42bf1d;_0xeaf63f['stopPropagation'](),showConfirmDialog(_0x4a9722[_0x195d24(0x225)][_0x195d24(0x1ec)]);},_0x4a9722['querySelector']('td:first-child')[_0x42bf1d(0x24d)](_0x2ab31c);});}function showConfirmDialog(_0x3cb038){const _0x21866e=_0x339065,_0x426c27=document[_0x21866e(0x1c4)]('div');_0x426c27[_0x21866e(0x24b)]=_0x21866e(0x221),_0x426c27[_0x21866e(0x1bf)]=_0x21866e(0x24e),document[_0x21866e(0x21e)]['appendChild'](_0x426c27),document[_0x21866e(0x20d)](_0x21866e(0x1c9))[_0x21866e(0x1ce)]=()=>{const _0x509100=_0x21866e;deleteEntry(_0x3cb038),document[_0x509100(0x21e)]['removeChild'](_0x426c27);},document[_0x21866e(0x20d)](_0x21866e(0x241))[_0x21866e(0x1ce)]=()=>{const _0x359ba6=_0x21866e;document[_0x359ba6(0x21e)][_0x359ba6(0x1d7)](_0x426c27);};}function setupSearch(){const _0x47722a=_0x339065,_0x2bc7a8=document[_0x47722a(0x21a)](_0x47722a(0x212));_0x2bc7a8[_0x47722a(0x1b2)](_0xbd33cd=>{const _0x1b61f8=_0x47722a;_0xbd33cd[_0x1b61f8(0x1e1)](_0x1b61f8(0x21b),()=>{const _0x328800=salesData['filter'](_0x42c889=>{const _0xf48c8b=_0x3a85;return Object[_0xf48c8b(0x1e0)](_0x42c889)[_0xf48c8b(0x1c1)](_0x23f0ed=>{const _0xf75dc2=_0xf48c8b,_0x5d1cfc=document['getElementById']('search'+(_0x23f0ed[_0xf75dc2(0x1cf)](0x0)[_0xf75dc2(0x1b0)]()+_0x23f0ed[_0xf75dc2(0x1e5)](0x1)))?.[_0xf75dc2(0x1b1)][_0xf75dc2(0x1db)]()||'';return _0x42c889[_0x23f0ed][_0xf75dc2(0x1c7)]()[_0xf75dc2(0x1db)]()['includes'](_0x5d1cfc);});});renderTable(_0x328800),updateAnalysis(_0x328800);});});}function setupSort(_0x403a2a){const _0x242050=_0x339065,_0xb2e6c9=_0x403a2a[_0x242050(0x21a)]('th[data-sort]');_0xb2e6c9[_0x242050(0x1b2)](_0x5545a4=>{const _0x53968c=_0x242050;_0x5545a4[_0x53968c(0x1e1)](_0x53968c(0x210),()=>{const _0x411068=_0x53968c,_0x4cdfe3=_0x5545a4[_0x411068(0x225)][_0x411068(0x238)],_0x1f7d30=_0x403a2a['id']===_0x411068(0x239)?salesData:stockData;_0x1f7d30[_0x411068(0x238)]((_0x100f85,_0xe9010)=>{if(_0x100f85[_0x4cdfe3]<_0xe9010[_0x4cdfe3])return-0x1;if(_0x100f85[_0x4cdfe3]>_0xe9010[_0x4cdfe3])return 0x1;return 0x0;}),_0x403a2a['id']===_0x411068(0x239)?(renderTable(_0x1f7d30),updateAnalysis(_0x1f7d30)):renderStockTable(_0x1f7d30,_0x403a2a);});});}function renderStockTable(_0x3a2625,_0x42eb58){const _0x1cb5e0=_0x339065,_0x305aa5=_0x42eb58[_0x1cb5e0(0x217)]('tbody');_0x305aa5[_0x1cb5e0(0x1bf)]='',_0x3a2625[_0x1cb5e0(0x1b2)](_0xce2c51=>{const _0x2e4c45=_0x1cb5e0,_0x2281bb=_0x305aa5[_0x2e4c45(0x1d0)]();_0x2281bb['insertCell'](0x0)[_0x2e4c45(0x1ba)]=_0xce2c51[_0x2e4c45(0x1fc)],_0x2281bb[_0x2e4c45(0x202)](0x1)['textContent']=_0xce2c51['SF'],_0x2281bb[_0x2e4c45(0x202)](0x2)['textContent']=new Date(_0xce2c51['dateTime'])['toLocaleString']();});}function updateAnalysis(_0x270773=salesData){const _0x25392e=_0x339065;let _0x1904a8=0x0,_0x485849=0x0;const _0x5910ac={'labels':[],'sales':[],'prices':[]};_0x270773[_0x25392e(0x1b2)](_0x4a805e=>{const _0xbdf774=_0x25392e;_0x1904a8+=_0x4a805e['V']*_0x4a805e['PV'],_0x485849++,_0x5910ac[_0xbdf774(0x243)]['push'](new Date(_0x4a805e[_0xbdf774(0x1ab)])['toLocaleString']()),_0x5910ac['sales'][_0xbdf774(0x1d3)](_0x4a805e['V']),_0x5910ac['prices'][_0xbdf774(0x1d3)](_0x4a805e['PV']);});const _0x67d331=_0x1904a8/_0x485849||0x0;totalSalesElement['textContent']='Total\x20des\x20ventes:\x20'+_0x1904a8[_0x25392e(0x226)](0x2)+_0x25392e(0x1b4),averageSalesElement[_0x25392e(0x1ba)]=_0x25392e(0x1af)+_0x67d331[_0x25392e(0x226)](0x2)+_0x25392e(0x1b4),updateChart(_0x5910ac),updatePeriodAnalysis(_0x270773);}function updateChart(_0x25977d){const _0x52aa0a=_0x339065,_0x7c0572=document['getElementById'](_0x52aa0a(0x211))[_0x52aa0a(0x1ff)]('2d');salesChart&&salesChart[_0x52aa0a(0x1de)](),salesChart=new Chart(_0x7c0572,{'type':_0x52aa0a(0x23c),'data':{'labels':_0x25977d['labels'],'datasets':[{'label':_0x52aa0a(0x22b),'data':_0x25977d['sales'],'borderColor':'rgb(0,\x20255,\x20255)','tension':0.1},{'label':'Prix\x20de\x20vente','data':_0x25977d[_0x52aa0a(0x1cd)],'borderColor':_0x52aa0a(0x222),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':_0x52aa0a(0x1f5)},'ticks':{'color':'rgb(0,\x20255,\x20255)'}},'x':{'grid':{'color':_0x52aa0a(0x1f5)},'ticks':{'color':_0x52aa0a(0x240)}}},'plugins':{'legend':{'labels':{'color':'rgb(0,\x20255,\x20255)'}}}}});}function updatePeriodAnalysis(_0x55aef7){const _0x2b2c9a=_0x339065,_0xca7a29=new Date(),_0x2c0cd0=new Date(_0xca7a29['getTime']()-0x7*0x18*0x3c*0x3c*0x3e8),_0x9b3ca5=new Date(_0xca7a29[_0x2b2c9a(0x200)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x10c810=new Date(_0xca7a29[_0x2b2c9a(0x200)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x253ba9=_0x55aef7['filter'](_0x2dc244=>new Date(_0x2dc244[_0x2b2c9a(0x1ab)])>=_0x2c0cd0),_0xa6b42c=_0x55aef7['filter'](_0x393a30=>new Date(_0x393a30[_0x2b2c9a(0x1ab)])>=_0x9b3ca5),_0x1cc28e=_0x55aef7[_0x2b2c9a(0x242)](_0x405598=>new Date(_0x405598['dateTime'])>=_0x10c810);updatePeriodStats(_0x253ba9,_0x2b2c9a(0x215)),updatePeriodStats(_0xa6b42c,_0x2b2c9a(0x1f6)),updatePeriodStats(_0x1cc28e,_0x2b2c9a(0x1eb));}function updatePeriodStats(_0x61227d,_0xee77bf){const _0x19500c=_0x339065,_0x295ea6=_0x61227d[_0x19500c(0x24f)]((_0x2a4087,_0x5527e1)=>_0x2a4087+_0x5527e1['V']*_0x5527e1['PV'],0x0),_0x5b7731=_0x295ea6/_0x61227d[_0x19500c(0x204)]||0x0;document[_0x19500c(0x20d)](_0xee77bf+_0x19500c(0x1d6))[_0x19500c(0x1ba)]=_0x19500c(0x1f3)+_0x295ea6[_0x19500c(0x226)](0x2)+'\x20FCFA',document[_0x19500c(0x20d)](_0xee77bf+_0x19500c(0x1fe))[_0x19500c(0x1ba)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x5b7731[_0x19500c(0x226)](0x2)+'\x20FCFA';}toggleAnalysisButton['addEventListener'](_0x339065(0x210),function(){const _0x3567e6=_0x339065;analysisSection[_0x3567e6(0x1b6)]['display']===_0x3567e6(0x1ea)||analysisSection['style'][_0x3567e6(0x213)]===''?(analysisSection[_0x3567e6(0x1b6)][_0x3567e6(0x213)]=_0x3567e6(0x1ad),salesDetailsSection[_0x3567e6(0x1b6)][_0x3567e6(0x213)]=_0x3567e6(0x1ea),this[_0x3567e6(0x1ba)]=_0x3567e6(0x23b),toggleSalesButton[_0x3567e6(0x1ba)]=_0x3567e6(0x1f1),updateAnalysis(salesData)):(analysisSection[_0x3567e6(0x1b6)]['display']='none',this[_0x3567e6(0x1ba)]=_0x3567e6(0x219));}),toggleSalesButton[_0x339065(0x1e1)]('click',function(){const _0xca1223=_0x339065;salesDetailsSection[_0xca1223(0x1b6)][_0xca1223(0x213)]===_0xca1223(0x1ea)||salesDetailsSection['style']['display']===''?(salesDetailsSection[_0xca1223(0x1b6)][_0xca1223(0x213)]=_0xca1223(0x1ad),analysisSection[_0xca1223(0x1b6)][_0xca1223(0x213)]=_0xca1223(0x1ea),this[_0xca1223(0x1ba)]='Masquer\x20le\x20détail\x20des\x20ventes',toggleAnalysisButton[_0xca1223(0x1ba)]=_0xca1223(0x219)):(salesDetailsSection[_0xca1223(0x1b6)]['display']='none',this[_0xca1223(0x1ba)]=_0xca1223(0x1f1));});const themeToggle=document[_0x339065(0x20d)](_0x339065(0x1d1)),root=document['documentElement'];let isDarkTheme=!![];function setTheme(_0x2831a3){const _0x3f19d4=_0x339065;_0x2831a3?(root[_0x3f19d4(0x23d)]['remove'](_0x3f19d4(0x20b)),themeToggle[_0x3f19d4(0x1ba)]='🌙',themeToggle[_0x3f19d4(0x1f4)]('aria-label',_0x3f19d4(0x20a))):(root[_0x3f19d4(0x23d)]['add']('light-theme'),themeToggle[_0x3f19d4(0x1ba)]='☀️',themeToggle[_0x3f19d4(0x1f4)](_0x3f19d4(0x1f2),_0x3f19d4(0x23e))),isDarkTheme=_0x2831a3,localStorage['setItem']('darkTheme',_0x2831a3);}themeToggle[_0x339065(0x1e1)](_0x339065(0x210),()=>{setTheme(!isDarkTheme);}),document[_0x339065(0x1e1)](_0x339065(0x1bd),()=>{const _0x503657=_0x339065,_0x136e84=localStorage[_0x503657(0x24c)]('darkTheme');_0x136e84!==null?setTheme(_0x136e84==='true'):setTheme(![]);}),document[_0x339065(0x20d)](_0x339065(0x206))['addEventListener'](_0x339065(0x210),function(){const _0x36ad8d=_0x339065,_0x2e23fd=new Date(document[_0x36ad8d(0x20d)]('stockStartDate')[_0x36ad8d(0x1b1)]),_0x471be9=new Date(document[_0x36ad8d(0x20d)]('stockEndDate')['value']);updateStockTables(_0x2e23fd,_0x471be9);}),document[_0x339065(0x20d)](_0x339065(0x245))[_0x339065(0x1e1)](_0x339065(0x210),function(){const _0x355535=_0x339065,_0x219597=new Date(document[_0x355535(0x20d)]('salesStartDate')['value']),_0x623b8f=new Date(document[_0x355535(0x20d)](_0x355535(0x1ed))['value']),_0x2f5122=salesData[_0x355535(0x242)](_0x234452=>{const _0x4ee3fe=_0x355535,_0x88bd36=new Date(_0x234452[_0x4ee3fe(0x1ab)]);return(!_0x219597||_0x88bd36>=_0x219597)&&(!_0x623b8f||_0x88bd36<=_0x623b8f);});renderTable(_0x2f5122),updateAnalysis(_0x2f5122);});function updateStockTables(_0x25f55f,_0x33f7ba){const _0x55df3a=_0x339065,_0x580544=document[_0x55df3a(0x20d)](_0x55df3a(0x24a));_0x580544[_0x55df3a(0x217)]('tbody')[_0x55df3a(0x1bf)]='',database[_0x55df3a(0x208)](_0x55df3a(0x246)+currentUser)['once'](_0x55df3a(0x1b1))[_0x55df3a(0x237)](_0x4c33cb=>{const _0x208bb9=_0x55df3a,_0x98d97={};_0x4c33cb[_0x208bb9(0x1b2)](_0x9d11dc=>{const _0x39c562=_0x208bb9,_0x3216f5=_0x9d11dc[_0x39c562(0x20e)](),_0x7645dc=new Date(_0x3216f5[_0x39c562(0x1ab)]);(!_0x25f55f||_0x7645dc>=_0x25f55f)&&(!_0x33f7ba||_0x7645dc<=_0x33f7ba)&&((!_0x98d97[_0x3216f5['product']]||_0x7645dc>new Date(_0x98d97[_0x3216f5[_0x39c562(0x1fc)]]['dateTime']))&&(_0x98d97[_0x3216f5[_0x39c562(0x1fc)]]=_0x3216f5));}),Object[_0x208bb9(0x228)](_0x98d97)[_0x208bb9(0x1b2)](_0x219346=>{const _0x3ed380=_0x208bb9,_0xfec3e1=_0x580544[_0x3ed380(0x217)]('tbody')[_0x3ed380(0x1d0)]();_0xfec3e1[_0x3ed380(0x202)](0x0)[_0x3ed380(0x1ba)]=_0x219346[_0x3ed380(0x1fc)],_0xfec3e1[_0x3ed380(0x202)](0x1)['textContent']=_0x219346['SF'],_0xfec3e1['insertCell'](0x2)[_0x3ed380(0x1ba)]=new Date(_0x219346[_0x3ed380(0x1ab)])[_0x3ed380(0x23f)]();}),setupSort(_0x580544);});}function showSubscriptionRequiredModal(){const _0x25f37f=_0x339065;document[_0x25f37f(0x20d)](_0x25f37f(0x1dc))[_0x25f37f(0x1b6)][_0x25f37f(0x213)]='flex';}function hideSubscriptionRequiredModal(){const _0x251d18=_0x339065;document[_0x251d18(0x20d)]('subscriptionRequiredModal')['style'][_0x251d18(0x213)]=_0x251d18(0x1ea);}function redirectToSubscription(){const _0x427acf=_0x339065;window[_0x427acf(0x1f9)]['href']=_0x427acf(0x1be);}async function checkSubscriptionStatus(){const _0x4ee2b8=_0x339065;try{const _0x5ad77b=await adminRef[_0x4ee2b8(0x235)](_0x4ee2b8(0x1b1)),_0x44a0cd=_0x5ad77b[_0x4ee2b8(0x20e)](),_0x1250fb=new Date();if(_0x44a0cd&&_0x44a0cd[_0x4ee2b8(0x1b8)]===_0x4ee2b8(0x216)){const _0x4eb65a=new Date(_0x44a0cd['endDate']);return _0x4eb65a>=_0x1250fb?!![]:(await adminRef['update']({'status':_0x4ee2b8(0x230)}),![]);}else return![];}catch(_0x5b4cd5){console[_0x4ee2b8(0x1c6)](_0x4ee2b8(0x1f0),_0x5b4cd5);throw _0x5b4cd5;}}updateTable(),updateStockTables(),analysisSection[_0x339065(0x1b6)][_0x339065(0x213)]=_0x339065(0x1ea),salesDetailsSection[_0x339065(0x1b6)]['display']=_0x339065(0x1ea),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x339065(0x24c)](_0x339065(0x21f));savedTheme!==null&&setTheme(savedTheme==='true');