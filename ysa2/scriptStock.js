const _0x4d5fa4=_0x3b33;(function(_0xc79a25,_0x5a1f7e){const _0x2889f7=_0x3b33,_0x9ce43f=_0xc79a25();while(!![]){try{const _0x134837=-parseInt(_0x2889f7(0x1fc))/0x1*(parseInt(_0x2889f7(0x1ed))/0x2)+parseInt(_0x2889f7(0x25a))/0x3*(-parseInt(_0x2889f7(0x245))/0x4)+parseInt(_0x2889f7(0x260))/0x5+-parseInt(_0x2889f7(0x232))/0x6+parseInt(_0x2889f7(0x1f6))/0x7*(parseInt(_0x2889f7(0x226))/0x8)+parseInt(_0x2889f7(0x27a))/0x9+-parseInt(_0x2889f7(0x1f2))/0xa*(-parseInt(_0x2889f7(0x1fb))/0xb);if(_0x134837===_0x5a1f7e)break;else _0x9ce43f['push'](_0x9ce43f['shift']());}catch(_0x216a38){_0x9ce43f['push'](_0x9ce43f['shift']());}}}(_0x4f0f,0xb9a35));const firebaseConfig={'apiKey':_0x4d5fa4(0x23e),'authDomain':_0x4d5fa4(0x22b),'databaseURL':_0x4d5fa4(0x1e6),'projectId':'ysa100','storageBucket':'ysa100.firebasestorage.app','messagingSenderId':_0x4d5fa4(0x214),'appId':_0x4d5fa4(0x261),'measurementId':'G-3VS3K8VGNR'};firebase['initializeApp'](firebaseConfig);const database=firebase[_0x4d5fa4(0x266)](),adminRef=database[_0x4d5fa4(0x202)](_0x4d5fa4(0x220)),loginForm=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x27f)),signupForm=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x203)),loginContainer=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x1e5)),signupContainer=document['getElementById'](_0x4d5fa4(0x236)),dashboardContainer=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x248)),salesForm=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x275)),salesTable=document['getElementById']('salesTable'),totalSalesElement=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x280)),averageSalesElement=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x211)),userInfoElement=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x21e)),toggleAnalysisButton=document[_0x4d5fa4(0x25d)]('toggleAnalysisButton'),toggleSalesButton=document['getElementById'](_0x4d5fa4(0x240)),analysisSection=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x239)),salesDetailsSection=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x279)),signupButton=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x212)),loginFromSignup=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x20a)),productSelect=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x259)),stockTableGlobal=document[_0x4d5fa4(0x25d)]('stockTableGlobal');let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x4d5fa4(0x25d)]('dateTime')['value']=new Date()[_0x4d5fa4(0x21c)]()[_0x4d5fa4(0x217)](0x0,0x10);function fetchTicketCategories(){const _0x1d9ed6=_0x4d5fa4;database[_0x1d9ed6(0x202)](_0x1d9ed6(0x221))[_0x1d9ed6(0x23a)]('value')[_0x1d9ed6(0x28b)](_0x41bb65=>{const _0x3eb3fa=_0x1d9ed6;ticketCategories=_0x41bb65[_0x3eb3fa(0x230)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x123845=_0x4d5fa4;productSelect['innerHTML']=_0x123845(0x25e);for(const _0x16a2f5 in ticketCategories){const _0xdb7afc=ticketCategories[_0x16a2f5]['prix'][0x0],_0x2b135e=document['createElement'](_0x123845(0x224));_0x2b135e['value']=_0x16a2f5,_0x2b135e[_0x123845(0x1ef)]=_0x16a2f5+'\x20('+_0xdb7afc+_0x123845(0x24c),productSelect[_0x123845(0x207)](_0x2b135e);}}fetchTicketCategories(),loginForm[_0x4d5fa4(0x1fd)](_0x4d5fa4(0x25b),function(_0x280325){const _0x5e57c6=_0x4d5fa4;_0x280325['preventDefault']();const _0x2cdc28=document[_0x5e57c6(0x25d)]('username')['value'],_0x54adcc=document[_0x5e57c6(0x25d)](_0x5e57c6(0x267))[_0x5e57c6(0x1f3)];database[_0x5e57c6(0x202)]('users/'+_0x2cdc28)['once']('value')[_0x5e57c6(0x28b)](_0x3cc51f=>{const _0x1c8276=_0x5e57c6;_0x3cc51f['exists']()?_0x3cc51f['val']()[_0x1c8276(0x267)]===_0x54adcc?loginSuccess(_0x2cdc28):alert(_0x1c8276(0x271)):alert(_0x1c8276(0x26b));});}),signupForm[_0x4d5fa4(0x1fd)](_0x4d5fa4(0x25b),function(_0x2caf04){const _0x45c53e=_0x4d5fa4;_0x2caf04['preventDefault']();const _0x583ed2=document['getElementById'](_0x45c53e(0x281))[_0x45c53e(0x1f3)],_0x59dcda=document['getElementById'](_0x45c53e(0x201))[_0x45c53e(0x1f3)];database[_0x45c53e(0x202)]('users/'+_0x583ed2)[_0x45c53e(0x23a)](_0x45c53e(0x1f3))[_0x45c53e(0x28b)](_0x157a1c=>{const _0xe26d52=_0x45c53e;_0x157a1c['exists']()?alert(_0xe26d52(0x1ff)):database[_0xe26d52(0x202)](_0xe26d52(0x25f)+_0x583ed2)[_0xe26d52(0x22e)]({'password':_0x59dcda})[_0xe26d52(0x28b)](()=>{const _0x1f9c3f=_0xe26d52;alert(_0x1f9c3f(0x1f7)),signupContainer[_0x1f9c3f(0x204)][_0x1f9c3f(0x219)]=_0x1f9c3f(0x1f4),loginContainer[_0x1f9c3f(0x204)]['display']=_0x1f9c3f(0x1e2);})[_0xe26d52(0x22c)](_0x4f30cc=>{const _0x45784b=_0xe26d52;console[_0x45784b(0x27c)](_0x45784b(0x262),_0x4f30cc),alert('Erreur\x20lors\x20de\x20la\x20création\x20du\x20compte');});});}),signupButton[_0x4d5fa4(0x1fd)](_0x4d5fa4(0x287),function(){const _0x4d8f25=_0x4d5fa4;loginContainer[_0x4d8f25(0x204)][_0x4d8f25(0x219)]=_0x4d8f25(0x1f4),signupContainer[_0x4d8f25(0x204)][_0x4d8f25(0x219)]=_0x4d8f25(0x1e2);}),loginFromSignup[_0x4d5fa4(0x1fd)]('click',function(){const _0x3f431c=_0x4d5fa4;signupContainer['style'][_0x3f431c(0x219)]='none',loginContainer[_0x3f431c(0x204)][_0x3f431c(0x219)]='block';});function loginSuccess(_0x47b9aa){const _0x5e6910=_0x4d5fa4;currentUser=_0x47b9aa,loginContainer[_0x5e6910(0x204)]['display']='none',signupContainer[_0x5e6910(0x204)][_0x5e6910(0x219)]='none',dashboardContainer[_0x5e6910(0x204)][_0x5e6910(0x219)]=_0x5e6910(0x1e2),userInfoElement[_0x5e6910(0x1ef)]='Utilisateur:\x20'+_0x47b9aa,checkSubscriptionStatus()['then'](_0x3ed6c3=>{_0x3ed6c3?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x5e6910(0x22c)](_0xa7972c=>{const _0x22bfc6=_0x5e6910;console[_0x22bfc6(0x27c)](_0x22bfc6(0x20c),_0xa7972c),alert(_0x22bfc6(0x21f));});}function listenForSalesDataChanges(){const _0x2eb8f5=_0x4d5fa4;salesDataListener=database[_0x2eb8f5(0x202)]('sales/'+currentUser)['on'](_0x2eb8f5(0x1f3),_0x3bbcec=>{const _0x3f9ec1=_0x2eb8f5;salesData=[],_0x3bbcec[_0x3f9ec1(0x216)](_0x2fe5b6=>{const _0x527b3b=_0x3f9ec1,_0x15dff1=_0x2fe5b6[_0x527b3b(0x230)]();_0x15dff1[_0x527b3b(0x22f)]=_0x2fe5b6['key'],_0x15dff1[_0x527b3b(0x258)]=(_0x15dff1['V']*_0x15dff1['PV'])['toFixed'](0x2),salesData['push'](_0x15dff1);}),analysisSection[_0x3f9ec1(0x204)][_0x3f9ec1(0x219)]===_0x3f9ec1(0x1e2)&&updateAnalysis(salesData);});}document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x259))['addEventListener'](_0x4d5fa4(0x21b),function(){const _0x363112=_0x4d5fa4,_0x290842=this[_0x363112(0x1f3)];database[_0x363112(0x202)](_0x363112(0x1eb)+currentUser)[_0x363112(0x1e4)](_0x363112(0x259))['equalTo'](_0x290842)['limitToLast'](0x1)[_0x363112(0x23a)]('value')[_0x363112(0x28b)](_0x2e1805=>{const _0x21c6d9=_0x363112;if(_0x2e1805[_0x21c6d9(0x1fa)]()){const _0x291054=Object[_0x21c6d9(0x288)](_0x2e1805[_0x21c6d9(0x230)]())[0x0];document[_0x21c6d9(0x25d)]('SI')['value']=_0x291054['SF']||0x0;}else document[_0x21c6d9(0x25d)]('SI')[_0x21c6d9(0x1f3)]=0x0;}),updatePV();}),document[_0x4d5fa4(0x25d)]('V')[_0x4d5fa4(0x1fd)](_0x4d5fa4(0x20f),updateSF),document[_0x4d5fa4(0x25d)]('APP')['addEventListener'](_0x4d5fa4(0x20f),updateSF);function updateSF(){const _0x2dae78=_0x4d5fa4,_0x13697f=parseInt(document[_0x2dae78(0x25d)]('SI')[_0x2dae78(0x1f3)])||0x0,_0x519ec9=parseInt(document[_0x2dae78(0x25d)]('APP')['value'])||0x0,_0x33da6c=parseInt(document['getElementById']('V')['value'])||0x0;document[_0x2dae78(0x25d)]('SF')['value']=_0x13697f+_0x519ec9-_0x33da6c;}function updatePV(){const _0x6b897f=_0x4d5fa4,_0xbe3d0c=document[_0x6b897f(0x25d)]('product')['value'],_0x13ddb3=ticketCategories[_0xbe3d0c]?.[_0x6b897f(0x284)][0x0];document[_0x6b897f(0x25d)]('PV')[_0x6b897f(0x1f3)]=_0x13ddb3||0x0;}salesForm['addEventListener']('submit',function(_0x3a2a49){const _0x32ed0f=_0x4d5fa4;_0x3a2a49[_0x32ed0f(0x251)]();const _0x3de7ed={'dateTime':document[_0x32ed0f(0x25d)]('dateTime')[_0x32ed0f(0x1f3)],'product':document[_0x32ed0f(0x25d)](_0x32ed0f(0x259))[_0x32ed0f(0x1f3)],'SI':parseInt(document[_0x32ed0f(0x25d)]('SI')[_0x32ed0f(0x1f3)])||0x0,'APP':parseInt(document[_0x32ed0f(0x25d)]('APP')[_0x32ed0f(0x1f3)])||0x0,'V':parseInt(document[_0x32ed0f(0x25d)]('V')[_0x32ed0f(0x1f3)])||0x0,'SF':parseInt(document[_0x32ed0f(0x25d)]('SF')[_0x32ed0f(0x1f3)])||0x0,'PV':parseFloat(document[_0x32ed0f(0x25d)]('PV')[_0x32ed0f(0x1f3)])||0x0};database[_0x32ed0f(0x202)](_0x32ed0f(0x1eb)+currentUser)[_0x32ed0f(0x250)](_0x3de7ed)[_0x32ed0f(0x28b)](()=>{const _0x594954=_0x32ed0f;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x594954(0x1fe)](),document['getElementById']('dateTime')[_0x594954(0x1f3)]=new Date()[_0x594954(0x21c)]()[_0x594954(0x217)](0x0,0x10);})[_0x32ed0f(0x22c)](_0x23b43a=>{const _0x26d441=_0x32ed0f;console[_0x26d441(0x27c)](_0x26d441(0x229),_0x23b43a),alert('Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée.');});});function updateTable(){const _0x338f33=_0x4d5fa4,_0x1eec23=salesTable[_0x338f33(0x252)]('tbody');_0x1eec23[_0x338f33(0x246)]='',database[_0x338f33(0x202)](_0x338f33(0x1eb)+currentUser)['once'](_0x338f33(0x1f3))[_0x338f33(0x28b)](_0x3ee73d=>{const _0x135d7a=_0x338f33;salesData=[],_0x3ee73d[_0x135d7a(0x216)](_0x3e9a07=>{const _0xd9b89=_0x135d7a,_0xb88098=_0x3e9a07[_0xd9b89(0x230)]();_0xb88098['total']=(_0xb88098['V']*_0xb88098['PV'])[_0xd9b89(0x265)](0x2),salesData['push'](_0xb88098);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x22882a=_0x4d5fa4,_0x222ca7=document['getElementById'](_0x22882a(0x1de));_0x222ca7[_0x22882a(0x252)](_0x22882a(0x231))[_0x22882a(0x246)]='',database[_0x22882a(0x202)](_0x22882a(0x1eb)+currentUser)['once'](_0x22882a(0x1f3))['then'](_0x2eba84=>{const _0x26d095=_0x22882a,_0x1017cb={};_0x2eba84['forEach'](_0x4b9bdc=>{const _0xc293da=_0x3b33,_0x47c7ab=_0x4b9bdc[_0xc293da(0x230)]();(!_0x1017cb[_0x47c7ab[_0xc293da(0x259)]]||new Date(_0x47c7ab[_0xc293da(0x282)])>new Date(_0x1017cb[_0x47c7ab[_0xc293da(0x259)]][_0xc293da(0x282)]))&&(_0x1017cb[_0x47c7ab[_0xc293da(0x259)]]=_0x47c7ab);}),Object['values'](_0x1017cb)[_0x26d095(0x216)](_0x533884=>{const _0x5674a5=_0x26d095,_0x17c844=_0x222ca7[_0x5674a5(0x252)](_0x5674a5(0x231))[_0x5674a5(0x257)]();_0x17c844['insertCell'](0x0)['textContent']=_0x533884[_0x5674a5(0x259)],_0x17c844[_0x5674a5(0x27e)](0x1)[_0x5674a5(0x1ef)]=_0x533884['SF'],_0x17c844[_0x5674a5(0x27e)](0x2)['textContent']=new Date(_0x533884[_0x5674a5(0x282)])['toLocaleString']();}),setupSort(_0x222ca7);});}function exportToExcel(){const _0x95ef67=_0x4d5fa4,_0x573ccf=XLSX[_0x95ef67(0x23f)][_0x95ef67(0x20b)](),_0x1c9908=XLSX[_0x95ef67(0x23f)][_0x95ef67(0x208)](document['getElementById']('salesTable'));XLSX[_0x95ef67(0x23f)][_0x95ef67(0x215)](_0x573ccf,_0x1c9908,_0x95ef67(0x241)),XLSX[_0x95ef67(0x247)](_0x573ccf,_0x95ef67(0x253));}document['getElementById'](_0x4d5fa4(0x254))[_0x4d5fa4(0x1fd)](_0x4d5fa4(0x287),exportToExcel);function deleteEntry(_0x1c63c6){const _0x3b2cd2=_0x4d5fa4;database['ref'](_0x3b2cd2(0x1eb)+currentUser+'/'+_0x1c63c6)[_0x3b2cd2(0x23a)](_0x3b2cd2(0x1f3))[_0x3b2cd2(0x28b)](_0x5a7540=>{const _0x8a7177=_0x3b2cd2,_0x3cab57=_0x5a7540[_0x8a7177(0x230)]();return database['ref'](_0x8a7177(0x1eb)+currentUser+'/'+_0x1c63c6)[_0x8a7177(0x285)]()[_0x8a7177(0x28b)](()=>{const _0x183cce=_0x8a7177;return console['log'](_0x183cce(0x233)),updateStockAfterDeletion(_0x3cab57);});})[_0x3b2cd2(0x28b)](()=>{return updateTable();})[_0x3b2cd2(0x28b)](()=>{updateStockTables(),updateAnalysis();})[_0x3b2cd2(0x22c)](_0x5a6d85=>{const _0x49747f=_0x3b2cd2;console[_0x49747f(0x27c)](_0x49747f(0x1e0),_0x5a6d85);});}function updateStockAfterDeletion(_0x5a3086){const _0x5b23ef=_0x4d5fa4;return database['ref']('sales/'+currentUser)[_0x5b23ef(0x1e4)](_0x5b23ef(0x282))[_0x5b23ef(0x272)](_0x5a3086[_0x5b23ef(0x282)])[_0x5b23ef(0x1f5)](0x2)[_0x5b23ef(0x23a)](_0x5b23ef(0x1f3))['then'](_0x31f8d1=>{const _0x40d6e7=_0x5b23ef;let _0x2f8a9f=[];_0x31f8d1[_0x40d6e7(0x216)](_0x50b9de=>{const _0x77c0d9=_0x40d6e7;_0x2f8a9f[_0x77c0d9(0x250)]({'key':_0x50b9de[_0x77c0d9(0x22f)],..._0x50b9de['val']()});}),_0x2f8a9f[_0x40d6e7(0x243)]((_0x48a0bf,_0x276eba)=>new Date(_0x276eba[_0x40d6e7(0x282)])-new Date(_0x48a0bf[_0x40d6e7(0x282)]));if(_0x2f8a9f['length']>0x1&&_0x2f8a9f[0x0][_0x40d6e7(0x22f)]!==_0x5a3086[_0x40d6e7(0x22f)]){const _0x25827a=_0x2f8a9f[0x1],_0x53779a=_0x25827a['SF']+_0x5a3086['V']-_0x5a3086[_0x40d6e7(0x223)];return database[_0x40d6e7(0x202)]('sales/'+currentUser+'/'+_0x25827a['key'])[_0x40d6e7(0x269)]({'SF':_0x53779a});}return Promise[_0x40d6e7(0x1ee)]();});}function updateTable(){const _0x352195=_0x4d5fa4;return database[_0x352195(0x202)](_0x352195(0x1eb)+currentUser)[_0x352195(0x23a)]('value')[_0x352195(0x28b)](_0x212eb0=>{const _0x3a8bb3=_0x352195;salesData=[],_0x212eb0[_0x3a8bb3(0x216)](_0x380dd5=>{const _0x2d1ced=_0x3a8bb3,_0x52c239=_0x380dd5[_0x2d1ced(0x230)]();_0x52c239[_0x2d1ced(0x22f)]=_0x380dd5[_0x2d1ced(0x22f)],_0x52c239[_0x2d1ced(0x258)]=(_0x52c239['V']*_0x52c239['PV'])[_0x2d1ced(0x265)](0x2),salesData[_0x2d1ced(0x250)](_0x52c239);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x2e228f){const _0x179915=_0x4d5fa4,_0x14b7cf=salesTable['querySelector'](_0x179915(0x231));_0x14b7cf[_0x179915(0x246)]='',_0x2e228f[_0x179915(0x216)](_0x5cb5e8=>{const _0x4718ac=_0x179915,_0x46d1f1=_0x14b7cf[_0x4718ac(0x257)]();_0x46d1f1['dataset']['key']=_0x5cb5e8[_0x4718ac(0x22f)],_0x46d1f1['insertCell'](0x0)[_0x4718ac(0x1ef)]=new Date(_0x5cb5e8[_0x4718ac(0x282)])[_0x4718ac(0x26c)](),_0x46d1f1[_0x4718ac(0x27e)](0x1)[_0x4718ac(0x1ef)]=_0x5cb5e8[_0x4718ac(0x259)],_0x46d1f1['insertCell'](0x2)[_0x4718ac(0x1ef)]=_0x5cb5e8['SI'],_0x46d1f1[_0x4718ac(0x27e)](0x3)[_0x4718ac(0x1ef)]=_0x5cb5e8[_0x4718ac(0x223)],_0x46d1f1[_0x4718ac(0x27e)](0x4)[_0x4718ac(0x1ef)]=_0x5cb5e8['V'],_0x46d1f1[_0x4718ac(0x27e)](0x5)[_0x4718ac(0x1ef)]=_0x5cb5e8['SF'],_0x46d1f1[_0x4718ac(0x27e)](0x6)[_0x4718ac(0x1ef)]=_0x5cb5e8['PV'],_0x46d1f1[_0x4718ac(0x27e)](0x7)[_0x4718ac(0x1ef)]=_0x5cb5e8['total'];}),addDeleteIcons();}function addDeleteIcons(){const _0x4dbd27=_0x4d5fa4,_0x16be0d=salesTable[_0x4dbd27(0x1ea)](_0x4dbd27(0x24e));_0x16be0d[_0x4dbd27(0x216)](_0x4a8e28=>{const _0x38b644=_0x4dbd27,_0xf18680=document[_0x38b644(0x289)](_0x38b644(0x200));_0xf18680[_0x38b644(0x246)]='✖',_0xf18680['className']=_0x38b644(0x1f0),_0xf18680[_0x38b644(0x213)]=_0x52d30c=>{const _0x2eb4bc=_0x38b644;_0x52d30c[_0x2eb4bc(0x227)](),showConfirmDialog(_0x4a8e28[_0x2eb4bc(0x21a)][_0x2eb4bc(0x22f)]);},_0x4a8e28[_0x38b644(0x252)](_0x38b644(0x1f8))[_0x38b644(0x207)](_0xf18680);});}function showConfirmDialog(_0x3f02c0){const _0x5378bd=_0x4d5fa4,_0x114c25=document[_0x5378bd(0x289)]('div');_0x114c25[_0x5378bd(0x273)]=_0x5378bd(0x1e1),_0x114c25[_0x5378bd(0x246)]=_0x5378bd(0x263),document[_0x5378bd(0x234)]['appendChild'](_0x114c25),document[_0x5378bd(0x25d)](_0x5378bd(0x26a))['onclick']=()=>{const _0x3fa735=_0x5378bd;deleteEntry(_0x3f02c0),document['body'][_0x3fa735(0x24b)](_0x114c25);},document[_0x5378bd(0x25d)]('cancelDelete')['onclick']=()=>{const _0xedfe46=_0x5378bd;document['body'][_0xedfe46(0x24b)](_0x114c25);};}function setupSearch(){const _0x2c0a38=_0x4d5fa4,_0x4d5689=document[_0x2c0a38(0x1ea)](_0x2c0a38(0x26e));_0x4d5689[_0x2c0a38(0x216)](_0x1bacba=>{const _0x351823=_0x2c0a38;_0x1bacba[_0x351823(0x1fd)]('input',()=>{const _0x3a94ac=_0x351823,_0x1c8ca1=salesData[_0x3a94ac(0x256)](_0x546562=>{const _0x501800=_0x3a94ac;return Object['keys'](_0x546562)[_0x501800(0x244)](_0xa25a90=>{const _0x16d948=_0x501800,_0x43c87e=document[_0x16d948(0x25d)]('search'+(_0xa25a90[_0x16d948(0x238)](0x0)[_0x16d948(0x209)]()+_0xa25a90[_0x16d948(0x217)](0x1)))?.[_0x16d948(0x1f3)][_0x16d948(0x23d)]()||'';return _0x546562[_0xa25a90]['toString']()[_0x16d948(0x23d)]()[_0x16d948(0x264)](_0x43c87e);});});renderTable(_0x1c8ca1),updateAnalysis(_0x1c8ca1);});});}function setupSort(_0x1bf873){const _0x4f0dc3=_0x4d5fa4,_0x54eebb=_0x1bf873[_0x4f0dc3(0x1ea)](_0x4f0dc3(0x20e));_0x54eebb['forEach'](_0x2c20e3=>{const _0x2bbbb7=_0x4f0dc3;_0x2c20e3[_0x2bbbb7(0x1fd)](_0x2bbbb7(0x287),()=>{const _0x2566b7=_0x2c20e3['dataset']['sort'],_0x2d84c8=_0x1bf873['id']==='salesTable'?salesData:stockData;_0x2d84c8['sort']((_0x50b0af,_0x3d5666)=>{if(_0x50b0af[_0x2566b7]<_0x3d5666[_0x2566b7])return-0x1;if(_0x50b0af[_0x2566b7]>_0x3d5666[_0x2566b7])return 0x1;return 0x0;}),_0x1bf873['id']==='salesTable'?(renderTable(_0x2d84c8),updateAnalysis(_0x2d84c8)):renderStockTable(_0x2d84c8,_0x1bf873);});});}function renderStockTable(_0x5d2c31,_0x32c7f4){const _0x21f68c=_0x4d5fa4,_0x39b626=_0x32c7f4[_0x21f68c(0x252)]('tbody');_0x39b626[_0x21f68c(0x246)]='',_0x5d2c31['forEach'](_0x2c5be1=>{const _0x2dc751=_0x21f68c,_0x3f5d4d=_0x39b626[_0x2dc751(0x257)]();_0x3f5d4d[_0x2dc751(0x27e)](0x0)[_0x2dc751(0x1ef)]=_0x2c5be1['product'],_0x3f5d4d['insertCell'](0x1)[_0x2dc751(0x1ef)]=_0x2c5be1['SF'],_0x3f5d4d[_0x2dc751(0x27e)](0x2)[_0x2dc751(0x1ef)]=new Date(_0x2c5be1[_0x2dc751(0x282)])[_0x2dc751(0x26c)]();});}function _0x3b33(_0x549c5e,_0x1e5c3f){const _0x4f0fe3=_0x4f0f();return _0x3b33=function(_0x3b33bb,_0x204e80){_0x3b33bb=_0x3b33bb-0x1de;let _0x1aaab8=_0x4f0fe3[_0x3b33bb];return _0x1aaab8;},_0x3b33(_0x549c5e,_0x1e5c3f);}function updateAnalysis(_0x39e6f2=salesData){const _0x57f593=_0x4d5fa4;let _0x5d30d1=0x0,_0x5b4f1d=0x0;const _0x123d7d={'labels':[],'sales':[],'prices':[]};_0x39e6f2['forEach'](_0x4dade2=>{const _0x1938f7=_0x3b33;_0x5d30d1+=_0x4dade2['V']*_0x4dade2['PV'],_0x5b4f1d++,_0x123d7d[_0x1938f7(0x28a)]['push'](new Date(_0x4dade2['dateTime'])['toLocaleString']()),_0x123d7d[_0x1938f7(0x1e7)][_0x1938f7(0x250)](_0x4dade2['V']),_0x123d7d[_0x1938f7(0x23b)][_0x1938f7(0x250)](_0x4dade2['PV']);});const _0x3b7f0e=_0x5d30d1/_0x5b4f1d||0x0;totalSalesElement[_0x57f593(0x1ef)]=_0x57f593(0x222)+_0x5d30d1['toFixed'](0x2)+_0x57f593(0x26f),averageSalesElement[_0x57f593(0x1ef)]=_0x57f593(0x277)+_0x3b7f0e['toFixed'](0x2)+_0x57f593(0x26f),updateChart(_0x123d7d),updatePeriodAnalysis(_0x39e6f2);}function updateChart(_0x17c86d){const _0x6ce1f6=_0x4d5fa4,_0x38dfa2=document['getElementById']('salesChart')[_0x6ce1f6(0x206)]('2d');salesChart&&salesChart[_0x6ce1f6(0x28c)](),salesChart=new Chart(_0x38dfa2,{'type':_0x6ce1f6(0x1df),'data':{'labels':_0x17c86d[_0x6ce1f6(0x28a)],'datasets':[{'label':_0x6ce1f6(0x241),'data':_0x17c86d[_0x6ce1f6(0x1e7)],'borderColor':_0x6ce1f6(0x20d),'tension':0.1},{'label':_0x6ce1f6(0x255),'data':_0x17c86d[_0x6ce1f6(0x23b)],'borderColor':'rgb(255,\x2099,\x20132)','tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':_0x6ce1f6(0x22a)},'ticks':{'color':_0x6ce1f6(0x20d)}},'x':{'grid':{'color':_0x6ce1f6(0x22a)},'ticks':{'color':_0x6ce1f6(0x20d)}}},'plugins':{'legend':{'labels':{'color':'rgb(0,\x20255,\x20255)'}}}}});}function updatePeriodAnalysis(_0x405d00){const _0x5f969d=_0x4d5fa4,_0x22e900=new Date(),_0x1cd5a5=new Date(_0x22e900[_0x5f969d(0x276)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x3440bd=new Date(_0x22e900[_0x5f969d(0x276)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x527d56=new Date(_0x22e900[_0x5f969d(0x276)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x4e6109=_0x405d00[_0x5f969d(0x256)](_0x3a8d7f=>new Date(_0x3a8d7f[_0x5f969d(0x282)])>=_0x1cd5a5),_0x43f803=_0x405d00[_0x5f969d(0x256)](_0x209a7c=>new Date(_0x209a7c['dateTime'])>=_0x3440bd),_0x2f7f7b=_0x405d00[_0x5f969d(0x256)](_0x315f7a=>new Date(_0x315f7a[_0x5f969d(0x282)])>=_0x527d56);updatePeriodStats(_0x4e6109,'week'),updatePeriodStats(_0x43f803,_0x5f969d(0x235)),updatePeriodStats(_0x2f7f7b,_0x5f969d(0x270));}function updatePeriodStats(_0xc62c55,_0xd0faec){const _0x51dc3a=_0x4d5fa4,_0x580b9d=_0xc62c55[_0x51dc3a(0x21d)]((_0x1b22ab,_0x16cd64)=>_0x1b22ab+_0x16cd64['V']*_0x16cd64['PV'],0x0),_0x103019=_0x580b9d/_0xc62c55[_0x51dc3a(0x210)]||0x0;document[_0x51dc3a(0x25d)](_0xd0faec+_0x51dc3a(0x237))[_0x51dc3a(0x1ef)]=_0x51dc3a(0x222)+_0x580b9d['toFixed'](0x2)+'\x20FCFA',document[_0x51dc3a(0x25d)](_0xd0faec+_0x51dc3a(0x1e3))[_0x51dc3a(0x1ef)]=_0x51dc3a(0x277)+_0x103019[_0x51dc3a(0x265)](0x2)+'\x20FCFA';}toggleAnalysisButton[_0x4d5fa4(0x1fd)](_0x4d5fa4(0x287),function(){const _0xc4e5d4=_0x4d5fa4;analysisSection[_0xc4e5d4(0x204)]['display']===_0xc4e5d4(0x1f4)||analysisSection['style']['display']===''?(analysisSection['style']['display']=_0xc4e5d4(0x1e2),salesDetailsSection[_0xc4e5d4(0x204)][_0xc4e5d4(0x219)]=_0xc4e5d4(0x1f4),this[_0xc4e5d4(0x1ef)]=_0xc4e5d4(0x1ec),toggleSalesButton[_0xc4e5d4(0x1ef)]=_0xc4e5d4(0x25c),updateAnalysis(salesData)):(analysisSection[_0xc4e5d4(0x204)]['display']=_0xc4e5d4(0x1f4),this[_0xc4e5d4(0x1ef)]='Analyse\x20des\x20ventes');}),toggleSalesButton['addEventListener'](_0x4d5fa4(0x287),function(){const _0x1ea2aa=_0x4d5fa4;salesDetailsSection[_0x1ea2aa(0x204)]['display']===_0x1ea2aa(0x1f4)||salesDetailsSection[_0x1ea2aa(0x204)][_0x1ea2aa(0x219)]===''?(salesDetailsSection[_0x1ea2aa(0x204)][_0x1ea2aa(0x219)]=_0x1ea2aa(0x1e2),analysisSection[_0x1ea2aa(0x204)][_0x1ea2aa(0x219)]=_0x1ea2aa(0x1f4),this[_0x1ea2aa(0x1ef)]=_0x1ea2aa(0x278),toggleAnalysisButton['textContent']=_0x1ea2aa(0x1e8)):(salesDetailsSection[_0x1ea2aa(0x204)][_0x1ea2aa(0x219)]=_0x1ea2aa(0x1f4),this['textContent']=_0x1ea2aa(0x25c));});const themeToggle=document[_0x4d5fa4(0x25d)](_0x4d5fa4(0x205)),root=document[_0x4d5fa4(0x1f1)];function _0x4f0f(){const _0x1f8058=['signupContainer','TotalSales','charAt','analysisSection','once','prices','expired','toLowerCase','AIzaSyB7j8jA2BPVfQL3h3KaU6I6tpVO1esid5Q','utils','toggleSalesButton','Ventes','darkTheme','sort','every','369496wtFdsT','innerHTML','writeFile','dashboardContainer','salesEndDate','subscriptionRequiredModal','removeChild','\x20FCFA)','add','tbody\x20tr','setAttribute','push','preventDefault','querySelector','ventes_wifi_zone.xlsx','exportExcel','Prix\x20de\x20vente','filter','insertRow','total','product','39ZPZqox','submit','Détail\x20des\x20ventes','getElementById','<option\x20value=\x22\x22>Sélectionner\x20un\x20produit</option>','users/','7228895ZkvuUc','1:371584164801:web:348d34b70ff238cbe8c540','Error\x20creating\x20user:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20entrée\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','includes','toFixed','database','password','salesStartDate','update','confirmDelete','Utilisateur\x20introuvable','toLocaleString','getItem','#searchInputs\x20input','\x20FCFA','threeMonth','Mot\x20de\x20passe\x20incorrect','endAt','className','href','salesForm','getTime','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','Masquer\x20le\x20détail\x20des\x20ventes','salesDetailsSection','7062831izYhwY','active','error','aria-label','insertCell','loginForm','totalSales','signupUsername','dateTime','endDate','prix','remove','flex','click','values','createElement','labels','then','destroy','stockTableGlobal','line','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrée:','confirm-dialog','block','AverageSales','orderByChild','loginContainer','https://ysa100-default-rtdb.firebaseio.com','sales','Analyse\x20des\x20ventes','classList','querySelectorAll','sales/','Masquer\x20l\x27analyse\x20des\x20ventes','5562cFNgnY','resolve','textContent','delete-icon','documentElement','310suORnw','value','none','limitToLast','7KkzjQN','Inscription\x20réussie\x20!\x20Connectez-vous.','td:first-child','setItem','exists','370964UoHvvR','353aWwvuo','addEventListener','reset','Ce\x20nom\x20d\x27utilisateur\x20est\x20déjà\x20utilisé.','span','signupPassword','ref','signupForm','style','theme-toggle','getContext','appendChild','table_to_sheet','toUpperCase','loginFromSignup','book_new','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','rgb(0,\x20255,\x20255)','th[data-sort]','input','length','averageSales','signupButton','onclick','371584164801','book_append_sheet','forEach','slice','light-theme','display','dataset','change','toISOString','reduce','userInfo','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.','admin/subscription','TicketsTotal','Total\x20des\x20ventes:\x20','APP','option','Activer\x20le\x20mode\x20clair','3548680KXeJyf','stopPropagation','DOMContentLoaded','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée\x20:','rgba(255,\x20255,\x20255,\x200.1)','ysa100.firebaseapp.com','catch','true','set','key','val','tbody','4659834VnDDsb','Entrée\x20supprimée\x20avec\x20succès','body','month'];_0x4f0f=function(){return _0x1f8058;};return _0x4f0f();}let isDarkTheme=!![];function setTheme(_0x2d3361){const _0x538e49=_0x4d5fa4;_0x2d3361?(root[_0x538e49(0x1e9)]['remove']('light-theme'),themeToggle['textContent']='🌙',themeToggle[_0x538e49(0x24f)]('aria-label',_0x538e49(0x225))):(root[_0x538e49(0x1e9)][_0x538e49(0x24d)](_0x538e49(0x218)),themeToggle[_0x538e49(0x1ef)]='☀️',themeToggle['setAttribute'](_0x538e49(0x27d),'Activer\x20le\x20mode\x20sombre')),isDarkTheme=_0x2d3361,localStorage[_0x538e49(0x1f9)](_0x538e49(0x242),_0x2d3361);}themeToggle[_0x4d5fa4(0x1fd)](_0x4d5fa4(0x287),()=>{setTheme(!isDarkTheme);}),document[_0x4d5fa4(0x1fd)](_0x4d5fa4(0x228),()=>{const _0x2daee0=_0x4d5fa4,_0xc9300f=localStorage['getItem']('darkTheme');_0xc9300f!==null?setTheme(_0xc9300f===_0x2daee0(0x22d)):setTheme(![]);}),document[_0x4d5fa4(0x25d)]('filterStockDates')[_0x4d5fa4(0x1fd)]('click',function(){const _0x2829e3=_0x4d5fa4,_0x579098=new Date(document[_0x2829e3(0x25d)]('stockStartDate')[_0x2829e3(0x1f3)]),_0x5b9c62=new Date(document['getElementById']('stockEndDate')[_0x2829e3(0x1f3)]);updateStockTables(_0x579098,_0x5b9c62);}),document[_0x4d5fa4(0x25d)]('filterSalesDates')['addEventListener'](_0x4d5fa4(0x287),function(){const _0x493e80=_0x4d5fa4,_0x926a42=new Date(document[_0x493e80(0x25d)](_0x493e80(0x268))['value']),_0xe2ec93=new Date(document[_0x493e80(0x25d)](_0x493e80(0x249))[_0x493e80(0x1f3)]),_0x1acdc9=salesData[_0x493e80(0x256)](_0x5c4a59=>{const _0x47f963=_0x493e80,_0x365398=new Date(_0x5c4a59[_0x47f963(0x282)]);return(!_0x926a42||_0x365398>=_0x926a42)&&(!_0xe2ec93||_0x365398<=_0xe2ec93);});renderTable(_0x1acdc9),updateAnalysis(_0x1acdc9);});function updateStockTables(_0x1402b6,_0x5aecfb){const _0x57d9d0=_0x4d5fa4,_0x505787=document[_0x57d9d0(0x25d)](_0x57d9d0(0x1de));_0x505787[_0x57d9d0(0x252)](_0x57d9d0(0x231))[_0x57d9d0(0x246)]='',database[_0x57d9d0(0x202)](_0x57d9d0(0x1eb)+currentUser)['once']('value')[_0x57d9d0(0x28b)](_0x3a23bb=>{const _0x4baba5=_0x57d9d0,_0x55d3a9={};_0x3a23bb[_0x4baba5(0x216)](_0x46e1b9=>{const _0x2a7df7=_0x4baba5,_0xe147d=_0x46e1b9[_0x2a7df7(0x230)](),_0x5b2097=new Date(_0xe147d['dateTime']);(!_0x1402b6||_0x5b2097>=_0x1402b6)&&(!_0x5aecfb||_0x5b2097<=_0x5aecfb)&&((!_0x55d3a9[_0xe147d[_0x2a7df7(0x259)]]||_0x5b2097>new Date(_0x55d3a9[_0xe147d[_0x2a7df7(0x259)]]['dateTime']))&&(_0x55d3a9[_0xe147d['product']]=_0xe147d));}),Object[_0x4baba5(0x288)](_0x55d3a9)[_0x4baba5(0x216)](_0x52c929=>{const _0x4d510d=_0x4baba5,_0x104372=_0x505787[_0x4d510d(0x252)](_0x4d510d(0x231))[_0x4d510d(0x257)]();_0x104372[_0x4d510d(0x27e)](0x0)['textContent']=_0x52c929[_0x4d510d(0x259)],_0x104372['insertCell'](0x1)[_0x4d510d(0x1ef)]=_0x52c929['SF'],_0x104372[_0x4d510d(0x27e)](0x2)[_0x4d510d(0x1ef)]=new Date(_0x52c929['dateTime'])[_0x4d510d(0x26c)]();}),setupSort(_0x505787);});}function showSubscriptionRequiredModal(){const _0xdb2c82=_0x4d5fa4;document[_0xdb2c82(0x25d)]('subscriptionRequiredModal')['style']['display']=_0xdb2c82(0x286);}function hideSubscriptionRequiredModal(){const _0x1f994e=_0x4d5fa4;document[_0x1f994e(0x25d)](_0x1f994e(0x24a))[_0x1f994e(0x204)][_0x1f994e(0x219)]=_0x1f994e(0x1f4);}function redirectToSubscription(){const _0x4cd212=_0x4d5fa4;window['location'][_0x4cd212(0x274)]='index.html';}async function checkSubscriptionStatus(){const _0x5866d0=_0x4d5fa4;try{const _0x46c01=await adminRef[_0x5866d0(0x23a)](_0x5866d0(0x1f3)),_0x7ec733=_0x46c01[_0x5866d0(0x230)](),_0x197891=new Date();if(_0x7ec733&&_0x7ec733['status']===_0x5866d0(0x27b)){const _0x1eeac5=new Date(_0x7ec733[_0x5866d0(0x283)]);return _0x1eeac5>=_0x197891?!![]:(await adminRef[_0x5866d0(0x269)]({'status':_0x5866d0(0x23c)}),![]);}else return![];}catch(_0x5a6b31){console['error'](_0x5866d0(0x20c),_0x5a6b31);throw _0x5a6b31;}}updateTable(),updateStockTables(),analysisSection[_0x4d5fa4(0x204)][_0x4d5fa4(0x219)]=_0x4d5fa4(0x1f4),salesDetailsSection['style'][_0x4d5fa4(0x219)]=_0x4d5fa4(0x1f4),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x4d5fa4(0x26d)](_0x4d5fa4(0x242));savedTheme!==null&&setTheme(savedTheme===_0x4d5fa4(0x22d));