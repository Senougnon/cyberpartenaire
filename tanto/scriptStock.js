const _0x46222e=_0x1eb9;(function(_0x54f010,_0x1e32e5){const _0x19503e=_0x1eb9,_0x46074c=_0x54f010();while(!![]){try{const _0x4849da=-parseInt(_0x19503e(0x1f1))/0x1*(parseInt(_0x19503e(0x1b2))/0x2)+-parseInt(_0x19503e(0x224))/0x3*(-parseInt(_0x19503e(0x1d6))/0x4)+-parseInt(_0x19503e(0x1ec))/0x5*(-parseInt(_0x19503e(0x1c2))/0x6)+-parseInt(_0x19503e(0x212))/0x7*(-parseInt(_0x19503e(0x241))/0x8)+parseInt(_0x19503e(0x24a))/0x9+parseInt(_0x19503e(0x248))/0xa*(parseInt(_0x19503e(0x213))/0xb)+-parseInt(_0x19503e(0x1e6))/0xc;if(_0x4849da===_0x1e32e5)break;else _0x46074c['push'](_0x46074c['shift']());}catch(_0x40b642){_0x46074c['push'](_0x46074c['shift']());}}}(_0x146d,0x46929));const firebaseConfig={'apiKey':_0x46222e(0x1c6),'authDomain':_0x46222e(0x1d9),'databaseURL':_0x46222e(0x1a9),'projectId':'wifi-zone-tanto','storageBucket':_0x46222e(0x1aa),'messagingSenderId':_0x46222e(0x20d),'appId':_0x46222e(0x23e),'measurementId':_0x46222e(0x205)};firebase[_0x46222e(0x1be)](firebaseConfig);const database=firebase[_0x46222e(0x1a4)](),adminRef=database['ref'](_0x46222e(0x1ae)),loginForm=document['getElementById'](_0x46222e(0x239)),signupForm=document[_0x46222e(0x1cd)](_0x46222e(0x1a3)),loginContainer=document['getElementById'](_0x46222e(0x1f4)),signupContainer=document[_0x46222e(0x1cd)]('signupContainer'),dashboardContainer=document[_0x46222e(0x1cd)](_0x46222e(0x227)),salesForm=document['getElementById']('salesForm'),salesTable=document[_0x46222e(0x1cd)]('salesTable'),totalSalesElement=document[_0x46222e(0x1cd)](_0x46222e(0x1f9)),averageSalesElement=document[_0x46222e(0x1cd)](_0x46222e(0x24b)),userInfoElement=document[_0x46222e(0x1cd)](_0x46222e(0x238)),toggleAnalysisButton=document[_0x46222e(0x1cd)](_0x46222e(0x251)),toggleSalesButton=document['getElementById']('toggleSalesButton'),analysisSection=document[_0x46222e(0x1cd)](_0x46222e(0x226)),salesDetailsSection=document[_0x46222e(0x1cd)](_0x46222e(0x1bf)),signupButton=document[_0x46222e(0x1cd)](_0x46222e(0x1d4)),loginFromSignup=document['getElementById'](_0x46222e(0x1c8)),productSelect=document[_0x46222e(0x1cd)](_0x46222e(0x244)),stockTableGlobal=document['getElementById']('stockTableGlobal');let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x46222e(0x1cd)](_0x46222e(0x1f6))['value']=new Date()[_0x46222e(0x1d3)]()[_0x46222e(0x200)](0x0,0x10);function fetchTicketCategories(){const _0x53cf5e=_0x46222e;database[_0x53cf5e(0x231)](_0x53cf5e(0x1e3))['once'](_0x53cf5e(0x210))[_0x53cf5e(0x1bc)](_0x2abad5=>{const _0x2c6068=_0x53cf5e;ticketCategories=_0x2abad5[_0x2c6068(0x1ee)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x41345e=_0x46222e;productSelect[_0x41345e(0x1ac)]=_0x41345e(0x234);for(const _0x5b14f7 in ticketCategories){const _0xf7bc4a=ticketCategories[_0x5b14f7]['prix'][0x0],_0x490225=document['createElement']('option');_0x490225[_0x41345e(0x210)]=_0x5b14f7,_0x490225[_0x41345e(0x201)]=_0x5b14f7+'\x20('+_0xf7bc4a+_0x41345e(0x1c9),productSelect[_0x41345e(0x1e2)](_0x490225);}}fetchTicketCategories(),loginForm[_0x46222e(0x21f)]('submit',function(_0x55c7cd){const _0x10d960=_0x46222e;_0x55c7cd[_0x10d960(0x1a8)]();const _0x4b2a1e=document[_0x10d960(0x1cd)]('username')[_0x10d960(0x210)],_0x210473=document[_0x10d960(0x1cd)](_0x10d960(0x1f5))['value'];database[_0x10d960(0x231)](_0x10d960(0x1f2)+_0x4b2a1e)[_0x10d960(0x1b9)]('value')[_0x10d960(0x1bc)](_0x5e3ece=>{const _0x3ab16d=_0x10d960;_0x5e3ece[_0x3ab16d(0x1ea)]()?_0x5e3ece[_0x3ab16d(0x1ee)]()[_0x3ab16d(0x1f5)]===_0x210473?loginSuccess(_0x4b2a1e):alert(_0x3ab16d(0x1bd)):alert(_0x3ab16d(0x23b));});}),signupForm[_0x46222e(0x21f)](_0x46222e(0x230),function(_0x18d68e){const _0x177734=_0x46222e;_0x18d68e[_0x177734(0x1a8)]();const _0x3fe885=document['getElementById'](_0x177734(0x1a7))[_0x177734(0x210)],_0x5d691a=document['getElementById'](_0x177734(0x21a))[_0x177734(0x210)];database['ref'](_0x177734(0x1f2)+_0x3fe885)['once'](_0x177734(0x210))[_0x177734(0x1bc)](_0x3561fe=>{const _0x464b0c=_0x177734;_0x3561fe[_0x464b0c(0x1ea)]()?alert(_0x464b0c(0x217)):database[_0x464b0c(0x231)](_0x464b0c(0x1f2)+_0x3fe885)[_0x464b0c(0x22e)]({'password':_0x5d691a})[_0x464b0c(0x1bc)](()=>{const _0x55dfaa=_0x464b0c;alert('Inscription\x20rÃ©ussie\x20!\x20Connectez-vous.'),signupContainer[_0x55dfaa(0x1b0)][_0x55dfaa(0x223)]=_0x55dfaa(0x21b),loginContainer[_0x55dfaa(0x1b0)]['display']=_0x55dfaa(0x1c7);})['catch'](_0xa85621=>{const _0x2747d9=_0x464b0c;console['error'](_0x2747d9(0x21e),_0xa85621),alert(_0x2747d9(0x211));});});}),signupButton[_0x46222e(0x21f)](_0x46222e(0x1e7),function(){const _0x41e2cb=_0x46222e;loginContainer['style'][_0x41e2cb(0x223)]=_0x41e2cb(0x21b),signupContainer[_0x41e2cb(0x1b0)]['display']=_0x41e2cb(0x1c7);}),loginFromSignup[_0x46222e(0x21f)](_0x46222e(0x1e7),function(){const _0x585a95=_0x46222e;signupContainer[_0x585a95(0x1b0)][_0x585a95(0x223)]=_0x585a95(0x21b),loginContainer['style']['display']=_0x585a95(0x1c7);});function loginSuccess(_0x4bf80c){const _0x2a692d=_0x46222e;currentUser=_0x4bf80c,loginContainer[_0x2a692d(0x1b0)][_0x2a692d(0x223)]=_0x2a692d(0x21b),signupContainer['style'][_0x2a692d(0x223)]='none',dashboardContainer['style'][_0x2a692d(0x223)]=_0x2a692d(0x1c7),userInfoElement[_0x2a692d(0x201)]='Utilisateur:\x20'+_0x4bf80c,checkSubscriptionStatus()[_0x2a692d(0x1bc)](_0x3db39a=>{_0x3db39a?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x2a692d(0x23a)](_0x1fd776=>{const _0x4910bb=_0x2a692d;console[_0x4910bb(0x1c4)](_0x4910bb(0x1b5),_0x1fd776),alert(_0x4910bb(0x1dd));});}function listenForSalesDataChanges(){const _0x50f523=_0x46222e;salesDataListener=database[_0x50f523(0x231)](_0x50f523(0x1ab)+currentUser)['on']('value',_0x54fe5f=>{const _0x36b2cd=_0x50f523;salesData=[],_0x54fe5f['forEach'](_0x18336f=>{const _0x336326=_0x1eb9,_0x3c028a=_0x18336f['val']();_0x3c028a[_0x336326(0x206)]=_0x18336f[_0x336326(0x206)],_0x3c028a['total']=(_0x3c028a['V']*_0x3c028a['PV'])[_0x336326(0x1e9)](0x2),salesData[_0x336326(0x1c5)](_0x3c028a);}),analysisSection[_0x36b2cd(0x1b0)][_0x36b2cd(0x223)]===_0x36b2cd(0x1c7)&&updateAnalysis(salesData);});}function _0x1eb9(_0xc3b3f,_0x582517){const _0x146de8=_0x146d();return _0x1eb9=function(_0x1eb9d6,_0x4ece19){_0x1eb9d6=_0x1eb9d6-0x1a1;let _0x36090f=_0x146de8[_0x1eb9d6];return _0x36090f;},_0x1eb9(_0xc3b3f,_0x582517);}document[_0x46222e(0x1cd)](_0x46222e(0x244))[_0x46222e(0x21f)]('change',function(){const _0x15cdf0=_0x46222e,_0x5eeebf=this[_0x15cdf0(0x210)];database[_0x15cdf0(0x231)](_0x15cdf0(0x1ab)+currentUser)[_0x15cdf0(0x1d8)](_0x15cdf0(0x244))[_0x15cdf0(0x1fe)](_0x5eeebf)[_0x15cdf0(0x1ed)](0x1)[_0x15cdf0(0x1b9)](_0x15cdf0(0x210))[_0x15cdf0(0x1bc)](_0x41bb34=>{const _0x301f08=_0x15cdf0;if(_0x41bb34[_0x301f08(0x1ea)]()){const _0x299f93=Object['values'](_0x41bb34[_0x301f08(0x1ee)]())[0x0];document['getElementById']('SI')[_0x301f08(0x210)]=_0x299f93['SF']||0x0;}else document[_0x301f08(0x1cd)]('SI')[_0x301f08(0x210)]=0x0;}),updatePV();}),document[_0x46222e(0x1cd)]('V')[_0x46222e(0x21f)](_0x46222e(0x1b3),updateSF),document[_0x46222e(0x1cd)](_0x46222e(0x1fc))[_0x46222e(0x21f)](_0x46222e(0x1b3),updateSF);function updateSF(){const _0x242c60=_0x46222e,_0x3f6790=parseInt(document['getElementById']('SI')['value'])||0x0,_0x39eefb=parseInt(document[_0x242c60(0x1cd)](_0x242c60(0x1fc))[_0x242c60(0x210)])||0x0,_0x503646=parseInt(document[_0x242c60(0x1cd)]('V')[_0x242c60(0x210)])||0x0;document['getElementById']('SF')[_0x242c60(0x210)]=_0x3f6790+_0x39eefb-_0x503646;}function updatePV(){const _0x266c6d=_0x46222e,_0x3fff41=document[_0x266c6d(0x1cd)]('product')[_0x266c6d(0x210)],_0x71444e=ticketCategories[_0x3fff41]?.[_0x266c6d(0x24f)][0x0];document['getElementById']('PV')[_0x266c6d(0x210)]=_0x71444e||0x0;}salesForm['addEventListener']('submit',function(_0x259c1e){const _0x29fa97=_0x46222e;_0x259c1e[_0x29fa97(0x1a8)]();const _0x429e39={'dateTime':document[_0x29fa97(0x1cd)](_0x29fa97(0x1f6))['value'],'product':document[_0x29fa97(0x1cd)]('product')[_0x29fa97(0x210)],'SI':parseInt(document['getElementById']('SI')[_0x29fa97(0x210)])||0x0,'APP':parseInt(document[_0x29fa97(0x1cd)](_0x29fa97(0x1fc))[_0x29fa97(0x210)])||0x0,'V':parseInt(document[_0x29fa97(0x1cd)]('V')['value'])||0x0,'SF':parseInt(document[_0x29fa97(0x1cd)]('SF')[_0x29fa97(0x210)])||0x0,'PV':parseFloat(document[_0x29fa97(0x1cd)]('PV')['value'])||0x0};database[_0x29fa97(0x231)](_0x29fa97(0x1ab)+currentUser)[_0x29fa97(0x1c5)](_0x429e39)['then'](()=>{const _0x58208a=_0x29fa97;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x58208a(0x1b1)](),document[_0x58208a(0x1cd)](_0x58208a(0x1f6))['value']=new Date()[_0x58208a(0x1d3)]()[_0x58208a(0x200)](0x0,0x10);})['catch'](_0x44f92d=>{const _0x2a0ec0=_0x29fa97;console[_0x2a0ec0(0x1c4)](_0x2a0ec0(0x233),_0x44f92d),alert(_0x2a0ec0(0x1de));});});function updateTable(){const _0x26b7aa=_0x46222e,_0x2e169a=salesTable[_0x26b7aa(0x1ce)]('tbody');_0x2e169a['innerHTML']='',database[_0x26b7aa(0x231)](_0x26b7aa(0x1ab)+currentUser)['once'](_0x26b7aa(0x210))[_0x26b7aa(0x1bc)](_0xd1da4=>{const _0x1eaa9e=_0x26b7aa;salesData=[],_0xd1da4[_0x1eaa9e(0x221)](_0x100ffe=>{const _0x22623c=_0x1eaa9e,_0x32e46e=_0x100ffe[_0x22623c(0x1ee)]();_0x32e46e[_0x22623c(0x22d)]=(_0x32e46e['V']*_0x32e46e['PV'])[_0x22623c(0x1e9)](0x2),salesData[_0x22623c(0x1c5)](_0x32e46e);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x21f172=_0x46222e,_0x1c9180=document[_0x21f172(0x1cd)](_0x21f172(0x1c1));_0x1c9180[_0x21f172(0x1ce)](_0x21f172(0x203))[_0x21f172(0x1ac)]='',database[_0x21f172(0x231)](_0x21f172(0x1ab)+currentUser)[_0x21f172(0x1b9)](_0x21f172(0x210))[_0x21f172(0x1bc)](_0x1c0d48=>{const _0x380d72=_0x21f172,_0x514159={};_0x1c0d48[_0x380d72(0x221)](_0x3701c2=>{const _0x441218=_0x380d72,_0x4ac9b4=_0x3701c2[_0x441218(0x1ee)]();(!_0x514159[_0x4ac9b4[_0x441218(0x244)]]||new Date(_0x4ac9b4[_0x441218(0x1f6)])>new Date(_0x514159[_0x4ac9b4[_0x441218(0x244)]][_0x441218(0x1f6)]))&&(_0x514159[_0x4ac9b4['product']]=_0x4ac9b4);}),Object[_0x380d72(0x1c0)](_0x514159)['forEach'](_0x411fab=>{const _0x469609=_0x380d72,_0xf73372=_0x1c9180['querySelector'](_0x469609(0x203))[_0x469609(0x1ff)]();_0xf73372[_0x469609(0x208)](0x0)[_0x469609(0x201)]=_0x411fab['product'],_0xf73372[_0x469609(0x208)](0x1)['textContent']=_0x411fab['SF'],_0xf73372[_0x469609(0x208)](0x2)['textContent']=new Date(_0x411fab[_0x469609(0x1f6)])[_0x469609(0x215)]();}),setupSort(_0x1c9180);});}function exportToExcel(){const _0xaaaa5b=_0x46222e,_0x79e1c8=XLSX['utils'][_0xaaaa5b(0x22f)](),_0x37ca50=XLSX[_0xaaaa5b(0x1ad)]['table_to_sheet'](document[_0xaaaa5b(0x1cd)](_0xaaaa5b(0x1fa)));XLSX[_0xaaaa5b(0x1ad)][_0xaaaa5b(0x21d)](_0x79e1c8,_0x37ca50,_0xaaaa5b(0x214)),XLSX[_0xaaaa5b(0x245)](_0x79e1c8,_0xaaaa5b(0x20b));}document[_0x46222e(0x1cd)](_0x46222e(0x1cf))[_0x46222e(0x21f)](_0x46222e(0x1e7),exportToExcel);function deleteEntry(_0x48799e){const _0x5cb897=_0x46222e;database['ref'](_0x5cb897(0x1ab)+currentUser+'/'+_0x48799e)[_0x5cb897(0x1b9)](_0x5cb897(0x210))[_0x5cb897(0x1bc)](_0x2a39d7=>{const _0x13d5a5=_0x5cb897,_0xfd4a7e=_0x2a39d7[_0x13d5a5(0x1ee)]();return database[_0x13d5a5(0x231)](_0x13d5a5(0x1ab)+currentUser+'/'+_0x48799e)[_0x13d5a5(0x1d1)]()[_0x13d5a5(0x1bc)](()=>{const _0x1830da=_0x13d5a5;return console[_0x1830da(0x20a)](_0x1830da(0x228)),updateStockAfterDeletion(_0xfd4a7e);});})[_0x5cb897(0x1bc)](()=>{return updateTable();})[_0x5cb897(0x1bc)](()=>{updateStockTables(),updateAnalysis();})[_0x5cb897(0x23a)](_0x1c1fd2=>{const _0x56e06d=_0x5cb897;console[_0x56e06d(0x1c4)](_0x56e06d(0x202),_0x1c1fd2);});}function updateStockAfterDeletion(_0x3d9b9b){const _0x46b0e2=_0x46222e;return database[_0x46b0e2(0x231)](_0x46b0e2(0x1ab)+currentUser)[_0x46b0e2(0x1d8)](_0x46b0e2(0x1f6))[_0x46b0e2(0x237)](_0x3d9b9b[_0x46b0e2(0x1f6)])[_0x46b0e2(0x1ed)](0x2)['once'](_0x46b0e2(0x210))[_0x46b0e2(0x1bc)](_0x1fe4bc=>{const _0x5288d5=_0x46b0e2;let _0x30ce65=[];_0x1fe4bc[_0x5288d5(0x221)](_0x37a85b=>{const _0x4b130a=_0x5288d5;_0x30ce65[_0x4b130a(0x1c5)]({'key':_0x37a85b[_0x4b130a(0x206)],..._0x37a85b[_0x4b130a(0x1ee)]()});}),_0x30ce65['sort']((_0x32259f,_0x203507)=>new Date(_0x203507[_0x5288d5(0x1f6)])-new Date(_0x32259f[_0x5288d5(0x1f6)]));if(_0x30ce65[_0x5288d5(0x1fb)]>0x1&&_0x30ce65[0x0]['key']!==_0x3d9b9b['key']){const _0x190850=_0x30ce65[0x1],_0x112f01=_0x190850['SF']+_0x3d9b9b['V']-_0x3d9b9b[_0x5288d5(0x1fc)];return database[_0x5288d5(0x231)]('sales/'+currentUser+'/'+_0x190850[_0x5288d5(0x206)])[_0x5288d5(0x1d0)]({'SF':_0x112f01});}return Promise['resolve']();});}function updateTable(){const _0x4305a4=_0x46222e;return database[_0x4305a4(0x231)]('sales/'+currentUser)[_0x4305a4(0x1b9)]('value')['then'](_0x300650=>{const _0x20a55e=_0x4305a4;salesData=[],_0x300650[_0x20a55e(0x221)](_0x43e62a=>{const _0xf8cc43=_0x20a55e,_0x1ab414=_0x43e62a[_0xf8cc43(0x1ee)]();_0x1ab414['key']=_0x43e62a[_0xf8cc43(0x206)],_0x1ab414[_0xf8cc43(0x22d)]=(_0x1ab414['V']*_0x1ab414['PV'])['toFixed'](0x2),salesData[_0xf8cc43(0x1c5)](_0x1ab414);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x5af2a5){const _0x26317c=_0x46222e,_0x9266af=salesTable['querySelector'](_0x26317c(0x203));_0x9266af[_0x26317c(0x1ac)]='',_0x5af2a5[_0x26317c(0x221)](_0x2c5da4=>{const _0x1327bc=_0x26317c,_0x218ca8=_0x9266af[_0x1327bc(0x1ff)]();_0x218ca8['dataset'][_0x1327bc(0x206)]=_0x2c5da4[_0x1327bc(0x206)],_0x218ca8[_0x1327bc(0x208)](0x0)[_0x1327bc(0x201)]=new Date(_0x2c5da4[_0x1327bc(0x1f6)])[_0x1327bc(0x215)](),_0x218ca8[_0x1327bc(0x208)](0x1)[_0x1327bc(0x201)]=_0x2c5da4[_0x1327bc(0x244)],_0x218ca8[_0x1327bc(0x208)](0x2)[_0x1327bc(0x201)]=_0x2c5da4['SI'],_0x218ca8[_0x1327bc(0x208)](0x3)[_0x1327bc(0x201)]=_0x2c5da4[_0x1327bc(0x1fc)],_0x218ca8[_0x1327bc(0x208)](0x4)[_0x1327bc(0x201)]=_0x2c5da4['V'],_0x218ca8['insertCell'](0x5)['textContent']=_0x2c5da4['SF'],_0x218ca8['insertCell'](0x6)[_0x1327bc(0x201)]=_0x2c5da4['PV'],_0x218ca8[_0x1327bc(0x208)](0x7)[_0x1327bc(0x201)]=_0x2c5da4[_0x1327bc(0x22d)];}),addDeleteIcons();}function addDeleteIcons(){const _0x3a23e0=_0x46222e,_0x568729=salesTable[_0x3a23e0(0x1bb)](_0x3a23e0(0x1b8));_0x568729[_0x3a23e0(0x221)](_0x5ad613=>{const _0x3846fe=_0x3a23e0,_0x1bb581=document[_0x3846fe(0x23c)]('span');_0x1bb581[_0x3846fe(0x1ac)]='â',_0x1bb581[_0x3846fe(0x1cb)]='delete-icon',_0x1bb581[_0x3846fe(0x1a1)]=_0x289165=>{const _0x3f2614=_0x3846fe;_0x289165[_0x3f2614(0x216)](),showConfirmDialog(_0x5ad613[_0x3f2614(0x204)][_0x3f2614(0x206)]);},_0x5ad613['querySelector']('td:first-child')['appendChild'](_0x1bb581);});}function showConfirmDialog(_0xb08de0){const _0x1f9f63=_0x46222e,_0x448a4c=document[_0x1f9f63(0x23c)](_0x1f9f63(0x1e0));_0x448a4c[_0x1f9f63(0x1cb)]=_0x1f9f63(0x23d),_0x448a4c[_0x1f9f63(0x1ac)]=_0x1f9f63(0x1d2),document[_0x1f9f63(0x22b)][_0x1f9f63(0x1e2)](_0x448a4c),document['getElementById'](_0x1f9f63(0x242))[_0x1f9f63(0x1a1)]=()=>{deleteEntry(_0xb08de0),document['body']['removeChild'](_0x448a4c);},document['getElementById'](_0x1f9f63(0x1fd))[_0x1f9f63(0x1a1)]=()=>{const _0x3f144c=_0x1f9f63;document[_0x3f144c(0x22b)]['removeChild'](_0x448a4c);};}function setupSearch(){const _0x161fe3=_0x46222e,_0x131501=document[_0x161fe3(0x1bb)](_0x161fe3(0x250));_0x131501[_0x161fe3(0x221)](_0x167af8=>{const _0x4dbeba=_0x161fe3;_0x167af8[_0x4dbeba(0x21f)](_0x4dbeba(0x1b3),()=>{const _0x2ca8fd=_0x4dbeba,_0x2ee455=salesData[_0x2ca8fd(0x246)](_0x463276=>{return Object['keys'](_0x463276)['every'](_0x120270=>{const _0x3b1c0c=_0x1eb9,_0x1d2a34=document[_0x3b1c0c(0x1cd)](_0x3b1c0c(0x1a5)+(_0x120270['charAt'](0x0)[_0x3b1c0c(0x1ef)]()+_0x120270[_0x3b1c0c(0x200)](0x1)))?.[_0x3b1c0c(0x210)][_0x3b1c0c(0x225)]()||'';return _0x463276[_0x120270][_0x3b1c0c(0x20f)]()['toLowerCase']()[_0x3b1c0c(0x1d7)](_0x1d2a34);});});renderTable(_0x2ee455),updateAnalysis(_0x2ee455);});});}function _0x146d(){const _0x206530=['244600435822','salesChart','toString','value','Erreur\x20lors\x20de\x20la\x20crÃ©ation\x20du\x20compte','2807snjKsd','62161bFcfrK','Ventes','toLocaleString','stopPropagation','Ce\x20nom\x20d\x27utilisateur\x20est\x20dÃ©jÃ \x20utilisÃ©.','aria-label','sort','signupPassword','none','Total\x20des\x20ventes:\x20','book_append_sheet','Error\x20creating\x20user:','addEventListener','DÃ©tail\x20des\x20ventes','forEach','add','display','23571WoyuXT','toLowerCase','analysisSection','dashboardContainer','EntrÃ©e\x20supprimÃ©e\x20avec\x20succÃ¨s','flex','Analyse\x20des\x20ventes','body','darkTheme','total','set','book_new','submit','ref','expired','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrÃ©e\x20:','<option\x20value=\x22\x22>SÃ©lectionner\x20un\x20produit</option>','getTime','setAttribute','endAt','userInfo','loginForm','catch','Utilisateur\x20introuvable','createElement','confirm-dialog','1:244600435822:web:574f154301e4d852d1627f','active','getContext','9224eLiGXr','confirmDelete','threeMonth','product','writeFile','filter','reduce','510cvniLp','labels','3083661xcyOvC','averageSales','month','stockEndDate','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','prix','#searchInputs\x20input','toggleAnalysisButton','onclick','Prix\x20de\x20vente','signupForm','database','search','TotalSales','signupUsername','preventDefault','https://wifi-zone-tanto-default-rtdb.firebaseio.com','wifi-zone-tanto.firebasestorage.app','sales/','innerHTML','utils','admin/subscription','status','style','reset','2JwJJTQ','input','sales','Erreur\x20lors\x20de\x20la\x20vÃ©rification\x20de\x20l\x27abonnement\x20:','light-theme','Activer\x20le\x20mode\x20clair','tbody\x20tr','once','AverageSales','querySelectorAll','then','Mot\x20de\x20passe\x20incorrect','initializeApp','salesDetailsSection','values','stockTableGlobal','274818xINTlt','week','error','push','AIzaSyDg4IhUtLPJZTJE9ZIvbfB6Td9hNVmLTT0','block','loginFromSignup','\x20FCFA)','DOMContentLoaded','className','line','getElementById','querySelector','exportExcel','update','remove','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Ãtes-vous\x20sÃ»r\x20de\x20vouloir\x20supprimer\x20cette\x20entrÃ©e\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','toISOString','signupButton','salesEndDate','276lshDDX','includes','orderByChild','wifi-zone-tanto.firebaseapp.com','\x20FCFA','classList','prices','Erreur\x20lors\x20de\x20la\x20vÃ©rification\x20de\x20l\x27abonnement.','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrÃ©e.','rgba(255,\x20255,\x20255,\x200.1)','div','theme-toggle','appendChild','TicketsTotal','subscriptionRequiredModal','rgb(255,\x2099,\x20132)','12152064oJLyCk','click','index.html','toFixed','exists','documentElement','5tvwPSl','limitToLast','val','toUpperCase','salesStartDate','379382sVafhu','users/','getItem','loginContainer','password','dateTime','true','rgb(0,\x20255,\x20255)','totalSales','salesTable','length','APP','cancelDelete','equalTo','insertRow','slice','textContent','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrÃ©e:','tbody','dataset','G-V9RB51B16P','key','destroy','insertCell','Masquer\x20l\x27analyse\x20des\x20ventes','log','ventes_wifi_zone.xlsx','filterStockDates'];_0x146d=function(){return _0x206530;};return _0x146d();}function setupSort(_0x4e4868){const _0x195855=_0x46222e,_0x212c46=_0x4e4868['querySelectorAll']('th[data-sort]');_0x212c46[_0x195855(0x221)](_0x2235ce=>{const _0x4c4bec=_0x195855;_0x2235ce[_0x4c4bec(0x21f)](_0x4c4bec(0x1e7),()=>{const _0x2918f3=_0x4c4bec,_0x5d033f=_0x2235ce[_0x2918f3(0x204)][_0x2918f3(0x219)],_0x45e3d2=_0x4e4868['id']===_0x2918f3(0x1fa)?salesData:stockData;_0x45e3d2[_0x2918f3(0x219)]((_0x487911,_0x407c25)=>{if(_0x487911[_0x5d033f]<_0x407c25[_0x5d033f])return-0x1;if(_0x487911[_0x5d033f]>_0x407c25[_0x5d033f])return 0x1;return 0x0;}),_0x4e4868['id']===_0x2918f3(0x1fa)?(renderTable(_0x45e3d2),updateAnalysis(_0x45e3d2)):renderStockTable(_0x45e3d2,_0x4e4868);});});}function renderStockTable(_0x196979,_0x47238f){const _0x2fec28=_0x46222e,_0x114f0a=_0x47238f['querySelector']('tbody');_0x114f0a[_0x2fec28(0x1ac)]='',_0x196979[_0x2fec28(0x221)](_0x396b4f=>{const _0x499a13=_0x2fec28,_0x198647=_0x114f0a['insertRow']();_0x198647[_0x499a13(0x208)](0x0)[_0x499a13(0x201)]=_0x396b4f[_0x499a13(0x244)],_0x198647[_0x499a13(0x208)](0x1)['textContent']=_0x396b4f['SF'],_0x198647[_0x499a13(0x208)](0x2)['textContent']=new Date(_0x396b4f[_0x499a13(0x1f6)])[_0x499a13(0x215)]();});}function updateAnalysis(_0x9a3f78=salesData){const _0x49b459=_0x46222e;let _0x1a29b3=0x0,_0x46f9c2=0x0;const _0x1df3bd={'labels':[],'sales':[],'prices':[]};_0x9a3f78['forEach'](_0x2d2df4=>{const _0x5ff1b1=_0x1eb9;_0x1a29b3+=_0x2d2df4['V']*_0x2d2df4['PV'],_0x46f9c2++,_0x1df3bd[_0x5ff1b1(0x249)]['push'](new Date(_0x2d2df4[_0x5ff1b1(0x1f6)])[_0x5ff1b1(0x215)]()),_0x1df3bd[_0x5ff1b1(0x1b4)][_0x5ff1b1(0x1c5)](_0x2d2df4['V']),_0x1df3bd[_0x5ff1b1(0x1dc)][_0x5ff1b1(0x1c5)](_0x2d2df4['PV']);});const _0x3f260e=_0x1a29b3/_0x46f9c2||0x0;totalSalesElement[_0x49b459(0x201)]=_0x49b459(0x21c)+_0x1a29b3[_0x49b459(0x1e9)](0x2)+'\x20FCFA',averageSalesElement[_0x49b459(0x201)]=_0x49b459(0x24e)+_0x3f260e[_0x49b459(0x1e9)](0x2)+'\x20FCFA',updateChart(_0x1df3bd),updatePeriodAnalysis(_0x9a3f78);}function updateChart(_0x238db9){const _0x49b32d=_0x46222e,_0x47d634=document[_0x49b32d(0x1cd)](_0x49b32d(0x20e))[_0x49b32d(0x240)]('2d');salesChart&&salesChart[_0x49b32d(0x207)](),salesChart=new Chart(_0x47d634,{'type':_0x49b32d(0x1cc),'data':{'labels':_0x238db9['labels'],'datasets':[{'label':_0x49b32d(0x214),'data':_0x238db9['sales'],'borderColor':_0x49b32d(0x1f8),'tension':0.1},{'label':_0x49b32d(0x1a2),'data':_0x238db9[_0x49b32d(0x1dc)],'borderColor':_0x49b32d(0x1e5),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':_0x49b32d(0x1df)},'ticks':{'color':_0x49b32d(0x1f8)}},'x':{'grid':{'color':_0x49b32d(0x1df)},'ticks':{'color':_0x49b32d(0x1f8)}}},'plugins':{'legend':{'labels':{'color':'rgb(0,\x20255,\x20255)'}}}}});}function updatePeriodAnalysis(_0x179757){const _0x47ef33=_0x46222e,_0x224faf=new Date(),_0x14e5e6=new Date(_0x224faf[_0x47ef33(0x235)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x1a5a9d=new Date(_0x224faf['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x5d02f2=new Date(_0x224faf[_0x47ef33(0x235)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x257a34=_0x179757[_0x47ef33(0x246)](_0x47ce8e=>new Date(_0x47ce8e['dateTime'])>=_0x14e5e6),_0x3da9b0=_0x179757[_0x47ef33(0x246)](_0x1efc20=>new Date(_0x1efc20['dateTime'])>=_0x1a5a9d),_0x318ce5=_0x179757[_0x47ef33(0x246)](_0x1b5631=>new Date(_0x1b5631['dateTime'])>=_0x5d02f2);updatePeriodStats(_0x257a34,_0x47ef33(0x1c3)),updatePeriodStats(_0x3da9b0,_0x47ef33(0x24c)),updatePeriodStats(_0x318ce5,_0x47ef33(0x243));}function updatePeriodStats(_0x5c7450,_0x335e16){const _0x47ecc4=_0x46222e,_0x5c1d02=_0x5c7450[_0x47ecc4(0x247)]((_0x12e55c,_0x3dd3a0)=>_0x12e55c+_0x3dd3a0['V']*_0x3dd3a0['PV'],0x0),_0xd633ee=_0x5c1d02/_0x5c7450[_0x47ecc4(0x1fb)]||0x0;document[_0x47ecc4(0x1cd)](_0x335e16+_0x47ecc4(0x1a6))[_0x47ecc4(0x201)]=_0x47ecc4(0x21c)+_0x5c1d02[_0x47ecc4(0x1e9)](0x2)+_0x47ecc4(0x1da),document[_0x47ecc4(0x1cd)](_0x335e16+_0x47ecc4(0x1ba))[_0x47ecc4(0x201)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0xd633ee[_0x47ecc4(0x1e9)](0x2)+_0x47ecc4(0x1da);}toggleAnalysisButton[_0x46222e(0x21f)](_0x46222e(0x1e7),function(){const _0x2a6c0d=_0x46222e;analysisSection[_0x2a6c0d(0x1b0)]['display']==='none'||analysisSection[_0x2a6c0d(0x1b0)][_0x2a6c0d(0x223)]===''?(analysisSection[_0x2a6c0d(0x1b0)][_0x2a6c0d(0x223)]=_0x2a6c0d(0x1c7),salesDetailsSection[_0x2a6c0d(0x1b0)][_0x2a6c0d(0x223)]='none',this[_0x2a6c0d(0x201)]=_0x2a6c0d(0x209),toggleSalesButton[_0x2a6c0d(0x201)]='DÃ©tail\x20des\x20ventes',updateAnalysis(salesData)):(analysisSection[_0x2a6c0d(0x1b0)]['display']='none',this[_0x2a6c0d(0x201)]='Analyse\x20des\x20ventes');}),toggleSalesButton[_0x46222e(0x21f)](_0x46222e(0x1e7),function(){const _0x5ace7b=_0x46222e;salesDetailsSection[_0x5ace7b(0x1b0)]['display']===_0x5ace7b(0x21b)||salesDetailsSection[_0x5ace7b(0x1b0)][_0x5ace7b(0x223)]===''?(salesDetailsSection[_0x5ace7b(0x1b0)][_0x5ace7b(0x223)]=_0x5ace7b(0x1c7),analysisSection['style'][_0x5ace7b(0x223)]=_0x5ace7b(0x21b),this[_0x5ace7b(0x201)]='Masquer\x20le\x20dÃ©tail\x20des\x20ventes',toggleAnalysisButton[_0x5ace7b(0x201)]=_0x5ace7b(0x22a)):(salesDetailsSection[_0x5ace7b(0x1b0)][_0x5ace7b(0x223)]=_0x5ace7b(0x21b),this[_0x5ace7b(0x201)]=_0x5ace7b(0x220));});const themeToggle=document[_0x46222e(0x1cd)](_0x46222e(0x1e1)),root=document[_0x46222e(0x1eb)];let isDarkTheme=!![];function setTheme(_0xa51f72){const _0x4e50ff=_0x46222e;_0xa51f72?(root[_0x4e50ff(0x1db)]['remove'](_0x4e50ff(0x1b6)),themeToggle['textContent']='ð',themeToggle['setAttribute']('aria-label',_0x4e50ff(0x1b7))):(root[_0x4e50ff(0x1db)][_0x4e50ff(0x222)]('light-theme'),themeToggle[_0x4e50ff(0x201)]='âï¸',themeToggle[_0x4e50ff(0x236)](_0x4e50ff(0x218),'Activer\x20le\x20mode\x20sombre')),isDarkTheme=_0xa51f72,localStorage['setItem']('darkTheme',_0xa51f72);}themeToggle[_0x46222e(0x21f)](_0x46222e(0x1e7),()=>{setTheme(!isDarkTheme);}),document[_0x46222e(0x21f)](_0x46222e(0x1ca),()=>{const _0x370288=_0x46222e,_0x5b2408=localStorage[_0x370288(0x1f3)]('darkTheme');_0x5b2408!==null?setTheme(_0x5b2408===_0x370288(0x1f7)):setTheme(![]);}),document[_0x46222e(0x1cd)](_0x46222e(0x20c))[_0x46222e(0x21f)]('click',function(){const _0x325d9d=_0x46222e,_0x194001=new Date(document[_0x325d9d(0x1cd)]('stockStartDate')[_0x325d9d(0x210)]),_0x4be217=new Date(document[_0x325d9d(0x1cd)](_0x325d9d(0x24d))[_0x325d9d(0x210)]);updateStockTables(_0x194001,_0x4be217);}),document[_0x46222e(0x1cd)]('filterSalesDates')[_0x46222e(0x21f)](_0x46222e(0x1e7),function(){const _0x1e6273=_0x46222e,_0x686ca1=new Date(document['getElementById'](_0x1e6273(0x1f0))[_0x1e6273(0x210)]),_0x471eee=new Date(document[_0x1e6273(0x1cd)](_0x1e6273(0x1d5))[_0x1e6273(0x210)]),_0x18c564=salesData['filter'](_0x372f67=>{const _0x504deb=new Date(_0x372f67['dateTime']);return(!_0x686ca1||_0x504deb>=_0x686ca1)&&(!_0x471eee||_0x504deb<=_0x471eee);});renderTable(_0x18c564),updateAnalysis(_0x18c564);});function updateStockTables(_0x583766,_0x15afde){const _0x35b3cd=_0x46222e,_0x4810d0=document[_0x35b3cd(0x1cd)](_0x35b3cd(0x1c1));_0x4810d0[_0x35b3cd(0x1ce)](_0x35b3cd(0x203))['innerHTML']='',database['ref'](_0x35b3cd(0x1ab)+currentUser)[_0x35b3cd(0x1b9)](_0x35b3cd(0x210))[_0x35b3cd(0x1bc)](_0x3cf878=>{const _0x39572c=_0x35b3cd,_0x1b4794={};_0x3cf878[_0x39572c(0x221)](_0x5b8ad1=>{const _0x4faf91=_0x39572c,_0xe5a9c9=_0x5b8ad1[_0x4faf91(0x1ee)](),_0x1f45b1=new Date(_0xe5a9c9[_0x4faf91(0x1f6)]);(!_0x583766||_0x1f45b1>=_0x583766)&&(!_0x15afde||_0x1f45b1<=_0x15afde)&&((!_0x1b4794[_0xe5a9c9['product']]||_0x1f45b1>new Date(_0x1b4794[_0xe5a9c9[_0x4faf91(0x244)]]['dateTime']))&&(_0x1b4794[_0xe5a9c9[_0x4faf91(0x244)]]=_0xe5a9c9));}),Object[_0x39572c(0x1c0)](_0x1b4794)[_0x39572c(0x221)](_0x9d63fe=>{const _0x22002c=_0x39572c,_0x59ead7=_0x4810d0[_0x22002c(0x1ce)](_0x22002c(0x203))['insertRow']();_0x59ead7[_0x22002c(0x208)](0x0)[_0x22002c(0x201)]=_0x9d63fe[_0x22002c(0x244)],_0x59ead7[_0x22002c(0x208)](0x1)[_0x22002c(0x201)]=_0x9d63fe['SF'],_0x59ead7[_0x22002c(0x208)](0x2)[_0x22002c(0x201)]=new Date(_0x9d63fe[_0x22002c(0x1f6)])[_0x22002c(0x215)]();}),setupSort(_0x4810d0);});}function showSubscriptionRequiredModal(){const _0x1afab2=_0x46222e;document[_0x1afab2(0x1cd)]('subscriptionRequiredModal')[_0x1afab2(0x1b0)][_0x1afab2(0x223)]=_0x1afab2(0x229);}function hideSubscriptionRequiredModal(){const _0x1d7000=_0x46222e;document[_0x1d7000(0x1cd)](_0x1d7000(0x1e4))[_0x1d7000(0x1b0)]['display']='none';}function redirectToSubscription(){const _0x4eb0ef=_0x46222e;window['location']['href']=_0x4eb0ef(0x1e8);}async function checkSubscriptionStatus(){const _0x50c5ce=_0x46222e;try{const _0x1eea38=await adminRef[_0x50c5ce(0x1b9)](_0x50c5ce(0x210)),_0x5df813=_0x1eea38[_0x50c5ce(0x1ee)](),_0x4d580e=new Date();if(_0x5df813&&_0x5df813[_0x50c5ce(0x1af)]===_0x50c5ce(0x23f)){const _0x4a742a=new Date(_0x5df813['endDate']);return _0x4a742a>=_0x4d580e?!![]:(await adminRef[_0x50c5ce(0x1d0)]({'status':_0x50c5ce(0x232)}),![]);}else return![];}catch(_0x2d1bd6){console[_0x50c5ce(0x1c4)]('Erreur\x20lors\x20de\x20la\x20vÃ©rification\x20de\x20l\x27abonnement\x20:',_0x2d1bd6);throw _0x2d1bd6;}}updateTable(),updateStockTables(),analysisSection[_0x46222e(0x1b0)]['display']=_0x46222e(0x21b),salesDetailsSection[_0x46222e(0x1b0)]['display']=_0x46222e(0x21b),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x46222e(0x1f3)](_0x46222e(0x22c));savedTheme!==null&&setTheme(savedTheme===_0x46222e(0x1f7));