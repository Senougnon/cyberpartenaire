<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Administrateur - E-FDR WIFI ZONE</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.20/jspdf.plugin.autotable.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #424242, #073018, #553a01);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .stat-card h3 {
            color: #fdbb2d;
            margin-bottom: 10px;
        }

        .filters {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        select, input {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        select option {
            background: #1a2a6c;
            color: white;
        }

        .sales-table {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            position: relative; /* Ajout pour le positionnement absolu des boutons */
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            background: rgba(0, 0, 0, 0.2);
            color: #fdbb2d;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 5px;
            color: rgb(60, 255, 0);
        }

        .delete-btn {
            background: #b21f1f;
        }

        .clear-btn {
            background: #1a2a6c;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            padding: 20px;
            border-radius: 10px;
            max-width: 400px;
            width: 90%;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .partners-management {
            margin-bottom: 30px;
        }

        .partner-actions {
            margin-bottom: 20px;
        }

        .partner-form {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .partner-form input {
            margin-bottom: 10px;
        }

        .partners-table table {
            width: 100%;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .filters {
                flex-direction: column;
            }
        }

        .loader-wrapper {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
        }

        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .page-loader-wrapper {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1002;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .page-loader {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        .loader-message {
            color: white;
            margin-top: 16px;
            font-size: 1rem;
            text-align: center;
            max-width: 80%;
        }
        .subscription-required {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .subscription-required-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            max-width: 400px;
            width: 90%;
        }

        .subscription-required-content h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .subscription-required-content p {
            color: #666;
            margin-bottom: 30px;
        }

        .subscription-required-content button {
            background-color: #fdbb2d;
            color: #1a2a6c;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 0.9rem;
            margin: 0 10px;
        }

        .subscription-required-content button:hover {
            background-color: #e6a727;
        }

        /* Styles pour les boutons d'exportation */
        .export-buttons {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 10px;
            z-index: 10; /* Pour s'assurer qu'ils restent au-dessus du tableau */
        }

        .export-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .export-btn:hover {
            background-color: #218838;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .export-btn i {
            margin-right: 6px;
        }

    </style>
</head>
<body>
    <div class="page-loader-wrapper" id="pageLoaderWrapper">
        <div class="page-loader"></div>
        <div class="loader-message" id="pageLoaderMessage">Initialisation...</div>
    </div>
    <div class="loader-wrapper" id="loaderWrapper">
        <div class="loader"></div>
    </div>
    <div class="container">
        <div class="header">
            <h1>Dashboard Administrateur</h1>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total des ventes</h3>
                <div id="totalSales">0 FCFA</div>
            </div>
            <div class="stat-card">
                <h3>Nombre de tickets vendus</h3>
                <div id="totalTickets">0</div>
            </div>
            <div class="stat-card">
                <h3>Meilleur vendeur</h3>
                <div id="topVendor">-</div>
            </div>
        </div>

        <div class="filters">
            <select id="vendorFilter">
                <option value="all">Tous les vendeurs</option>
            </select>
            <select id="periodFilter">
                <option value="today">Aujourd'hui</option>
                <option value="week">Cette semaine</option>
                <option value="month">Ce mois</option>
                <option value="all">Toute la p√©riode</option>
            </select>
            <input type="date" id="startDate">
            <input type="date" id="endDate">
            <button class="action-btn" onclick="applyFilters()">Filtrer</button>
        </div>

        <div class="sales-table">

            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Vendeur</th>
                        <th>Cat√©gorie</th>
                        <th>Utilisateur</th>
                        <th>Prix</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="salesTable"></tbody>
            </table>
            <div class="export-buttns">
                <button class="action-btn delete-btn" onclick="printTable()"><i data-lucide="printer"></i> Imprimer</button>
                <button class="action-btn delete-btn" onclick="exportToPDF()"><i data-lucide="file-down"></i> Exporter en PDF</button>
                <button class="action-btn delete-btn" onclick="exportToExcel()"><i data-lucide="file-spreadsheet"></i> Exporter en Excel</button>
            </div>
        </div>

        <div class="partners-management">
            <h2>Gestion des partenaires</h2>
            <div class="partner-actions">
                <button class="action-btn" onclick="showAddPartnerForm()">Ajouter un partenaire</button>
            </div>

            <div class="partner-form" id="addPartnerForm" style="display: none;">
                <h3>Ajouter un partenaire</h3>
                <input type="text" id="newPartnerName" placeholder="Nom du partenaire">
                <input type="password" id="newPartnerPassword" placeholder="Mot de passe">
                <button class="action-btn" onclick="addPartner()">Enregistrer</button>
                <button class="action-btn clear-btn" onclick="hideAddPartnerForm()">Annuler</button>
            </div>

            <div class="partners-table">
                <table>
                    <thead>
                        <tr>
                            <th>Nom du partenaire</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="partnersTable"></tbody>
                </table>
            </div>
        </div>

        <div id="editPartnerModal" class="modal">
            <div class="modal-content">
                <h2>Modifier le partenaire</h2>
                <input type="hidden" id="editPartnerId">
                <input type="text" id="editPartnerName" placeholder="Nom du partenaire">
                <input type="password" id="editPartnerPassword" placeholder="Mot de passe">
                <div class="modal-actions">
                    <button class="action-btn" onclick="closeEditModal()">Annuler</button>
                    <button class="action-btn" onclick="updatePartner()">Enregistrer</button>
                </div>
            </div>
        </div>

        <div id="messagePartnerModal" class="modal">
            <div class="modal-content">
                <h2>Envoyer un message</h2>
                <input type="hidden" id="messagePartnerId">
                <textarea id="messageContent" placeholder="Votre message"></textarea>
                <div class="modal-actions">
                    <button class="action-btn" onclick="closeMessageModal()">Annuler</button>
                    <button class="action-btn" onclick="sendMessage()">Envoyer</button>
                </div>
            </div>
        </div>
    </div>

    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <h2>Confirmation</h2>
            <p id="modalMessage"></p>
            <div class="modal-actions">
                <button class="action-btn" onclick="closeModal()">Annuler</button>
                <button class="action-btn delete-btn" id="confirmBtn">Confirmer</button>
            </div>
        </div>
    </div>
    <div id="subscriptionRequiredModal" class="subscription-required" style="display: none;">
        <div class="subscription-required-content">
            <h2>Abonnement Requis</h2>
            <p>Un abonnement actif est n√©cessaire pour acc√©der √† cette fonctionnalit√©.</p>
            <button onclick="redirectToSubscription()">S'abonner</button>
            <button onclick="hideSubscriptionRequiredModal()">Fermer</button>
        </div>
    </div>
    <script type="module">
const _0x37aab0=_0x163c;function _0x225d(){const _0x46468c=['loaderWrapper','wifi-zone-tanto.firebaseapp.com','\x20FCFA</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20delete-btn\x22\x20onclick=\x22deleteSale(\x27','VendorsHistory','Veuillez\x20saisir\x20un\x20message.','VendorsHistory/','onclick','error','motDePasse','\x20FCFA','Traitement\x20du\x20ticket\x20','closeModal','9138bCOSta','location','Erreur\x20lors\x20de\x20la\x20suppression:','appendChild','20kNmMsD','Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20:','Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket.','Vendors/','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement','TicketsTransit/','...','all','startDate','showAddPartnerForm','map','/messages','1130IOQqki','category','22195811sonXFO','closeEditModal','689408RaMLHi','updatePartner','createIcons','addEventListener','jspdf','printTable','Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket\x20:','applyFilters','#salesTable','push','addPartner','prix','Traitement\x20des\x20tickets\x20uniques...','TicketConnect√©/','newPartnerName','utilisateur','setHours','price','endDate','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20onclick=\x22showEditPartnerForm(\x27','√ätes-vous\x20s√ªr\x20de\x20vouloir\x20supprimer\x20cette\x20vente\x20?','display','157960xrSFIG','messagePartnerId','periodFilter','entries','\x27)\x22>Modifier</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20delete-btn\x22\x20onclick=\x22deletePartner(\x27','Erreur\x20lors\x20de\x20la\x20mise\x20√†\x20jour\x20du\x20partenaire:','105XCajCR','closeMessageModal','forEach','Veuillez\x20remplir\x20tous\x20les\x20champs.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Erreur','√ätes-vous\x20s√ªr\x20de\x20vouloir\x20supprimer\x20le\x20partenaire\x20','6374ozRZtb','join','indexOf','flex','Abonnement\x20actif','editPartnerModal','expired','messagePartnerModal','salesTable','status','Erreur\x20lors\x20du\x20chargement\x20des\x20partenaires:','totalTickets','showEditPartnerForm','DOMContentLoaded','1:244600435822:web:574f154301e4d852d1627f','Abonnement\x20expir√©','newPartnerPassword','vendor','\x27,\x20\x27','reduce','active','style','https://wifi-zone-tanto-default-rtdb.firebaseio.com','table_to_book','18qRbMPl','keys','log','none','wifi-zone-tanto.firebasestorage.app','ventes.pdf','668324zRvkQz','TicketsVendus','grid','binary','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement\x20:','V√©rification\x20du\x20ticket\x20pour\x20','showMessagePartnerForm','exists','editPartnerId','partnersTable','getDay','messageContent','modalMessage','length','ventes.xlsx','TicketsTotal','update','username','href','clearVendorHistory','Liste\x20des\x20ventes','deleteSale','Ticket\x20','Une\x20erreur\x20est\x20survenue\x20lors\x20du\x20traitement\x20des\x20tickets.','\x20vendu\x20automatiquement.','pageLoaderMessage','8087373zhgMir','find','xlsx','createElement','<option\x20value=\x22all\x22>Tous\x20les\x20vendeurs</option>','Vendeur\x20automatique','244600435822','sort','totalSales','password','TicketsTotal/','textContent','value','index.html','Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20connect√©s\x20:','addPartnerForm','AIzaSyDg4IhUtLPJZTJE9ZIvbfB6Td9hNVmLTT0','confirmModal','center','soldAt','application/octet-stream','getDate','hideSubscriptionRequiredModal','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Vente\x20du\x20ticket\x20','block','TicketsTransit','now','today','<option\x20value=\x22','user','left','confirmBtn','editPartnerPassword','wifi-zone-tanto','Nettoyage\x20des\x20tickets\x20trait√©s...','Pas\x20d\x27abonnement\x20actif','pageLoaderWrapper','val','</option>','setDate','Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20','editPartnerName','innerHTML','getElementById','filter','Erreur\x20lors\x20de\x20l\x27effacement:','TicketConnect√©','getTime'];_0x225d=function(){return _0x46468c;};return _0x225d();}(function(_0x4aac41,_0x553fc8){const _0x28cc2d=_0x163c,_0x412efe=_0x4aac41();while(!![]){try{const _0x3042b0=parseInt(_0x28cc2d(0x91))/0x1+parseInt(_0x28cc2d(0x84))/0x2+parseInt(_0x28cc2d(0xa9))/0x3*(-parseInt(_0x28cc2d(0xaf))/0x4)+parseInt(_0x28cc2d(0x116))/0x5*(parseInt(_0x28cc2d(0x106))/0x6)+-parseInt(_0x28cc2d(0x8a))/0x7*(-parseInt(_0x28cc2d(0x11a))/0x8)+parseInt(_0x28cc2d(0xc9))/0x9*(-parseInt(_0x28cc2d(0x10a))/0xa)+parseInt(_0x28cc2d(0x118))/0xb;if(_0x3042b0===_0x553fc8)break;else _0x412efe['push'](_0x412efe['shift']());}catch(_0x5de9f4){_0x412efe['push'](_0x412efe['shift']());}}}(_0x225d,0xe5919));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';import{getDatabase,ref,get,remove,set,push}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';const firebaseConfig={'apiKey':_0x37aab0(0xd9),'authDomain':_0x37aab0(0xfb),'databaseURL':_0x37aab0(0xa7),'projectId':_0x37aab0(0xeb),'storageBucket':_0x37aab0(0xad),'messagingSenderId':_0x37aab0(0xcf),'appId':_0x37aab0(0x9f),'measurementId':'G-V9RB51B16P'},app=initializeApp(firebaseConfig),db=getDatabase(app),adminRef=ref(db,'admin/subscription');let allSales=[],vendors=new Set(),partners={};async function loadPartners(){const _0xe1c1=_0x37aab0;try{const _0x45fdaf=ref(db,'Vendors'),_0x3b2b39=await get(_0x45fdaf);_0x3b2b39[_0xe1c1(0xb6)]()&&(partners=_0x3b2b39[_0xe1c1(0xef)](),updatePartnersTable());}catch(_0x1669f0){console[_0xe1c1(0x101)](_0xe1c1(0x9b),_0x1669f0);}}function updatePartnersTable(){const _0x1a7a7c=_0x37aab0,_0x456e16=document[_0x1a7a7c(0xf5)](_0x1a7a7c(0xb8));_0x456e16[_0x1a7a7c(0xf4)]='';for(const _0x29c506 in partners){const _0x26ae27=partners[_0x29c506],_0x5da925=document[_0x1a7a7c(0xcc)]('tr');_0x5da925[_0x1a7a7c(0xf4)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x29c506+_0x1a7a7c(0x81)+_0x29c506+_0x1a7a7c(0x88)+_0x29c506+'\x27)\x22>Supprimer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20onclick=\x22showMessagePartnerForm(\x27'+_0x29c506+'\x27)\x22>Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x456e16[_0x1a7a7c(0x109)](_0x5da925);}}window[_0x37aab0(0x113)]=function(){const _0x127452=_0x37aab0;document['getElementById'](_0x127452(0xd8))['style'][_0x127452(0x83)]='block';},window['hideAddPartnerForm']=function(){const _0x4f7a94=_0x37aab0;document[_0x4f7a94(0xf5)](_0x4f7a94(0x7c))[_0x4f7a94(0xd5)]='',document[_0x4f7a94(0xf5)]('newPartnerPassword')[_0x4f7a94(0xd5)]='',document['getElementById'](_0x4f7a94(0xd8))[_0x4f7a94(0xa6)][_0x4f7a94(0x83)]=_0x4f7a94(0xac);},window[_0x37aab0(0x124)]=async function(){const _0x30e6f6=_0x37aab0,_0x434c2d=document[_0x30e6f6(0xf5)]('newPartnerName')[_0x30e6f6(0xd5)],_0x580e87=document[_0x30e6f6(0xf5)](_0x30e6f6(0xa1))[_0x30e6f6(0xd5)];if(_0x434c2d&&_0x580e87)try{const _0x188988=ref(db,_0x30e6f6(0x10d)+_0x434c2d);await set(_0x188988,{'password':_0x580e87}),await loadPartners(),hideAddPartnerForm();}catch(_0x37647a){console[_0x30e6f6(0x101)]('Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20partenaire:',_0x37647a);}else alert(_0x30e6f6(0x8d));},window[_0x37aab0(0x9d)]=function(_0x1e3e84){const _0x69d738=_0x37aab0,_0x21122c=document['getElementById']('editPartnerModal');document['getElementById'](_0x69d738(0xb7))[_0x69d738(0xd5)]=_0x1e3e84,document['getElementById'](_0x69d738(0xf3))['value']=_0x1e3e84,document[_0x69d738(0xf5)]('editPartnerPassword')[_0x69d738(0xd5)]=partners[_0x1e3e84][_0x69d738(0xd2)],_0x21122c[_0x69d738(0xa6)]['display']='flex';},window[_0x37aab0(0x119)]=function(){const _0x297106=_0x37aab0;document[_0x297106(0xf5)](_0x297106(0x96))[_0x297106(0xa6)][_0x297106(0x83)]=_0x297106(0xac);},window[_0x37aab0(0x11b)]=async function(){const _0x3463cd=_0x37aab0,_0x3ecbb6=document[_0x3463cd(0xf5)](_0x3463cd(0xb7))['value'],_0x4721fb=document[_0x3463cd(0xf5)](_0x3463cd(0xf3))[_0x3463cd(0xd5)],_0x39ff15=document[_0x3463cd(0xf5)](_0x3463cd(0xea))[_0x3463cd(0xd5)];if(_0x4721fb&&_0x39ff15)try{const _0x1bb3fa=ref(db,'Vendors/'+_0x4721fb);await set(_0x1bb3fa,{'password':_0x39ff15}),_0x3ecbb6!==_0x4721fb&&await remove(ref(db,_0x3463cd(0x10d)+_0x3ecbb6)),await loadPartners(),closeEditModal();}catch(_0x3a8765){console[_0x3463cd(0x101)](_0x3463cd(0x89),_0x3a8765);}else alert(_0x3463cd(0x8d));},window['deletePartner']=async function(_0x6d5681){const _0x55e4d3=_0x37aab0;if(confirm(_0x55e4d3(0x90)+_0x6d5681+'\x20?'))try{const _0x4f1da5=ref(db,_0x55e4d3(0x10d)+_0x6d5681);await remove(_0x4f1da5),await loadPartners();}catch(_0x38e8de){console[_0x55e4d3(0x101)]('Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20partenaire:',_0x38e8de);}},window[_0x37aab0(0xb5)]=function(_0x2bcd39){const _0x1e52bc=_0x37aab0,_0x2bb8c0=document[_0x1e52bc(0xf5)](_0x1e52bc(0x98));document[_0x1e52bc(0xf5)]('messagePartnerId')[_0x1e52bc(0xd5)]=_0x2bcd39,document['getElementById'](_0x1e52bc(0xba))[_0x1e52bc(0xd5)]='',_0x2bb8c0[_0x1e52bc(0xa6)][_0x1e52bc(0x83)]=_0x1e52bc(0x94);},window[_0x37aab0(0x8b)]=function(){const _0x60e47d=_0x37aab0;document[_0x60e47d(0xf5)](_0x60e47d(0x98))[_0x60e47d(0xa6)][_0x60e47d(0x83)]=_0x60e47d(0xac);},window['sendMessage']=async function(){const _0x29ca3a=_0x37aab0,_0x128c15=document['getElementById'](_0x29ca3a(0x85))[_0x29ca3a(0xd5)],_0xe3b4f7=document[_0x29ca3a(0xf5)](_0x29ca3a(0xba))[_0x29ca3a(0xd5)];if(_0xe3b4f7)try{const _0x17456c=ref(db,_0x29ca3a(0x10d)+_0x128c15+_0x29ca3a(0x115));await push(_0x17456c,{'content':_0xe3b4f7,'timestamp':Date[_0x29ca3a(0xe4)]()}),alert('Message\x20envoy√©\x20!'),closeMessageModal();}catch(_0x389160){console['error']('Erreur\x20lors\x20de\x20l\x27envoi\x20du\x20message:',_0x389160);}else alert(_0x29ca3a(0xfe));};async function loadSalesData(){const _0x1c7fd0=_0x37aab0;try{const _0x487e5c=ref(db,'VendorsHistory'),_0x171b24=await get(_0x487e5c);_0x171b24[_0x1c7fd0(0xb6)]()&&(vendors=new Set(Object[_0x1c7fd0(0xaa)](_0x171b24[_0x1c7fd0(0xef)]())),updateVendorFilter());const _0x4d0e2d=ref(db,'VendorsHistory'),_0x5c6643=await get(_0x4d0e2d);if(_0x5c6643['exists']()){allSales=[];const _0x4bf2b2=_0x5c6643[_0x1c7fd0(0xef)]();Object[_0x1c7fd0(0x87)](_0x4bf2b2)['forEach'](([_0x21a623,_0x5c1b66])=>{const _0x57da15=_0x1c7fd0;Object['entries'](_0x5c1b66)[_0x57da15(0x8c)](([_0x2749f6,_0x38c0c5])=>{allSales['push']({'id':_0x2749f6,'vendor':_0x21a623,..._0x38c0c5});});}),applyFilters();}}catch(_0x2bbf87){console[_0x1c7fd0(0x101)]('Erreur\x20lors\x20du\x20chargement\x20des\x20donn√©es:',_0x2bbf87);}}function updateVendorFilter(){const _0x265807=_0x37aab0,_0xeb6d4=document['getElementById']('vendorFilter');_0xeb6d4[_0x265807(0xf4)]=_0x265807(0xcd),vendors[_0x265807(0x8c)](_0xa378ca=>{const _0x5651f7=_0x265807;_0xeb6d4[_0x5651f7(0xf4)]+=_0x5651f7(0xe6)+_0xa378ca+'\x22>'+_0xa378ca+_0x5651f7(0xf0);});}async function loadSales(){const _0x545f91=_0x37aab0;try{const _0x14000b=ref(db,_0x545f91(0xfd)),_0x1ed865=await get(_0x14000b);if(_0x1ed865[_0x545f91(0xb6)]()){allSales=[];const _0x20ca8a=_0x1ed865[_0x545f91(0xef)]();Object[_0x545f91(0x87)](_0x20ca8a)[_0x545f91(0x8c)](([_0x1ea7f2,_0x5bb896])=>{const _0x422de5=_0x545f91;Object[_0x422de5(0x87)](_0x5bb896)[_0x422de5(0x8c)](([_0xb3e72a,_0x19c88c])=>{const _0x52cd61=_0x422de5;allSales[_0x52cd61(0x123)]({'id':_0xb3e72a,'vendor':_0x1ea7f2,..._0x19c88c});});}),applyFilters();}}catch(_0x1a953f){console['error']('Erreur\x20lors\x20du\x20chargement\x20des\x20ventes:',_0x1a953f);}}function _0x163c(_0x2c3c57,_0x2f1782){const _0x225d64=_0x225d();return _0x163c=function(_0x163c27,_0x19518c){_0x163c27=_0x163c27-0x7c;let _0x76af26=_0x225d64[_0x163c27];return _0x76af26;},_0x163c(_0x2c3c57,_0x2f1782);}window[_0x37aab0(0x121)]=function(){const _0x345e09=_0x37aab0,_0x133cb1=document[_0x345e09(0xf5)]('vendorFilter')[_0x345e09(0xd5)],_0x4fbf68=document[_0x345e09(0xf5)](_0x345e09(0x86))[_0x345e09(0xd5)],_0x5d1a16=new Date(document[_0x345e09(0xf5)](_0x345e09(0x112))['value']),_0x1a4a3b=new Date(document['getElementById'](_0x345e09(0x80))[_0x345e09(0xd5)]);_0x1a4a3b['setHours'](0x17,0x3b,0x3b);let _0x56e47f=allSales;_0x133cb1!==_0x345e09(0x111)&&(_0x56e47f=_0x56e47f[_0x345e09(0xf6)](_0x570820=>_0x570820['vendor']===_0x133cb1));if(_0x4fbf68!==_0x345e09(0x111)||!isNaN(_0x5d1a16[_0x345e09(0xf9)]())||!isNaN(_0x1a4a3b[_0x345e09(0xf9)]())){const _0x1a669e=new Date(),_0x38f68c={'today':new Date(_0x1a669e[_0x345e09(0x7e)](0x0,0x0,0x0,0x0)),'week':new Date(_0x1a669e[_0x345e09(0xf1)](_0x1a669e[_0x345e09(0xde)]()-_0x1a669e[_0x345e09(0xb9)]())),'month':new Date(_0x1a669e['setDate'](0x1))};_0x56e47f=_0x56e47f[_0x345e09(0xf6)](_0x41dd8d=>{const _0x3ec6de=_0x345e09,_0x54426d=new Date(_0x41dd8d[_0x3ec6de(0xdc)]);if(_0x4fbf68!==_0x3ec6de(0x111)&&_0x38f68c[_0x4fbf68])return _0x54426d>=_0x38f68c[_0x4fbf68];if(!isNaN(_0x5d1a16['getTime']())&&!isNaN(_0x1a4a3b['getTime']()))return _0x54426d>=_0x5d1a16&&_0x54426d<=_0x1a4a3b;return!![];});}updateTable(_0x56e47f),updateStats(_0x56e47f);};function updateTable(_0x318bf1){const _0x56a9fe=_0x37aab0,_0x5cc958=document['getElementById']('salesTable');_0x5cc958[_0x56a9fe(0xf4)]=_0x318bf1['sort']((_0x6dbae4,_0x2ab572)=>_0x2ab572['soldAt']-_0x6dbae4[_0x56a9fe(0xdc)])[_0x56a9fe(0x114)](_0x546ef2=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+new Date(_0x546ef2[_0x56a9fe(0xdc)])['toLocaleString']()+_0x56a9fe(0x8e)+_0x546ef2[_0x56a9fe(0xa2)]+_0x56a9fe(0x8e)+_0x546ef2['category']+_0x56a9fe(0x8e)+_0x546ef2['user']+_0x56a9fe(0x8e)+_0x546ef2['price']+_0x56a9fe(0xfc)+_0x546ef2[_0x56a9fe(0xa2)]+_0x56a9fe(0xa3)+_0x546ef2['id']+_0x56a9fe(0xe0))[_0x56a9fe(0x92)]('');}function updateStats(_0x58f801){const _0x1b6403=_0x37aab0,_0x1bf60e=_0x58f801[_0x1b6403(0xa4)]((_0x408bb3,_0x580bcd)=>_0x408bb3+parseFloat(_0x580bcd[_0x1b6403(0x7f)]),0x0),_0x4b8432=_0x58f801[_0x1b6403(0xbc)],_0x5b0069=_0x58f801['reduce']((_0x577ae2,_0x4b2166)=>{const _0x5d5cf8=_0x1b6403;return _0x577ae2[_0x4b2166['vendor']]=(_0x577ae2[_0x4b2166[_0x5d5cf8(0xa2)]]||0x0)+parseFloat(_0x4b2166[_0x5d5cf8(0x7f)]),_0x577ae2;},{}),_0x5a30db=Object[_0x1b6403(0x87)](_0x5b0069)[_0x1b6403(0xd0)](([,_0x294ea9],[,_0x5a75d9])=>_0x5a75d9-_0x294ea9)[0x0]?.[0x0]||'-';document['getElementById'](_0x1b6403(0xd1))['textContent']=_0x1bf60e['toLocaleString']()+_0x1b6403(0x103),document[_0x1b6403(0xf5)](_0x1b6403(0x9c))['textContent']=_0x4b8432,document['getElementById']('topVendor')['textContent']=_0x5a30db;}window[_0x37aab0(0xc4)]=function(_0x19c720,_0x3ce0e7){const _0x2b1c31=_0x37aab0,_0x2f2930=document['getElementById'](_0x2b1c31(0xda));document['getElementById'](_0x2b1c31(0xbb))[_0x2b1c31(0xd4)]=_0x2b1c31(0x82);const _0xcf282c=document['getElementById']('confirmBtn');_0xcf282c['onclick']=async()=>{const _0x3b30bf=_0x2b1c31;try{await remove(ref(db,_0x3b30bf(0xff)+_0x19c720+'/'+_0x3ce0e7)),await loadSales(),closeModal();}catch(_0x55d5ea){console[_0x3b30bf(0x101)](_0x3b30bf(0x108),_0x55d5ea);}},_0x2f2930[_0x2b1c31(0xa6)][_0x2b1c31(0x83)]='flex';},window[_0x37aab0(0xc2)]=function(_0x6c1e7f){const _0x411f06=_0x37aab0,_0x235cae=document['getElementById']('confirmModal');document[_0x411f06(0xf5)](_0x411f06(0xbb))[_0x411f06(0xd4)]='√ätes-vous\x20s√ªr\x20de\x20vouloir\x20effacer\x20tout\x20l\x27historique\x20de\x20'+_0x6c1e7f+'\x20?';const _0x8e5c7a=document[_0x411f06(0xf5)](_0x411f06(0xe9));_0x8e5c7a[_0x411f06(0x100)]=async()=>{const _0x23e091=_0x411f06;try{await set(ref(db,_0x23e091(0xff)+_0x6c1e7f),null),await loadSales(),closeModal();}catch(_0x4593c5){console[_0x23e091(0x101)](_0x23e091(0xf7),_0x4593c5);}},_0x235cae[_0x411f06(0xa6)][_0x411f06(0x83)]='flex';},window[_0x37aab0(0x105)]=function(){const _0x2a382f=_0x37aab0;document[_0x2a382f(0xf5)](_0x2a382f(0xda))[_0x2a382f(0xa6)][_0x2a382f(0x83)]=_0x2a382f(0xac);};function showLoader(){const _0x486854=_0x37aab0;document[_0x486854(0xf5)]('loaderWrapper')['style'][_0x486854(0x83)]=_0x486854(0xe2);}function hideLoader(){const _0xdecf37=_0x37aab0;document[_0xdecf37(0xf5)](_0xdecf37(0xfa))[_0xdecf37(0xa6)][_0xdecf37(0x83)]=_0xdecf37(0xac);}function showPageLoader(){const _0xa0238a=_0x37aab0;document['getElementById']('pageLoaderWrapper')[_0xa0238a(0xa6)]['display']='flex';}function hidePageLoader(){const _0x7b74b1=_0x37aab0;document[_0x7b74b1(0xf5)](_0x7b74b1(0xee))[_0x7b74b1(0xa6)][_0x7b74b1(0x83)]=_0x7b74b1(0xac);}async function processConnectedTickets(){const _0x38d8ae=_0x37aab0,_0x2807af=document[_0x38d8ae(0xf5)](_0x38d8ae(0xc8));try{_0x2807af[_0x38d8ae(0xd4)]='V√©rification\x20des\x20tickets\x20connect√©s...';const _0x4feba9=ref(db,_0x38d8ae(0xf8)),_0xcbe185=await get(_0x4feba9);let _0xfeba6=_0xcbe185[_0x38d8ae(0xef)]()||{};const _0xe5ca1={};for(const _0x5dcabb in _0xfeba6){const _0x2c1ba3=_0xfeba6[_0x5dcabb]['username'];!_0xe5ca1[_0x2c1ba3]&&(_0xe5ca1[_0x2c1ba3]=_0xfeba6[_0x5dcabb]);}_0x2807af['textContent']=_0x38d8ae(0x126);for(const _0x48ed20 in _0xe5ca1){await processTicket(_0xe5ca1[_0x48ed20]);}_0x2807af[_0x38d8ae(0xd4)]=_0x38d8ae(0xec);for(const _0x44b9b9 in _0xe5ca1){const _0x107c89=Object['keys'](_0xfeba6)[_0x38d8ae(0xca)](_0x363a80=>_0xfeba6[_0x363a80]['username']===_0x44b9b9);_0x107c89&&await remove(ref(db,_0x38d8ae(0x127)+_0x107c89));}}catch(_0x144046){console['error'](_0x38d8ae(0xd7),_0x144046),showNotification(_0x38d8ae(0x8f),_0x38d8ae(0xc6));}}async function processTicket(_0x285bb3){const _0x2798b3=_0x37aab0,_0x2a3132=document[_0x2798b3(0xf5)]('pageLoaderMessage');try{_0x2a3132['textContent']=_0x2798b3(0xb4)+_0x285bb3[_0x2798b3(0xc0)]+_0x2798b3(0x110);const _0x5d9d02=ref(db,_0x2798b3(0xfd)),_0x291b34=await get(_0x5d9d02),_0x3842eb=_0x291b34[_0x2798b3(0xef)]()||{};let _0x5d20d9=![];for(const _0x5c4c1c in _0x3842eb){const _0x60ceb4=_0x3842eb[_0x5c4c1c];for(const _0x5ab847 in _0x60ceb4){if(_0x60ceb4[_0x5ab847]['user']===_0x285bb3[_0x2798b3(0xc0)]){_0x5d20d9=!![];break;}}if(_0x5d20d9)break;}if(!_0x5d20d9){_0x2a3132[_0x2798b3(0xd4)]=_0x2798b3(0x104)+_0x285bb3[_0x2798b3(0xc0)]+_0x2798b3(0x110);const _0x20ee95=ref(db,_0x2798b3(0xbe)),_0x249408=ref(db,_0x2798b3(0xe3)),_0x1ba76b=await get(_0x20ee95),_0x3b20ca=await get(_0x249408),_0x2039b6=_0x1ba76b['val']()||{},_0x3c6ded=_0x3b20ca[_0x2798b3(0xef)]()||{};let _0x247cb4=null,_0x420591=null,_0x142218=null;for(const _0x281b40 in _0x2039b6){const _0x58ced7=(_0x2039b6[_0x281b40]['utilisateur']||[])[_0x2798b3(0x93)](_0x285bb3[_0x2798b3(0xc0)]);if(_0x58ced7>-0x1){_0x247cb4={'category':_0x281b40,'user':_0x2039b6[_0x281b40]['utilisateur'][_0x58ced7],'password':_0x2039b6[_0x281b40]['motDePasse'][_0x58ced7],'price':_0x2039b6[_0x281b40][_0x2798b3(0x125)][_0x58ced7],'updatedData':{..._0x2039b6[_0x281b40],'utilisateur':_0x2039b6[_0x281b40][_0x2798b3(0x7d)][_0x2798b3(0xf6)]((_0x457128,_0x497b98)=>_0x497b98!==_0x58ced7),'motDePasse':_0x2039b6[_0x281b40][_0x2798b3(0x102)][_0x2798b3(0xf6)]((_0x1ffba2,_0x1ca84d)=>_0x1ca84d!==_0x58ced7),'prix':_0x2039b6[_0x281b40][_0x2798b3(0x125)][_0x2798b3(0xf6)]((_0x48e4c4,_0x44dfbc)=>_0x44dfbc!==_0x58ced7)}},_0x420591=ref(db,_0x2798b3(0xd3)+_0x281b40),_0x142218=_0x2798b3(0xbe);break;}}if(!_0x247cb4)for(const _0x48b5cb in _0x3c6ded){if(_0x3c6ded[_0x48b5cb][_0x2798b3(0xe7)]===_0x285bb3[_0x2798b3(0xc0)]){_0x247cb4={'category':_0x3c6ded[_0x48b5cb]['category'],'user':_0x3c6ded[_0x48b5cb][_0x2798b3(0xe7)],'password':_0x3c6ded[_0x48b5cb][_0x2798b3(0xd2)],'price':_0x3c6ded[_0x48b5cb][_0x2798b3(0x7f)]},_0x420591=ref(db,_0x2798b3(0x10f)+_0x48b5cb),_0x142218=_0x2798b3(0xe3);break;}}_0x247cb4&&(_0x2a3132[_0x2798b3(0xd4)]=_0x2798b3(0xe1)+_0x285bb3[_0x2798b3(0xc0)]+_0x2798b3(0x110),await sellTicketAutomatically(_0x247cb4,_0x420591,_0x142218));}}catch(_0x1a1d8e){console[_0x2798b3(0x101)](_0x2798b3(0x10b),_0x1a1d8e),showNotification(_0x2798b3(0x8f),_0x2798b3(0xf2)+_0x285bb3[_0x2798b3(0xc0)]+'.');}}async function sellTicketAutomatically(_0x4c0ab9,_0x5a2d2e,_0x219658){const _0x4ac7c0=_0x37aab0;try{const _0x540167=_0x4ac7c0(0xce),_0x1f005b=ref(db,_0x4ac7c0(0xff)+_0x540167);await push(_0x1f005b,{'category':_0x4c0ab9[_0x4ac7c0(0x117)],'user':_0x4c0ab9[_0x4ac7c0(0xe7)],'password':_0x4c0ab9[_0x4ac7c0(0xd2)],'price':_0x4c0ab9[_0x4ac7c0(0x7f)],'soldAt':Date[_0x4ac7c0(0xe4)]()});const _0x5b13f8=ref(db,_0x4ac7c0(0xb0));await push(_0x5b13f8,{'category':_0x4c0ab9[_0x4ac7c0(0x117)],'user':_0x4c0ab9['user'],'password':_0x4c0ab9[_0x4ac7c0(0xd2)],'price':_0x4c0ab9[_0x4ac7c0(0x7f)],'soldAt':Date[_0x4ac7c0(0xe4)](),'vendorId':_0x540167}),_0x219658===_0x4ac7c0(0xbe)?await set(_0x5a2d2e,_0x4c0ab9['updatedData']):await remove(_0x5a2d2e),console[_0x4ac7c0(0xab)](_0x4ac7c0(0xc5)+_0x4c0ab9[_0x4ac7c0(0xe7)]+_0x4ac7c0(0xc7));}catch(_0x520614){console[_0x4ac7c0(0x101)](_0x4ac7c0(0x120),_0x520614),showNotification(_0x4ac7c0(0x8f),_0x4ac7c0(0x10c));}}function showSubscriptionRequiredModal(){const _0x2766ac=_0x37aab0;subscriptionRequiredModal[_0x2766ac(0xa6)][_0x2766ac(0x83)]=_0x2766ac(0x94);}function hideSubscriptionRequiredModal(){const _0x752400=_0x37aab0;subscriptionRequiredModal['style']['display']=_0x752400(0xac);}function redirectToSubscription(){const _0x1b37aa=_0x37aab0;window[_0x1b37aa(0x107)][_0x1b37aa(0xc1)]=_0x1b37aa(0xd6);}async function checkSubscriptionStatus(){const _0x3e4426=_0x37aab0,_0x19074e=document[_0x3e4426(0xf5)]('pageLoaderMessage');_0x19074e[_0x3e4426(0xd4)]='V√©rification\x20de\x20l\x27abonnement...';try{const _0x3085e6=await get(adminRef),_0x55c5a9=_0x3085e6[_0x3e4426(0xef)](),_0x5022dc=new Date();if(_0x55c5a9&&_0x55c5a9[_0x3e4426(0x9a)]===_0x3e4426(0xa5)){const _0x389787=new Date(_0x55c5a9[_0x3e4426(0x80)]);_0x389787<_0x5022dc?(_0x19074e['textContent']=_0x3e4426(0xa0),hidePageLoader(),showSubscriptionRequiredModal(),await adminRef[_0x3e4426(0xbf)]({'status':_0x3e4426(0x97)})):(_0x19074e[_0x3e4426(0xd4)]=_0x3e4426(0x95),hidePageLoader());}else _0x19074e[_0x3e4426(0xd4)]=_0x3e4426(0xed),hidePageLoader(),showSubscriptionRequiredModal();}catch(_0x3f75df){hidePageLoader(),console[_0x3e4426(0x101)](_0x3e4426(0xb3),_0x3f75df),_0x19074e[_0x3e4426(0xd4)]=_0x3e4426(0x10e),showNotification(_0x3e4426(0x8f),'Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement.');}}window[_0x37aab0(0x11f)]=function(){window['print']();},window['exportToPDF']=function(){const _0x1d988e=_0x37aab0,{jsPDF:_0x2996d0}=window[_0x1d988e(0x11e)],_0x180e52=new _0x2996d0(),_0x243941=document[_0x1d988e(0xf5)](_0x1d988e(0x99)),_0x4288bc={'fillColor':[0x2a,0x3a,0x6c],'textColor':[0xff,0xff,0xff],'fontStyle':'bold','halign':_0x1d988e(0xdb)},_0x128ab6={'halign':_0x1d988e(0xe8)},_0x4d0683={'theme':_0x1d988e(0xb1),'headStyles':_0x4288bc,'bodyStyles':_0x128ab6,'margin':{'top':0x14},'startY':0x14};_0x180e52['text'](_0x1d988e(0xc3),0xe,0xf),_0x180e52['autoTable']({'html':_0x1d988e(0x122),..._0x4d0683}),_0x180e52['save'](_0x1d988e(0xae));},window['exportToExcel']=function(){const _0x494369=_0x37aab0,_0x2724de=XLSX['utils'][_0x494369(0xa8)](document[_0x494369(0xf5)]('salesTable'),{'sheet':'Ventes'}),_0x136fbd=XLSX['write'](_0x2724de,{'bookType':_0x494369(0xcb),'type':_0x494369(0xb2)});function _0x526b81(_0x3878c8){const _0x1be06f=_0x494369,_0x46ab28=new ArrayBuffer(_0x3878c8['length']),_0x3cfb14=new Uint8Array(_0x46ab28);for(let _0x362850=0x0;_0x362850<_0x3878c8[_0x1be06f(0xbc)];_0x362850++)_0x3cfb14[_0x362850]=_0x3878c8['charCodeAt'](_0x362850)&0xff;return _0x46ab28;}saveAs(new Blob([_0x526b81(_0x136fbd)],{'type':_0x494369(0xdd)}),_0x494369(0xbd));},window[_0x37aab0(0x11d)](_0x37aab0(0x9e),async()=>{const _0x5d9912=_0x37aab0;await checkSubscriptionStatus(),await loadSalesData(),await loadPartners(),document[_0x5d9912(0xf5)](_0x5d9912(0x86))[_0x5d9912(0xd5)]=_0x5d9912(0xe5),applyFilters(),lucide[_0x5d9912(0x11c)]();}),window['redirectToSubscription']=redirectToSubscription,window[_0x37aab0(0xdf)]=redirectToSubscription;
    </script>
</body>
</html>
