<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN WIFI ZONE</title>
    <link rel="stylesheet" href="styleA.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>

    <style>
        /* ... (Styles CSS - Pas de modifications majeures) ... */
       .payment-modal {
           display: none;
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           z-index: 1000;
           max-width: 400px;
           width: 90%;
           text-align: center;
       }

       .payment-modal h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .payment-modal p {
           color: #666;
           margin-bottom: 30px;
       }

       .payment-modal button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
           margin: 0 10px;
       }

       .payment-modal button:hover {
           background-color: #e6a727;
       }

       .close-modal {
           position: absolute;
           top: 10px;
           right: 10px;
           cursor: pointer;
           font-size: 1.2rem;
           color: #333;
       }

       /* Style pour l'overlay */
       .overlay {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 999;
       }
       #subscriptionSection {
           text-align: center;
           margin-bottom: 30px;
       }

       #subscriptionSection h2 {
           font-size: 24px;
           color: #fdbb2d;
           margin-bottom: 20px;
       }

       #subscriptionStatus {
           font-size: 18px;
           color: #fff;
           margin-bottom: 20px;
       }

       .subscription-buttons {
           display: flex;
           justify-content: center;
           gap: 20px;
       }

       .subscription-buttons button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
       }

       .subscription-buttons button:hover {
           background-color: #e6a727;
       }

       /* Style pour le message d'abonnement requis */
       .subscription-required {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 1000;
           justify-content: center;
           align-items: center;
           color: white;
           text-align: center;
           padding: 20px;
       }

       .subscription-required-content {
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           max-width: 400px;
           width: 90%;
       }

       .subscription-required-content h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .subscription-required-content p {
           color: #666;
           margin-bottom: 30px;
           }

       .subscription-required-content button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
           margin: 0 10px;
       }

       .subscription-required-content button:hover {
           background-color: #e6a727;
       }
        .loader-wrapper {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
        }

        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .page-loader-wrapper {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1002;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .page-loader {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        .loader-message {
            color: white;
            margin-top: 16px;
            font-size: 1rem;
            text-align: center;
            max-width: 80%;
        }

        .header {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
        }

        .header h1 {
            margin: 0;
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .logout-button:hover {
            background-color: #c0392b;
        }
       /* Styles pour le formulaire de portail captif */
      #portalForm {
          display: none; /*Caché par défaut*/
          flex-direction: column;
          gap: 10px;
          max-width: 600px; /* Limite la largeur du formulaire */
          margin: 20px auto;
          padding: 20px;
          background-color: rgba(255, 255, 255, 0.1); /* Léger fond pour le formulaire */
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2); /* Ombre légère */
      }
      #portalForm label {
          color: #fdbb2d; /* Couleur pour les labels */
      }
      #portalForm input[type="text"],
      #portalForm input[type="number"],
      #portalForm textarea,
      #portalForm select {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          background-color: rgba(255,255,255,0.2); /* Fond transparent */
          color: white; /* Couleur du texte */
      }

      #portalForm button {
          padding: 10px 15px;
          background-color: #fdbb2d;
          color: #1a2a6c;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
      }

      #portalForm button:hover {
          background-color: #e6a727;
      }
      #portalForm .list-input-container {
          display: flex;
          flex-direction: column;
      }

      #portalForm .list-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

      #portalForm .list-item input {
          flex: 1; /* Permet à l'input de prendre l'espace disponible */
          margin-right: 5px; /* Marge entre l'input et le bouton */
      }
        #portalForm .list-item button {
           padding: 5px 10px;
           background-color: #e74c3c; /* Couleur différente pour le bouton de suppression */
           color: white;
           border: none;
           border-radius: 4px;
           cursor: pointer;
           font-size: 14px;
        }

        #portalForm .list-item button:hover {
           background-color: #c0392b;
        }

        #configSection {
          margin-bottom:           20px;
          text-align: center; /* Center-align the buttons */
      }
        #configSection .config-buttons {
          display: inline-block;
          margin: 0 10px;
        }

        #systemVersionDisplay {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #fdbb2d;
            font-size: 0.8rem;
        }

        #redirectButtonContainer {
            margin-top: 10px;
            text-align: center;
        }

        #redirectButton {
            padding: 10px 15px;
            background-color: #fdbb2d;
            color: #1a2a6c;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: none; /* Hidden by default */
        }

        #redirectButton:hover {
          background-color: #e6a727;
      }

      .data-management-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        .data-management-buttons button {
            background-color: #fdbb2d;
            color: #1a2a6c;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }
        .data-management-buttons button:hover {
            background-color: #e6a727;
        }

        #importDataInput {
            display: none; /* Cache l'input file par défaut */
        }


    </style>
</head>
<body>
    <div class="page-loader-wrapper" id="pageLoaderWrapper">
        <div class="page-loader"></div>
        <div class="loader-message" id="pageLoaderMessage">Initialisation...</div>
    </div>
    <div class="loader-wrapper" id="loaderWrapper">
        <div class="loader"></div>
    </div>
    <div class="container" id="contentContainer" style="display:none;">
        <header class="header">
            <h1 id="networkNameDisplay">ADMIN WIFI ZONE</h1>
            <div class="wave"></div>
            <div id="systemVersionDisplay">Version du système: <span id="versionNumber"></span></div>
        </header>


        <main>
            <div id="subscriptionSection">
                <h2>Statut de l'Abonnement</h2>
                <div id="subscriptionStatus"></div>
                <div class="subscription-button">
                    <button id="subscribeMonthly">S'abonner (Mensuel - 1000 FCFA)</button>
                    <button id="subscribeYearly">S'abonner (Annuel - 10 000 FCFA)</button>
                </div>
            </div>

            <div id="configSection">
              <button onclick="togglePortalForm()" id="togglePortalFormBtn">Configurer le portail captif</button>
              <button onclick="downloadLoginFile()" id="downloadLoginBtn" style="display: none;">Télécharger le portail captif</button>
             </div>


            <form id="portalForm" style="display: none;">
                <label for="networkName">Nom du réseau:</label>
                <input type="text" id="networkName" name="networkName" required>

                <label for="contactNumber">Numéro à contacter:</label>
                <input type="text" id="contactNumber" name="contactNumber" required>

                <label for="fedapayApiKey">Clé API FedaPay Portail Captif:</label>
                <input type="text" id="fedapayApiKey" name="fedapayApiKey" required>

                <label for="loginMode">Mode de connexion par défaut :</label>
                <select id="loginMode" name="loginMode">
                    <option value="separate">Login (Utilisateur & Mot de passe)</option>
                    <option value="same">Log (Identifiant unique)</option>
                    <option value="pay">Pay (Page de paiement)</option>
                    <option value="hotspot1">Portail captif par défaut</option>
                    <option value="hotspot2">Portail captif secondaire</option>
                    <option value="hotspot3">Portail captif secondaire</option>
                    <!-- Ajoutez d'autres options Hotspot ici -->
                </select>
                <div id="redirectButtonContainer">
                    <button type="button" id="redirectButton">Accéder à la page</button>
                </div>

                <div class="list-input-container">
                    <label>Tarifs:</label>
                    <div id="tariffsList">
                        <div class="list-item">
                            <input type="text" placeholder="Nom du tarif" data-type="tariffName">
                            <input type="number" placeholder="Prix" data-type="tariffPrice">
                            <button type="button" onclick="addListItem('tariffsList')">Ajouter</button>
                         </div>
                      </div>
                 </div>

                 <div class="list-input-container">
                      <label>Adresses de connexion:</label>
                      <div id="connectionsList">
                         <div class="list-item">
                            <input type="text" placeholder="Adresse" data-type="connection">
                            <button type="button" onclick="addListItem('connectionsList')">Ajouter</button>
                           </div>
                      </div>
                  </div>

                  <div class="list-input-container">
                      <label>Services et produits:</label>
                      <div id="productsList">
                         <div class="list-item">
                             <input type="text" placeholder="Service/Produit" data-type="product">
                             <button type="button" onclick="addListItem('productsList')">Ajouter</button>
                         </div>
                     </div>
                 </div>

                 <button type="submit">Enregistrer la configuration</button>
             </form>

            <div class="menu">
                <a href="PageVenteTicket.html" class="menu-item" id="vente">
                    <i class="fas fa-ticket-alt"></i>
                    <h2>Vente de Tickets</h2>
                    <p>Procédez à la vente de nouveaux tickets Wifi.</p>
                </a>
                <a href="AdminVentePartenaires.html" class="menu-item" id="inventaire">
                    <i class="fas fa-clipboard-list"></i>
                    <h2>Inventaire des Tickets</h2>
                    <p>Consultez l'état des ventes de vos partenaires.</p>
                </a>
                <a href="Stock.html" class="menu-item" id="stock">
                    <i class="fas fa-boxes"></i>
                    <h2>Gestion des Stocks Partenaire</h2>
                    <p>Suivez les stocks de tickets de vos partenaires.</p>
                </a>
                <a href="a3.html" class="menu-item" id="administration">
                    <i class="fas fa-cog"></i>
                    <h2>Administration des Tickets</h2>
                    <p>Gérez les tickets, activez ou désactivez-les.</p>
                </a>
                <button onclick="logout()" class="logout-button">Déconnexion</button>
            </div>

            <div class="data-management-buttons">
                <button onclick="exportData()">Exporter les données</button>
                <input type="file" id="importDataInput" accept=".json">
                <button onclick="document.getElementById('importDataInput').click()">Importer les données</button>
            </div>

        </main>

    </div>


    <div id="paymentModal" class="payment-modal" style="display: none;">
        <span class="close-modal" onclick="closePaymentModal()">×</span>
        <h2>Paiement de l'Abonnement</h2>
        <p>Choisissez votre plan d'abonnement et procédez au paiement via FedaPay.</p>
        <!-- Les boutons de paiement seront ajoutés ici par le script -->
    </div>

    <div id="subscriptionRequiredModal" class="subscription-required" style="display: none;">
        <div class="subscription-required-content">
            <h2>Abonnement Requis</h2>
            <p>Un abonnement actif est nécessaire pour accéder à cette fonctionnalité.</p>
            <button onclick="redirectToSubscription()">S'abonner</button>
            <button onclick="hideSubscriptionRequiredModal()">Fermer</button>
        </div>
    </div>

    <div class="overlay" id="overlay" style="display: none;" onclick="closePaymentModal()"></div>

    <script type="module">
const _0x25db53=_0xa157;(function(_0x3c2701,_0x8a95ce){const _0x46f22f=_0xa157,_0x28c002=_0x3c2701();while(!![]){try{const _0x20c7b8=parseInt(_0x46f22f(0x161))/0x1+parseInt(_0x46f22f(0xba))/0x2+-parseInt(_0x46f22f(0xc9))/0x3*(-parseInt(_0x46f22f(0x1a3))/0x4)+-parseInt(_0x46f22f(0xdc))/0x5*(parseInt(_0x46f22f(0xaa))/0x6)+parseInt(_0x46f22f(0x16b))/0x7+parseInt(_0x46f22f(0xcb))/0x8*(-parseInt(_0x46f22f(0x187))/0x9)+parseInt(_0x46f22f(0x104))/0xa*(parseInt(_0x46f22f(0x142))/0xb);if(_0x20c7b8===_0x8a95ce)break;else _0x28c002['push'](_0x28c002['shift']());}catch(_0x5a65b1){_0x28c002['push'](_0x28c002['shift']());}}}(_0x59b9,0x8ec49));import{getActiveDatabase}from'./firebase-config-manager.js';import{ref,get,set,push,remove,update,onValue}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';let db,adminRef,fedapayApiKey,systemVersion;async function initializeDatabase(){const _0x2f665b=_0xa157;db=await getActiveDatabase(),console[_0x2f665b(0x1a8)]('Database\x20initialized\x20in\x20index.html');}async function checkLoginStatus(){const _0x5042a0=_0xa157;if(sessionStorage[_0x5042a0(0x116)](_0x5042a0(0x157))!==_0x5042a0(0xe5))redirectToLogin();else{const _0x5b1970=sessionStorage['getItem'](_0x5042a0(0x117));if(!_0x5b1970){console[_0x5042a0(0xd0)]('Current\x20user\x20ID\x20is\x20not\x20found\x20in\x20sessionStorage.'),redirectToLogin();return;}document[_0x5042a0(0x10f)](_0x5042a0(0xe3))[_0x5042a0(0xd9)][_0x5042a0(0x12e)]=_0x5042a0(0x160),adminRef=ref(db,_0x5042a0(0xaf)+_0x5b1970+_0x5042a0(0x132));}}function redirectToLogin(){const _0x497c28=_0xa157;window[_0x497c28(0xd1)][_0x497c28(0x1a6)]='loginAccueil.html';}window[_0x25db53(0xe1)]=function(){const _0x308261=_0x25db53;sessionStorage['clear'](),window[_0x308261(0xd1)][_0x308261(0xdf)](_0x308261(0x17d));};const venteMenuItem=document[_0x25db53(0x10f)]('vente'),inventaireMenuItem=document[_0x25db53(0x10f)](_0x25db53(0x11d)),stockMenuItem=document[_0x25db53(0x10f)](_0x25db53(0x147)),administrationMenuItem=document[_0x25db53(0x10f)]('administration'),subscriptionStatus=document['getElementById'](_0x25db53(0x14e)),subscribeMonthlyButton=document[_0x25db53(0x10f)](_0x25db53(0xcc)),subscribeYearlyButton=document['getElementById']('subscribeYearly'),paymentModal=document[_0x25db53(0x10f)]('paymentModal'),overlay=document[_0x25db53(0x10f)]('overlay'),subscriptionRequiredModal=document[_0x25db53(0x10f)](_0x25db53(0x1ad));function showLoader(){const _0x1da669=_0x25db53;document[_0x1da669(0x10f)]('loaderWrapper')[_0x1da669(0xd9)]['display']=_0x1da669(0x160);}function hideLoader(){const _0xa3c48c=_0x25db53;document[_0xa3c48c(0x10f)]('loaderWrapper')[_0xa3c48c(0xd9)]['display']=_0xa3c48c(0x170);}function _0x59b9(){const _0x1a9f25=['/portalConfig','Abonnement\x20annuel','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','then','catch','Erreur:\x20ID\x20administrateur\x20non\x20trouvé.\x20Veuillez\x20vous\x20reconnecter.','reason','Erreur\x20lors\x20de\x20l\x27annulation\x20de\x20l\x27abonnement:','Paiement\x20échoué.','Erreur\x20de\x20lecture\x20du\x20fichier:','target','Vous\x20devez\x20être\x20connecté\x20pour\x20annuler\x20un\x20abonnement.','togglePortalForm','11MruMvr','togglePortalFormBtn','\x22\x20data-type=\x22tariffPrice\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','parentNode','Adresse','stock','Configurer\x20le\x20portail\x20captif','/VendorsHistory','cancelled','<!--\x20FEDAPAY_API_KEY\x20-->','\x20réussi!','className','subscriptionStatus','products','<!--\x20CONTACT_NUMBER\x20-->','Les\x20données\x20importées\x20ne\x20sont\x20pas\x20valides.','\x22\x20data-type=\x22tariffName\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20value=\x22','[data-type=\x22tariffPrice\x22]','readAsText','Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket\x20:','redirectButton','isLoggedIn','addListItem','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','password','Statut\x20de\x20l\x27abonnement:\x20Inactif','pk_live_xxxxxxxxxxxxx','API\x20configuration\x20not\x20found\x20globally\x20for\x20subscription.','\x27,\x20','/VendorsHistory/','block','208829OcTpqy','https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/Portail%20par%20d%C3%A9faut.zip?alt=media&token=9f200c87-a577-4d51-ae08-8324c17b58e9','networkNameDisplay','connection','motDePasse','download','Vous\x20devez\x20être\x20connecté\x20pour\x20importer\x20les\x20données.','/TicketsTotal/','#productsList\x20.list-item\x20input','\x22\x20placeholder=\x22','202902XKeTNp','Mode\x20de\x20connexion\x20inconnu.','.json','setFullYear','hotspot1','none','Vous\x20devez\x20être\x20connecté\x20pour\x20télécharger\x20le\x20portail.','Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket.','querySelectorAll','textContent','<!--\x20ADMIN_USER_ID\x20-->','Ticket\x20','forEach','mensuel','yearly','productsList','parse','submit','loginAccueil.html','createObjectURL','portalForm','User\x20ID\x20not\x20found.\x20Cannot\x20check\x20subscription\x20status.','val','a3.html','Service/Produit','monthly','networkName','toLocaleDateString','8029998wirKkI','clear','Configuration\x20du\x20portail\x20captif\x20enregistrée\x20avec\x20succès!','Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20d\x27abonnement:','onerror','importData','Aucune\x20donnée\x20à\x20exporter.','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27abonnement:','fedapayApiKey','Erreur\x20lors\x20de\x20l\x27exportation\x20des\x20données.','<ul>','User\x20ID\x20not\x20found.\x20Cannot\x20cancel\x20subscription.','color','User\x20ID\x20not\x20found.\x20Cannot\x20initiate\x20payment.','[data-type=\x22tariffName\x22]','Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20:','trim','hotspot3','downloadLoginBtn','firebase-config-manager.js','/TicketsTotal','<!--\x20TARIFFS_TABLE\x20-->','.html','Admin\x20ID\x20not\x20found\x20in\x20session\x20storage.','#connectionsList\x20.list-item\x20input','Erreur\x20de\x20lecture\x20du\x20fichier.','<input\x20type=\x22text\x22\x20value=\x22','list-item','5812OuOIDp','Erreur\x20lors\x20du\x20téléchargement\x20du\x20portail\x20captif:','Statut\x20de\x20l\x27abonnement:\x20Actif\x20jusqu\x27au\x20','href','1.0.0','log','Current\x20user\x20ID\x20is\x20not\x20found\x20in\x20sessionStorage.','filter','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22><button\x20onclick=\x22initPayment(\x27','Traitement\x20des\x20tickets\x20uniques...','subscriptionRequiredModal','</tbody></table>','Masquer\x20le\x20formulaire','querySelector','users/Version\x20du\x20système','188004jZejSZ','object','user','versionNumber','log.html','users-data/','tariffs','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20style=\x22width:\x20100%;\x20border-collapse:\x20collapse;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','downloadLoginFile','includes','revokeObjectURL','Erreur','</li>','same','1266306RskOqn','getFullYear','Current\x20user\x20ID\x20is\x20not\x20provided\x20to\x20processTicket.','div','AdminVentePartenaires.html','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20configuration.','preventDefault','pageLoaderWrapper','https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/hotspot1.zip?alt=media&token=d1e7b9b5-102a-42c5-ab36-9b1764e995ff','endDate','_blank','createElement','application/json','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20value=\x22','change','1011ZpittL','#tariffsList\x20.list-item','8kyIRqq','subscribeMonthly','Vérification\x20du\x20ticket\x20pour\x20','contactNumber','price','error','location','<!--\x20CONNECTION_LOCATIONS\x20-->','pay',')\x22>Payer</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20lors\x20de\x20l\x27enregistrement\x20de\x20la\x20configuration:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','<!--\x20TARIFFS_TABLE_SIMPLE\x20-->','flex','style','remove','updatedData','10FTVqkA','CYBER\x20CAMPUS\x20WIFI\x20ZONE','product','replace','admin@example.com','logout','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27initialisation.','contentContainer','click','true','...','text','body','Erreur\x20lors\x20de\x20l\x27exportation:','Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20','connections','+229\x20XXXXXXXX','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20placeholder=\x22Nom\x20du\x20tarif\x22\x20data-type=\x22tariffName\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20placeholder=\x22Prix\x22\x20data-type=\x22tariffPrice\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','Nettoyage\x20des\x20tickets\x20traités...','</ul>','DOMContentLoaded','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27abonnement.','<table\x20style=\x22width:\x20100%;\x20border-collapse:\x20collapse;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>','Erreur\x20lors\x20de\x20l\x27annulation\x20de\x20l\x27abonnement.','separate','<!--\x20PRODUCTS_LIST\x20-->','push','Aucune\x20configuration\x20de\x20portail\x20captif\x20trouvée.','/TicketsTransit','onload','tariffsList','pay.html','status','Vente\x20du\x20ticket\x20','connectionsList','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','pageLoaderMessage','open','Vous\x20devez\x20être\x20connecté\x20pour\x20configurer\x20le\x20portail.','Erreur\x20lors\x20de\x20l\x27enregistrement\x20de\x20la\x20configuration.','1790380YiRGcd','message','toISOString','User\x20ID\x20not\x20found.\x20Cannot\x20download\x20login\x20file.','prix','username','utilisateur','inline-block','redirectToSubscription','category','TicketsTransit','getElementById','TicketsTotal','appendChild','value','Vous\x20devez\x20être\x20connecté\x20pour\x20vous\x20abonner.','files','System\x20Version\x20not\x20found\x20globally,\x20using\x20default.','getItem','currentUserId','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','Vendeur\x20automatique','red','\x22\x20data-type=\x22','innerHTML','inventaire','/TicketsTransit/','name','stringify','Current\x20user\x20ID\x20is\x20not\x20provided\x20to\x20sellTicketAutomatically.','https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/Partail%20capitf%20secondaire.zip?alt=media&token=7bf96399-b991-40db-af64-48b41ef9fd71','DIALOG_DISMISSED','init','getMonth','loginMode','annuel','active','ADMIN\x20WIFI\x20ZONE','hotspot2','addEventListener','Une\x20erreur\x20est\x20survenue\x20lors\x20du\x20traitement\x20des\x20tickets.','login.html','display','Abonnement\x20','removeChild','exists','/admin/subscription','<!--\x20NETWORK_NAME\x20-->','exportData'];_0x59b9=function(){return _0x1a9f25;};return _0x59b9();}function _0xa157(_0x49b7eb,_0x1e363a){const _0x59b90a=_0x59b9();return _0xa157=function(_0xa1573c,_0x130efa){_0xa1573c=_0xa1573c-0xaa;let _0x3c5898=_0x59b90a[_0xa1573c];return _0x3c5898;},_0xa157(_0x49b7eb,_0x1e363a);}function showPageLoader(){const _0x54a9fc=_0x25db53;document['getElementById'](_0x54a9fc(0xc1))['style'][_0x54a9fc(0x12e)]=_0x54a9fc(0xd8);}function hidePageLoader(){const _0x141a42=_0x25db53;document[_0x141a42(0x10f)]('pageLoaderWrapper')[_0x141a42(0xd9)]['display']=_0x141a42(0x170);}function showSubscriptionRequiredModal(){const _0x3322c8=_0x25db53;subscriptionRequiredModal[_0x3322c8(0xd9)][_0x3322c8(0x12e)]='flex';}function hideSubscriptionRequiredModal(){const _0x537001=_0x25db53;subscriptionRequiredModal[_0x537001(0xd9)][_0x537001(0x12e)]=_0x537001(0x170);}function redirectToSubscription(){hideSubscriptionRequiredModal();}function checkSubscriptionStatus(){const _0x2153d5=_0x25db53,_0x2b97b6=sessionStorage[_0x2153d5(0x116)]('currentUserId');if(!_0x2b97b6){console[_0x2153d5(0xd0)](_0x2153d5(0x180));return;}const _0x5a9ddb=ref(db,'users-data/'+_0x2b97b6+'/admin/subscription');get(_0x5a9ddb)[_0x2153d5(0x138)](_0x53a2b3=>{const _0x256ec6=_0x2153d5,_0x3369c1=_0x53a2b3[_0x256ec6(0x181)](),_0x1a01f8=new Date();if(_0x3369c1&&_0x3369c1[_0x256ec6(0xfc)]===_0x256ec6(0x128)){const _0x15373d=new Date(_0x3369c1[_0x256ec6(0xc3)]);_0x15373d<_0x1a01f8?(subscriptionStatus['textContent']='Statut\x20de\x20l\x27abonnement:\x20Expiré',subscriptionStatus['style'][_0x256ec6(0x193)]=_0x256ec6(0x11a),subscribeMonthlyButton[_0x256ec6(0xd9)][_0x256ec6(0x12e)]=_0x256ec6(0x10b),subscribeYearlyButton[_0x256ec6(0xd9)][_0x256ec6(0x12e)]=_0x256ec6(0x10b),set(_0x5a9ddb,{..._0x3369c1,'status':'expired'})):(subscriptionStatus[_0x256ec6(0x174)]=_0x256ec6(0x1a5)+_0x15373d[_0x256ec6(0x186)](),subscriptionStatus[_0x256ec6(0xd9)][_0x256ec6(0x193)]='green',subscribeMonthlyButton[_0x256ec6(0xd9)][_0x256ec6(0x12e)]=_0x256ec6(0x170),subscribeYearlyButton[_0x256ec6(0xd9)][_0x256ec6(0x12e)]=_0x256ec6(0x170));}else subscriptionStatus['textContent']=_0x256ec6(0x15b),subscriptionStatus[_0x256ec6(0xd9)]['color']=_0x256ec6(0x11a),subscribeMonthlyButton['style'][_0x256ec6(0x12e)]='inline-block',subscribeYearlyButton['style'][_0x256ec6(0x12e)]=_0x256ec6(0x10b);})[_0x2153d5(0x139)](_0x2bdf1e=>{const _0x75e2f6=_0x2153d5;console['error'](_0x75e2f6(0x18a),_0x2bdf1e);});}function checkUserAccess(){const _0x3678df=_0x25db53;get(adminRef)[_0x3678df(0x138)](_0x4a6b80=>{const _0x2b1b31=_0x3678df,_0x1c3bae=_0x4a6b80['val']();(!_0x1c3bae||_0x1c3bae[_0x2b1b31(0xfc)]!==_0x2b1b31(0x128))&&showSubscriptionRequiredModal();});}venteMenuItem[_0x25db53(0x12b)](_0x25db53(0xe4),_0x1ad704=>{const _0x3aa57b=_0x25db53;_0x1ad704[_0x3aa57b(0xc0)](),checkUserAccess();const _0x2c9d0a=sessionStorage['getItem'](_0x3aa57b(0x117));_0x2c9d0a?window['location'][_0x3aa57b(0x1a6)]='PageVenteTicket.html?adminId='+_0x2c9d0a:(console[_0x3aa57b(0xd0)](_0x3aa57b(0x19e)),alert(_0x3aa57b(0x13a)));}),inventaireMenuItem['addEventListener']('click',_0x37ed3a=>{const _0x1db31e=_0x25db53;_0x37ed3a[_0x1db31e(0xc0)](),checkUserAccess(),window[_0x1db31e(0xd1)][_0x1db31e(0x1a6)]=_0x1db31e(0xbe);}),stockMenuItem[_0x25db53(0x12b)]('click',_0x31aab7=>{const _0x3031fa=_0x25db53;_0x31aab7[_0x3031fa(0xc0)](),checkUserAccess(),window['location'][_0x3031fa(0x1a6)]='Stock.html';}),administrationMenuItem['addEventListener'](_0x25db53(0xe4),_0x5df0d2=>{const _0x204f47=_0x25db53;_0x5df0d2[_0x204f47(0xc0)](),checkUserAccess(),window['location']['href']=_0x204f47(0x182);}),subscribeMonthlyButton[_0x25db53(0x12b)](_0x25db53(0xe4),()=>{const _0x33e555=_0x25db53;initiatePayment(_0x33e555(0x184));}),subscribeYearlyButton[_0x25db53(0x12b)](_0x25db53(0xe4),()=>{const _0x56bda5=_0x25db53;initiatePayment(_0x56bda5(0x179));});async function initiatePayment(_0x197012){const _0x4c4787=_0x25db53,_0x140d53=_0x197012===_0x4c4787(0x184)?0x3e8:0x2710,_0x4a05dd=_0x197012===_0x4c4787(0x184)?'Abonnement\x20mensuel':_0x4c4787(0x136),_0x699fb9=sessionStorage[_0x4c4787(0x116)](_0x4c4787(0x117));if(!_0x699fb9){console['error'](_0x4c4787(0x194)),alert(_0x4c4787(0x113));return;}FedaPay[_0x4c4787(0x124)]({'public_key':fedapayApiKey,'transaction':{'amount':_0x140d53,'description':_0x4a05dd},'customer':{'email':_0x4c4787(0xe0)},'onComplete':async function(_0x29f074){const _0x4f4704=_0x4c4787;if(_0x29f074[_0x4f4704(0x13b)]===FedaPay[_0x4f4704(0x123)])alert(_0x4f4704(0x13d));else _0x29f074[_0x4f4704(0x13b)]===FedaPay['CHECKOUT_COMPLETED']&&handleSuccessfulPayment(_0x197012,_0x29f074,_0x699fb9);}})[_0x4c4787(0x101)]();}async function handleSuccessfulPayment(_0x507d6c,_0x44e828,_0x312f93){const _0x1183f1=_0x25db53,_0x436474=new Date(),_0x421f41=new Date(_0x436474);_0x507d6c===_0x1183f1(0x184)?_0x421f41['setMonth'](_0x421f41[_0x1183f1(0x125)]()+0x1):_0x421f41[_0x1183f1(0x16e)](_0x421f41[_0x1183f1(0xbb)]()+0x1);const _0x348f93={'status':_0x1183f1(0x128),'startDate':_0x436474[_0x1183f1(0x106)](),'endDate':_0x421f41[_0x1183f1(0x106)](),'transactionId':_0x44e828['transaction']['id'],'plan':_0x507d6c};try{const _0x1cfa18=ref(db,_0x1183f1(0xaf)+_0x312f93+_0x1183f1(0x132));await set(_0x1cfa18,_0x348f93),checkSubscriptionStatus(),alert(_0x1183f1(0x12f)+(_0x507d6c==='monthly'?_0x1183f1(0x178):_0x1183f1(0x127))+_0x1183f1(0x14c));}catch(_0x550c54){console[_0x1183f1(0xd0)](_0x1183f1(0x18e),_0x550c54),alert(_0x1183f1(0xf1));}}async function cancelSubscription(){const _0x3681f8=_0x25db53,_0x584d7d=sessionStorage['getItem'](_0x3681f8(0x117));if(!_0x584d7d){console[_0x3681f8(0xd0)](_0x3681f8(0x192)),alert(_0x3681f8(0x140));return;}try{const _0x2bc151=ref(db,_0x3681f8(0xaf)+_0x584d7d+_0x3681f8(0x132));await set(_0x2bc151,{...(await get(_0x2bc151))[_0x3681f8(0x181)](),'status':_0x3681f8(0x14a)}),checkSubscriptionStatus(),alert('Abonnement\x20annulé.');}catch(_0x21b400){console[_0x3681f8(0xd0)](_0x3681f8(0x13c),_0x21b400),alert(_0x3681f8(0xf3));}}async function processConnectedTickets(){const _0xcce985=_0x25db53,_0x1431a2=document[_0xcce985(0x10f)]('pageLoaderMessage'),_0x324c79=sessionStorage['getItem'](_0xcce985(0x117));if(!_0x324c79){console[_0xcce985(0xd0)](_0xcce985(0x1a9));return;}const _0x5b259f=ref(db,_0xcce985(0xaf)+_0x324c79+'/TicketConnecté');try{_0x1431a2[_0xcce985(0x174)]='Vérification\x20des\x20tickets\x20connectés...';const _0x5b865b=await get(_0x5b259f);let _0x158516=_0x5b865b[_0xcce985(0x181)]()||{};const _0x5afeb7={};for(const _0xf211cb in _0x158516){const _0x232ae8=_0x158516[_0xf211cb]['username'];!_0x5afeb7[_0x232ae8]&&(_0x5afeb7[_0x232ae8]=_0x158516[_0xf211cb]);}_0x1431a2['textContent']=_0xcce985(0x1ac);for(const _0x23ddb2 in _0x5afeb7){await processTicket(_0x5afeb7[_0x23ddb2],_0x324c79);}_0x1431a2[_0xcce985(0x174)]=_0xcce985(0xee),await remove(_0x5b259f);}catch(_0x2b90a6){console['error']('Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20connectés\x20:',_0x2b90a6),showNotification(_0xcce985(0xb7),_0xcce985(0x12c));}}async function processTicket(_0x3d2a73,_0x4bd4b2){const _0xa00754=_0x25db53,_0x44b223=document[_0xa00754(0x10f)](_0xa00754(0x100));if(!_0x4bd4b2){console['error'](_0xa00754(0xbc));return;}try{_0x44b223[_0xa00754(0x174)]=_0xa00754(0xcd)+_0x3d2a73['username']+_0xa00754(0xe6);const _0x2642c0=ref(db,'users-data/'+_0x4bd4b2+_0xa00754(0x149)),_0x45266f=await get(_0x2642c0),_0x15d1bc=_0x45266f[_0xa00754(0x181)]()||{};let _0x41ee0e=![];for(const _0x351d1b in _0x15d1bc){const _0x50c251=_0x15d1bc[_0x351d1b];for(const _0x453f12 in _0x50c251){if(_0x50c251[_0x453f12][_0xa00754(0xac)]===_0x3d2a73[_0xa00754(0x109)]){_0x41ee0e=!![];break;}}if(_0x41ee0e)break;}if(!_0x41ee0e){_0x44b223['textContent']='Traitement\x20du\x20ticket\x20'+_0x3d2a73[_0xa00754(0x109)]+'...';const _0x584b44=ref(db,_0xa00754(0xaf)+_0x4bd4b2+_0xa00754(0x19b)),_0x4e803e=ref(db,'users-data/'+_0x4bd4b2+_0xa00754(0xf8)),_0x4f65a0=await get(_0x584b44),_0x40b056=await get(_0x4e803e),_0x2a00de=_0x4f65a0[_0xa00754(0x181)]()||{},_0x3576bc=_0x40b056[_0xa00754(0x181)]()||{};let _0x714b98=null,_0x2858f2=null,_0x26d5f8=null;for(const _0xd817db in _0x2a00de){const _0x3b7b50=(_0x2a00de[_0xd817db]['utilisateur']||[])['indexOf'](_0x3d2a73['username']);if(_0x3b7b50>-0x1){_0x714b98={'category':_0xd817db,'user':_0x2a00de[_0xd817db][_0xa00754(0x10a)][_0x3b7b50],'password':_0x2a00de[_0xd817db][_0xa00754(0x165)][_0x3b7b50],'price':_0x2a00de[_0xd817db][_0xa00754(0x108)][_0x3b7b50],'updatedData':{..._0x2a00de[_0xd817db],'utilisateur':_0x2a00de[_0xd817db][_0xa00754(0x10a)][_0xa00754(0x1aa)]((_0x3029f4,_0x3667da)=>_0x3667da!==_0x3b7b50),'motDePasse':_0x2a00de[_0xd817db][_0xa00754(0x165)]['filter']((_0x5c1c9b,_0x4f934c)=>_0x4f934c!==_0x3b7b50),'prix':_0x2a00de[_0xd817db][_0xa00754(0x108)][_0xa00754(0x1aa)]((_0x16e3e7,_0x41ba03)=>_0x41ba03!==_0x3b7b50)}},_0x2858f2=ref(db,_0xa00754(0xaf)+_0x4bd4b2+_0xa00754(0x168)+_0xd817db),_0x26d5f8=_0xa00754(0x110);break;}}if(!_0x714b98)for(const _0x2278a1 in _0x3576bc){if(_0x3576bc[_0x2278a1][_0xa00754(0xac)]===_0x3d2a73['username']){_0x714b98={'category':_0x3576bc[_0x2278a1][_0xa00754(0x10d)],'user':_0x3576bc[_0x2278a1][_0xa00754(0xac)],'password':_0x3576bc[_0x2278a1][_0xa00754(0x15a)],'price':_0x3576bc[_0x2278a1][_0xa00754(0xcf)]},_0x2858f2=ref(db,_0xa00754(0xaf)+_0x4bd4b2+_0xa00754(0x11e)+_0x2278a1),_0x26d5f8=_0xa00754(0x10e);break;}}_0x714b98&&(_0x44b223['textContent']=_0xa00754(0xfd)+_0x3d2a73[_0xa00754(0x109)]+'...',await sellTicketAutomatically(_0x714b98,_0x2858f2,_0x26d5f8,_0x4bd4b2));}}catch(_0x246a29){console['error']('Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20:',_0x246a29),showNotification(_0xa00754(0xb7),_0xa00754(0xea)+_0x3d2a73[_0xa00754(0x109)]+'.');}}async function sellTicketAutomatically(_0x14d2e3,_0x19b101,_0x341677,_0x5e4b8f){const _0x591908=_0x25db53;if(!_0x5e4b8f){console['error'](_0x591908(0x121));return;}try{const _0x33566f=_0x591908(0x119),_0xe38e56=ref(db,'users-data/'+_0x5e4b8f+_0x591908(0x15f)+_0x33566f);await push(_0xe38e56,{'category':_0x14d2e3['category'],'user':_0x14d2e3[_0x591908(0xac)],'password':_0x14d2e3[_0x591908(0x15a)],'price':_0x14d2e3[_0x591908(0xcf)],'soldAt':Date['now'](),'vendorId':_0x33566f}),_0x341677===_0x591908(0x110)?await set(_0x19b101,_0x14d2e3[_0x591908(0xdb)]):await remove(_0x19b101),console[_0x591908(0x1a8)](_0x591908(0x176)+_0x14d2e3[_0x591908(0xac)]+'\x20vendu\x20automatiquement\x20et\x20enregistré\x20dans\x20VendorsHistory.');}catch(_0x361e06){console['error'](_0x591908(0x155),_0x361e06),showNotification(_0x591908(0xb7),_0x591908(0x172));}}window[_0x25db53(0xe1)]=function(){const _0x34c853=_0x25db53;sessionStorage[_0x34c853(0x188)](),window[_0x34c853(0xd1)][_0x34c853(0xdf)](_0x34c853(0x17d));},window[_0x25db53(0x141)]=function(){const _0x3cc534=_0x25db53,_0x3cdb3e=document['getElementById'](_0x3cc534(0x17f)),_0xbbc281=document[_0x3cc534(0x10f)]('togglePortalFormBtn'),_0x1e0d9a=document['getElementById'](_0x3cc534(0x199));_0x3cdb3e[_0x3cc534(0xd9)][_0x3cc534(0x12e)]===_0x3cc534(0x170)||_0x3cdb3e[_0x3cc534(0xd9)]['display']===''?(_0x3cdb3e['style'][_0x3cc534(0x12e)]=_0x3cc534(0xd8),_0x1e0d9a[_0x3cc534(0xd9)][_0x3cc534(0x12e)]=_0x3cc534(0x10b),_0xbbc281['textContent']=_0x3cc534(0x1af)):(_0x3cdb3e[_0x3cc534(0xd9)][_0x3cc534(0x12e)]=_0x3cc534(0x170),_0x1e0d9a[_0x3cc534(0xd9)][_0x3cc534(0x12e)]=_0x3cc534(0x170),_0xbbc281[_0x3cc534(0x174)]=_0x3cc534(0x148));},window[_0x25db53(0x158)]=function(_0x4a9209){const _0x43d2db=_0x25db53,_0x17f2e5=document[_0x43d2db(0x10f)](_0x4a9209),_0x468633=document[_0x43d2db(0xc5)](_0x43d2db(0xbd));_0x468633[_0x43d2db(0x14d)]='list-item';let _0x3e9d1a='text';if(_0x4a9209==='tariffsList')_0x468633[_0x43d2db(0x11c)]=_0x43d2db(0xed);else{let _0x4e4c3f='';if(_0x4a9209===_0x43d2db(0xfe))_0x4e4c3f=_0x43d2db(0x146);else _0x4a9209===_0x43d2db(0x17a)&&(_0x4e4c3f=_0x43d2db(0x183));_0x468633['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22'+_0x3e9d1a+_0x43d2db(0x16a)+_0x4e4c3f+_0x43d2db(0x11b)+_0x4a9209['slice'](0x0,-0x4)+_0x43d2db(0xff);}_0x17f2e5[_0x43d2db(0x111)](_0x468633);},window['removeListItem']=function(_0x14dff4){const _0x1fbe7d=_0x25db53;_0x14dff4[_0x1fbe7d(0x145)][_0x1fbe7d(0xda)]();},document[_0x25db53(0x10f)](_0x25db53(0x17f))[_0x25db53(0x12b)](_0x25db53(0x17c),async _0x2120b1=>{const _0xaba949=_0x25db53;_0x2120b1[_0xaba949(0xc0)](),showLoader();const _0x3eace0=sessionStorage['getItem']('currentUserId');if(!_0x3eace0){console['error']('User\x20ID\x20not\x20found.\x20Cannot\x20save\x20portal\x20configuration.'),alert(_0xaba949(0x102)),hideLoader();return;}const _0x37b6d9={'networkName':document['getElementById']('networkName')[_0xaba949(0x112)],'contactNumber':document[_0xaba949(0x10f)](_0xaba949(0xce))[_0xaba949(0x112)],'fedapayApiKey':document['getElementById'](_0xaba949(0x18f))['value'],'loginMode':document['getElementById']('loginMode')[_0xaba949(0x112)],'tariffs':[],'connections':[],'products':[]};document[_0xaba949(0x173)](_0xaba949(0xca))[_0xaba949(0x177)](_0x439ae2=>{const _0x4170d5=_0xaba949,_0x3dd036=_0x439ae2[_0x4170d5(0x1b0)](_0x4170d5(0x195)),_0x4c75c3=_0x439ae2[_0x4170d5(0x1b0)](_0x4170d5(0x153));if(_0x3dd036&&_0x4c75c3){const _0x198fc2=_0x3dd036[_0x4170d5(0x112)]['trim'](),_0x344ae5=parseFloat(_0x4c75c3[_0x4170d5(0x112)]);_0x198fc2&&!isNaN(_0x344ae5)&&_0x37b6d9[_0x4170d5(0xb0)]['push']({'name':_0x198fc2,'price':_0x344ae5});}}),document[_0xaba949(0x173)](_0xaba949(0x19f))['forEach'](_0x3ecbfd=>{const _0xbee4b=_0xaba949,_0x5375f2=_0x3ecbfd['value'][_0xbee4b(0x197)]();_0x5375f2&&_0x37b6d9[_0xbee4b(0xeb)][_0xbee4b(0xf6)](_0x5375f2);}),document[_0xaba949(0x173)](_0xaba949(0x169))[_0xaba949(0x177)](_0x4d9432=>{const _0x4f4245=_0xaba949,_0x5b1c4=_0x4d9432['value']['trim']();_0x5b1c4&&_0x37b6d9[_0x4f4245(0x14f)][_0x4f4245(0xf6)](_0x5b1c4);});try{const _0x27af06=ref(db,_0xaba949(0xaf)+_0x3eace0+_0xaba949(0x135));await set(_0x27af06,_0x37b6d9),alert(_0xaba949(0x189)),hideLoader(),document[_0xaba949(0x10f)]('portalForm')['reset'](),document['getElementById']('portalForm')[_0xaba949(0xd9)]['display']=_0xaba949(0x170),document[_0xaba949(0x10f)](_0xaba949(0x143))[_0xaba949(0x174)]=_0xaba949(0x148),document[_0xaba949(0x10f)]('downloadLoginBtn')['style']['display']=_0xaba949(0x170),document[_0xaba949(0x10f)](_0xaba949(0x163))[_0xaba949(0x174)]=_0x37b6d9[_0xaba949(0x185)];}catch(_0x34d848){console['error'](_0xaba949(0xd5),_0x34d848),alert(_0xaba949(0x103)),hideLoader();}});async function downloadLoginFile(){const _0x17c722=_0x25db53;showLoader();const _0x80f597=sessionStorage[_0x17c722(0x116)]('currentUserId');if(!_0x80f597){console['error'](_0x17c722(0x107)),hideLoader(),alert(_0x17c722(0x171));return;}try{const _0x1a2f65=ref(db,'users-data/'+_0x80f597+_0x17c722(0x135)),_0x1ab2ef=await get(_0x1a2f65);if(!_0x1ab2ef[_0x17c722(0x131)]()){alert(_0x17c722(0xf7)),hideLoader();return;}const _0x2e675c=_0x1ab2ef[_0x17c722(0x181)]();let _0xbcfa79='',_0x5ad30a='';if(_0x2e675c[_0x17c722(0x126)]===_0x17c722(0xf4)){const _0x17f826=await fetch('login.html');_0xbcfa79=await _0x17f826['text'](),_0x5ad30a='login.html';}else{if(_0x2e675c[_0x17c722(0x126)]==='same'){const _0x4bc614=await fetch('log.html');_0xbcfa79=await _0x4bc614[_0x17c722(0xe7)](),_0x5ad30a='log.html';}else{if(_0x2e675c[_0x17c722(0x126)]===_0x17c722(0xd3)){const _0xa43e5a=await fetch(_0x17c722(0xfb));_0xbcfa79=await _0xa43e5a[_0x17c722(0xe7)](),_0x5ad30a='pay.html';}else{const _0x1ae698=await fetch(_0x2e675c[_0x17c722(0x126)]+_0x17c722(0x19d));_0xbcfa79=await _0x1ae698[_0x17c722(0xe7)](),_0x5ad30a=_0x2e675c[_0x17c722(0x126)]+_0x17c722(0x19d);}}}_0xbcfa79=_0xbcfa79[_0x17c722(0xdf)](_0x17c722(0x175),_0x80f597);function _0x2feb08(_0x142ba0){const _0x47847b=_0x17c722;let _0x16b9a4=_0x47847b(0xb3);return _0x142ba0[_0x47847b(0x177)](_0xecb26a=>{const _0x50d693=_0x47847b;_0x16b9a4+=_0x50d693(0xb1)+_0xecb26a[_0x50d693(0x11f)]+_0x50d693(0x159)+_0xecb26a[_0x50d693(0xcf)]+_0x50d693(0x1ab)+_0xecb26a[_0x50d693(0x11f)]+_0x50d693(0x15e)+_0xecb26a[_0x50d693(0xcf)]+_0x50d693(0xd4);}),_0x16b9a4+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x16b9a4;}function _0x24bea1(_0x4df1b3){const _0xb79469=_0x17c722;let _0x30ba20=_0xb79469(0xf2);return _0x4df1b3[_0xb79469(0x177)](_0x4c06a1=>{const _0x53354f=_0xb79469;_0x30ba20+=_0x53354f(0xb2)+_0x4c06a1[_0x53354f(0x11f)]+_0x53354f(0x137)+_0x4c06a1[_0x53354f(0xcf)]+_0x53354f(0x118);}),_0x30ba20+=_0xb79469(0x1ae),_0x30ba20;}function _0x3bcd9b(_0x6ac5ad){const _0x319fb9=_0x17c722;let _0x161f03=_0x319fb9(0x191);return _0x6ac5ad[_0x319fb9(0x177)](_0x43f8cd=>{const _0x3837ee=_0x319fb9;_0x161f03+='<li>'+_0x43f8cd+_0x3837ee(0xb8);}),_0x161f03+=_0x319fb9(0xef),_0x161f03;}_0xbcfa79=_0xbcfa79[_0x17c722(0xdf)](_0x17c722(0x19c),_0x2feb08(_0x2e675c[_0x17c722(0xb0)]||[])),_0xbcfa79=_0xbcfa79[_0x17c722(0xdf)](_0x17c722(0xd7),_0x24bea1(_0x2e675c[_0x17c722(0xb0)]||[])),_0xbcfa79=_0xbcfa79[_0x17c722(0xdf)](_0x17c722(0xd2),_0x3bcd9b(_0x2e675c[_0x17c722(0xeb)]||[])),_0xbcfa79=_0xbcfa79['replace'](_0x17c722(0xf5),_0x3bcd9b(_0x2e675c[_0x17c722(0x14f)]||[])),_0xbcfa79=_0xbcfa79[_0x17c722(0xdf)](_0x17c722(0x150),_0x2e675c[_0x17c722(0xce)]||_0x17c722(0xec)),_0xbcfa79=_0xbcfa79[_0x17c722(0xdf)](_0x17c722(0x133),_0x2e675c[_0x17c722(0x185)]||_0x17c722(0xdd)),_0xbcfa79=_0xbcfa79[_0x17c722(0xdf)](_0x17c722(0x14b),_0x2e675c[_0x17c722(0x18f)]||'');const _0x2e9d43=new Blob([_0xbcfa79],{'type':'text/html'}),_0x5ec44a=URL[_0x17c722(0x17e)](_0x2e9d43),_0xd3e151=document[_0x17c722(0xc5)]('a');_0xd3e151['href']=_0x5ec44a,_0xd3e151[_0x17c722(0x166)]=_0x5ad30a,document['body'][_0x17c722(0x111)](_0xd3e151),_0xd3e151[_0x17c722(0xe4)](),document[_0x17c722(0xe8)][_0x17c722(0x130)](_0xd3e151),URL[_0x17c722(0xb6)](_0x5ec44a);const _0x8bd83a=document[_0x17c722(0xc5)]('a');_0x8bd83a[_0x17c722(0x1a6)]=_0x17c722(0x19a),_0x8bd83a[_0x17c722(0x166)]=_0x17c722(0x19a),document['body'][_0x17c722(0x111)](_0x8bd83a),_0x8bd83a[_0x17c722(0xe4)](),document[_0x17c722(0xe8)]['removeChild'](_0x8bd83a),hideLoader();}catch(_0x4c4133){console[_0x17c722(0xd0)](_0x17c722(0x1a4),_0x4c4133),alert('Erreur\x20lors\x20du\x20téléchargement\x20du\x20portail\x20captif.'),hideLoader();}}window[_0x25db53(0xb4)]=downloadLoginFile;async function loadPortalConfig(){const _0x7ecba=_0x25db53;showLoader();const _0x2af435=sessionStorage[_0x7ecba(0x116)](_0x7ecba(0x117));try{const _0x3f1066=ref(db,_0x7ecba(0xaf)+_0x2af435+_0x7ecba(0x135)),_0x5ecb79=ref(db,'users/API'),_0x3c06ab=ref(db,_0x7ecba(0x1b1)),_0xd4aaf6=await get(_0x3f1066),_0x1675f5=await get(_0x5ecb79),_0x432790=await get(_0x3c06ab);_0x1675f5[_0x7ecba(0x131)]()?fedapayApiKey=_0x1675f5[_0x7ecba(0x181)]():(console['log'](_0x7ecba(0x15d)),fedapayApiKey=_0x7ecba(0x15c));_0x432790[_0x7ecba(0x131)]()?systemVersion=_0x432790[_0x7ecba(0x181)]():(systemVersion=_0x7ecba(0x1a7),console[_0x7ecba(0x1a8)](_0x7ecba(0x115)));document[_0x7ecba(0x10f)](_0x7ecba(0xad))[_0x7ecba(0x174)]=systemVersion;if(_0xd4aaf6[_0x7ecba(0x131)]()){const _0x1b3ccb=_0xd4aaf6[_0x7ecba(0x181)]();document['getElementById'](_0x7ecba(0x185))[_0x7ecba(0x112)]=_0x1b3ccb['networkName']||'',document[_0x7ecba(0x10f)](_0x7ecba(0xce))['value']=_0x1b3ccb[_0x7ecba(0xce)]||'',document[_0x7ecba(0x10f)](_0x7ecba(0x18f))[_0x7ecba(0x112)]=_0x1b3ccb[_0x7ecba(0x18f)]||'',document[_0x7ecba(0x10f)](_0x7ecba(0x126))[_0x7ecba(0x112)]=_0x1b3ccb[_0x7ecba(0x126)]||_0x7ecba(0xf4),document['getElementById'](_0x7ecba(0x163))[_0x7ecba(0x174)]=_0x1b3ccb[_0x7ecba(0x185)]||_0x7ecba(0x129);function _0x27d33a(_0x52f259,_0x2915eb,_0x19970c){const _0x1c3ef2=_0x7ecba,_0x95dcfe=document['getElementById'](_0x52f259);_0x95dcfe[_0x1c3ef2(0x11c)]='',_0x2915eb[_0x1c3ef2(0x177)](_0x2fc7e9=>{const _0x48c19c=_0x1c3ef2,_0x473f9c=document['createElement'](_0x48c19c(0xbd));_0x473f9c['className']=_0x48c19c(0x1a2),_0x52f259===_0x48c19c(0xfa)?_0x473f9c[_0x48c19c(0x11c)]=_0x48c19c(0xc7)+_0x2fc7e9[_0x48c19c(0x11f)]+_0x48c19c(0x152)+_0x2fc7e9[_0x48c19c(0xcf)]+_0x48c19c(0x144):_0x473f9c['innerHTML']=_0x48c19c(0x1a1)+_0x2fc7e9+_0x48c19c(0x11b)+_0x19970c+_0x48c19c(0xd6),_0x95dcfe[_0x48c19c(0x111)](_0x473f9c);}),addListItem(_0x52f259);}_0x27d33a(_0x7ecba(0xfa),_0x1b3ccb[_0x7ecba(0xb0)]||[],null),_0x27d33a('connectionsList',_0x1b3ccb[_0x7ecba(0xeb)]||[],_0x7ecba(0x164)),_0x27d33a(_0x7ecba(0x17a),_0x1b3ccb[_0x7ecba(0x14f)]||[],_0x7ecba(0xde));}else console[_0x7ecba(0x1a8)]('Aucune\x20configuration\x20trouvée.'),addListItem('tariffsList'),addListItem(_0x7ecba(0xfe)),addListItem('productsList');}catch(_0xd20b1a){console[_0x7ecba(0xd0)]('Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20configuration:',_0xd20b1a),alert(_0x7ecba(0xbf));}finally{hideLoader();}}document[_0x25db53(0x10f)]('redirectButton')['addEventListener'](_0x25db53(0xe4),function(){const _0x4cae5c=_0x25db53,_0x2d6d74=document[_0x4cae5c(0x10f)](_0x4cae5c(0x126))[_0x4cae5c(0x112)];let _0x1ccc2a='';switch(_0x2d6d74){case _0x4cae5c(0xf4):_0x1ccc2a=_0x4cae5c(0x12d);break;case'same':_0x1ccc2a=_0x4cae5c(0xae);break;case _0x4cae5c(0xd3):_0x1ccc2a='pay.html';break;case _0x4cae5c(0x16f):_0x1ccc2a=_0x4cae5c(0x162);break;case _0x4cae5c(0x12a):_0x1ccc2a=_0x4cae5c(0xc2);break;case _0x4cae5c(0x198):_0x1ccc2a=_0x4cae5c(0x122);break;default:alert(_0x4cae5c(0x16c));return;}window[_0x4cae5c(0x101)](_0x1ccc2a,_0x4cae5c(0xc4));}),document['getElementById']('loginMode')[_0x25db53(0x12b)](_0x25db53(0xc8),function(){const _0x13b80c=_0x25db53,_0x2259dc=this[_0x13b80c(0x112)],_0x220666=document[_0x13b80c(0x10f)](_0x13b80c(0x156));[_0x13b80c(0xf4),_0x13b80c(0xb9),_0x13b80c(0xd3)][_0x13b80c(0xb5)](_0x2259dc)?_0x220666[_0x13b80c(0xd9)][_0x13b80c(0x12e)]='none':_0x220666[_0x13b80c(0xd9)]['display']=_0x13b80c(0x10b);});async function exportData(){const _0x45bb16=_0x25db53;showLoader();const _0x5e9c6a=sessionStorage[_0x45bb16(0x116)](_0x45bb16(0x117));if(!_0x5e9c6a){hideLoader(),alert('Vous\x20devez\x20être\x20connecté\x20pour\x20exporter\x20les\x20données.');return;}try{const _0x577049=ref(db,_0x45bb16(0xaf)+_0x5e9c6a),_0x3e9671=await get(_0x577049);if(_0x3e9671[_0x45bb16(0x131)]()){const _0x255980=_0x3e9671[_0x45bb16(0x181)](),_0x4bd6bc=JSON[_0x45bb16(0x120)](_0x255980,null,0x2),_0x2c239b=new Blob([_0x4bd6bc],{'type':_0x45bb16(0xc6)}),_0x29b219=URL[_0x45bb16(0x17e)](_0x2c239b),_0x47493b=document[_0x45bb16(0xc5)]('a');_0x47493b[_0x45bb16(0x1a6)]=_0x29b219,_0x47493b[_0x45bb16(0x166)]='backup-data-'+_0x5e9c6a+_0x45bb16(0x16d),document[_0x45bb16(0xe8)][_0x45bb16(0x111)](_0x47493b),_0x47493b[_0x45bb16(0xe4)](),document[_0x45bb16(0xe8)][_0x45bb16(0x130)](_0x47493b),URL[_0x45bb16(0xb6)](_0x29b219);}else alert(_0x45bb16(0x18d));}catch(_0x3b2dad){console['error'](_0x45bb16(0xe9),_0x3b2dad),alert(_0x45bb16(0x190));}finally{hideLoader();}}window[_0x25db53(0x134)]=exportData;async function importData(){const _0x3e019f=_0x25db53;showLoader();const _0x5ab676=sessionStorage[_0x3e019f(0x116)](_0x3e019f(0x117));if(!_0x5ab676){hideLoader(),alert(_0x3e019f(0x167));return;}const _0x22e845=document[_0x3e019f(0x10f)]('importDataInput'),_0x28e7b3=_0x22e845[_0x3e019f(0x114)][0x0];if(!_0x28e7b3){hideLoader(),alert('Veuillez\x20sélectionner\x20un\x20fichier\x20à\x20importer.');return;}const _0x3dd8cf=new FileReader();_0x3dd8cf['onload']=async _0x263d77=>{const _0x3a5547=_0x3e019f;try{const _0x5e0206=JSON[_0x3a5547(0x17b)](_0x263d77[_0x3a5547(0x13f)]['result']),_0x3c9f4f=ref(db,'users-data/'+_0x5ab676);if(typeof _0x5e0206!==_0x3a5547(0xab)||_0x5e0206===null)throw new Error(_0x3a5547(0x151));const _0x125b1d=onValue(_0x3c9f4f,_0x1224c6=>{const _0x552312=_0x3a5547;console[_0x552312(0x1a8)]('Données\x20modifiées\x20pendant\x20l\x27importation:',_0x1224c6['val']());});await set(_0x3c9f4f,_0x5e0206),_0x125b1d(),alert('Données\x20importées\x20avec\x20succès!'),window[_0x3a5547(0xd1)]['reload']();}catch(_0x3588fa){console[_0x3a5547(0xd0)]('Erreur\x20lors\x20de\x20l\x27importation:',_0x3588fa),alert('Erreur\x20lors\x20de\x20l\x27importation\x20des\x20données:\x20'+_0x3588fa[_0x3a5547(0x105)]);}finally{hideLoader(),_0x22e845[_0x3a5547(0x112)]='';}},_0x3dd8cf[_0x3e019f(0x18b)]=_0x57702b=>{const _0x3081b2=_0x3e019f;console[_0x3081b2(0xd0)](_0x3081b2(0x13e),_0x57702b),alert(_0x3081b2(0x1a0)),hideLoader(),_0x22e845[_0x3081b2(0x112)]='';},_0x3dd8cf[_0x3e019f(0x154)](_0x28e7b3);}window[_0x25db53(0x18c)]=importData,document[_0x25db53(0x12b)](_0x25db53(0xf0),async()=>{const _0x7dad62=_0x25db53;showPageLoader(),await initializeDatabase(),await checkLoginStatus(),await loadPortalConfig(),processConnectedTickets()['then'](()=>checkSubscriptionStatus())[_0x7dad62(0x138)](()=>{hidePageLoader();})[_0x7dad62(0x139)](_0x368505=>{const _0x3c712d=_0x7dad62;console[_0x3c712d(0xd0)](_0x3c712d(0x196),_0x368505),hidePageLoader(),showNotification(_0x3c712d(0xb7),_0x3c712d(0xe2));});}),window[_0x25db53(0x10c)]=redirectToSubscription,window['hideSubscriptionRequiredModal']=redirectToSubscription;function closePaymentModal(){const _0x53f551=_0x25db53;paymentModal[_0x53f551(0xd9)][_0x53f551(0x12e)]=_0x53f551(0x170),overlay[_0x53f551(0xd9)][_0x53f551(0x12e)]=_0x53f551(0x170);}window[_0x25db53(0xf9)]=()=>{};
    </script>

</body>
</html>