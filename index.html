<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN WIFI ZONE</title>
    <link rel="stylesheet" href="styleA.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>

    <style>
        /* ... (Styles CSS - Pas de modifications majeures) ... */
       .payment-modal {
           display: none;
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           z-index: 1000;
           max-width: 400px;
           width: 90%;
           text-align: center;
       }

       .payment-modal h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .payment-modal p {
           color: #666;
           margin-bottom: 30px;
       }

       .payment-modal button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
           margin: 0 10px;
       }

       .payment-modal button:hover {
           background-color: #e6a727;
       }

       .close-modal {
           position: absolute;
           top: 10px;
           right: 10px;
           cursor: pointer;
           font-size: 1.2rem;
           color: #333;
       }

       /* Style pour l'overlay */
       .overlay {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 999;
       }
       #subscriptionSection {
           text-align: center;
           margin-bottom: 30px;
       }

       #subscriptionSection h2 {
           font-size: 24px;
           color: #fdbb2d;
           margin-bottom: 20px;
       }

       #subscriptionStatus {
           font-size: 18px;
           color: #fff;
           margin-bottom: 20px;
       }

       .subscription-buttons {
           display: flex;
           justify-content: center;
           gap: 20px;
       }

       .subscription-buttons button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
       }

       .subscription-buttons button:hover {
           background-color: #e6a727;
       }

       /* Style pour le message d'abonnement requis */
       .subscription-required {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 1000;
           justify-content: center;
           align-items: center;
           color: white;
           text-align: center;
           padding: 20px;
       }

       .subscription-required-content {
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           max-width: 400px;
           width: 90%;
       }

       .subscription-required-content h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .subscription-required-content p {
           color: #666;
           margin-bottom: 30px;
           }

       .subscription-required-content button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
           margin: 0 10px;
       }

       .subscription-required-content button:hover {
           background-color: #e6a727;
       }
        .loader-wrapper {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
        }

        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .page-loader-wrapper {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1002;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .page-loader {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        .loader-message {
            color: white;
            margin-top: 16px;
            font-size: 1rem;
            text-align: center;
            max-width: 80%;
        }

        .header {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
        }

        .header h1 {
            margin: 0;
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .logout-button:hover {
            background-color: #c0392b;
        }
       /* Styles pour le formulaire de portail captif */
      #portalForm {
          display: none; /*Caché par défaut*/
          flex-direction: column;
          gap: 10px;
          max-width: 600px; /* Limite la largeur du formulaire */
          margin: 20px auto;
          padding: 20px;
          background-color: rgba(255, 255, 255, 0.1); /* Léger fond pour le formulaire */
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2); /* Ombre légère */
      }
      #portalForm label {
          color: #fdbb2d; /* Couleur pour les labels */
      }
      #portalForm input[type="text"],
      #portalForm input[type="number"],
      #portalForm textarea,
      #portalForm select {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          background-color: rgba(255,255,255,0.2); /* Fond transparent */
          color: white; /* Couleur du texte */
      }

      #portalForm button {
          padding: 10px 15px;
          background-color: #fdbb2d;
          color: #1a2a6c;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
      }

      #portalForm button:hover {
          background-color: #e6a727;
      }
      #portalForm .list-input-container {
          display: flex;
          flex-direction: column;
      }

      #portalForm .list-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

      #portalForm .list-item input {
          flex: 1; /* Permet à l'input de prendre l'espace disponible */
          margin-right: 5px; /* Marge entre l'input et le bouton */
      }
        #portalForm .list-item button {
           padding: 5px 10px;
           background-color: #e74c3c; /* Couleur différente pour le bouton de suppression */
           color: white;
           border: none;
           border-radius: 4px;
           cursor: pointer;
           font-size: 14px;
        }

        #portalForm .list-item button:hover {
           background-color: #c0392b;
        }

        #configSection {
          margin-bottom:           20px;
          text-align: center; /* Center-align the buttons */
      }
        #configSection .config-buttons {
          display: inline-block;
          margin: 0 10px;
        }

        #systemVersionDisplay {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #fdbb2d;
            font-size: 0.8rem;
        }

        #redirectButtonContainer {
            margin-top: 10px;
            text-align: center;
        }

        #redirectButton {
            padding: 10px 15px;
            background-color: #fdbb2d;
            color: #1a2a6c;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: none; /* Hidden by default */
        }

        #redirectButton:hover {
          background-color: #e6a727;
      }

      .data-management-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        .data-management-buttons button {
            background-color: #fdbb2d;
            color: #1a2a6c;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }
        .data-management-buttons button:hover {
            background-color: #e6a727;
        }

        #importDataInput {
            display: none; /* Cache l'input file par défaut */
        }


    </style>
</head>
<body>
    <div class="page-loader-wrapper" id="pageLoaderWrapper">
        <div class="page-loader"></div>
        <div class="loader-message" id="pageLoaderMessage">Initialisation...</div>
    </div>
    <div class="loader-wrapper" id="loaderWrapper">
        <div class="loader"></div>
    </div>
    <div class="container" id="contentContainer" style="display:none;">
        <header class="header">
            <h1 id="networkNameDisplay">ADMIN WIFI ZONE</h1>
            <div class="wave"></div>
            <div id="systemVersionDisplay">Version du système: <span id="versionNumber"></span></div>
        </header>


        <main>
            <div id="subscriptionSection">
                <h2>Statut de l'Abonnement</h2>
                <div id="subscriptionStatus"></div>
                <div class="subscription-button">
                    <button id="subscribeMonthly">S'abonner (Mensuel - 1000 FCFA)</button>
                    <button id="subscribeYearly">S'abonner (Annuel - 10 000 FCFA)</button>
                </div>
            </div>

            <div id="configSection">
              <button onclick="togglePortalForm()" id="togglePortalFormBtn">Configurer le portail captif</button>
              <button onclick="downloadLoginFile()" id="downloadLoginBtn" style="display: none;">Télécharger le portail captif</button>
             </div>


            <form id="portalForm" style="display: none;">
                <label for="networkName">Nom du réseau:</label>
                <input type="text" id="networkName" name="networkName" required>

                <label for="contactNumber">Numéro à contacter:</label>
                <input type="text" id="contactNumber" name="contactNumber" required>

                <label for="fedapayApiKey">Clé API FedaPay Portail Captif:</label>
                <input type="text" id="fedapayApiKey" name="fedapayApiKey" required>

                <label for="loginMode">Mode de connexion par défaut :</label>
                <select id="loginMode" name="loginMode">
                    <option value="separate">Login (Utilisateur & Mot de passe)</option>
                    <option value="same">Log (Identifiant unique)</option>
                    <option value="pay">Pay (Page de paiement)</option>
                    <option value="hotspot1">Portail captif par défaut</option>
                    <option value="hotspot2">Portail captif secondaire</option>
                    <option value="hotspot3">Portail captif secondaire</option>
                    <option value="hotspot4">Portail captif KODA SMART</option>

                    <!-- Ajoutez d'autres options Hotspot ici -->
                </select>
                <div id="redirectButtonContainer">
                    <button type="button" id="redirectButton">Accéder à la page</button>
                </div>

                <div class="list-input-container">
                    <label>Tarifs:</label>
                    <div id="tariffsList">
                        <div class="list-item">
                            <input type="text" placeholder="Nom du tarif" data-type="tariffName">
                            <input type="number" placeholder="Prix" data-type="tariffPrice">
                            <button type="button" onclick="addListItem('tariffsList')">Ajouter</button>
                         </div>
                      </div>
                 </div>

                 <div class="list-input-container">
                      <label>Adresses de connexion:</label>
                      <div id="connectionsList">
                         <div class="list-item">
                            <input type="text" placeholder="Adresse" data-type="connection">
                            <button type="button" onclick="addListItem('connectionsList')">Ajouter</button>
                           </div>
                      </div>
                  </div>

                  <div class="list-input-container">
                      <label>Services et produits:</label>
                      <div id="productsList">
                         <div class="list-item">
                             <input type="text" placeholder="Service/Produit" data-type="product">
                             <button type="button" onclick="addListItem('productsList')">Ajouter</button>
                         </div>
                     </div>
                 </div>

                 <button type="submit">Enregistrer la configuration</button>
             </form>

            <div class="menu">
                <a href="PageVenteTicket.html" class="menu-item" id="vente">
                    <i class="fas fa-ticket-alt"></i>
                    <h2>Vente de Tickets</h2>
                    <p>Procédez à la vente de nouveaux tickets Wifi.</p>
                </a>
                <a href="AdminVentePartenaires.html" class="menu-item" id="inventaire">
                    <i class="fas fa-clipboard-list"></i>
                    <h2>Inventaire des Tickets</h2>
                    <p>Consultez l'état des ventes de vos partenaires.</p>
                </a>
                <a href="Stock.html" class="menu-item" id="stock">
                    <i class="fas fa-boxes"></i>
                    <h2>Gestion des Stocks Partenaire</h2>
                    <p>Suivez les stocks de tickets de vos partenaires.</p>
                </a>
                <a href="a3.html" class="menu-item" id="administration">
                    <i class="fas fa-cog"></i>
                    <h2>Administration des Tickets</h2>
                    <p>Gérez les tickets, activez ou désactivez-les.</p>
                </a>
                <button onclick="logout()" class="logout-button">Déconnexion</button>
            </div>

            <div class="data-management-buttons">
                <button onclick="exportData()">Exporter les données</button>
                <input type="file" id="importDataInput" accept=".json">
                <button onclick="document.getElementById('importDataInput').click()">Importer les données</button>
            </div>

        </main>

    </div>


    <div id="paymentModal" class="payment-modal" style="display: none;">
        <span class="close-modal" onclick="closePaymentModal()">×</span>
        <h2>Paiement de l'Abonnement</h2>
        <p>Choisissez votre plan d'abonnement et procédez au paiement via FedaPay.</p>
        <!-- Les boutons de paiement seront ajoutés ici par le script -->
    </div>

    <div id="subscriptionRequiredModal" class="subscription-required" style="display: none;">
        <div class="subscription-required-content">
            <h2>Abonnement Requis</h2>
            <p>Un abonnement actif est nécessaire pour accéder à cette fonctionnalité.</p>
            <button onclick="redirectToSubscription()">S'abonner</button>
            <button onclick="hideSubscriptionRequiredModal()">Fermer</button>
        </div>
    </div>

    <div class="overlay" id="overlay" style="display: none;" onclick="closePaymentModal()"></div>

    <script type="module">
const _0xdef8e5=_0x4b64;(function(_0x2a214c,_0x3c5224){const _0x2ca7d9=_0x4b64,_0x4cbfa5=_0x2a214c();while(!![]){try{const _0x58b371=parseInt(_0x2ca7d9(0x263))/0x1*(parseInt(_0x2ca7d9(0x1fc))/0x2)+parseInt(_0x2ca7d9(0x1f9))/0x3*(-parseInt(_0x2ca7d9(0x22c))/0x4)+parseInt(_0x2ca7d9(0x235))/0x5+parseInt(_0x2ca7d9(0x237))/0x6*(parseInt(_0x2ca7d9(0x271))/0x7)+parseInt(_0x2ca7d9(0x208))/0x8+parseInt(_0x2ca7d9(0x273))/0x9+parseInt(_0x2ca7d9(0x1fb))/0xa*(-parseInt(_0x2ca7d9(0x258))/0xb);if(_0x58b371===_0x3c5224)break;else _0x4cbfa5['push'](_0x4cbfa5['shift']());}catch(_0x4ee564){_0x4cbfa5['push'](_0x4cbfa5['shift']());}}}(_0x2be0,0x60246));function _0x4b64(_0x5d7ea1,_0x3a505e){const _0x2be0c9=_0x2be0();return _0x4b64=function(_0x4b644b,_0x12919c){_0x4b644b=_0x4b644b-0x172;let _0x3cd107=_0x2be0c9[_0x4b644b];return _0x3cd107;},_0x4b64(_0x5d7ea1,_0x3a505e);}import{getActiveDatabase}from'./firebase-config-manager.js';import{ref,get,set,push,remove,update,onValue}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';let db,adminRef,fedapayApiKey,systemVersion;async function initializeDatabase(){db=await getActiveDatabase(),console['log']('Database\x20initialized\x20in\x20index.html');}async function checkLoginStatus(){const _0x1b8420=_0x4b64;if(sessionStorage[_0x1b8420(0x1a4)](_0x1b8420(0x18f))!==_0x1b8420(0x198))redirectToLogin();else{const _0x3029e4=sessionStorage[_0x1b8420(0x1a4)](_0x1b8420(0x24a));if(!_0x3029e4){console[_0x1b8420(0x272)](_0x1b8420(0x25a)),redirectToLogin();return;}document[_0x1b8420(0x1e1)](_0x1b8420(0x1c0))['style'][_0x1b8420(0x26a)]=_0x1b8420(0x197),adminRef=ref(db,_0x1b8420(0x188)+_0x3029e4+_0x1b8420(0x21a));}}function redirectToLogin(){const _0xb6659e=_0x4b64;window['location'][_0xb6659e(0x1de)]='loginAccueil.html';}window[_0xdef8e5(0x1a0)]=function(){const _0x324b83=_0xdef8e5;sessionStorage[_0x324b83(0x261)](),window[_0x324b83(0x1dc)][_0x324b83(0x224)](_0x324b83(0x1ca));};const venteMenuItem=document[_0xdef8e5(0x1e1)]('vente'),inventaireMenuItem=document[_0xdef8e5(0x1e1)](_0xdef8e5(0x17e)),stockMenuItem=document[_0xdef8e5(0x1e1)](_0xdef8e5(0x1ef)),administrationMenuItem=document[_0xdef8e5(0x1e1)](_0xdef8e5(0x17c)),subscriptionStatus=document[_0xdef8e5(0x1e1)]('subscriptionStatus'),subscribeMonthlyButton=document[_0xdef8e5(0x1e1)](_0xdef8e5(0x219)),subscribeYearlyButton=document[_0xdef8e5(0x1e1)](_0xdef8e5(0x1f6)),paymentModal=document[_0xdef8e5(0x1e1)]('paymentModal'),overlay=document['getElementById'](_0xdef8e5(0x202)),subscriptionRequiredModal=document[_0xdef8e5(0x1e1)]('subscriptionRequiredModal');function showLoader(){const _0x25978c=_0xdef8e5;document['getElementById'](_0x25978c(0x1cd))[_0x25978c(0x212)][_0x25978c(0x26a)]=_0x25978c(0x197);}function hideLoader(){const _0x4355da=_0xdef8e5;document[_0x4355da(0x1e1)](_0x4355da(0x1cd))[_0x4355da(0x212)][_0x4355da(0x26a)]='none';}function showPageLoader(){const _0x44060f=_0xdef8e5;document['getElementById']('pageLoaderWrapper')['style'][_0x44060f(0x26a)]=_0x44060f(0x1b5);}function hidePageLoader(){const _0x58026a=_0xdef8e5;document['getElementById'](_0x58026a(0x20e))['style'][_0x58026a(0x26a)]=_0x58026a(0x242);}function showSubscriptionRequiredModal(){const _0x2b0505=_0xdef8e5;subscriptionRequiredModal[_0x2b0505(0x212)]['display']='flex';}function hideSubscriptionRequiredModal(){const _0x325ccf=_0xdef8e5;subscriptionRequiredModal[_0x325ccf(0x212)][_0x325ccf(0x26a)]=_0x325ccf(0x242);}function redirectToSubscription(){hideSubscriptionRequiredModal();}function checkSubscriptionStatus(){const _0x584ba1=_0xdef8e5,_0x1406fb=sessionStorage[_0x584ba1(0x1a4)]('currentUserId');if(!_0x1406fb){console[_0x584ba1(0x272)](_0x584ba1(0x206));return;}const _0x5bcefb=ref(db,_0x584ba1(0x188)+_0x1406fb+'/admin/subscription');get(_0x5bcefb)[_0x584ba1(0x189)](_0x3efcc0=>{const _0x1b6867=_0x584ba1,_0x26e2a7=_0x3efcc0[_0x1b6867(0x239)](),_0x563d3f=new Date();if(_0x26e2a7&&_0x26e2a7[_0x1b6867(0x1d7)]===_0x1b6867(0x22f)){const _0x28d8a4=new Date(_0x26e2a7[_0x1b6867(0x254)]);_0x28d8a4<_0x563d3f?(subscriptionStatus['textContent']=_0x1b6867(0x1f8),subscriptionStatus['style'][_0x1b6867(0x193)]=_0x1b6867(0x23e),subscribeMonthlyButton[_0x1b6867(0x212)][_0x1b6867(0x26a)]=_0x1b6867(0x227),subscribeYearlyButton['style'][_0x1b6867(0x26a)]=_0x1b6867(0x227),set(_0x5bcefb,{..._0x26e2a7,'status':_0x1b6867(0x1ba)})):(subscriptionStatus['textContent']='Statut\x20de\x20l\x27abonnement:\x20Actif\x20jusqu\x27au\x20'+_0x28d8a4[_0x1b6867(0x1c1)](),subscriptionStatus[_0x1b6867(0x212)][_0x1b6867(0x193)]=_0x1b6867(0x194),subscribeMonthlyButton[_0x1b6867(0x212)][_0x1b6867(0x26a)]=_0x1b6867(0x242),subscribeYearlyButton['style'][_0x1b6867(0x26a)]=_0x1b6867(0x242));}else subscriptionStatus[_0x1b6867(0x1a1)]='Statut\x20de\x20l\x27abonnement:\x20Inactif',subscriptionStatus[_0x1b6867(0x212)][_0x1b6867(0x193)]=_0x1b6867(0x23e),subscribeMonthlyButton['style'][_0x1b6867(0x26a)]=_0x1b6867(0x227),subscribeYearlyButton[_0x1b6867(0x212)][_0x1b6867(0x26a)]=_0x1b6867(0x227);})[_0x584ba1(0x222)](_0x4a62c2=>{const _0x106831=_0x584ba1;console[_0x106831(0x272)]('Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20d\x27abonnement:',_0x4a62c2);});}function checkUserAccess(){const _0x501849=_0xdef8e5;get(adminRef)[_0x501849(0x189)](_0x15619f=>{const _0x51533d=_0x501849,_0x126add=_0x15619f['val']();(!_0x126add||_0x126add['status']!==_0x51533d(0x22f))&&showSubscriptionRequiredModal();});}venteMenuItem['addEventListener']('click',_0x2bae55=>{const _0x2354ba=_0xdef8e5;_0x2bae55[_0x2354ba(0x275)](),checkUserAccess();const _0x5bf6f4=sessionStorage[_0x2354ba(0x1a4)](_0x2354ba(0x24a));_0x5bf6f4?window[_0x2354ba(0x1dc)][_0x2354ba(0x1de)]=_0x2354ba(0x1a2)+_0x5bf6f4:(console[_0x2354ba(0x272)](_0x2354ba(0x20c)),alert('Erreur:\x20ID\x20administrateur\x20non\x20trouvé.\x20Veuillez\x20vous\x20reconnecter.'));}),inventaireMenuItem[_0xdef8e5(0x184)](_0xdef8e5(0x191),_0x2b1f66=>{const _0xe5cf90=_0xdef8e5;_0x2b1f66['preventDefault'](),checkUserAccess(),window['location'][_0xe5cf90(0x1de)]=_0xe5cf90(0x20f);}),stockMenuItem[_0xdef8e5(0x184)](_0xdef8e5(0x191),_0x2dced9=>{const _0x119992=_0xdef8e5;_0x2dced9[_0x119992(0x275)](),checkUserAccess(),window[_0x119992(0x1dc)]['href']=_0x119992(0x25b);}),administrationMenuItem[_0xdef8e5(0x184)](_0xdef8e5(0x191),_0x5e67a6=>{const _0x551a02=_0xdef8e5;_0x5e67a6[_0x551a02(0x275)](),checkUserAccess(),window[_0x551a02(0x1dc)]['href']=_0x551a02(0x201);}),subscribeMonthlyButton['addEventListener'](_0xdef8e5(0x191),()=>{const _0x5990fd=_0xdef8e5;initiatePayment(_0x5990fd(0x183));}),subscribeYearlyButton[_0xdef8e5(0x184)](_0xdef8e5(0x191),()=>{const _0x4b3134=_0xdef8e5;initiatePayment(_0x4b3134(0x1ac));});async function initiatePayment(_0x3a5419){const _0x183883=_0xdef8e5,_0x52fccb=_0x3a5419===_0x183883(0x183)?0x3e8:0x2710,_0x301ecd=_0x3a5419===_0x183883(0x183)?_0x183883(0x264):_0x183883(0x20b),_0x5c65cc=sessionStorage[_0x183883(0x1a4)](_0x183883(0x24a));if(!_0x5c65cc){console[_0x183883(0x272)]('User\x20ID\x20not\x20found.\x20Cannot\x20initiate\x20payment.'),alert(_0x183883(0x248));return;}FedaPay[_0x183883(0x1e5)]({'public_key':fedapayApiKey,'transaction':{'amount':_0x52fccb,'description':_0x301ecd},'customer':{'email':_0x183883(0x230)},'onComplete':async function(_0x396cfc){const _0x3f950e=_0x183883;if(_0x396cfc[_0x3f950e(0x1ad)]===FedaPay[_0x3f950e(0x251)])alert(_0x3f950e(0x226));else _0x396cfc[_0x3f950e(0x1ad)]===FedaPay[_0x3f950e(0x1e3)]&&handleSuccessfulPayment(_0x3a5419,_0x396cfc,_0x5c65cc);}})[_0x183883(0x204)]();}async function handleSuccessfulPayment(_0x271287,_0x14f404,_0x3811cf){const _0x1c66c7=_0xdef8e5,_0x242acb=new Date(),_0x13073a=new Date(_0x242acb);_0x271287===_0x1c66c7(0x183)?_0x13073a['setMonth'](_0x13073a[_0x1c66c7(0x277)]()+0x1):_0x13073a['setFullYear'](_0x13073a[_0x1c66c7(0x1a5)]()+0x1);const _0x470555={'status':_0x1c66c7(0x22f),'startDate':_0x242acb[_0x1c66c7(0x1ab)](),'endDate':_0x13073a[_0x1c66c7(0x1ab)](),'transactionId':_0x14f404[_0x1c66c7(0x1a6)]['id'],'plan':_0x271287};try{const _0x21cbcf=ref(db,_0x1c66c7(0x188)+_0x3811cf+_0x1c66c7(0x21a));await set(_0x21cbcf,_0x470555),checkSubscriptionStatus(),alert(_0x1c66c7(0x1be)+(_0x271287===_0x1c66c7(0x183)?_0x1c66c7(0x223):_0x1c66c7(0x1e0))+_0x1c66c7(0x269));}catch(_0x3358cc){console['error']('Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27abonnement:',_0x3358cc),alert(_0x1c66c7(0x232));}}function _0x2be0(){const _0x16fcb7=['portalForm','Vous\x20devez\x20être\x20connecté\x20pour\x20vous\x20abonner.','<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','currentUserId','querySelectorAll','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27initialisation.','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20value=\x22','Aucune\x20configuration\x20trouvée.','Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20','DIALOG_DISMISSED','pay','object','endDate','category','Nettoyage\x20des\x20tickets\x20traités...','prix','21256356AMiYYP','https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/hotspot1.zip?alt=media&token=d1e7b9b5-102a-42c5-ab36-9b1764e995ff','Current\x20user\x20ID\x20is\x20not\x20found\x20in\x20sessionStorage.','Stock.html','body','\x22\x20placeholder=\x22','connections','innerHTML','hotspot4','clear','redirectToSubscription','2820xlUGkz','Abonnement\x20mensuel','Vendeur\x20automatique','removeChild','https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/Partail%20capitf%20secondaire.zip?alt=media&token=7bf96399-b991-40db-af64-48b41ef9fd71','Erreur\x20lors\x20de\x20l\x27importation\x20des\x20données:\x20','\x20réussi!','display','#tariffsList\x20.list-item','<!--\x20NETWORK_NAME\x20-->','cancelled','networkNameDisplay','tariffs','list-item','201131rfHUoT','error','2942019fWrecs','users/Version\x20du\x20système','preventDefault','Configuration\x20du\x20portail\x20captif\x20enregistrée\x20avec\x20succès!','getMonth',')\x22>Payer</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','files','createObjectURL','stringify','#productsList\x20.list-item\x20input','products','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','</li>','Aucune\x20configuration\x20de\x20portail\x20captif\x20trouvée.','administration','/TicketsTotal/','inventaire','Erreur','API\x20configuration\x20not\x20found\x20globally\x20for\x20subscription.','Abonnement\x20annulé.','log','monthly','addEventListener','Vous\x20devez\x20être\x20connecté\x20pour\x20télécharger\x20le\x20portail.','loginMode','Erreur\x20de\x20lecture\x20du\x20fichier.','users-data/','then','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','Une\x20erreur\x20est\x20survenue\x20lors\x20du\x20traitement\x20des\x20tickets.','/portalConfig','productsList','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','isLoggedIn','password','click','...','color','green','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22','message','block','true','togglePortalFormBtn','createElement','Service/Produit','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20configuration.','contactNumber','Erreur\x20lors\x20de\x20l\x27enregistrement\x20de\x20la\x20configuration.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','logout','textContent','PageVenteTicket.html?adminId=','importData','getItem','getFullYear','transaction','reset','indexOf','change','Vous\x20devez\x20être\x20connecté\x20pour\x20exporter\x20les\x20données.','toISOString','yearly','reason','value','exportData','<!--\x20FEDAPAY_API_KEY\x20-->','connection','revokeObjectURL','<!--\x20TARIFFS_TABLE\x20-->','Vous\x20devez\x20être\x20connecté\x20pour\x20importer\x20les\x20données.','flex','target','Traitement\x20des\x20tickets\x20uniques...','Vérification\x20des\x20tickets\x20connectés...','exists','expired','push','utilisateur','appendChild','Abonnement\x20','removeListItem','contentContainer','toLocaleDateString','Vous\x20devez\x20être\x20connecté\x20pour\x20annuler\x20un\x20abonnement.','User\x20ID\x20not\x20found.\x20Cannot\x20cancel\x20subscription.','log.html','connectionsList','</ul>','1.0.0','price','trim','loginAccueil.html','#connectionsList\x20.list-item\x20input','Current\x20user\x20ID\x20is\x20not\x20provided\x20to\x20processTicket.','loaderWrapper','separate','className','motDePasse','DOMContentLoaded','onerror','/TicketsTransit/','parentNode','/TicketsTransit','div','status','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20placeholder=\x22Nom\x20du\x20tarif\x22\x20data-type=\x22tariffName\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20placeholder=\x22Prix\x22\x20data-type=\x22tariffPrice\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','fedapayApiKey','redirectButton','User\x20ID\x20not\x20found.\x20Cannot\x20save\x20portal\x20configuration.','location','Vérification\x20du\x20ticket\x20pour\x20','href','CYBER\x20CAMPUS\x20WIFI\x20ZONE','annuel','getElementById','Current\x20user\x20ID\x20is\x20not\x20provided\x20to\x20sellTicketAutomatically.','CHECKOUT_COMPLETED','<li>','init','querySelector','reload','includes','submit','pageLoaderMessage','Vente\x20du\x20ticket\x20','text/html','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','stock','tariffsList','Données\x20importées\x20avec\x20succès!','readAsText','Veuillez\x20sélectionner\x20un\x20fichier\x20à\x20importer.','Erreur\x20lors\x20de\x20l\x27exportation\x20des\x20données.','Erreur\x20lors\x20de\x20l\x27exportation:','subscribeYearly','user','Statut\x20de\x20l\x27abonnement:\x20Expiré','214647uxuSbg','<ul>','10bknmVy','502tujRgS','pay.html','Traitement\x20du\x20ticket\x20','/VendorsHistory/','Erreur\x20lors\x20de\x20l\x27annulation\x20de\x20l\x27abonnement:','a3.html','overlay','Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20connectés\x20:','open','\x22\x20data-type=\x22','User\x20ID\x20not\x20found.\x20Cannot\x20check\x20subscription\x20status.','Adresse','4624944iCctrK','System\x20Version\x20not\x20found\x20globally,\x20using\x20default.','Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20:','Abonnement\x20annuel','Admin\x20ID\x20not\x20found\x20in\x20session\x20storage.','backup-data-','pageLoaderWrapper','AdminVentePartenaires.html','now','Erreur\x20lors\x20de\x20l\x27annulation\x20de\x20l\x27abonnement.','style','Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket.','downloadLoginBtn','username','same','Erreur\x20de\x20lecture\x20du\x20fichier:','TicketsTotal','subscribeMonthly','/admin/subscription','Mode\x20de\x20connexion\x20inconnu.','parse','downloadLoginFile','slice','.html','Configurer\x20le\x20portail\x20captif','.json','catch','mensuel','replace','filter','Paiement\x20échoué.','inline-block','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20configuration:','download','login.html','<!--\x20CONNECTION_LOCATIONS\x20-->','4rTSBvs','text','ADMIN\x20WIFI\x20ZONE','active','admin@example.com','Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20:','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27abonnement.','Masquer\x20le\x20formulaire','<!--\x20TARIFFS_TABLE_SIMPLE\x20-->','3206245WRQHHK','name','30BgPBSJ','<table\x20style=\x22width:\x20100%;\x20border-collapse:\x20collapse;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>','val','Les\x20données\x20importées\x20ne\x20sont\x20pas\x20valides.','/VendorsHistory','<!--\x20CONTACT_NUMBER\x20-->','networkName','red','Erreur\x20lors\x20de\x20l\x27importation:','\x27,\x20','Vous\x20devez\x20être\x20connecté\x20pour\x20configurer\x20le\x20portail.','none','https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/hotspot15.zip?alt=media&token=76dfc03c-056e-460f-b711-48e1418092df','firebase-config-manager.js','TicketsTransit','https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/Portail%20par%20d%C3%A9faut.zip?alt=media&token=9f200c87-a577-4d51-ae08-8324c17b58e9'];_0x2be0=function(){return _0x16fcb7;};return _0x2be0();}async function cancelSubscription(){const _0x1e4e13=_0xdef8e5,_0x23b6a3=sessionStorage[_0x1e4e13(0x1a4)](_0x1e4e13(0x24a));if(!_0x23b6a3){console[_0x1e4e13(0x272)](_0x1e4e13(0x1c3)),alert(_0x1e4e13(0x1c2));return;}try{const _0x42092a=ref(db,'users-data/'+_0x23b6a3+_0x1e4e13(0x21a));await set(_0x42092a,{...(await get(_0x42092a))[_0x1e4e13(0x239)](),'status':_0x1e4e13(0x26d)}),checkSubscriptionStatus(),alert(_0x1e4e13(0x181));}catch(_0x4b70e9){console[_0x1e4e13(0x272)](_0x1e4e13(0x200),_0x4b70e9),alert(_0x1e4e13(0x211));}}async function processConnectedTickets(){const _0xb3df03=_0xdef8e5,_0x5c3288=document['getElementById']('pageLoaderMessage'),_0x3f8512=sessionStorage[_0xb3df03(0x1a4)](_0xb3df03(0x24a));if(!_0x3f8512){console[_0xb3df03(0x272)](_0xb3df03(0x25a));return;}const _0x2c7d04=ref(db,'users-data/'+_0x3f8512+'/TicketConnecté');try{_0x5c3288[_0xb3df03(0x1a1)]=_0xb3df03(0x1b8);const _0xc4b47e=await get(_0x2c7d04);let _0x2a1d2d=_0xc4b47e[_0xb3df03(0x239)]()||{};const _0x58bcbe={};for(const _0x3f031a in _0x2a1d2d){const _0x144e02=_0x2a1d2d[_0x3f031a][_0xb3df03(0x215)];!_0x58bcbe[_0x144e02]&&(_0x58bcbe[_0x144e02]=_0x2a1d2d[_0x3f031a]);}_0x5c3288['textContent']=_0xb3df03(0x1b7);for(const _0x133dcc in _0x58bcbe){await processTicket(_0x58bcbe[_0x133dcc],_0x3f8512);}_0x5c3288[_0xb3df03(0x1a1)]=_0xb3df03(0x256),await remove(_0x2c7d04);}catch(_0x3426c5){console[_0xb3df03(0x272)](_0xb3df03(0x203),_0x3426c5),showNotification(_0xb3df03(0x17f),_0xb3df03(0x18b));}}async function processTicket(_0x27e96f,_0x5a030b){const _0x37a7c7=_0xdef8e5,_0x46a961=document[_0x37a7c7(0x1e1)](_0x37a7c7(0x1ea));if(!_0x5a030b){console[_0x37a7c7(0x272)](_0x37a7c7(0x1cc));return;}try{_0x46a961[_0x37a7c7(0x1a1)]=_0x37a7c7(0x1dd)+_0x27e96f[_0x37a7c7(0x215)]+'...';const _0x2c00fa=ref(db,_0x37a7c7(0x188)+_0x5a030b+_0x37a7c7(0x23b)),_0x3101d7=await get(_0x2c00fa),_0x5c9aef=_0x3101d7[_0x37a7c7(0x239)]()||{};let _0x432a20=![];for(const _0x4fe00c in _0x5c9aef){const _0x232ccd=_0x5c9aef[_0x4fe00c];for(const _0x5c06c1 in _0x232ccd){if(_0x232ccd[_0x5c06c1][_0x37a7c7(0x1f7)]===_0x27e96f[_0x37a7c7(0x215)]){_0x432a20=!![];break;}}if(_0x432a20)break;}if(!_0x432a20){_0x46a961['textContent']=_0x37a7c7(0x1fe)+_0x27e96f[_0x37a7c7(0x215)]+_0x37a7c7(0x192);const _0x45909e=ref(db,_0x37a7c7(0x188)+_0x5a030b+'/TicketsTotal'),_0x431251=ref(db,_0x37a7c7(0x188)+_0x5a030b+_0x37a7c7(0x1d5)),_0x1e59a2=await get(_0x45909e),_0xdd291c=await get(_0x431251),_0x2fe83b=_0x1e59a2[_0x37a7c7(0x239)]()||{},_0x4a350b=_0xdd291c[_0x37a7c7(0x239)]()||{};let _0x4833c9=null,_0x56b68a=null,_0x21cb06=null;for(const _0x31bc45 in _0x2fe83b){const _0x4202f3=(_0x2fe83b[_0x31bc45][_0x37a7c7(0x1bc)]||[])[_0x37a7c7(0x1a8)](_0x27e96f[_0x37a7c7(0x215)]);if(_0x4202f3>-0x1){_0x4833c9={'category':_0x31bc45,'user':_0x2fe83b[_0x31bc45][_0x37a7c7(0x1bc)][_0x4202f3],'password':_0x2fe83b[_0x31bc45][_0x37a7c7(0x1d0)][_0x4202f3],'price':_0x2fe83b[_0x31bc45]['prix'][_0x4202f3],'updatedData':{..._0x2fe83b[_0x31bc45],'utilisateur':_0x2fe83b[_0x31bc45]['utilisateur']['filter']((_0x475936,_0x3f37c1)=>_0x3f37c1!==_0x4202f3),'motDePasse':_0x2fe83b[_0x31bc45]['motDePasse'][_0x37a7c7(0x225)]((_0x596c8f,_0x39779e)=>_0x39779e!==_0x4202f3),'prix':_0x2fe83b[_0x31bc45][_0x37a7c7(0x257)][_0x37a7c7(0x225)]((_0x1c619b,_0x4ff36a)=>_0x4ff36a!==_0x4202f3)}},_0x56b68a=ref(db,'users-data/'+_0x5a030b+_0x37a7c7(0x17d)+_0x31bc45),_0x21cb06=_0x37a7c7(0x218);break;}}if(!_0x4833c9)for(const _0x4ffff9 in _0x4a350b){if(_0x4a350b[_0x4ffff9][_0x37a7c7(0x1f7)]===_0x27e96f[_0x37a7c7(0x215)]){_0x4833c9={'category':_0x4a350b[_0x4ffff9][_0x37a7c7(0x255)],'user':_0x4a350b[_0x4ffff9][_0x37a7c7(0x1f7)],'password':_0x4a350b[_0x4ffff9][_0x37a7c7(0x190)],'price':_0x4a350b[_0x4ffff9][_0x37a7c7(0x1c8)]},_0x56b68a=ref(db,_0x37a7c7(0x188)+_0x5a030b+_0x37a7c7(0x1d3)+_0x4ffff9),_0x21cb06=_0x37a7c7(0x245);break;}}_0x4833c9&&(_0x46a961[_0x37a7c7(0x1a1)]=_0x37a7c7(0x1eb)+_0x27e96f['username']+'...',await sellTicketAutomatically(_0x4833c9,_0x56b68a,_0x21cb06,_0x5a030b));}}catch(_0x5491d8){console[_0x37a7c7(0x272)](_0x37a7c7(0x20a),_0x5491d8),showNotification('Erreur',_0x37a7c7(0x250)+_0x27e96f[_0x37a7c7(0x215)]+'.');}}async function sellTicketAutomatically(_0x5a6242,_0x3c2791,_0x316922,_0x9f7658){const _0x313024=_0xdef8e5;if(!_0x9f7658){console[_0x313024(0x272)](_0x313024(0x1e2));return;}try{const _0x5ee696=_0x313024(0x265),_0x2cd50e=ref(db,_0x313024(0x188)+_0x9f7658+_0x313024(0x1ff)+_0x5ee696);await push(_0x2cd50e,{'category':_0x5a6242[_0x313024(0x255)],'user':_0x5a6242[_0x313024(0x1f7)],'password':_0x5a6242[_0x313024(0x190)],'price':_0x5a6242['price'],'soldAt':Date[_0x313024(0x210)](),'vendorId':_0x5ee696}),_0x316922===_0x313024(0x218)?await set(_0x3c2791,_0x5a6242['updatedData']):await remove(_0x3c2791),console[_0x313024(0x182)]('Ticket\x20'+_0x5a6242[_0x313024(0x1f7)]+'\x20vendu\x20automatiquement\x20et\x20enregistré\x20dans\x20VendorsHistory.');}catch(_0x4e534c){console[_0x313024(0x272)]('Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket\x20:',_0x4e534c),showNotification(_0x313024(0x17f),_0x313024(0x213));}}window[_0xdef8e5(0x1a0)]=function(){const _0x4d3f0b=_0xdef8e5;sessionStorage['clear'](),window[_0x4d3f0b(0x1dc)][_0x4d3f0b(0x224)]('loginAccueil.html');},window['togglePortalForm']=function(){const _0x17c6f9=_0xdef8e5,_0xa03359=document['getElementById']('portalForm'),_0x4e3357=document[_0x17c6f9(0x1e1)](_0x17c6f9(0x199)),_0x233526=document[_0x17c6f9(0x1e1)](_0x17c6f9(0x214));_0xa03359[_0x17c6f9(0x212)][_0x17c6f9(0x26a)]===_0x17c6f9(0x242)||_0xa03359[_0x17c6f9(0x212)][_0x17c6f9(0x26a)]===''?(_0xa03359[_0x17c6f9(0x212)][_0x17c6f9(0x26a)]='flex',_0x233526['style']['display']=_0x17c6f9(0x227),_0x4e3357[_0x17c6f9(0x1a1)]=_0x17c6f9(0x233)):(_0xa03359[_0x17c6f9(0x212)][_0x17c6f9(0x26a)]=_0x17c6f9(0x242),_0x233526[_0x17c6f9(0x212)][_0x17c6f9(0x26a)]=_0x17c6f9(0x242),_0x4e3357[_0x17c6f9(0x1a1)]=_0x17c6f9(0x220));},window['addListItem']=function(_0x7d56f7){const _0xf05112=_0xdef8e5,_0x1f5dc5=document[_0xf05112(0x1e1)](_0x7d56f7),_0x431cc1=document[_0xf05112(0x19a)](_0xf05112(0x1d6));_0x431cc1[_0xf05112(0x1cf)]=_0xf05112(0x270);let _0x7108c8='text';if(_0x7d56f7===_0xf05112(0x1f0))_0x431cc1[_0xf05112(0x25f)]=_0xf05112(0x1d8);else{let _0x59cf1e='';if(_0x7d56f7===_0xf05112(0x1c5))_0x59cf1e=_0xf05112(0x207);else _0x7d56f7===_0xf05112(0x18d)&&(_0x59cf1e=_0xf05112(0x19b));_0x431cc1[_0xf05112(0x25f)]=_0xf05112(0x195)+_0x7108c8+_0xf05112(0x25d)+_0x59cf1e+_0xf05112(0x205)+_0x7d56f7[_0xf05112(0x21e)](0x0,-0x4)+_0xf05112(0x18e);}_0x1f5dc5[_0xf05112(0x1bd)](_0x431cc1);},window[_0xdef8e5(0x1bf)]=function(_0x1ffc11){const _0x375b8f=_0xdef8e5;_0x1ffc11[_0x375b8f(0x1d4)]['remove']();},document[_0xdef8e5(0x1e1)](_0xdef8e5(0x247))['addEventListener'](_0xdef8e5(0x1e9),async _0x600040=>{const _0x252505=_0xdef8e5;_0x600040[_0x252505(0x275)](),showLoader();const _0x128d66=sessionStorage[_0x252505(0x1a4)]('currentUserId');if(!_0x128d66){console[_0x252505(0x272)](_0x252505(0x1db)),alert(_0x252505(0x241)),hideLoader();return;}const _0x5c2f26={'networkName':document['getElementById'](_0x252505(0x23d))[_0x252505(0x1ae)],'contactNumber':document[_0x252505(0x1e1)](_0x252505(0x19d))['value'],'fedapayApiKey':document[_0x252505(0x1e1)](_0x252505(0x1d9))[_0x252505(0x1ae)],'loginMode':document[_0x252505(0x1e1)](_0x252505(0x186))['value'],'tariffs':[],'connections':[],'products':[]};document['querySelectorAll'](_0x252505(0x26b))[_0x252505(0x24d)](_0x21bdf1=>{const _0x44f4b2=_0x252505,_0x1445c8=_0x21bdf1['querySelector']('[data-type=\x22tariffName\x22]'),_0x10b392=_0x21bdf1[_0x44f4b2(0x1e6)]('[data-type=\x22tariffPrice\x22]');if(_0x1445c8&&_0x10b392){const _0xb507a3=_0x1445c8[_0x44f4b2(0x1ae)][_0x44f4b2(0x1c9)](),_0x538187=parseFloat(_0x10b392['value']);_0xb507a3&&!isNaN(_0x538187)&&_0x5c2f26[_0x44f4b2(0x26f)]['push']({'name':_0xb507a3,'price':_0x538187});}}),document['querySelectorAll'](_0x252505(0x1cb))[_0x252505(0x24d)](_0x9e938b=>{const _0x333be3=_0x9e938b['value']['trim']();_0x333be3&&_0x5c2f26['connections']['push'](_0x333be3);}),document[_0x252505(0x24b)](_0x252505(0x177))[_0x252505(0x24d)](_0x434500=>{const _0x4339b2=_0x252505,_0x33ad77=_0x434500[_0x4339b2(0x1ae)][_0x4339b2(0x1c9)]();_0x33ad77&&_0x5c2f26[_0x4339b2(0x178)][_0x4339b2(0x1bb)](_0x33ad77);});try{const _0x33b33e=ref(db,'users-data/'+_0x128d66+_0x252505(0x18c));await set(_0x33b33e,_0x5c2f26),alert(_0x252505(0x276)),hideLoader(),document[_0x252505(0x1e1)](_0x252505(0x247))[_0x252505(0x1a7)](),document['getElementById']('portalForm')[_0x252505(0x212)][_0x252505(0x26a)]='none',document[_0x252505(0x1e1)](_0x252505(0x199))[_0x252505(0x1a1)]=_0x252505(0x220),document['getElementById'](_0x252505(0x214))[_0x252505(0x212)][_0x252505(0x26a)]=_0x252505(0x242),document[_0x252505(0x1e1)](_0x252505(0x26e))[_0x252505(0x1a1)]=_0x5c2f26[_0x252505(0x23d)];}catch(_0xa26dea){console[_0x252505(0x272)]('Erreur\x20lors\x20de\x20l\x27enregistrement\x20de\x20la\x20configuration:',_0xa26dea),alert(_0x252505(0x19e)),hideLoader();}});async function downloadLoginFile(){const _0x276d34=_0xdef8e5;showLoader();const _0x242477=sessionStorage['getItem'](_0x276d34(0x24a));if(!_0x242477){console[_0x276d34(0x272)]('User\x20ID\x20not\x20found.\x20Cannot\x20download\x20login\x20file.'),hideLoader(),alert(_0x276d34(0x185));return;}try{const _0x4c6289=ref(db,_0x276d34(0x188)+_0x242477+'/portalConfig'),_0x2f32bf=await get(_0x4c6289);if(!_0x2f32bf[_0x276d34(0x1b9)]()){alert(_0x276d34(0x17b)),hideLoader();return;}const _0x319e2c=_0x2f32bf[_0x276d34(0x239)]();let _0x4d18cf='',_0x284ac2='';if(_0x319e2c[_0x276d34(0x186)]===_0x276d34(0x1ce)){const _0x35fcdf=await fetch(_0x276d34(0x22a));_0x4d18cf=await _0x35fcdf[_0x276d34(0x22d)](),_0x284ac2=_0x276d34(0x22a);}else{if(_0x319e2c[_0x276d34(0x186)]===_0x276d34(0x216)){const _0xbc9652=await fetch('log.html');_0x4d18cf=await _0xbc9652[_0x276d34(0x22d)](),_0x284ac2=_0x276d34(0x1c4);}else{if(_0x319e2c[_0x276d34(0x186)]==='pay'){const _0x39dc3c=await fetch(_0x276d34(0x1fd));_0x4d18cf=await _0x39dc3c['text'](),_0x284ac2=_0x276d34(0x1fd);}else{const _0x358781=await fetch(_0x319e2c[_0x276d34(0x186)]+'.html');_0x4d18cf=await _0x358781['text'](),_0x284ac2=_0x319e2c[_0x276d34(0x186)]+_0x276d34(0x21f);}}}_0x4d18cf=_0x4d18cf[_0x276d34(0x224)]('<!--\x20ADMIN_USER_ID\x20-->',_0x242477);function _0x169afc(_0x474e63){const _0x3bc88a=_0x276d34;let _0x501bb9='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20style=\x22width:\x20100%;\x20border-collapse:\x20collapse;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return _0x474e63['forEach'](_0x1cb164=>{const _0x42798e=_0x4b64;_0x501bb9+=_0x42798e(0x1ed)+_0x1cb164[_0x42798e(0x236)]+_0x42798e(0x1ee)+_0x1cb164['price']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22><button\x20onclick=\x22initPayment(\x27'+_0x1cb164[_0x42798e(0x236)]+_0x42798e(0x240)+_0x1cb164[_0x42798e(0x1c8)]+_0x42798e(0x172);}),_0x501bb9+=_0x3bc88a(0x173),_0x501bb9;}function _0x28bfa7(_0x270b1a){const _0x2c78a7=_0x276d34;let _0x37fc5=_0x2c78a7(0x238);return _0x270b1a['forEach'](_0x54bb8e=>{const _0x2f31f4=_0x2c78a7;_0x37fc5+=_0x2f31f4(0x249)+_0x54bb8e['name']+_0x2f31f4(0x179)+_0x54bb8e['price']+_0x2f31f4(0x19f);}),_0x37fc5+='</tbody></table>',_0x37fc5;}function _0x5c2206(_0x21be3f){const _0x57fbbe=_0x276d34;let _0x54ef97=_0x57fbbe(0x1fa);return _0x21be3f[_0x57fbbe(0x24d)](_0x497c61=>{const _0xbefd24=_0x57fbbe;_0x54ef97+=_0xbefd24(0x1e4)+_0x497c61+_0xbefd24(0x17a);}),_0x54ef97+=_0x57fbbe(0x1c6),_0x54ef97;}_0x4d18cf=_0x4d18cf[_0x276d34(0x224)](_0x276d34(0x1b3),_0x169afc(_0x319e2c[_0x276d34(0x26f)]||[])),_0x4d18cf=_0x4d18cf[_0x276d34(0x224)](_0x276d34(0x234),_0x28bfa7(_0x319e2c[_0x276d34(0x26f)]||[])),_0x4d18cf=_0x4d18cf[_0x276d34(0x224)](_0x276d34(0x22b),_0x5c2206(_0x319e2c[_0x276d34(0x25e)]||[])),_0x4d18cf=_0x4d18cf[_0x276d34(0x224)]('<!--\x20PRODUCTS_LIST\x20-->',_0x5c2206(_0x319e2c[_0x276d34(0x178)]||[])),_0x4d18cf=_0x4d18cf[_0x276d34(0x224)](_0x276d34(0x23c),_0x319e2c['contactNumber']||'+229\x20XXXXXXXX'),_0x4d18cf=_0x4d18cf['replace'](_0x276d34(0x26c),_0x319e2c['networkName']||_0x276d34(0x1df)),_0x4d18cf=_0x4d18cf[_0x276d34(0x224)](_0x276d34(0x1b0),_0x319e2c[_0x276d34(0x1d9)]||'');const _0xc9476=new Blob([_0x4d18cf],{'type':_0x276d34(0x1ec)}),_0x22ab5e=URL[_0x276d34(0x175)](_0xc9476),_0x73d66=document['createElement']('a');_0x73d66[_0x276d34(0x1de)]=_0x22ab5e,_0x73d66[_0x276d34(0x229)]=_0x284ac2,document['body'][_0x276d34(0x1bd)](_0x73d66),_0x73d66['click'](),document[_0x276d34(0x25c)][_0x276d34(0x266)](_0x73d66),URL['revokeObjectURL'](_0x22ab5e);const _0x4806fc=document[_0x276d34(0x19a)]('a');_0x4806fc[_0x276d34(0x1de)]=_0x276d34(0x244),_0x4806fc[_0x276d34(0x229)]=_0x276d34(0x244),document[_0x276d34(0x25c)]['appendChild'](_0x4806fc),_0x4806fc[_0x276d34(0x191)](),document[_0x276d34(0x25c)][_0x276d34(0x266)](_0x4806fc),hideLoader();}catch(_0x256a85){console[_0x276d34(0x272)]('Erreur\x20lors\x20du\x20téléchargement\x20du\x20portail\x20captif:',_0x256a85),alert('Erreur\x20lors\x20du\x20téléchargement\x20du\x20portail\x20captif.'),hideLoader();}}window[_0xdef8e5(0x21d)]=downloadLoginFile;async function loadPortalConfig(){const _0x3b10fe=_0xdef8e5;showLoader();const _0x1aed7b=sessionStorage[_0x3b10fe(0x1a4)]('currentUserId');try{const _0x9b23d7=ref(db,'users-data/'+_0x1aed7b+_0x3b10fe(0x18c)),_0x1fe582=ref(db,'users/API'),_0x4a39c6=ref(db,_0x3b10fe(0x274)),_0x594505=await get(_0x9b23d7),_0x74195d=await get(_0x1fe582),_0x23d518=await get(_0x4a39c6);_0x74195d['exists']()?fedapayApiKey=_0x74195d[_0x3b10fe(0x239)]():(console[_0x3b10fe(0x182)](_0x3b10fe(0x180)),fedapayApiKey='pk_live_xxxxxxxxxxxxx');_0x23d518[_0x3b10fe(0x1b9)]()?systemVersion=_0x23d518['val']():(systemVersion=_0x3b10fe(0x1c7),console['log'](_0x3b10fe(0x209)));document[_0x3b10fe(0x1e1)]('versionNumber')['textContent']=systemVersion;if(_0x594505['exists']()){const _0x2fb572=_0x594505[_0x3b10fe(0x239)]();document['getElementById'](_0x3b10fe(0x23d))[_0x3b10fe(0x1ae)]=_0x2fb572[_0x3b10fe(0x23d)]||'',document[_0x3b10fe(0x1e1)]('contactNumber')[_0x3b10fe(0x1ae)]=_0x2fb572[_0x3b10fe(0x19d)]||'',document['getElementById'](_0x3b10fe(0x1d9))[_0x3b10fe(0x1ae)]=_0x2fb572['fedapayApiKey']||'',document[_0x3b10fe(0x1e1)]('loginMode')[_0x3b10fe(0x1ae)]=_0x2fb572[_0x3b10fe(0x186)]||_0x3b10fe(0x1ce),document[_0x3b10fe(0x1e1)](_0x3b10fe(0x26e))[_0x3b10fe(0x1a1)]=_0x2fb572[_0x3b10fe(0x23d)]||_0x3b10fe(0x22e);function _0x2be536(_0x3b97d1,_0x907946,_0xb25292){const _0x3200f6=_0x3b10fe,_0x5b4689=document[_0x3200f6(0x1e1)](_0x3b97d1);_0x5b4689[_0x3200f6(0x25f)]='',_0x907946[_0x3200f6(0x24d)](_0x2e0dde=>{const _0x111aa1=_0x3200f6,_0x5f2a51=document[_0x111aa1(0x19a)](_0x111aa1(0x1d6));_0x5f2a51[_0x111aa1(0x1cf)]=_0x111aa1(0x270),_0x3b97d1===_0x111aa1(0x1f0)?_0x5f2a51[_0x111aa1(0x25f)]=_0x111aa1(0x24e)+_0x2e0dde['name']+'\x22\x20data-type=\x22tariffName\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20value=\x22'+_0x2e0dde[_0x111aa1(0x1c8)]+'\x22\x20data-type=\x22tariffPrice\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>':_0x5f2a51['innerHTML']='<input\x20type=\x22text\x22\x20value=\x22'+_0x2e0dde+_0x111aa1(0x205)+_0xb25292+_0x111aa1(0x18a),_0x5b4689[_0x111aa1(0x1bd)](_0x5f2a51);}),addListItem(_0x3b97d1);}_0x2be536('tariffsList',_0x2fb572[_0x3b10fe(0x26f)]||[],null),_0x2be536(_0x3b10fe(0x1c5),_0x2fb572[_0x3b10fe(0x25e)]||[],_0x3b10fe(0x1b1)),_0x2be536(_0x3b10fe(0x18d),_0x2fb572[_0x3b10fe(0x178)]||[],'product');}else console[_0x3b10fe(0x182)](_0x3b10fe(0x24f)),addListItem(_0x3b10fe(0x1f0)),addListItem(_0x3b10fe(0x1c5)),addListItem(_0x3b10fe(0x18d));}catch(_0xecb93c){console[_0x3b10fe(0x272)](_0x3b10fe(0x228),_0xecb93c),alert(_0x3b10fe(0x19c));}finally{hideLoader();}}document[_0xdef8e5(0x1e1)]('redirectButton')['addEventListener'](_0xdef8e5(0x191),function(){const _0x1da469=_0xdef8e5,_0x16e549=document[_0x1da469(0x1e1)](_0x1da469(0x186))['value'];let _0x415541='';switch(_0x16e549){case _0x1da469(0x1ce):_0x415541='login.html';break;case'same':_0x415541=_0x1da469(0x1c4);break;case _0x1da469(0x252):_0x415541=_0x1da469(0x1fd);break;case'hotspot1':_0x415541=_0x1da469(0x246);break;case'hotspot2':_0x415541=_0x1da469(0x259);break;case'hotspot3':_0x415541=_0x1da469(0x267);break;case _0x1da469(0x260):_0x415541=_0x1da469(0x243);break;default:alert(_0x1da469(0x21b));return;}window['open'](_0x415541,'_blank');}),document['getElementById'](_0xdef8e5(0x186))[_0xdef8e5(0x184)](_0xdef8e5(0x1a9),function(){const _0x436e8b=_0xdef8e5,_0x2bc63a=this[_0x436e8b(0x1ae)],_0x13b5a7=document[_0x436e8b(0x1e1)](_0x436e8b(0x1da));['separate',_0x436e8b(0x216),_0x436e8b(0x252)][_0x436e8b(0x1e8)](_0x2bc63a)?_0x13b5a7['style'][_0x436e8b(0x26a)]=_0x436e8b(0x242):_0x13b5a7[_0x436e8b(0x212)][_0x436e8b(0x26a)]=_0x436e8b(0x227);});async function exportData(){const _0x52c3d0=_0xdef8e5;showLoader();const _0x498ace=sessionStorage[_0x52c3d0(0x1a4)]('currentUserId');if(!_0x498ace){hideLoader(),alert(_0x52c3d0(0x1aa));return;}try{const _0x93ffd4=ref(db,_0x52c3d0(0x188)+_0x498ace),_0x37a5c8=await get(_0x93ffd4);if(_0x37a5c8[_0x52c3d0(0x1b9)]()){const _0x1e6113=_0x37a5c8[_0x52c3d0(0x239)](),_0x479e63=JSON[_0x52c3d0(0x176)](_0x1e6113,null,0x2),_0x86c5da=new Blob([_0x479e63],{'type':'application/json'}),_0x430419=URL['createObjectURL'](_0x86c5da),_0xc7f285=document['createElement']('a');_0xc7f285[_0x52c3d0(0x1de)]=_0x430419,_0xc7f285['download']=_0x52c3d0(0x20d)+_0x498ace+_0x52c3d0(0x221),document[_0x52c3d0(0x25c)]['appendChild'](_0xc7f285),_0xc7f285[_0x52c3d0(0x191)](),document[_0x52c3d0(0x25c)][_0x52c3d0(0x266)](_0xc7f285),URL[_0x52c3d0(0x1b2)](_0x430419);}else alert('Aucune\x20donnée\x20à\x20exporter.');}catch(_0x3608b3){console[_0x52c3d0(0x272)](_0x52c3d0(0x1f5),_0x3608b3),alert(_0x52c3d0(0x1f4));}finally{hideLoader();}}window[_0xdef8e5(0x1af)]=exportData;async function importData(){const _0x16acb3=_0xdef8e5;showLoader();const _0x3fe8c5=sessionStorage['getItem'](_0x16acb3(0x24a));if(!_0x3fe8c5){hideLoader(),alert(_0x16acb3(0x1b4));return;}const _0x25fdf5=document['getElementById']('importDataInput'),_0x1131ab=_0x25fdf5[_0x16acb3(0x174)][0x0];if(!_0x1131ab){hideLoader(),alert(_0x16acb3(0x1f3));return;}const _0x169386=new FileReader();_0x169386['onload']=async _0x1ae390=>{const _0x2bef80=_0x16acb3;try{const _0x5c543d=JSON[_0x2bef80(0x21c)](_0x1ae390[_0x2bef80(0x1b6)]['result']),_0x50cf46=ref(db,_0x2bef80(0x188)+_0x3fe8c5);if(typeof _0x5c543d!==_0x2bef80(0x253)||_0x5c543d===null)throw new Error(_0x2bef80(0x23a));const _0x68f86c=onValue(_0x50cf46,_0x1f5f70=>{const _0x168a63=_0x2bef80;console['log']('Données\x20modifiées\x20pendant\x20l\x27importation:',_0x1f5f70[_0x168a63(0x239)]());});await set(_0x50cf46,_0x5c543d),_0x68f86c(),alert(_0x2bef80(0x1f1)),window[_0x2bef80(0x1dc)][_0x2bef80(0x1e7)]();}catch(_0x48f910){console[_0x2bef80(0x272)](_0x2bef80(0x23f),_0x48f910),alert(_0x2bef80(0x268)+_0x48f910[_0x2bef80(0x196)]);}finally{hideLoader(),_0x25fdf5[_0x2bef80(0x1ae)]='';}},_0x169386[_0x16acb3(0x1d2)]=_0x3799e4=>{const _0x99c7fa=_0x16acb3;console[_0x99c7fa(0x272)](_0x99c7fa(0x217),_0x3799e4),alert(_0x99c7fa(0x187)),hideLoader(),_0x25fdf5[_0x99c7fa(0x1ae)]='';},_0x169386[_0x16acb3(0x1f2)](_0x1131ab);}window[_0xdef8e5(0x1a3)]=importData,document[_0xdef8e5(0x184)](_0xdef8e5(0x1d1),async()=>{const _0xb9217b=_0xdef8e5;showPageLoader(),await initializeDatabase(),await checkLoginStatus(),await loadPortalConfig(),processConnectedTickets()[_0xb9217b(0x189)](()=>checkSubscriptionStatus())[_0xb9217b(0x189)](()=>{hidePageLoader();})['catch'](_0x25c8b9=>{const _0x1f03a8=_0xb9217b;console[_0x1f03a8(0x272)](_0x1f03a8(0x231),_0x25c8b9),hidePageLoader(),showNotification(_0x1f03a8(0x17f),_0x1f03a8(0x24c));});}),window[_0xdef8e5(0x262)]=redirectToSubscription,window['hideSubscriptionRequiredModal']=redirectToSubscription;function closePaymentModal(){const _0x33e4d4=_0xdef8e5;paymentModal['style'][_0x33e4d4(0x26a)]=_0x33e4d4(0x242),overlay[_0x33e4d4(0x212)][_0x33e4d4(0x26a)]=_0x33e4d4(0x242);}window['onload']=()=>{};
    </script>

</body>
</html>