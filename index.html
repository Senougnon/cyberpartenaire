<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN WIFI ZONE</title>
    <link rel="stylesheet" href="styleA.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>

    <style>
        /* ... (Styles CSS - Pas de modifications majeures) ... */
       .payment-modal {
           display: none;
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           z-index: 1000;
           max-width: 400px;
           width: 90%;
           text-align: center;
       }

       .payment-modal h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .payment-modal p {
           color: #666;
           margin-bottom: 30px;
       }

       .payment-modal button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
           margin: 0 10px;
       }

       .payment-modal button:hover {
           background-color: #e6a727;
       }

       .close-modal {
           position: absolute;
           top: 10px;
           right: 10px;
           cursor: pointer;
           font-size: 1.2rem;
           color: #333;
       }

       /* Style pour l'overlay */
       .overlay {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 999;
       }
       #subscriptionSection {
           text-align: center;
           margin-bottom: 30px;
       }

       #subscriptionSection h2 {
           font-size: 24px;
           color: #fdbb2d;
           margin-bottom: 20px;
       }

       #subscriptionStatus {
           font-size: 18px;
           color: #fff;
           margin-bottom: 20px;
       }

       .subscription-buttons {
           display: flex;
           justify-content: center;
           gap: 20px;
       }

       .subscription-buttons button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
       }

       .subscription-buttons button:hover {
           background-color: #e6a727;
       }

       /* Style pour le message d'abonnement requis */
       .subscription-required {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 1000;
           justify-content: center;
           align-items: center;
           color: white;
           text-align: center;
           padding: 20px;
       }

       .subscription-required-content {
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           max-width: 400px;
           width: 90%;
       }

       .subscription-required-content h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .subscription-required-content p {
           color: #666;
           margin-bottom: 30px;
           }

       .subscription-required-content button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
           margin: 0 10px;
       }

       .subscription-required-content button:hover {
           background-color: #e6a727;
       }
        .loader-wrapper {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
        }

        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .page-loader-wrapper {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1002;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .page-loader {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        .loader-message {
            color: white;
            margin-top: 16px;
            font-size: 1rem;
            text-align: center;
            max-width: 80%;
        }

        .header {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
        }

        .header h1 {
            margin: 0;
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .logout-button:hover {
            background-color: #c0392b;
        }
       /* Styles pour le formulaire de portail captif */
      #portalForm {
          display: none; /*Caché par défaut*/
          flex-direction: column;
          gap: 10px;
          max-width: 600px; /* Limite la largeur du formulaire */
          margin: 20px auto;
          padding: 20px;
          background-color: rgba(255, 255, 255, 0.1); /* Léger fond pour le formulaire */
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2); /* Ombre légère */
      }
      #portalForm label {
          color: #fdbb2d; /* Couleur pour les labels */
      }
      #portalForm input[type="text"],
      #portalForm input[type="number"],
      #portalForm textarea,
      #portalForm select {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          background-color: rgba(255,255,255,0.2); /* Fond transparent */
          color: white; /* Couleur du texte */
      }

      #portalForm button {
          padding: 10px 15px;
          background-color: #fdbb2d;
          color: #1a2a6c;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
      }

      #portalForm button:hover {
          background-color: #e6a727;
      }
      #portalForm .list-input-container {
          display: flex;
          flex-direction: column;
      }

      #portalForm .list-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

      #portalForm .list-item input {
          flex: 1; /* Permet à l'input de prendre l'espace disponible */
          margin-right: 5px; /* Marge entre l'input et le bouton */
      }
        #portalForm .list-item button {
           padding: 5px 10px;
           background-color: #e74c3c; /* Couleur différente pour le bouton de suppression */
           color: white;
           border: none;
           border-radius: 4px;
           cursor: pointer;
           font-size: 14px;
        }

        #portalForm .list-item button:hover {
           background-color: #c0392b;
        }

        #configSection {
          margin-bottom:           20px;
          text-align: center; /* Center-align the buttons */
      }
        #configSection .config-buttons {
          display: inline-block;
          margin: 0 10px;
        }

        #systemVersionDisplay {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #fdbb2d;
            font-size: 0.8rem;
        }

        #redirectButtonContainer {
            margin-top: 10px;
            text-align: center;
        }

        #redirectButton {
            padding: 10px 15px;
            background-color: #fdbb2d;
            color: #1a2a6c;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: none; /* Hidden by default */
        }

        #redirectButton:hover {
          background-color: #e6a727;
      }

      .data-management-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        .data-management-buttons button {
            background-color: #fdbb2d;
            color: #1a2a6c;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }
        .data-management-buttons button:hover {
            background-color: #e6a727;
        }

        #importDataInput {
            display: none; /* Cache l'input file par défaut */
        }
         /* Styles pour la notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            display: none; /* Cachée par défaut */
            z-index: 1000;
        }
        .notification.error {
           background-color: red;
       }

        .close-btn {
            margin-left: 15px;
            color: white;
            font-weight: bold;
            float: right;
            font-size: 22px;
            line-height: 20px;
            cursor: pointer;
            transition: 0.3s;
        }

        .close-btn:hover {
            color: black;
        }

        /*Confirmation d'intégration*/

       .confirmation-modal {
           display: none;
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           z-index: 1001; /* Au-dessus de la modale de paiement */
           max-width: 400px;
           width: 90%;
           text-align: center;
       }

       .confirmation-modal h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .confirmation-modal p {
           color: #666;
           margin-bottom: 30px;
       }

    .confirmation-modal .buttons {
       display: flex;
       justify-content: center;
       gap: 20px;
    }

       .confirmation-modal button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;

       }

       .confirmation-modal button:hover {
           background-color: #e6a727;
       }

       /* Assurez-vous que l'overlay pour la confirmation est différent */
       .confirmation-overlay {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 1000; /* Juste en dessous de la modale de confirmation */
       }


    </style>
</head>
<body>
    <div class="page-loader-wrapper" id="pageLoaderWrapper">
        <div class="page-loader"></div>
        <div class="loader-message" id="pageLoaderMessage">Initialisation...</div>
    </div>
    <div class="loader-wrapper" id="loaderWrapper">
        <div class="loader"></div>
    </div>
    <div class="container" id="contentContainer" style="display:none;">
        <header class="header">
            <h1 id="networkNameDisplay">ADMIN WIFI ZONE</h1>
            <div class="wave"></div>
            <div id="systemVersionDisplay">Version du système: <span id="versionNumber"></span></div>
        </header>


        <main>
            <div id="subscriptionSection">
                <h2>Statut de l'Abonnement</h2>
                <div id="subscriptionStatus"></div>
                <div class="subscription-button">
                    <button id="subscribeMonthly">S'abonner (Mensuel - 1000 FCFA)</button>
                    <button id="subscribeYearly">S'abonner (Annuel - 10 000 FCFA)</button>
                </div>
            </div>

            <div id="configSection">
              <button onclick="togglePortalForm()" id="togglePortalFormBtn">Configurer le portail captif</button>
              <button onclick="downloadLoginFile()" id="downloadLoginBtn" style="display: none;">Télécharger le portail captif</button>
             </div>


            <form id="portalForm" style="display: none;">
                <label for="networkName">Nom du réseau:</label>
                <input type="text" id="networkName" name="networkName" required>

                <label for="contactNumber">Numéro à contacter:</label>
                <input type="text" id="contactNumber" name="contactNumber" required>

                <label for="fedapayApiKey">Clé API FedaPay Portail Captif:</label>
                <input type="text" id="fedapayApiKey" name="fedapayApiKey" required>

                <label for="loginMode">Mode de connexion par défaut :</label>
                <select id="loginMode" name="loginMode">
                    <option value="separate">Login (Utilisateur & Mot de passe)</option>
                    <option value="same">Log (Identifiant unique)</option>
                    <option value="pay">Pay (Page de paiement)</option>
                    <option value="hotspot1">Portail captif par défaut</option>
                    <option value="hotspot2">Portail captif secondaire</option>
                    <option value="hotspot3">Portail captif secondaire</option>
                    <option value="hotspot4">Portail captif KODA SMART</option>

                    <!-- Ajoutez d'autres options Hotspot ici -->
                </select>
                <div id="redirectButtonContainer">
                    <button type="button" id="redirectButton">Accéder à la page</button>
                </div>

                <div class="list-input-container">
                    <label>Tarifs:</label>
                    <div id="tariffsList">
                        <div class="list-item">
                            <input type="text" placeholder="Nom du tarif" data-type="tariffName">
                            <input type="number" placeholder="Prix" data-type="tariffPrice">
                            <button type="button" onclick="addListItem('tariffsList')">Ajouter</button>
                         </div>
                      </div>
                 </div>

                 <div class="list-input-container">
                      <label>Adresses de connexion:</label>
                      <div id="connectionsList">
                         <div class="list-item">
                            <input type="text" placeholder="Adresse" data-type="connection">
                            <button type="button" onclick="addListItem('connectionsList')">Ajouter</button>
                           </div>
                      </div>
                  </div>

                  <div class="list-input-container">
                      <label>Services et produits:</label>
                      <div id="productsList">
                         <div class="list-item">
                             <input type="text" placeholder="Service/Produit" data-type="product">
                             <button type="button" onclick="addListItem('productsList')">Ajouter</button>
                         </div>
                     </div>
                 </div>

                 <button type="submit">Enregistrer la configuration</button>
             </form>

            <div class="menu">
                <a href="PageVenteTicket.html" class="menu-item" id="vente">
                    <i class="fas fa-ticket-alt"></i>
                    <h2>Vente de Tickets</h2>
                    <p>Procédez à la vente de nouveaux tickets Wifi.</p>
                </a>
                <a href="AdminVentePartenaires.html" class="menu-item" id="inventaire">
                    <i class="fas fa-clipboard-list"></i>
                    <h2>Inventaire des Tickets</h2>
                    <p>Consultez l'état des ventes de vos partenaires.</p>
                </a>
                <a href="Stock.html" class="menu-item" id="stock">
                    <i class="fas fa-boxes"></i>
                    <h2>Gestion des Stocks Partenaire</h2>
                    <p>Suivez les stocks de tickets de vos partenaires.</p>
                </a>
                <a href="a3.html" class="menu-item" id="administration">
                    <i class="fas fa-cog"></i>
                    <h2>Administration des Tickets</h2>
                    <p>Gérez les tickets, activez ou désactivez-les.</p>
                </a>
                <button onclick="logout()" class="logout-button">Déconnexion</button>
            </div>

            <div class="data-management-buttons">
                <button onclick="exportData()">Exporter les données</button>
                <input type="file" id="importDataInput" accept=".json">
                <button onclick="document.getElementById('importDataInput').click()">Importer les données</button>
            </div>

        </main>

    </div>

     <!-- Modale de notification -->
    <div id="notification" class="notification">
        <span id="notificationMessage"></span>
        <span class="close-btn" onclick="closeNotification()">×</span>
    </div>


    <div id="paymentModal" class="payment-modal" style="display: none;">
        <span class="close-modal" onclick="closePaymentModal()">×</span>
        <h2>Paiement de l'Abonnement</h2>
        <p>Choisissez votre plan d'abonnement et procédez au paiement via FedaPay.</p>
        <!-- Les boutons de paiement seront ajoutés ici par le script -->
    </div>

    <div id="subscriptionRequiredModal" class="subscription-required" style="display: none;">
        <div class="subscription-required-content">
            <h2>Abonnement Requis</h2>
            <p>Un abonnement actif est nécessaire pour accéder à cette fonctionnalité.</p>
            <button onclick="redirectToSubscription()">S'abonner</button>
            <button onclick="hideSubscriptionRequiredModal()">Fermer</button>
        </div>
    </div>

    <div class="overlay" id="overlay" style="display: none;" onclick="closePaymentModal()"></div>

       <!-- Modale de confirmation pour les frais d'intégration -->
    <div id="confirmationModal" class="confirmation-modal">
        <h2>Frais d'intégration</h2>
        <p>Pour votre premier abonnement, des frais d'intégration de 10 000 FCFA s'appliquent en plus du coût de l'abonnement choisi.</p>
        <div class="buttons">
            <button id="confirmIntegration">Continuer</button>
            <button id="cancelIntegration">Annuler</button>
        </div>
    </div>

    <!-- Overlay pour la modale de confirmation -->
    <div class="confirmation-overlay" id="confirmationOverlay"></div>

    <script type="module">
const _0x4fea1e=_0x3caa;(function(_0x238fde,_0x305ac1){const _0x521540=_0x3caa,_0xd3a308=_0x238fde();while(!![]){try{const _0x36c06c=-parseInt(_0x521540(0x10e))/0x1+-parseInt(_0x521540(0x13a))/0x2*(-parseInt(_0x521540(0x19f))/0x3)+parseInt(_0x521540(0xec))/0x4*(parseInt(_0x521540(0xd9))/0x5)+parseInt(_0x521540(0x141))/0x6*(-parseInt(_0x521540(0x19c))/0x7)+parseInt(_0x521540(0xa3))/0x8*(parseInt(_0x521540(0x110))/0x9)+parseInt(_0x521540(0x196))/0xa*(parseInt(_0x521540(0xbf))/0xb)+-parseInt(_0x521540(0xe9))/0xc*(parseInt(_0x521540(0xbc))/0xd);if(_0x36c06c===_0x305ac1)break;else _0xd3a308['push'](_0xd3a308['shift']());}catch(_0x5b4828){_0xd3a308['push'](_0xd3a308['shift']());}}}(_0x4bdd,0x7b6a9));import{getActiveDatabase}from'./firebase-config-manager.js';import{ref,get,set,push,remove,update,onValue}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';let db,adminRef,fedapayApiKey,systemVersion,integrationFee=0x2710,currentPlan='',isFirstSubscription=!![];async function initializeDatabase(){const _0xab44d=_0x3caa;db=await getActiveDatabase(),console[_0xab44d(0x104)](_0xab44d(0x13e));}async function checkLoginStatus(){const _0x327172=_0x3caa;if(sessionStorage[_0x327172(0x189)](_0x327172(0x167))!==_0x327172(0x107))redirectToLogin();else{const _0x1a7bad=sessionStorage['getItem']('currentUserId');if(!_0x1a7bad){console[_0x327172(0xdd)]('Current\x20user\x20ID\x20is\x20not\x20found\x20in\x20sessionStorage.'),redirectToLogin();return;}document[_0x327172(0x103)](_0x327172(0x128))[_0x327172(0x1ab)][_0x327172(0x13d)]=_0x327172(0x1a8),adminRef=ref(db,'users-data/'+_0x1a7bad+_0x327172(0xff));}}function redirectToLogin(){const _0x3b233c=_0x3caa;window[_0x3b233c(0x19e)][_0x3b233c(0x18f)]=_0x3b233c(0xd7);}function showNotification(_0x176845,_0x2d5489){const _0x150df9=_0x3caa,_0x35e529=document[_0x150df9(0x103)](_0x150df9(0x11f)),_0x47283b=document[_0x150df9(0x103)](_0x150df9(0xf6));_0x47283b[_0x150df9(0x164)]=_0x2d5489,_0x35e529[_0x150df9(0x186)]=_0x150df9(0xc8)+_0x176845,_0x35e529['style']['display']=_0x150df9(0x1a8),setTimeout(()=>{const _0x3d87a3=_0x150df9;_0x35e529[_0x3d87a3(0x1ab)]['display']=_0x3d87a3(0x11a);},0x1388);}window[_0x4fea1e(0xa5)]=function(){const _0x5dfe3a=_0x4fea1e;document[_0x5dfe3a(0x103)](_0x5dfe3a(0x11f))['style'][_0x5dfe3a(0x13d)]=_0x5dfe3a(0x11a);},window['logout']=function(){const _0x83e624=_0x4fea1e;sessionStorage[_0x83e624(0x1a9)](),window['location'][_0x83e624(0xa6)](_0x83e624(0xd7));};const venteMenuItem=document[_0x4fea1e(0x103)](_0x4fea1e(0x175)),inventaireMenuItem=document[_0x4fea1e(0x103)](_0x4fea1e(0x177)),stockMenuItem=document[_0x4fea1e(0x103)](_0x4fea1e(0x123)),administrationMenuItem=document[_0x4fea1e(0x103)](_0x4fea1e(0x155)),subscriptionStatus=document[_0x4fea1e(0x103)](_0x4fea1e(0x197)),subscribeMonthlyButton=document[_0x4fea1e(0x103)](_0x4fea1e(0xc5)),subscribeYearlyButton=document['getElementById'](_0x4fea1e(0x10a)),paymentModal=document[_0x4fea1e(0x103)](_0x4fea1e(0xda)),overlay=document[_0x4fea1e(0x103)](_0x4fea1e(0x122)),subscriptionRequiredModal=document['getElementById'](_0x4fea1e(0x133)),confirmationModal=document[_0x4fea1e(0x103)](_0x4fea1e(0xb5)),confirmationOverlay=document[_0x4fea1e(0x103)](_0x4fea1e(0x1a0)),confirmIntegrationButton=document['getElementById'](_0x4fea1e(0x1a3)),cancelIntegrationButton=document[_0x4fea1e(0x103)](_0x4fea1e(0xf3));function showLoader(){const _0x1b2e74=_0x4fea1e;document[_0x1b2e74(0x103)](_0x1b2e74(0x199))[_0x1b2e74(0x1ab)][_0x1b2e74(0x13d)]=_0x1b2e74(0x1a8);}function hideLoader(){const _0x38977e=_0x4fea1e;document[_0x38977e(0x103)](_0x38977e(0x199))[_0x38977e(0x1ab)][_0x38977e(0x13d)]=_0x38977e(0x11a);}function showPageLoader(){const _0x4d3469=_0x4fea1e;document[_0x4d3469(0x103)](_0x4d3469(0x180))[_0x4d3469(0x1ab)][_0x4d3469(0x13d)]=_0x4d3469(0xce);}function hidePageLoader(){const _0x3ea7de=_0x4fea1e;document[_0x3ea7de(0x103)](_0x3ea7de(0x180))[_0x3ea7de(0x1ab)][_0x3ea7de(0x13d)]=_0x3ea7de(0x11a);}function showSubscriptionRequiredModal(){const _0x113361=_0x4fea1e;subscriptionRequiredModal['style'][_0x113361(0x13d)]=_0x113361(0xce);}function hideSubscriptionRequiredModal(){const _0x7cb6f2=_0x4fea1e;subscriptionRequiredModal['style'][_0x7cb6f2(0x13d)]=_0x7cb6f2(0x11a);}function redirectToSubscription(){hideSubscriptionRequiredModal();}function checkSubscriptionStatus(){const _0x55d57f=_0x4fea1e,_0x176cd2=sessionStorage[_0x55d57f(0x189)](_0x55d57f(0xbe));if(!_0x176cd2){console[_0x55d57f(0xdd)](_0x55d57f(0xa9));return;}const _0x45fc28=ref(db,_0x55d57f(0x15d)+_0x176cd2+_0x55d57f(0xff));get(_0x45fc28)['then'](_0x3bb63e=>{const _0x3872f6=_0x55d57f,_0x56d68f=_0x3bb63e[_0x3872f6(0x1a5)](),_0x13f72b=new Date();_0x56d68f&&(isFirstSubscription=!_0x56d68f['hasSubscribedBefore']);if(_0x56d68f&&_0x56d68f['status']===_0x3872f6(0xb2)){const _0x3b867d=new Date(_0x56d68f['endDate']);_0x3b867d<_0x13f72b?(subscriptionStatus[_0x3872f6(0x164)]='Statut\x20de\x20l\x27abonnement:\x20Expiré',subscriptionStatus['style'][_0x3872f6(0x100)]=_0x3872f6(0x16e),subscribeMonthlyButton[_0x3872f6(0x1ab)][_0x3872f6(0x13d)]=_0x3872f6(0x126),subscribeYearlyButton['style'][_0x3872f6(0x13d)]=_0x3872f6(0x126),set(_0x45fc28,{..._0x56d68f,'status':_0x3872f6(0x172)})):(subscriptionStatus['textContent']=_0x3872f6(0x153)+_0x3b867d[_0x3872f6(0x12a)](),subscriptionStatus['style'][_0x3872f6(0x100)]=_0x3872f6(0x14f),subscribeMonthlyButton['style'][_0x3872f6(0x13d)]=_0x3872f6(0x11a),subscribeYearlyButton['style'][_0x3872f6(0x13d)]=_0x3872f6(0x11a));}else subscriptionStatus[_0x3872f6(0x164)]=_0x3872f6(0xc6),subscriptionStatus[_0x3872f6(0x1ab)][_0x3872f6(0x100)]=_0x3872f6(0x16e),subscribeMonthlyButton[_0x3872f6(0x1ab)][_0x3872f6(0x13d)]=_0x3872f6(0x126),subscribeYearlyButton['style'][_0x3872f6(0x13d)]=_0x3872f6(0x126);})['catch'](_0x4504fd=>{const _0x472ebe=_0x55d57f;console[_0x472ebe(0xdd)](_0x472ebe(0xd6),_0x4504fd),showNotification(_0x472ebe(0xc4),_0x472ebe(0xf7));});}function checkUserAccess(){get(adminRef)['then'](_0x357163=>{const _0x2a21f4=_0x3caa,_0x31d7c8=_0x357163['val']();(!_0x31d7c8||_0x31d7c8[_0x2a21f4(0xf5)]!=='active')&&showSubscriptionRequiredModal();});}function _0x3caa(_0x3ddd39,_0xdd145b){const _0x4bdd57=_0x4bdd();return _0x3caa=function(_0x3caad5,_0x4ab52e){_0x3caad5=_0x3caad5-0x9b;let _0x1bce67=_0x4bdd57[_0x3caad5];return _0x1bce67;},_0x3caa(_0x3ddd39,_0xdd145b);}venteMenuItem[_0x4fea1e(0x129)](_0x4fea1e(0x10f),_0x53ce17=>{const _0x40d6c3=_0x4fea1e;_0x53ce17[_0x40d6c3(0xdc)](),checkUserAccess();const _0x4feca0=sessionStorage[_0x40d6c3(0x189)](_0x40d6c3(0xbe));_0x4feca0?window[_0x40d6c3(0x19e)][_0x40d6c3(0x18f)]=_0x40d6c3(0x135)+_0x4feca0:(console['error']('Admin\x20ID\x20not\x20found\x20in\x20session\x20storage.'),showNotification('Erreur','Erreur:\x20ID\x20administrateur\x20non\x20trouvé.\x20Veuillez\x20vous\x20reconnecter.'));}),inventaireMenuItem[_0x4fea1e(0x129)]('click',_0x5b4bf7=>{const _0x525a40=_0x4fea1e;_0x5b4bf7[_0x525a40(0xdc)](),checkUserAccess(),window[_0x525a40(0x19e)][_0x525a40(0x18f)]=_0x525a40(0xe7);}),stockMenuItem[_0x4fea1e(0x129)]('click',_0x11e8c4=>{const _0x570426=_0x4fea1e;_0x11e8c4[_0x570426(0xdc)](),checkUserAccess(),window[_0x570426(0x19e)]['href']=_0x570426(0x118);}),administrationMenuItem['addEventListener'](_0x4fea1e(0x10f),_0x141565=>{const _0x229002=_0x4fea1e;_0x141565[_0x229002(0xdc)](),checkUserAccess(),window[_0x229002(0x19e)][_0x229002(0x18f)]=_0x229002(0x10d);}),subscribeMonthlyButton[_0x4fea1e(0x129)]('click',()=>{const _0x110af4=_0x4fea1e;currentPlan=_0x110af4(0x1aa),isFirstSubscription?showConfirmationModal():initiatePayment(currentPlan,0x0);}),subscribeYearlyButton['addEventListener']('click',()=>{const _0x31942c=_0x4fea1e;currentPlan=_0x31942c(0x171),isFirstSubscription?showConfirmationModal():initiatePayment(currentPlan,0x0);});function showConfirmationModal(){const _0x5672e6=_0x4fea1e;confirmationModal[_0x5672e6(0x1ab)][_0x5672e6(0x13d)]='block',confirmationOverlay[_0x5672e6(0x1ab)][_0x5672e6(0x13d)]=_0x5672e6(0x1a8);}function hideConfirmationModal(){const _0x4a60b1=_0x4fea1e;confirmationModal[_0x4a60b1(0x1ab)][_0x4a60b1(0x13d)]=_0x4a60b1(0x11a),confirmationOverlay[_0x4a60b1(0x1ab)][_0x4a60b1(0x13d)]=_0x4a60b1(0x11a);}confirmIntegrationButton[_0x4fea1e(0x129)]('click',()=>{hideConfirmationModal(),initiatePayment(currentPlan,integrationFee);}),cancelIntegrationButton[_0x4fea1e(0x129)](_0x4fea1e(0x10f),()=>{hideConfirmationModal();});async function initiatePayment(_0x177c97,_0x31f1bc){const _0x48b240=_0x4fea1e,_0x2bb9be=_0x177c97==='monthly'?0x3e8:0x2710,_0x3d77d4=_0x2bb9be+_0x31f1bc,_0x7691dc=_0x177c97===_0x48b240(0x1aa)?_0x48b240(0x1a4):_0x48b240(0x14a),_0x395fa4=sessionStorage[_0x48b240(0x189)](_0x48b240(0xbe));if(!_0x395fa4){console['error'](_0x48b240(0x114)),showNotification(_0x48b240(0xc4),_0x48b240(0xc2));return;}FedaPay[_0x48b240(0x137)]({'public_key':fedapayApiKey,'transaction':{'amount':_0x3d77d4,'description':_0x7691dc+(_0x31f1bc>0x0?'\x20+\x20Frais\x20d\x27intégration\x20('+_0x31f1bc+_0x48b240(0x138):'')},'customer':{'email':_0x48b240(0x1ac)},'onComplete':async function(_0x359b94){const _0x41dcb7=_0x48b240;if(_0x359b94['reason']===FedaPay['DIALOG_DISMISSED'])showNotification(_0x41dcb7(0xc4),_0x41dcb7(0xa8));else _0x359b94[_0x41dcb7(0x165)]===FedaPay[_0x41dcb7(0xe4)]&&handleSuccessfulPayment(_0x177c97,_0x359b94,_0x395fa4,_0x31f1bc>0x0);}})['open']();}async function handleSuccessfulPayment(_0x54d0db,_0x3db274,_0x11df07,_0x228030){const _0x5628b5=_0x4fea1e,_0x2a0e46=new Date(),_0x47aaa3=new Date(_0x2a0e46);_0x54d0db===_0x5628b5(0x1aa)?_0x47aaa3[_0x5628b5(0xed)](_0x47aaa3[_0x5628b5(0x184)]()+0x1):_0x47aaa3[_0x5628b5(0x169)](_0x47aaa3['getFullYear']()+0x1);const _0x1c672b={'status':_0x5628b5(0xb2),'startDate':_0x2a0e46[_0x5628b5(0x174)](),'endDate':_0x47aaa3[_0x5628b5(0x174)](),'transactionId':_0x3db274[_0x5628b5(0xc1)]['id'],'plan':_0x54d0db,'hasSubscribedBefore':!![]};_0x228030&&(_0x1c672b[_0x5628b5(0x1a2)]=!![]);try{const _0x4c4301=ref(db,'users-data/'+_0x11df07+_0x5628b5(0xff));await set(_0x4c4301,_0x1c672b),checkSubscriptionStatus(),alert(_0x5628b5(0x18b)+(_0x54d0db===_0x5628b5(0x1aa)?_0x5628b5(0xac):_0x5628b5(0xa2))+'\x20réussi!');}catch(_0x1cab44){console[_0x5628b5(0xdd)](_0x5628b5(0xd3),_0x1cab44),showNotification(_0x5628b5(0xc4),_0x5628b5(0x1a7));}}async function cancelSubscription(){const _0x382def=_0x4fea1e,_0x4feebb=sessionStorage[_0x382def(0x189)](_0x382def(0xbe));if(!_0x4feebb){console['error']('User\x20ID\x20not\x20found.\x20Cannot\x20cancel\x20subscription.'),alert(_0x382def(0xe3));return;}try{const _0x502cd8=ref(db,_0x382def(0x15d)+_0x4feebb+_0x382def(0xff));await set(_0x502cd8,{...(await get(_0x502cd8))[_0x382def(0x1a5)](),'status':_0x382def(0x183)}),checkSubscriptionStatus(),alert(_0x382def(0x12f));}catch(_0x32cf2a){console[_0x382def(0xdd)]('Erreur\x20lors\x20de\x20l\x27annulation\x20de\x20l\x27abonnement:',_0x32cf2a),showNotification(_0x382def(0xc4),_0x382def(0x9f));}}async function processConnectedTickets(){const _0x3a988b=_0x4fea1e,_0x1f82ad=document[_0x3a988b(0x103)](_0x3a988b(0xb1)),_0x3c2d6e=sessionStorage[_0x3a988b(0x189)](_0x3a988b(0xbe));if(!_0x3c2d6e){console[_0x3a988b(0xdd)](_0x3a988b(0x19b));return;}const _0x12b7be=ref(db,_0x3a988b(0x15d)+_0x3c2d6e+_0x3a988b(0xfa));try{_0x1f82ad[_0x3a988b(0x164)]=_0x3a988b(0xbd);const _0x181f2e=await get(_0x12b7be);let _0xe0674a=_0x181f2e['val']()||{};const _0x116ae0={};for(const _0x5c1fb6 in _0xe0674a){const _0x3cc731=_0xe0674a[_0x5c1fb6]['username'];!_0x116ae0[_0x3cc731]&&(_0x116ae0[_0x3cc731]=_0xe0674a[_0x5c1fb6]);}_0x1f82ad[_0x3a988b(0x164)]='Traitement\x20des\x20tickets\x20uniques...';for(const _0x20e2b1 in _0x116ae0){await processTicket(_0x116ae0[_0x20e2b1],_0x3c2d6e);}_0x1f82ad[_0x3a988b(0x164)]=_0x3a988b(0x10b),await remove(_0x12b7be);}catch(_0x443f59){console[_0x3a988b(0xdd)]('Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20connectés\x20:',_0x443f59),showNotification('Erreur',_0x3a988b(0x148));}}async function processTicket(_0x531266,_0x29081a){const _0x4c43a0=_0x4fea1e,_0x24e579=document[_0x4c43a0(0x103)](_0x4c43a0(0xb1));if(!_0x29081a){console[_0x4c43a0(0xdd)](_0x4c43a0(0x13b));return;}try{_0x24e579[_0x4c43a0(0x164)]='Vérification\x20du\x20ticket\x20pour\x20'+_0x531266[_0x4c43a0(0x15e)]+'...';const _0x54e061=ref(db,_0x4c43a0(0x15d)+_0x29081a+_0x4c43a0(0xc3)),_0x50e82d=await get(_0x54e061),_0x288eec=_0x50e82d[_0x4c43a0(0x1a5)]()||{};let _0xffa23c=![];for(const _0xd61fd3 in _0x288eec){const _0x409be6=_0x288eec[_0xd61fd3];for(const _0x213d3f in _0x409be6){if(_0x409be6[_0x213d3f][_0x4c43a0(0x150)]===_0x531266[_0x4c43a0(0x15e)]){_0xffa23c=!![];break;}}if(_0xffa23c)break;}if(!_0xffa23c){_0x24e579[_0x4c43a0(0x164)]=_0x4c43a0(0x13c)+_0x531266[_0x4c43a0(0x15e)]+_0x4c43a0(0x112);const _0x4fda03=ref(db,_0x4c43a0(0x15d)+_0x29081a+_0x4c43a0(0x17c)),_0x1cb918=ref(db,_0x4c43a0(0x15d)+_0x29081a+_0x4c43a0(0x1ad)),_0x59967f=await get(_0x4fda03),_0x30821a=await get(_0x1cb918),_0x16ce40=_0x59967f[_0x4c43a0(0x1a5)]()||{},_0x854e02=_0x30821a[_0x4c43a0(0x1a5)]()||{};let _0x12ab8d=null,_0x14cfe0=null,_0x42f2e4=null;for(const _0x5259e8 in _0x16ce40){const _0x2bf4a5=(_0x16ce40[_0x5259e8]['utilisateur']||[])[_0x4c43a0(0xd1)](_0x531266['username']);if(_0x2bf4a5>-0x1){_0x12ab8d={'category':_0x5259e8,'user':_0x16ce40[_0x5259e8][_0x4c43a0(0x9c)][_0x2bf4a5],'password':_0x16ce40[_0x5259e8][_0x4c43a0(0xa4)][_0x2bf4a5],'price':_0x16ce40[_0x5259e8][_0x4c43a0(0x1a6)][_0x2bf4a5],'updatedData':{..._0x16ce40[_0x5259e8],'utilisateur':_0x16ce40[_0x5259e8][_0x4c43a0(0x9c)][_0x4c43a0(0x19d)]((_0x20f749,_0x3f0d3f)=>_0x3f0d3f!==_0x2bf4a5),'motDePasse':_0x16ce40[_0x5259e8][_0x4c43a0(0xa4)]['filter']((_0x3e2769,_0x90d793)=>_0x90d793!==_0x2bf4a5),'prix':_0x16ce40[_0x5259e8][_0x4c43a0(0x1a6)][_0x4c43a0(0x19d)]((_0x5b58cf,_0x2eed9d)=>_0x2eed9d!==_0x2bf4a5)}},_0x14cfe0=ref(db,'users-data/'+_0x29081a+'/TicketsTotal/'+_0x5259e8),_0x42f2e4=_0x4c43a0(0x18e);break;}}if(!_0x12ab8d)for(const _0x259436 in _0x854e02){if(_0x854e02[_0x259436][_0x4c43a0(0x150)]===_0x531266[_0x4c43a0(0x15e)]){_0x12ab8d={'category':_0x854e02[_0x259436][_0x4c43a0(0x109)],'user':_0x854e02[_0x259436]['user'],'password':_0x854e02[_0x259436][_0x4c43a0(0x134)],'price':_0x854e02[_0x259436]['price']},_0x14cfe0=ref(db,_0x4c43a0(0x15d)+_0x29081a+_0x4c43a0(0xf0)+_0x259436),_0x42f2e4=_0x4c43a0(0x111);break;}}_0x12ab8d&&(_0x24e579[_0x4c43a0(0x164)]=_0x4c43a0(0xea)+_0x531266[_0x4c43a0(0x15e)]+_0x4c43a0(0x112),await sellTicketAutomatically(_0x12ab8d,_0x14cfe0,_0x42f2e4,_0x29081a));}}catch(_0x124497){console['error'](_0x4c43a0(0x159),_0x124497),showNotification(_0x4c43a0(0xc4),'Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20'+_0x531266[_0x4c43a0(0x15e)]+'.');}}async function sellTicketAutomatically(_0x3fc66a,_0x32f3c4,_0x20eb4a,_0x29282f){const _0x14a0fd=_0x4fea1e;if(!_0x29282f){console['error'](_0x14a0fd(0xb3));return;}try{const _0x1577d9=_0x14a0fd(0x121),_0x4528f9=ref(db,_0x14a0fd(0x15d)+_0x29282f+'/VendorsHistory/'+_0x1577d9);await push(_0x4528f9,{'category':_0x3fc66a[_0x14a0fd(0x109)],'user':_0x3fc66a[_0x14a0fd(0x150)],'password':_0x3fc66a[_0x14a0fd(0x134)],'price':_0x3fc66a[_0x14a0fd(0x9d)],'soldAt':Date['now'](),'vendorId':_0x1577d9}),_0x20eb4a===_0x14a0fd(0x18e)?await set(_0x32f3c4,_0x3fc66a['updatedData']):await remove(_0x32f3c4),console[_0x14a0fd(0x104)]('Ticket\x20'+_0x3fc66a[_0x14a0fd(0x150)]+_0x14a0fd(0xf1));}catch(_0x47a5bf){console['error'](_0x14a0fd(0x116),_0x47a5bf),showNotification(_0x14a0fd(0xc4),_0x14a0fd(0xe6));}}window[_0x4fea1e(0x119)]=function(){const _0x2bcc5e=_0x4fea1e;sessionStorage['clear'](),window[_0x2bcc5e(0x19e)][_0x2bcc5e(0xa6)](_0x2bcc5e(0xd7));},window[_0x4fea1e(0x124)]=function(){const _0x18de00=_0x4fea1e,_0x3504f7=document[_0x18de00(0x103)]('portalForm'),_0x56cfa6=document[_0x18de00(0x103)](_0x18de00(0xf9)),_0x360b7a=document[_0x18de00(0x103)]('downloadLoginBtn');_0x3504f7[_0x18de00(0x1ab)][_0x18de00(0x13d)]===_0x18de00(0x11a)||_0x3504f7['style'][_0x18de00(0x13d)]===''?(_0x3504f7[_0x18de00(0x1ab)][_0x18de00(0x13d)]='flex',_0x360b7a[_0x18de00(0x1ab)][_0x18de00(0x13d)]='inline-block',_0x56cfa6[_0x18de00(0x164)]='Masquer\x20le\x20formulaire'):(_0x3504f7['style'][_0x18de00(0x13d)]=_0x18de00(0x11a),_0x360b7a['style'][_0x18de00(0x13d)]=_0x18de00(0x11a),_0x56cfa6[_0x18de00(0x164)]=_0x18de00(0xcb));},window[_0x4fea1e(0xfc)]=function(_0x4bcf02){const _0x179714=_0x4fea1e,_0x502260=document[_0x179714(0x103)](_0x4bcf02),_0x152e21=document[_0x179714(0x15c)](_0x179714(0x156));_0x152e21[_0x179714(0x186)]=_0x179714(0x185);let _0x2d4589=_0x179714(0xfe);if(_0x4bcf02===_0x179714(0x10c))_0x152e21[_0x179714(0x149)]=_0x179714(0xe0);else{let _0x5052e3='';if(_0x4bcf02===_0x179714(0xa1))_0x5052e3=_0x179714(0x17f);else _0x4bcf02==='productsList'&&(_0x5052e3='Service/Produit');_0x152e21[_0x179714(0x149)]=_0x179714(0xb6)+_0x2d4589+_0x179714(0x11c)+_0x5052e3+_0x179714(0x13f)+_0x4bcf02[_0x179714(0x193)](0x0,-0x4)+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>';}_0x502260[_0x179714(0xcc)](_0x152e21);},window[_0x4fea1e(0x117)]=function(_0x1b4e9c){_0x1b4e9c['parentNode']['remove']();},document[_0x4fea1e(0x103)](_0x4fea1e(0x160))[_0x4fea1e(0x129)]('submit',async _0x2b0f62=>{const _0x4fd5c9=_0x4fea1e;_0x2b0f62['preventDefault'](),showLoader();const _0x367e31=sessionStorage['getItem'](_0x4fd5c9(0xbe));if(!_0x367e31){console[_0x4fd5c9(0xdd)](_0x4fd5c9(0xdf)),alert(_0x4fd5c9(0x191)),hideLoader();return;}const _0x196734={'networkName':document[_0x4fd5c9(0x103)](_0x4fd5c9(0x14d))[_0x4fd5c9(0xf2)],'contactNumber':document[_0x4fd5c9(0x103)]('contactNumber')[_0x4fd5c9(0xf2)],'fedapayApiKey':document[_0x4fd5c9(0x103)]('fedapayApiKey')[_0x4fd5c9(0xf2)],'loginMode':document['getElementById']('loginMode')['value'],'tariffs':[],'connections':[],'products':[]};document[_0x4fd5c9(0xd5)](_0x4fd5c9(0x17b))[_0x4fd5c9(0x168)](_0x4ae1ad=>{const _0x32de35=_0x4fd5c9,_0x49ee4c=_0x4ae1ad[_0x32de35(0xb0)](_0x32de35(0xc7)),_0x35bff2=_0x4ae1ad[_0x32de35(0xb0)](_0x32de35(0x182));if(_0x49ee4c&&_0x35bff2){const _0x17b0d8=_0x49ee4c[_0x32de35(0xf2)][_0x32de35(0x16d)](),_0x1c4e48=parseFloat(_0x35bff2[_0x32de35(0xf2)]);_0x17b0d8&&!isNaN(_0x1c4e48)&&_0x196734['tariffs'][_0x32de35(0xd8)]({'name':_0x17b0d8,'price':_0x1c4e48});}}),document[_0x4fd5c9(0xd5)](_0x4fd5c9(0x113))[_0x4fd5c9(0x168)](_0x259b9a=>{const _0x4de6a4=_0x4fd5c9,_0xbd5df4=_0x259b9a['value'][_0x4de6a4(0x16d)]();_0xbd5df4&&_0x196734[_0x4de6a4(0xa0)][_0x4de6a4(0xd8)](_0xbd5df4);}),document[_0x4fd5c9(0xd5)](_0x4fd5c9(0x139))[_0x4fd5c9(0x168)](_0x35e8ae=>{const _0x204089=_0x4fd5c9,_0x31b899=_0x35e8ae['value'][_0x204089(0x16d)]();_0x31b899&&_0x196734[_0x204089(0x12b)]['push'](_0x31b899);});try{const _0x4eccfa=ref(db,_0x4fd5c9(0x15d)+_0x367e31+'/portalConfig');await set(_0x4eccfa,_0x196734),alert(_0x4fd5c9(0x154)),hideLoader(),document[_0x4fd5c9(0x103)](_0x4fd5c9(0x160))[_0x4fd5c9(0xcd)](),document[_0x4fd5c9(0x103)]('portalForm')[_0x4fd5c9(0x1ab)]['display']=_0x4fd5c9(0x11a),document['getElementById'](_0x4fd5c9(0xf9))[_0x4fd5c9(0x164)]='Configurer\x20le\x20portail\x20captif',document['getElementById'](_0x4fd5c9(0xb4))['style'][_0x4fd5c9(0x13d)]=_0x4fd5c9(0x11a),document['getElementById'](_0x4fd5c9(0x132))[_0x4fd5c9(0x164)]=_0x196734['networkName'];}catch(_0x3ad4e1){console[_0x4fd5c9(0xdd)](_0x4fd5c9(0x14c),_0x3ad4e1),alert('Erreur\x20lors\x20de\x20l\x27enregistrement\x20de\x20la\x20configuration.'),hideLoader();}});async function downloadLoginFile(){const _0x1d623f=_0x4fea1e;showLoader();const _0x1477f5=sessionStorage[_0x1d623f(0x189)]('currentUserId');if(!_0x1477f5){console['error'](_0x1d623f(0x179)),hideLoader(),alert(_0x1d623f(0x166));return;}try{const _0x269485=ref(db,_0x1d623f(0x15d)+_0x1477f5+_0x1d623f(0x14b)),_0x58b122=await get(_0x269485);if(!_0x58b122[_0x1d623f(0xe2)]()){alert(_0x1d623f(0xee)),hideLoader();return;}const _0x209264=_0x58b122['val']();let _0x33ecd6='',_0x134119='';if(_0x209264[_0x1d623f(0xae)]===_0x1d623f(0x158)){const _0x2bb743=await fetch(_0x1d623f(0x14e));_0x33ecd6=await _0x2bb743[_0x1d623f(0xfe)](),_0x134119=_0x1d623f(0x14e);}else{if(_0x209264['loginMode']===_0x1d623f(0x195)){const _0x415400=await fetch(_0x1d623f(0x12d));_0x33ecd6=await _0x415400[_0x1d623f(0xfe)](),_0x134119='log.html';}else{if(_0x209264[_0x1d623f(0xae)]===_0x1d623f(0xd2)){const _0xbbd1f7=await fetch(_0x1d623f(0x152));_0x33ecd6=await _0xbbd1f7[_0x1d623f(0xfe)](),_0x134119='pay.html';}else{const _0x179400=await fetch(_0x209264['loginMode']+'.html');_0x33ecd6=await _0x179400[_0x1d623f(0xfe)](),_0x134119=_0x209264['loginMode']+_0x1d623f(0x181);}}}_0x33ecd6=_0x33ecd6[_0x1d623f(0xa6)](_0x1d623f(0x105),_0x1477f5);function _0x135f12(_0x475d26){const _0x365ded=_0x1d623f;let _0x20ca02=_0x365ded(0x12c);return _0x475d26[_0x365ded(0x168)](_0x4ae168=>{const _0x48988d=_0x365ded;_0x20ca02+=_0x48988d(0x131)+_0x4ae168[_0x48988d(0x1ae)]+_0x48988d(0xad)+_0x4ae168[_0x48988d(0x9d)]+_0x48988d(0x16b)+_0x4ae168['name']+'\x27,\x20'+_0x4ae168[_0x48988d(0x9d)]+_0x48988d(0xfb);}),_0x20ca02+=_0x365ded(0x130),_0x20ca02;}function _0x1467a5(_0xd5b0a7){const _0x7c75b5=_0x1d623f;let _0x13c675=_0x7c75b5(0xde);return _0xd5b0a7[_0x7c75b5(0x168)](_0x2002df=>{const _0x27b45e=_0x7c75b5;_0x13c675+=_0x27b45e(0x144)+_0x2002df[_0x27b45e(0x1ae)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>'+_0x2002df['price']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>';}),_0x13c675+=_0x7c75b5(0xba),_0x13c675;}function _0x4d0de7(_0x8566a0){const _0x4b1b0e=_0x1d623f;let _0x5c4de3=_0x4b1b0e(0xb8);return _0x8566a0[_0x4b1b0e(0x168)](_0x30737f=>{const _0x1a55be=_0x4b1b0e;_0x5c4de3+=_0x1a55be(0x18d)+_0x30737f+'</li>';}),_0x5c4de3+='</ul>',_0x5c4de3;}_0x33ecd6=_0x33ecd6[_0x1d623f(0xa6)](_0x1d623f(0x16a),_0x135f12(_0x209264[_0x1d623f(0x15f)]||[])),_0x33ecd6=_0x33ecd6[_0x1d623f(0xa6)]('<!--\x20TARIFFS_TABLE_SIMPLE\x20-->',_0x1467a5(_0x209264[_0x1d623f(0x15f)]||[])),_0x33ecd6=_0x33ecd6[_0x1d623f(0xa6)](_0x1d623f(0x142),_0x4d0de7(_0x209264[_0x1d623f(0xa0)]||[])),_0x33ecd6=_0x33ecd6[_0x1d623f(0xa6)](_0x1d623f(0x176),_0x4d0de7(_0x209264[_0x1d623f(0x12b)]||[])),_0x33ecd6=_0x33ecd6[_0x1d623f(0xa6)](_0x1d623f(0xeb),_0x209264[_0x1d623f(0x106)]||_0x1d623f(0xaa)),_0x33ecd6=_0x33ecd6[_0x1d623f(0xa6)]('<!--\x20NETWORK_NAME\x20-->',_0x209264['networkName']||'CYBER\x20CAMPUS\x20WIFI\x20ZONE'),_0x33ecd6=_0x33ecd6[_0x1d623f(0xa6)]('<!--\x20FEDAPAY_API_KEY\x20-->',_0x209264[_0x1d623f(0x140)]||'');const _0x7c5489=new Blob([_0x33ecd6],{'type':_0x1d623f(0x15b)}),_0x2c7f53=URL['createObjectURL'](_0x7c5489),_0x1eb023=document[_0x1d623f(0x15c)]('a');_0x1eb023[_0x1d623f(0x18f)]=_0x2c7f53,_0x1eb023[_0x1d623f(0x115)]=_0x134119,document['body']['appendChild'](_0x1eb023),_0x1eb023['click'](),document['body'][_0x1d623f(0x162)](_0x1eb023),URL['revokeObjectURL'](_0x2c7f53);const _0x283e01=document[_0x1d623f(0x15c)]('a');_0x283e01['href']=_0x1d623f(0xb7),_0x283e01['download']=_0x1d623f(0xb7),document['body'][_0x1d623f(0xcc)](_0x283e01),_0x283e01['click'](),document[_0x1d623f(0x190)]['removeChild'](_0x283e01),hideLoader();}catch(_0x321c9e){console[_0x1d623f(0xdd)](_0x1d623f(0x11d),_0x321c9e),alert(_0x1d623f(0xf4)),hideLoader();}}window['downloadLoginFile']=downloadLoginFile;function _0x4bdd(){const _0x1ceb04=['Abonnement\x20annuel','/portalConfig','Erreur\x20lors\x20de\x20l\x27enregistrement\x20de\x20la\x20configuration:','networkName','login.html','green','user','message','pay.html','Statut\x20de\x20l\x27abonnement:\x20Actif\x20jusqu\x27au\x20','Configuration\x20du\x20portail\x20captif\x20enregistrée\x20avec\x20succès!','administration','div','redirectButton','separate','Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','text/html','createElement','users-data/','username','tariffs','portalForm','then','removeChild','productsList','textContent','reason','Vous\x20devez\x20être\x20connecté\x20pour\x20télécharger\x20le\x20portail.','isLoggedIn','forEach','setFullYear','<!--\x20TARIFFS_TABLE\x20-->','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22><button\x20onclick=\x22initPayment(\x27','users/API','trim','red','change','readAsText','yearly','expired','.json','toISOString','vente','<!--\x20PRODUCTS_LIST\x20-->','inventaire','onload','User\x20ID\x20not\x20found.\x20Cannot\x20download\x20login\x20file.','Aucune\x20donnée\x20à\x20exporter.','#tariffsList\x20.list-item','/TicketsTotal','Veuillez\x20sélectionner\x20un\x20fichier\x20à\x20importer.','hideSubscriptionRequiredModal','Adresse','pageLoaderWrapper','.html','[data-type=\x22tariffPrice\x22]','cancelled','getMonth','list-item','className','pk_live_xxxxxxxxxxxxx','result','getItem','Erreur\x20de\x20lecture\x20du\x20fichier:','Abonnement\x20','hotspot1','<li>','TicketsTotal','href','body','Vous\x20devez\x20être\x20connecté\x20pour\x20configurer\x20le\x20portail.','users/Version\x20du\x20système','slice','hotspot3','same','10dqwnDe','subscriptionStatus','Aucune\x20configuration\x20trouvée.','loaderWrapper','stringify','Current\x20user\x20ID\x20is\x20not\x20found\x20in\x20sessionStorage.','3269pxSUuP','filter','location','682161QsBqCD','confirmationOverlay','application/json','integrationFeePaid','confirmIntegration','Abonnement\x20mensuel','val','prix','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27abonnement.','block','clear','monthly','style','admin@example.com','/TicketsTransit','name','API\x20configuration\x20not\x20found\x20globally\x20for\x20subscription.','utilisateur','price','Données\x20modifiées\x20pendant\x20l\x27importation:','Erreur\x20lors\x20de\x20l\x27annulation\x20de\x20l\x27abonnement.','connections','connectionsList','annuel','8ZPRjrO','motDePasse','closeNotification','replace','<input\x20type=\x22text\x22\x20value=\x22','Paiement\x20échoué.','User\x20ID\x20not\x20found.\x20Cannot\x20check\x20subscription\x20status.','+229\x20XXXXXXXX','https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/Partail%20capitf%20secondaire.zip?alt=media&token=7bf96399-b991-40db-af64-48b41ef9fd71','mensuel','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','loginMode','versionNumber','querySelector','pageLoaderMessage','active','Current\x20user\x20ID\x20is\x20not\x20provided\x20to\x20sellTicketAutomatically.','downloadLoginBtn','confirmationModal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22','firebase-config-manager.js','<ul>','https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/hotspot15.zip?alt=media&token=76dfc03c-056e-460f-b711-48e1418092df','</tbody></table>','open','159419Lknwfi','Vérification\x20des\x20tickets\x20connectés...','currentUserId','2530132sHJEZw','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20value=\x22','transaction','Vous\x20devez\x20être\x20connecté\x20pour\x20vous\x20abonner.','/VendorsHistory','Erreur','subscribeMonthly','Statut\x20de\x20l\x27abonnement:\x20Inactif','[data-type=\x22tariffName\x22]','notification\x20','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20configuration.','ADMIN\x20WIFI\x20ZONE','Configurer\x20le\x20portail\x20captif','appendChild','reset','flex','importDataInput','https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/Portail%20par%20d%C3%A9faut.zip?alt=media&token=9f200c87-a577-4d51-ae08-8324c17b58e9','indexOf','pay','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27abonnement:','Erreur\x20lors\x20de\x20l\x27importation\x20des\x20données:\x20','querySelectorAll','Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20d\x27abonnement:','loginAccueil.html','push','40vPDNAz','paymentModal','revokeObjectURL','preventDefault','error','<table\x20style=\x22width:\x20100%;\x20border-collapse:\x20collapse;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>','User\x20ID\x20not\x20found.\x20Cannot\x20save\x20portal\x20configuration.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20placeholder=\x22Nom\x20du\x20tarif\x22\x20data-type=\x22tariffName\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20placeholder=\x22Prix\x22\x20data-type=\x22tariffPrice\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','Les\x20données\x20importées\x20ne\x20sont\x20pas\x20valides.','exists','Vous\x20devez\x20être\x20connecté\x20pour\x20annuler\x20un\x20abonnement.','CHECKOUT_COMPLETED','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20configuration:','Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket.','AdminVentePartenaires.html','hotspot2','132MOsTRB','Vente\x20du\x20ticket\x20','<!--\x20CONTACT_NUMBER\x20-->','332812iAzgid','setMonth','Aucune\x20configuration\x20de\x20portail\x20captif\x20trouvée.','catch','/TicketsTransit/','\x20vendu\x20automatiquement\x20et\x20enregistré\x20dans\x20VendorsHistory.','value','cancelIntegration','Erreur\x20lors\x20du\x20téléchargement\x20du\x20portail\x20captif.','status','notificationMessage','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.','object','togglePortalFormBtn','/TicketConnecté',')\x22>Payer</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','addListItem','System\x20Version\x20not\x20found\x20globally,\x20using\x20default.','text','/admin/subscription','color','target','Mode\x20de\x20connexion\x20inconnu.','getElementById','log','<!--\x20ADMIN_USER_ID\x20-->','contactNumber','true','Erreur\x20lors\x20de\x20l\x27importation:','category','subscribeYearly','Nettoyage\x20des\x20tickets\x20traités...','tariffsList','a3.html','361232ZyhitB','click','5910111YUxfhv','TicketsTransit','...','#connectionsList\x20.list-item\x20input','User\x20ID\x20not\x20found.\x20Cannot\x20initiate\x20payment.','download','Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket\x20:','removeListItem','Stock.html','logout','none','1.0.0','\x22\x20placeholder=\x22','Erreur\x20lors\x20du\x20téléchargement\x20du\x20portail\x20captif:','Vous\x20devez\x20être\x20connecté\x20pour\x20exporter\x20les\x20données.','notification','files','Vendeur\x20automatique','overlay','stock','togglePortalForm','onerror','inline-block','hotspot4','contentContainer','addEventListener','toLocaleDateString','products','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20style=\x22width:\x20100%;\x20border-collapse:\x20collapse;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','log.html','_blank','Abonnement\x20annulé.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','networkNameDisplay','subscriptionRequiredModal','password','PageVenteTicket.html?adminId=','\x22\x20data-type=\x22tariffPrice\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','init','\x20FCFA)','#productsList\x20.list-item\x20input','4uAIjgz','Current\x20user\x20ID\x20is\x20not\x20provided\x20to\x20processTicket.','Traitement\x20du\x20ticket\x20','display','Database\x20initialized\x20in\x20index.html','\x22\x20data-type=\x22','fedapayApiKey','12918CiytrY','<!--\x20CONNECTION_LOCATIONS\x20-->','Données\x20importées\x20avec\x20succès!','<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','createObjectURL','DOMContentLoaded','Erreur\x20lors\x20de\x20l\x27exportation\x20des\x20données.','Une\x20erreur\x20est\x20survenue\x20lors\x20du\x20traitement\x20des\x20tickets.','innerHTML'];_0x4bdd=function(){return _0x1ceb04;};return _0x4bdd();}async function loadPortalConfig(){const _0x5989f3=_0x4fea1e;showLoader();const _0x322d12=sessionStorage[_0x5989f3(0x189)](_0x5989f3(0xbe));try{const _0x2a5879=ref(db,_0x5989f3(0x15d)+_0x322d12+_0x5989f3(0x14b)),_0x229587=ref(db,_0x5989f3(0x16c)),_0x175397=ref(db,_0x5989f3(0x192)),_0x13474f=await get(_0x2a5879),_0x1a655a=await get(_0x229587),_0x5ffe63=await get(_0x175397);_0x1a655a[_0x5989f3(0xe2)]()?fedapayApiKey=_0x1a655a['val']():(console[_0x5989f3(0x104)](_0x5989f3(0x9b)),fedapayApiKey=_0x5989f3(0x187));_0x5ffe63[_0x5989f3(0xe2)]()?systemVersion=_0x5ffe63[_0x5989f3(0x1a5)]():(systemVersion=_0x5989f3(0x11b),console['log'](_0x5989f3(0xfd)));document['getElementById'](_0x5989f3(0xaf))[_0x5989f3(0x164)]=systemVersion;if(_0x13474f[_0x5989f3(0xe2)]()){const _0x345d49=_0x13474f[_0x5989f3(0x1a5)]();document[_0x5989f3(0x103)](_0x5989f3(0x14d))[_0x5989f3(0xf2)]=_0x345d49[_0x5989f3(0x14d)]||'',document[_0x5989f3(0x103)](_0x5989f3(0x106))['value']=_0x345d49['contactNumber']||'',document['getElementById'](_0x5989f3(0x140))[_0x5989f3(0xf2)]=_0x345d49[_0x5989f3(0x140)]||'',document[_0x5989f3(0x103)](_0x5989f3(0xae))['value']=_0x345d49[_0x5989f3(0xae)]||'separate',document[_0x5989f3(0x103)](_0x5989f3(0x132))['textContent']=_0x345d49[_0x5989f3(0x14d)]||_0x5989f3(0xca);function _0x4b4ab0(_0x43c92a,_0x174ac9,_0x301627){const _0x4d0458=_0x5989f3,_0x2fefc2=document['getElementById'](_0x43c92a);_0x2fefc2[_0x4d0458(0x149)]='',_0x174ac9[_0x4d0458(0x168)](_0x20e69b=>{const _0x36567b=_0x4d0458,_0x4e4154=document[_0x36567b(0x15c)](_0x36567b(0x156));_0x4e4154[_0x36567b(0x186)]=_0x36567b(0x185),_0x43c92a==='tariffsList'?_0x4e4154['innerHTML']=_0x36567b(0xc0)+_0x20e69b['name']+'\x22\x20data-type=\x22tariffName\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20value=\x22'+_0x20e69b['price']+_0x36567b(0x136):_0x4e4154[_0x36567b(0x149)]=_0x36567b(0xa7)+_0x20e69b+_0x36567b(0x13f)+_0x301627+_0x36567b(0x15a),_0x2fefc2[_0x36567b(0xcc)](_0x4e4154);}),addListItem(_0x43c92a);}_0x4b4ab0(_0x5989f3(0x10c),_0x345d49['tariffs']||[],null),_0x4b4ab0(_0x5989f3(0xa1),_0x345d49[_0x5989f3(0xa0)]||[],'connection'),_0x4b4ab0(_0x5989f3(0x163),_0x345d49[_0x5989f3(0x12b)]||[],'product');}else console[_0x5989f3(0x104)](_0x5989f3(0x198)),addListItem('tariffsList'),addListItem(_0x5989f3(0xa1)),addListItem(_0x5989f3(0x163));}catch(_0x161773){console[_0x5989f3(0xdd)](_0x5989f3(0xe5),_0x161773),alert(_0x5989f3(0xc9));}finally{hideLoader();}}document[_0x4fea1e(0x103)]('redirectButton')[_0x4fea1e(0x129)]('click',function(){const _0x3e7eb4=_0x4fea1e,_0x8babcb=document['getElementById'](_0x3e7eb4(0xae))[_0x3e7eb4(0xf2)];let _0x4071ca='';switch(_0x8babcb){case _0x3e7eb4(0x158):_0x4071ca=_0x3e7eb4(0x14e);break;case _0x3e7eb4(0x195):_0x4071ca=_0x3e7eb4(0x12d);break;case _0x3e7eb4(0xd2):_0x4071ca=_0x3e7eb4(0x152);break;case _0x3e7eb4(0x18c):_0x4071ca=_0x3e7eb4(0xd0);break;case _0x3e7eb4(0xe8):_0x4071ca='https://firebasestorage.googleapis.com/v0/b/eduque-moi-bada8.appspot.com/o/hotspot1.zip?alt=media&token=d1e7b9b5-102a-42c5-ab36-9b1764e995ff';break;case _0x3e7eb4(0x194):_0x4071ca=_0x3e7eb4(0xab);break;case _0x3e7eb4(0x127):_0x4071ca=_0x3e7eb4(0xb9);break;default:alert(_0x3e7eb4(0x102));return;}window[_0x3e7eb4(0xbb)](_0x4071ca,_0x3e7eb4(0x12e));}),document[_0x4fea1e(0x103)](_0x4fea1e(0xae))[_0x4fea1e(0x129)](_0x4fea1e(0x16f),function(){const _0x13126d=_0x4fea1e,_0x4584f7=this['value'],_0x5eb610=document['getElementById'](_0x13126d(0x157));['separate','same',_0x13126d(0xd2)]['includes'](_0x4584f7)?_0x5eb610['style']['display']=_0x13126d(0x11a):_0x5eb610[_0x13126d(0x1ab)]['display']=_0x13126d(0x126);});async function exportData(){const _0x5b3eb4=_0x4fea1e;showLoader();const _0x12853b=sessionStorage[_0x5b3eb4(0x189)]('currentUserId');if(!_0x12853b){hideLoader(),alert(_0x5b3eb4(0x11e));return;}try{const _0x69ed78=ref(db,'users-data/'+_0x12853b),_0x477d35=await get(_0x69ed78);if(_0x477d35[_0x5b3eb4(0xe2)]()){const _0x5683e3=_0x477d35['val'](),_0x207bfe=JSON[_0x5b3eb4(0x19a)](_0x5683e3,null,0x2),_0x3ecd36=new Blob([_0x207bfe],{'type':_0x5b3eb4(0x1a1)}),_0x51639f=URL[_0x5b3eb4(0x145)](_0x3ecd36),_0xe627a5=document['createElement']('a');_0xe627a5['href']=_0x51639f,_0xe627a5[_0x5b3eb4(0x115)]='backup-data-'+_0x12853b+_0x5b3eb4(0x173),document[_0x5b3eb4(0x190)]['appendChild'](_0xe627a5),_0xe627a5[_0x5b3eb4(0x10f)](),document['body'][_0x5b3eb4(0x162)](_0xe627a5),URL[_0x5b3eb4(0xdb)](_0x51639f);}else alert(_0x5b3eb4(0x17a));}catch(_0x2cf87d){console['error']('Erreur\x20lors\x20de\x20l\x27exportation:',_0x2cf87d),alert(_0x5b3eb4(0x147));}finally{hideLoader();}}window['exportData']=exportData;async function importData(){const _0x54a712=_0x4fea1e;showLoader();const _0x339500=sessionStorage['getItem']('currentUserId');if(!_0x339500){hideLoader(),alert('Vous\x20devez\x20être\x20connecté\x20pour\x20importer\x20les\x20données.');return;}const _0x351334=document[_0x54a712(0x103)](_0x54a712(0xcf)),_0x2acbab=_0x351334[_0x54a712(0x120)][0x0];if(!_0x2acbab){hideLoader(),alert(_0x54a712(0x17d));return;}const _0x48fc13=new FileReader();_0x48fc13[_0x54a712(0x178)]=async _0x35a16d=>{const _0x4d7515=_0x54a712;try{const _0x5bb261=JSON['parse'](_0x35a16d[_0x4d7515(0x101)][_0x4d7515(0x188)]),_0x549329=ref(db,_0x4d7515(0x15d)+_0x339500);if(typeof _0x5bb261!==_0x4d7515(0xf8)||_0x5bb261===null)throw new Error(_0x4d7515(0xe1));const _0x4245c3=onValue(_0x549329,_0x55c5df=>{const _0x68bd84=_0x4d7515;console[_0x68bd84(0x104)](_0x68bd84(0x9e),_0x55c5df['val']());});await set(_0x549329,_0x5bb261),_0x4245c3(),alert(_0x4d7515(0x143)),window[_0x4d7515(0x19e)]['reload']();}catch(_0x5634cc){console[_0x4d7515(0xdd)](_0x4d7515(0x108),_0x5634cc),alert(_0x4d7515(0xd4)+_0x5634cc[_0x4d7515(0x151)]);}finally{hideLoader(),_0x351334[_0x4d7515(0xf2)]='';}},_0x48fc13[_0x54a712(0x125)]=_0x71d3f=>{const _0x408a09=_0x54a712;console['error'](_0x408a09(0x18a),_0x71d3f),alert('Erreur\x20de\x20lecture\x20du\x20fichier.'),hideLoader(),_0x351334[_0x408a09(0xf2)]='';},_0x48fc13[_0x54a712(0x170)](_0x2acbab);}window['importData']=importData,document['addEventListener'](_0x4fea1e(0x146),async()=>{const _0x5f3763=_0x4fea1e;showPageLoader(),await initializeDatabase(),await checkLoginStatus(),await loadPortalConfig(),processConnectedTickets()[_0x5f3763(0x161)](()=>checkSubscriptionStatus())[_0x5f3763(0x161)](()=>{hidePageLoader();})[_0x5f3763(0xef)](_0x198810=>{const _0x3df2f5=_0x5f3763;console[_0x3df2f5(0xdd)]('Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20:',_0x198810),hidePageLoader(),showNotification('Erreur','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27initialisation.');});}),window['redirectToSubscription']=redirectToSubscription,window[_0x4fea1e(0x17e)]=redirectToSubscription;function closePaymentModal(){const _0x319db1=_0x4fea1e;paymentModal[_0x319db1(0x1ab)][_0x319db1(0x13d)]=_0x319db1(0x11a),overlay[_0x319db1(0x1ab)]['display']=_0x319db1(0x11a);}window[_0x4fea1e(0x178)]=()=>{};
    </script>

</body>
</html>