<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN WIFI ZONE</title>
    <link rel="stylesheet" href="styleA.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>

    <style>
        /* ... (Styles CSS - Pas de modifications majeures, juste des ajustements pour le formulaire) ... */
       /* Style pour le modal de paiement */
       .payment-modal {
           display: none;
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           z-index: 1000;
           max-width: 400px;
           width: 90%;
           text-align: center;
       }

       .payment-modal h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .payment-modal p {
           color: #666;
           margin-bottom: 30px;
       }

       .payment-modal button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
           margin: 0 10px;
       }

       .payment-modal button:hover {
           background-color: #e6a727;
       }

       .close-modal {
           position: absolute;
           top: 10px;
           right: 10px;
           cursor: pointer;
           font-size: 1.2rem;
           color: #333;
       }

       /* Style pour l'overlay */
       .overlay {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 999;
       }
       #subscriptionSection {
           text-align: center;
           margin-bottom: 30px;
       }

       #subscriptionSection h2 {
           font-size: 24px;
           color: #fdbb2d;
           margin-bottom: 20px;
       }

       #subscriptionStatus {
           font-size: 18px;
           color: #fff;
           margin-bottom: 20px;
       }

       .subscription-buttons {
           display: flex;
           justify-content: center;
           gap: 20px;
       }

       .subscription-buttons button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
       }

       .subscription-buttons button:hover {
           background-color: #e6a727;
       }

       /* Style pour le message d'abonnement requis */
       .subscription-required {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 1000;
           justify-content: center;
           align-items: center;
           color: white;
           text-align: center;
           padding: 20px;
       }

       .subscription-required-content {
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           max-width: 400px;
           width: 90%;
       }

       .subscription-required-content h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .subscription-required-content p {
           color: #666;
           margin-bottom: 30px;
       }

       .subscription-required-content button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
           margin: 0 10px;
       }

       .subscription-required-content button:hover {
           background-color: #e6a727;
       }
        .loader-wrapper {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
        }

        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .page-loader-wrapper {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1002;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .page-loader {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        .loader-message {
            color: white;
            margin-top: 16px;
            font-size: 1rem;
            text-align: center;
            max-width: 80%;
        }

        .header {
            display: flex; /* Added to align items */
            justify-content: center; /* MODIFICATION: Center content horizontally */
            align-items: center; /* Added to vertically align items */
            flex-direction: column; /* MODIFICATION: Stack items vertically */
            text-align: center; /* MODIFICATION: Center text within header */
        }

        .header h1 {
            margin: 0; /* Reset margin for h1 inside header */
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .logout-button:hover {
            background-color: #c0392b;
        }
       /* Styles pour le formulaire de portail captif */
      #portalForm {
          display: none; /*Caché par défaut*/
          flex-direction: column;
          gap: 10px;
          max-width: 600px; /* Limite la largeur du formulaire */
          margin: 20px auto;
          padding: 20px;
          background-color: rgba(255, 255, 255, 0.1); /* Léger fond pour le formulaire */
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2); /* Ombre légère */
      }
      #portalForm label {
          color: #fdbb2d; /* Couleur pour les labels */
      }
      #portalForm input[type="text"],
      #portalForm input[type="number"],
      #portalForm textarea {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          background-color: rgba(255,255,255,0.2); /* Fond transparent */
          color: white; /* Couleur du texte */
      }

      #portalForm button {
          padding: 10px 15px;
          background-color: #fdbb2d;
          color: #1a2a6c;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
      }

      #portalForm button:hover {
          background-color: #e6a727;
      }
      #portalForm .list-input-container {
          display: flex;
          flex-direction: column;
      }

      #portalForm .list-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

      #portalForm .list-item input {
          flex: 1; /* Permet à l'input de prendre l'espace disponible */
          margin-right: 5px; /* Marge entre l'input et le bouton */
      }
        #portalForm .list-item button {
           padding: 5px 10px;
           background-color: #e74c3c; /* Couleur différente pour le bouton de suppression */
           color: white;
           border: none;
           border-radius: 4px;
           cursor: pointer;
           font-size: 14px;
        }

        #portalForm .list-item button:hover {
           background-color: #c0392b;
        }

        #configSection {
          margin-bottom:           20px;
          text-align: center; /* Center-align the buttons */
      }
        #configSection .config-buttons {
          display: inline-block;
          margin: 0 10px;
        }

    </style>
</head>
<body>
    <div class="page-loader-wrapper" id="pageLoaderWrapper">
        <div class="page-loader"></div>
        <div class="loader-message" id="pageLoaderMessage">Initialisation...</div>
    </div>
    <div class="loader-wrapper" id="loaderWrapper">
        <div class="loader"></div>
    </div>
    <div class="container" id="contentContainer" style="display:none;">
        <header class="header">
            <h1>ADMIN</h1>
            <h1>WIFI ZONE</h1>
            <h1> </h1>
            <h1> </h1>
            <div class="wave"></div>
        </header>


        <main>
            <div id="subscriptionSection">
                <h2>Statut de l'Abonnement</h2>
                <div id="subscriptionStatus"></div>
                <div class="subscription-button">
                    <button id="subscribeMonthly">S'abonner (Mensuel - 1000 FCFA)</button>
                    <button id="subscribeYearly">S'abonner (Annuel - 10 000 FCFA)</button>
                </div>
            </div>

            <div id="configSection">
              <button onclick="togglePortalForm()" id="togglePortalFormBtn">Configurer le portail captif</button>
              <button onclick="downloadLoginFile()" id="downloadLoginBtn" style="display: none;">Télécharger le portail captif</button>
             </div>


            <form id="portalForm" style="display: none;">
                <label for="networkName">Nom du réseau:</label>
                <input type="text" id="networkName" name="networkName" required>

                <label for="contactNumber">Numéro à contacter:</label>
                <input type="text" id="contactNumber" name="contactNumber" required>

                <label for="fedapayApiKey">Clé API FedaPay:</label>
                <input type="text" id="fedapayApiKey" name="fedapayApiKey" required>

                <div class="list-input-container">
                    <label>Tarifs:</label>
                    <div id="tariffsList">
                        <div class="list-item">
                            <input type="text" placeholder="Nom du tarif" data-type="tariffName">
                            <input type="number" placeholder="Prix" data-type="tariffPrice">
                            <button type="button" onclick="addListItem('tariffsList')">Ajouter</button>
                         </div>
                      </div>
                 </div>

                 <div class="list-input-container">
                      <label>Adresses de connexion:</label>
                      <div id="connectionsList">
                         <div class="list-item">
                            <input type="text" placeholder="Adresse" data-type="connection">
                            <button type="button" onclick="addListItem('connectionsList')">Ajouter</button>
                           </div>
                      </div>
                  </div>

                  <div class="list-input-container">
                      <label>Services et produits:</label>
                      <div id="productsList">
                         <div class="list-item">
                             <input type="text" placeholder="Service/Produit" data-type="product">
                             <button type="button" onclick="addListItem('productsList')">Ajouter</button>
                         </div>
                     </div>
                 </div>

                 <button type="submit">Enregistrer la configuration</button>
             </form>

            <div class="menu">
                <a href="PageVenteTicket.html" class="menu-item" id="vente">
                    <i class="fas fa-ticket-alt"></i> <!-- Font Awesome Ticket Icon -->
                    <h2>Vente de Tickets</h2>
                    <p>Procédez à la vente de nouveaux tickets Wifi.</p>
                </a>
                <a href="AdminVentePartenaires.html" class="menu-item" id="inventaire">
                    <i class="fas fa-clipboard-list"></i> <!-- Font Awesome Clipboard List Icon -->
                    <h2>Inventaire des Tickets</h2>
                    <p>Consultez l'état des ventes de vos partenaires.</p>
                </a>
                <a href="Stock.html" class="menu-item" id="stock">
                    <i class="fas fa-boxes"></i> <!-- Font Awesome Boxes Icon -->
                    <h2>Gestion des Stocks Partenaire</h2>
                    <p>Suivez les stocks de tickets de vos partenaires.</p>
                </a>
                <a href="a3.html" class="menu-item" id="administration">
                    <i class="fas fa-cog"></i> <!-- Font Awesome Settings Cog Icon -->
                    <h2>Administration des Tickets</h2>
                    <p>Gérez les tickets, activez ou désactivez-les.</p>
                </a>
                <button onclick="logout()" class="logout-button">Déconnexion</button>
            </div>

        </main>

    </div>


    <div id="paymentModal" class="payment-modal" style="display: none;">
        <span class="close-modal" onclick="closePaymentModal()">×</span>
        <h2>Paiement de l'Abonnement</h2>
        <p>Choisissez votre plan d'abonnement et procédez au paiement via FedaPay.</p>
        <!-- Les boutons de paiement seront ajoutés ici par le script -->
    </div>

    <div id="subscriptionRequiredModal" class="subscription-required" style="display: none;">
        <div class="subscription-required-content">
            <h2>Abonnement Requis</h2>
            <p>Un abonnement actif est nécessaire pour accéder à cette fonctionnalité.</p>
            <button onclick="redirectToSubscription()">S'abonner</button>
            <button onclick="hideSubscriptionRequiredModal()">Fermer</button>
        </div>
    </div>

    <div class="overlay" id="overlay" style="display: none;" onclick="closePaymentModal()"></div>

    <script type="module">
const _0x52ecdb=_0x1438;(function(_0x420a36,_0x6a0620){const _0xd1b385=_0x1438,_0x3728e4=_0x420a36();while(!![]){try{const _0x325619=parseInt(_0xd1b385(0x16c))/0x1+-parseInt(_0xd1b385(0x199))/0x2+-parseInt(_0xd1b385(0x10c))/0x3+parseInt(_0xd1b385(0x144))/0x4*(parseInt(_0xd1b385(0x130))/0x5)+-parseInt(_0xd1b385(0x169))/0x6*(parseInt(_0xd1b385(0xec))/0x7)+-parseInt(_0xd1b385(0x152))/0x8+parseInt(_0xd1b385(0x109))/0x9;if(_0x325619===_0x6a0620)break;else _0x3728e4['push'](_0x3728e4['shift']());}catch(_0x180af0){_0x3728e4['push'](_0x3728e4['shift']());}}}(_0x4b4f,0x8d061));import{getActiveDatabase}from'./firebase-config-manager.js';import{ref,get,set,push,remove,update}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';let db,adminRef,connectedTicketsRef;async function initializeDatabase(){const _0x36393b=_0x1438;db=await getActiveDatabase(),connectedTicketsRef=ref(db,_0x36393b(0x16a)),console[_0x36393b(0x149)]('Database\x20initialized\x20in\x20index.html');}async function checkLoginStatus(){const _0x288442=_0x1438;if(sessionStorage[_0x288442(0x19c)](_0x288442(0x1ad))!==_0x288442(0x12e))redirectToLogin();else{const _0x29bbba=sessionStorage['getItem']('currentUserId');if(!_0x29bbba){console[_0x288442(0xef)](_0x288442(0x19a)),redirectToLogin();return;}document[_0x288442(0x1a6)]('contentContainer')['style']['display']=_0x288442(0x12a),adminRef=ref(db,_0x288442(0x10e)+_0x29bbba+_0x288442(0x12f));}}function redirectToLogin(){const _0xae1c00=_0x1438;window[_0xae1c00(0x17b)][_0xae1c00(0x117)]=_0xae1c00(0x16b);}window[_0x52ecdb(0x14d)]=function(){const _0xc5dffa=_0x52ecdb;sessionStorage[_0xc5dffa(0x173)](),redirectToLogin();};const venteMenuItem=document[_0x52ecdb(0x1a6)](_0x52ecdb(0x10d)),inventaireMenuItem=document[_0x52ecdb(0x1a6)](_0x52ecdb(0x11e)),stockMenuItem=document[_0x52ecdb(0x1a6)]('stock'),administrationMenuItem=document[_0x52ecdb(0x1a6)](_0x52ecdb(0x15d)),subscriptionStatus=document['getElementById'](_0x52ecdb(0x13d)),subscribeMonthlyButton=document[_0x52ecdb(0x1a6)](_0x52ecdb(0x120)),subscribeYearlyButton=document[_0x52ecdb(0x1a6)]('subscribeYearly'),paymentModal=document[_0x52ecdb(0x1a6)](_0x52ecdb(0x17f)),overlay=document['getElementById'](_0x52ecdb(0x118)),subscriptionRequiredModal=document[_0x52ecdb(0x1a6)](_0x52ecdb(0x155));function showLoader(){const _0x2ff8a2=_0x52ecdb;document[_0x2ff8a2(0x1a6)](_0x2ff8a2(0x107))[_0x2ff8a2(0x141)][_0x2ff8a2(0x12c)]=_0x2ff8a2(0x12a);}function hideLoader(){const _0x3e81a2=_0x52ecdb;document[_0x3e81a2(0x1a6)](_0x3e81a2(0x107))[_0x3e81a2(0x141)]['display']=_0x3e81a2(0x126);}function showPageLoader(){const _0x394efc=_0x52ecdb;document[_0x394efc(0x1a6)](_0x394efc(0x12d))[_0x394efc(0x141)][_0x394efc(0x12c)]=_0x394efc(0x103);}function hidePageLoader(){const _0x515803=_0x52ecdb;document[_0x515803(0x1a6)](_0x515803(0x12d))['style'][_0x515803(0x12c)]=_0x515803(0x126);}function showSubscriptionRequiredModal(){const _0xf594bb=_0x52ecdb;subscriptionRequiredModal[_0xf594bb(0x141)][_0xf594bb(0x12c)]=_0xf594bb(0x103);}function hideSubscriptionRequiredModal(){const _0xba1c24=_0x52ecdb;subscriptionRequiredModal[_0xba1c24(0x141)][_0xba1c24(0x12c)]=_0xba1c24(0x126);}function _0x1438(_0x1c13b2,_0x59468a){const _0x4b4f85=_0x4b4f();return _0x1438=function(_0x143804,_0x1c8f2a){_0x143804=_0x143804-0xe8;let _0x1ae9c0=_0x4b4f85[_0x143804];return _0x1ae9c0;},_0x1438(_0x1c13b2,_0x59468a);}function redirectToSubscription(){hideSubscriptionRequiredModal();}function checkSubscriptionStatus(){const _0x4c3a1b=_0x52ecdb,_0xbc7dd9=sessionStorage[_0x4c3a1b(0x19c)](_0x4c3a1b(0xfe));if(!_0xbc7dd9){console[_0x4c3a1b(0xef)](_0x4c3a1b(0x184));return;}const _0x1ea440=ref(db,_0x4c3a1b(0x10e)+_0xbc7dd9+_0x4c3a1b(0x12f));get(_0x1ea440)['then'](_0x36cbf8=>{const _0x1d5288=_0x4c3a1b,_0x55b862=_0x36cbf8[_0x1d5288(0x166)](),_0x2c3bd2=new Date();if(_0x55b862&&_0x55b862[_0x1d5288(0xea)]==='active'){const _0x33e40d=new Date(_0x55b862[_0x1d5288(0xf6)]);_0x33e40d<_0x2c3bd2?(subscriptionStatus['textContent']=_0x1d5288(0xed),subscriptionStatus[_0x1d5288(0x141)][_0x1d5288(0x187)]=_0x1d5288(0x16f),subscribeMonthlyButton[_0x1d5288(0x141)][_0x1d5288(0x12c)]=_0x1d5288(0x172),subscribeYearlyButton[_0x1d5288(0x141)]['display']=_0x1d5288(0x172),set(_0x1ea440,{..._0x55b862,'status':_0x1d5288(0x16e)})):(subscriptionStatus[_0x1d5288(0x14e)]=_0x1d5288(0x12b)+_0x33e40d[_0x1d5288(0x181)](),subscriptionStatus[_0x1d5288(0x141)][_0x1d5288(0x187)]=_0x1d5288(0x185),subscribeMonthlyButton['style']['display']=_0x1d5288(0x126),subscribeYearlyButton[_0x1d5288(0x141)][_0x1d5288(0x12c)]=_0x1d5288(0x126));}else subscriptionStatus['textContent']=_0x1d5288(0x13f),subscriptionStatus[_0x1d5288(0x141)][_0x1d5288(0x187)]=_0x1d5288(0x16f),subscribeMonthlyButton[_0x1d5288(0x141)][_0x1d5288(0x12c)]=_0x1d5288(0x172),subscribeYearlyButton[_0x1d5288(0x141)]['display']=_0x1d5288(0x172);})[_0x4c3a1b(0x19d)](_0x4a1335=>{const _0x5bfa3e=_0x4c3a1b;console[_0x5bfa3e(0xef)](_0x5bfa3e(0x15c),_0x4a1335);});}function checkUserAccess(){const _0x2cf33c=_0x52ecdb;get(adminRef)[_0x2cf33c(0x14f)](_0x3e2938=>{const _0x528ebe=_0x2cf33c,_0x41633c=_0x3e2938[_0x528ebe(0x166)]();(!_0x41633c||_0x41633c['status']!==_0x528ebe(0x178))&&showSubscriptionRequiredModal();});}venteMenuItem[_0x52ecdb(0x13b)](_0x52ecdb(0x138),_0x412614=>{const _0x55d38a=_0x52ecdb;_0x412614[_0x55d38a(0x121)](),checkUserAccess(),window[_0x55d38a(0x17b)][_0x55d38a(0x117)]=_0x55d38a(0x13a);}),inventaireMenuItem[_0x52ecdb(0x13b)](_0x52ecdb(0x138),_0xb5449f=>{const _0x20e0d2=_0x52ecdb;_0xb5449f[_0x20e0d2(0x121)](),checkUserAccess(),window[_0x20e0d2(0x17b)][_0x20e0d2(0x117)]=_0x20e0d2(0x114);}),stockMenuItem[_0x52ecdb(0x13b)]('click',_0x1581c0=>{const _0xf99297=_0x52ecdb;_0x1581c0[_0xf99297(0x121)](),checkUserAccess(),window[_0xf99297(0x17b)][_0xf99297(0x117)]='Stock.html';}),administrationMenuItem[_0x52ecdb(0x13b)]('click',_0x577bf0=>{const _0x14b034=_0x52ecdb;_0x577bf0['preventDefault'](),checkUserAccess(),window['location'][_0x14b034(0x117)]=_0x14b034(0x1a2);}),subscribeMonthlyButton[_0x52ecdb(0x13b)](_0x52ecdb(0x138),()=>{const _0x39ea18=_0x52ecdb;initiatePayment(_0x39ea18(0x194));}),subscribeYearlyButton['addEventListener'](_0x52ecdb(0x138),()=>{const _0x1720ad=_0x52ecdb;initiatePayment(_0x1720ad(0x161));});function initiatePayment(_0x4c87bf){const _0x238ba6=_0x52ecdb,_0x1e56bf=_0x4c87bf===_0x238ba6(0x194)?0x3e8:0x2710,_0x4dc26b=_0x4c87bf===_0x238ba6(0x194)?_0x238ba6(0x159):_0x238ba6(0x188),_0x245dbd=sessionStorage[_0x238ba6(0x19c)](_0x238ba6(0xfe));if(!_0x245dbd){console[_0x238ba6(0xef)]('User\x20ID\x20not\x20found.\x20Cannot\x20initiate\x20payment.'),alert('Vous\x20devez\x20être\x20connecté\x20pour\x20vous\x20abonner.');return;}FedaPay[_0x238ba6(0x131)]({'public_key':'pk_live_TfSz212W0xSMKK7oPEogkFmp','transaction':{'amount':_0x1e56bf,'description':_0x4dc26b},'customer':{'email':_0x238ba6(0x167)},'onComplete':async function(_0x5bf159){const _0x40ac85=_0x238ba6;if(_0x5bf159['reason']===FedaPay['DIALOG_DISMISSED'])alert('Paiement\x20échoué.');else _0x5bf159[_0x40ac85(0x139)]===FedaPay[_0x40ac85(0x18d)]&&handleSuccessfulPayment(_0x4c87bf,_0x5bf159,_0x245dbd);}})[_0x238ba6(0xe9)]();}async function handleSuccessfulPayment(_0x3e46a4,_0x301b4e,_0x1479c0){const _0x56c54c=_0x52ecdb,_0xf11d62=new Date(),_0xbfafd6=new Date(_0xf11d62);_0x3e46a4==='monthly'?_0xbfafd6['setMonth'](_0xbfafd6[_0x56c54c(0x175)]()+0x1):_0xbfafd6[_0x56c54c(0x168)](_0xbfafd6[_0x56c54c(0x163)]()+0x1);const _0x54793c={'status':_0x56c54c(0x178),'startDate':_0xf11d62['toISOString'](),'endDate':_0xbfafd6['toISOString'](),'transactionId':_0x301b4e[_0x56c54c(0x192)]['id'],'plan':_0x3e46a4};try{const _0x487a88=ref(db,_0x56c54c(0x10e)+_0x1479c0+_0x56c54c(0x12f));await set(_0x487a88,_0x54793c),checkSubscriptionStatus(),alert(_0x56c54c(0x113)+(_0x3e46a4==='monthly'?_0x56c54c(0x112):_0x56c54c(0x129))+_0x56c54c(0x11b));}catch(_0x433608){console[_0x56c54c(0xef)](_0x56c54c(0x1af),_0x433608),alert(_0x56c54c(0x111));}}function _0x4b4f(){const _0x43b89b=['list-item','querySelector','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20','transaction','password','monthly','Erreur','/TicketsTotal','togglePortalFormBtn','querySelectorAll','658238PJotZY','Current\x20user\x20ID\x20is\x20not\x20found\x20in\x20sessionStorage.','Erreur\x20lors\x20de\x20l\x27enregistrement\x20de\x20la\x20configuration.','getItem','catch','user','pageLoaderMessage','downloadLoginBtn','removeChild','a3.html','\x27,\x20','portalForm','appendChild','getElementById','<li>','downloadLoginFile','Ticket\x20','<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','slice','contactNumber','isLoggedIn','<!--\x20CONTACT_NUMBER\x20-->','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27abonnement:','User\x20ID\x20not\x20found.\x20Cannot\x20save\x20portal\x20configuration.','open','status','Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20:','7shIMvO','Statut\x20de\x20l\x27abonnement:\x20Expiré','Configurer\x20le\x20portail\x20captif','error','<!--\x20NETWORK_NAME\x20-->','Abonnement\x20annulé.','CYBER\x20CAMPUS\x20WIFI\x20ZONE','tariffs','addListItem','hideSubscriptionRequiredModal','endDate','text/html','className','Current\x20user\x20ID\x20is\x20not\x20provided\x20to\x20processTicket.','Erreur\x20lors\x20de\x20l\x27annulation\x20de\x20l\x27abonnement:','username','#productsList\x20.list-item\x20input','createElement','currentUserId','productsList','download','User\x20ID\x20not\x20found.\x20Cannot\x20cancel\x20subscription.','Aucune\x20configuration\x20de\x20portail\x20captif\x20trouvée.','flex','TicketsTransit','motDePasse','prix','loaderWrapper','<!--\x20TARIFFS_TABLE_SIMPLE\x20-->','269649VkQqmE','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22','products','1428951vWkxCb','vente','users-data/','<table\x20style=\x22width:\x20100%;\x20border-collapse:\x20collapse;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>','Vente\x20du\x20ticket\x20','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27abonnement.','mensuel','Abonnement\x20','AdminVentePartenaires.html','Une\x20erreur\x20est\x20survenue\x20lors\x20du\x20traitement\x20des\x20tickets.','Vous\x20devez\x20être\x20connecté\x20pour\x20annuler\x20un\x20abonnement.','href','overlay','name','connectionsList','\x20réussi!','exists','TicketsTotal','inventaire','Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20connectés\x20:','subscribeMonthly','preventDefault','connections','text','\x22\x20placeholder=\x22','Erreur\x20lors\x20de\x20l\x27enregistrement\x20de\x20la\x20configuration:','none','Service/Produit','#tariffsList\x20.list-item','annuel','block','Statut\x20de\x20l\x27abonnement:\x20Actif\x20jusqu\x27au\x20','display','pageLoaderWrapper','true','/admin/subscription','5wTXeVG','init','<ul>','togglePortalForm','Erreur\x20lors\x20du\x20téléchargement\x20du\x20portail\x20captif:','</ul>','body','Vérification\x20du\x20ticket\x20pour\x20','click','reason','PageVenteTicket.html','addEventListener','updatedData','subscriptionStatus','createObjectURL','Statut\x20de\x20l\x27abonnement:\x20Inactif','now','style','/portalConfig','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','4219076LBgIzA','#connectionsList\x20.list-item\x20input','<!--\x20FEDAPAY_API_KEY\x20-->','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','Erreur\x20lors\x20du\x20téléchargement\x20du\x20portail\x20captif.','log','trim','<!--\x20CONNECTION_LOCATIONS\x20-->','utilisateur','logout','textContent','then','...','Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket\x20:','2256376fWgfhb','removeListItem','div','subscriptionRequiredModal','cancelled','Traitement\x20des\x20tickets\x20uniques...','/VendorsHistory','Abonnement\x20mensuel','forEach','User\x20ID\x20not\x20found.\x20Cannot\x20download\x20login\x20file.','Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20d\x27abonnement:','administration','+229\x20XXXXXXXX','Adresse','<!--\x20ADMIN_USER_ID\x20-->','yearly','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22><button\x20onclick=\x22initPayment(\x27','getFullYear','price','login.html','val','admin@example.com','setFullYear','2007912zRiePp','TicketConnecté','loginAccueil.html','915038LSgsHY','category','expired','red','Vérification\x20des\x20tickets\x20connectés...','value','inline-block','clear','indexOf','getMonth','Masquer\x20le\x20formulaire','reset','active','Vous\x20devez\x20être\x20connecté\x20pour\x20configurer\x20le\x20portail.','onload','location','innerHTML','<!--\x20TARIFFS_TABLE\x20-->','filter','paymentModal','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','toLocaleDateString','Configuration\x20du\x20portail\x20captif\x20enregistrée\x20avec\x20succès!','\x22\x20data-type=\x22','User\x20ID\x20not\x20found.\x20Cannot\x20check\x20subscription\x20status.','green','fedapayApiKey','color','Abonnement\x20annuel','replace','push',')\x22>Payer</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<!--\x20PRODUCTS_LIST\x20-->','CHECKOUT_COMPLETED'];_0x4b4f=function(){return _0x43b89b;};return _0x4b4f();}async function cancelSubscription(){const _0xfb81e1=_0x52ecdb,_0xb928e0=sessionStorage[_0xfb81e1(0x19c)](_0xfb81e1(0xfe));if(!_0xb928e0){console[_0xfb81e1(0xef)](_0xfb81e1(0x101)),alert(_0xfb81e1(0x116));return;}try{const _0x3bc5ba=ref(db,'users-data/'+_0xb928e0+_0xfb81e1(0x12f));await set(_0x3bc5ba,{...(await get(_0x3bc5ba))['val'](),'status':_0xfb81e1(0x156)}),checkSubscriptionStatus(),alert(_0xfb81e1(0xf1));}catch(_0x5af377){console[_0xfb81e1(0xef)](_0xfb81e1(0xfa),_0x5af377),alert('Erreur\x20lors\x20de\x20l\x27annulation\x20de\x20l\x27abonnement.');}}async function processConnectedTickets(){const _0x586ac5=_0x52ecdb,_0x496f52=document[_0x586ac5(0x1a6)](_0x586ac5(0x19f)),_0x18b60f=sessionStorage[_0x586ac5(0x19c)](_0x586ac5(0xfe));if(!_0x18b60f){console['error'](_0x586ac5(0x19a));return;}try{_0x496f52[_0x586ac5(0x14e)]=_0x586ac5(0x170);const _0x37b89d=await get(connectedTicketsRef);let _0x1cc636=_0x37b89d[_0x586ac5(0x166)]()||{};const _0x44f29f={};for(const _0x47098b in _0x1cc636){const _0x10b67f=_0x1cc636[_0x47098b][_0x586ac5(0xfb)];!_0x44f29f[_0x10b67f]&&(_0x44f29f[_0x10b67f]=_0x1cc636[_0x47098b]);}_0x496f52[_0x586ac5(0x14e)]=_0x586ac5(0x157);for(const _0x5eefe3 in _0x44f29f){await processTicket(_0x44f29f[_0x5eefe3],_0x18b60f);}_0x496f52[_0x586ac5(0x14e)]='Nettoyage\x20des\x20tickets\x20traités...',await remove(connectedTicketsRef);}catch(_0x47b8a6){console[_0x586ac5(0xef)](_0x586ac5(0x11f),_0x47b8a6),showNotification(_0x586ac5(0x195),_0x586ac5(0x115));}}async function processTicket(_0x2283a2,_0x3d8744){const _0x1000eb=_0x52ecdb,_0x3c5c02=document[_0x1000eb(0x1a6)]('pageLoaderMessage');if(!_0x3d8744){console[_0x1000eb(0xef)](_0x1000eb(0xf9));return;}try{_0x3c5c02[_0x1000eb(0x14e)]=_0x1000eb(0x137)+_0x2283a2[_0x1000eb(0xfb)]+_0x1000eb(0x150);const _0x5b1779=ref(db,_0x1000eb(0x10e)+_0x3d8744+_0x1000eb(0x158)),_0x467962=await get(_0x5b1779),_0x1916be=_0x467962[_0x1000eb(0x166)]()||{};let _0x50e3bd=![];for(const _0x1140b2 in _0x1916be){const _0x71d7bb=_0x1916be[_0x1140b2];for(const _0x5bd740 in _0x71d7bb){if(_0x71d7bb[_0x5bd740][_0x1000eb(0x19e)]===_0x2283a2[_0x1000eb(0xfb)]){_0x50e3bd=!![];break;}}if(_0x50e3bd)break;}if(!_0x50e3bd){_0x3c5c02[_0x1000eb(0x14e)]='Traitement\x20du\x20ticket\x20'+_0x2283a2[_0x1000eb(0xfb)]+'...';const _0x2ebbd2=ref(db,_0x1000eb(0x10e)+_0x3d8744+_0x1000eb(0x196)),_0x5f511c=ref(db,'users-data/'+_0x3d8744+'/TicketsTransit'),_0x596371=await get(_0x2ebbd2),_0x4e35a4=await get(_0x5f511c),_0x2700eb=_0x596371[_0x1000eb(0x166)]()||{},_0x6b9872=_0x4e35a4[_0x1000eb(0x166)]()||{};let _0xcca23b=null,_0x1ce993=null,_0x25e9b9=null;for(const _0x498386 in _0x2700eb){const _0x523653=(_0x2700eb[_0x498386][_0x1000eb(0x14c)]||[])[_0x1000eb(0x174)](_0x2283a2[_0x1000eb(0xfb)]);if(_0x523653>-0x1){_0xcca23b={'category':_0x498386,'user':_0x2700eb[_0x498386][_0x1000eb(0x14c)][_0x523653],'password':_0x2700eb[_0x498386][_0x1000eb(0x105)][_0x523653],'price':_0x2700eb[_0x498386][_0x1000eb(0x106)][_0x523653],'updatedData':{..._0x2700eb[_0x498386],'utilisateur':_0x2700eb[_0x498386][_0x1000eb(0x14c)]['filter']((_0x61eee6,_0x3766b0)=>_0x3766b0!==_0x523653),'motDePasse':_0x2700eb[_0x498386][_0x1000eb(0x105)][_0x1000eb(0x17e)]((_0x25ba4e,_0x47d5d4)=>_0x47d5d4!==_0x523653),'prix':_0x2700eb[_0x498386][_0x1000eb(0x106)]['filter']((_0x2fa0a1,_0x28bebd)=>_0x28bebd!==_0x523653)}},_0x1ce993=ref(db,'users-data/'+_0x3d8744+'/TicketsTotal/'+_0x498386),_0x25e9b9=_0x1000eb(0x11d);break;}}if(!_0xcca23b)for(const _0x573924 in _0x6b9872){if(_0x6b9872[_0x573924][_0x1000eb(0x19e)]===_0x2283a2[_0x1000eb(0xfb)]){_0xcca23b={'category':_0x6b9872[_0x573924][_0x1000eb(0x16d)],'user':_0x6b9872[_0x573924]['user'],'password':_0x6b9872[_0x573924]['password'],'price':_0x6b9872[_0x573924][_0x1000eb(0x164)]},_0x1ce993=ref(db,_0x1000eb(0x10e)+_0x3d8744+'/TicketsTransit/'+_0x573924),_0x25e9b9=_0x1000eb(0x104);break;}}_0xcca23b&&(_0x3c5c02[_0x1000eb(0x14e)]=_0x1000eb(0x110)+_0x2283a2[_0x1000eb(0xfb)]+_0x1000eb(0x150),await sellTicketAutomatically(_0xcca23b,_0x1ce993,_0x25e9b9,_0x3d8744));}}catch(_0x1367c5){console[_0x1000eb(0xef)]('Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20:',_0x1367c5),showNotification(_0x1000eb(0x195),_0x1000eb(0x191)+_0x2283a2[_0x1000eb(0xfb)]+'.');}}async function sellTicketAutomatically(_0x48625c,_0x533400,_0x93fee8,_0x1e03eb){const _0x1ee9e2=_0x52ecdb;if(!_0x1e03eb){console[_0x1ee9e2(0xef)]('Current\x20user\x20ID\x20is\x20not\x20provided\x20to\x20sellTicketAutomatically.');return;}try{const _0x3433c6='Vendeur\x20automatique',_0x4804ab=ref(db,_0x1ee9e2(0x10e)+_0x1e03eb+'/TicketsVendus');await push(_0x4804ab,{'category':_0x48625c[_0x1ee9e2(0x16d)],'user':_0x48625c[_0x1ee9e2(0x19e)],'password':_0x48625c[_0x1ee9e2(0x193)],'price':_0x48625c[_0x1ee9e2(0x164)],'soldAt':Date[_0x1ee9e2(0x140)](),'vendorId':_0x3433c6}),_0x93fee8===_0x1ee9e2(0x11d)?await set(_0x533400,_0x48625c[_0x1ee9e2(0x13c)]):await remove(_0x533400),console[_0x1ee9e2(0x149)](_0x1ee9e2(0x1a9)+_0x48625c[_0x1ee9e2(0x19e)]+'\x20vendu\x20automatiquement.');}catch(_0x1d35af){console[_0x1ee9e2(0xef)](_0x1ee9e2(0x151),_0x1d35af),showNotification(_0x1ee9e2(0x195),'Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket.');}}window[_0x52ecdb(0x14d)]=function(){const _0x1fa41e=_0x52ecdb;sessionStorage[_0x1fa41e(0x173)](),window[_0x1fa41e(0x17b)]['replace'](_0x1fa41e(0x16b));},window[_0x52ecdb(0x133)]=function(){const _0x1f019d=_0x52ecdb,_0xd5a45f=document[_0x1f019d(0x1a6)](_0x1f019d(0x1a4)),_0x2bd9db=document[_0x1f019d(0x1a6)](_0x1f019d(0x197)),_0x40daba=document[_0x1f019d(0x1a6)](_0x1f019d(0x1a0));_0xd5a45f[_0x1f019d(0x141)][_0x1f019d(0x12c)]==='none'||_0xd5a45f[_0x1f019d(0x141)]['display']===''?(_0xd5a45f[_0x1f019d(0x141)][_0x1f019d(0x12c)]='flex',_0x40daba[_0x1f019d(0x141)][_0x1f019d(0x12c)]=_0x1f019d(0x172),_0x2bd9db['textContent']=_0x1f019d(0x176)):(_0xd5a45f['style']['display']=_0x1f019d(0x126),_0x40daba[_0x1f019d(0x141)][_0x1f019d(0x12c)]='none',_0x2bd9db['textContent']=_0x1f019d(0xee));},window[_0x52ecdb(0xf4)]=function(_0x34e274){const _0x6ec9ae=_0x52ecdb,_0x371f6f=document[_0x6ec9ae(0x1a6)](_0x34e274),_0x199d22=document['createElement'](_0x6ec9ae(0x154));_0x199d22[_0x6ec9ae(0xf8)]=_0x6ec9ae(0x18e);let _0x1c43f5=_0x6ec9ae(0x123);if(_0x34e274==='tariffsList')_0x199d22['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20placeholder=\x22Nom\x20du\x20tarif\x22\x20data-type=\x22tariffName\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20placeholder=\x22Prix\x22\x20data-type=\x22tariffPrice\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>';else{let _0x216fcb='';if(_0x34e274===_0x6ec9ae(0x11a))_0x216fcb=_0x6ec9ae(0x15f);else _0x34e274===_0x6ec9ae(0xff)&&(_0x216fcb=_0x6ec9ae(0x127));_0x199d22[_0x6ec9ae(0x17c)]=_0x6ec9ae(0x10a)+_0x1c43f5+_0x6ec9ae(0x124)+_0x216fcb+_0x6ec9ae(0x183)+_0x34e274[_0x6ec9ae(0x1ab)](0x0,-0x4)+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>';}_0x371f6f[_0x6ec9ae(0x1a5)](_0x199d22);},window[_0x52ecdb(0x153)]=function(_0x40a6ef){_0x40a6ef['parentNode']['remove']();},document[_0x52ecdb(0x1a6)](_0x52ecdb(0x1a4))['addEventListener']('submit',async _0x385be=>{const _0x10103e=_0x52ecdb;_0x385be[_0x10103e(0x121)](),showLoader();const _0x5cce87=sessionStorage[_0x10103e(0x19c)](_0x10103e(0xfe));if(!_0x5cce87){console[_0x10103e(0xef)](_0x10103e(0xe8)),alert(_0x10103e(0x179)),hideLoader();return;}const _0x579e90={'networkName':document['getElementById']('networkName')[_0x10103e(0x171)],'contactNumber':document[_0x10103e(0x1a6)]('contactNumber')[_0x10103e(0x171)],'fedapayApiKey':document[_0x10103e(0x1a6)](_0x10103e(0x186))['value'],'tariffs':[],'connections':[],'products':[]};document['querySelectorAll'](_0x10103e(0x128))['forEach'](_0x5a706b=>{const _0xdd3d5c=_0x10103e,_0x197eb2=_0x5a706b['querySelector']('[data-type=\x22tariffName\x22]'),_0x314500=_0x5a706b[_0xdd3d5c(0x18f)]('[data-type=\x22tariffPrice\x22]');if(_0x197eb2&&_0x314500){const _0x589b3b=_0x197eb2[_0xdd3d5c(0x171)][_0xdd3d5c(0x14a)](),_0x3209b4=parseFloat(_0x314500[_0xdd3d5c(0x171)]);_0x589b3b&&!isNaN(_0x3209b4)&&_0x579e90['tariffs']['push']({'name':_0x589b3b,'price':_0x3209b4});}}),document[_0x10103e(0x198)](_0x10103e(0x145))[_0x10103e(0x15a)](_0x125f49=>{const _0x1dea49=_0x10103e,_0x12a089=_0x125f49['value'][_0x1dea49(0x14a)]();_0x12a089&&_0x579e90[_0x1dea49(0x122)][_0x1dea49(0x18a)](_0x12a089);}),document[_0x10103e(0x198)](_0x10103e(0xfc))['forEach'](_0x3bf760=>{const _0x388f9e=_0x10103e,_0x592642=_0x3bf760[_0x388f9e(0x171)]['trim']();_0x592642&&_0x579e90[_0x388f9e(0x10b)][_0x388f9e(0x18a)](_0x592642);});try{const _0x3c04d4=ref(db,_0x10103e(0x10e)+_0x5cce87+'/portalConfig');await set(_0x3c04d4,_0x579e90),alert(_0x10103e(0x182)),hideLoader(),document[_0x10103e(0x1a6)](_0x10103e(0x1a4))[_0x10103e(0x177)](),document[_0x10103e(0x1a6)](_0x10103e(0x1a4))['style'][_0x10103e(0x12c)]=_0x10103e(0x126),document['getElementById'](_0x10103e(0x197))[_0x10103e(0x14e)]=_0x10103e(0xee),document[_0x10103e(0x1a6)](_0x10103e(0x1a0))[_0x10103e(0x141)][_0x10103e(0x12c)]='none';}catch(_0x57684c){console[_0x10103e(0xef)](_0x10103e(0x125),_0x57684c),alert(_0x10103e(0x19b)),hideLoader();}});async function downloadLoginFile(){const _0x14063b=_0x52ecdb;showLoader();const _0x37e3ca=sessionStorage['getItem']('currentUserId');if(!_0x37e3ca){console[_0x14063b(0xef)](_0x14063b(0x15b)),hideLoader(),alert('Vous\x20devez\x20être\x20connecté\x20pour\x20télécharger\x20le\x20portail.');return;}try{const _0x5e379d=ref(db,_0x14063b(0x10e)+_0x37e3ca+_0x14063b(0x142)),_0x2823aa=await get(_0x5e379d);if(!_0x2823aa[_0x14063b(0x11c)]()){alert(_0x14063b(0x102)),hideLoader();return;}const _0x14076a=_0x2823aa[_0x14063b(0x166)](),_0x22d8ee=await fetch(_0x14063b(0x165));let _0x347345=await _0x22d8ee[_0x14063b(0x123)]();_0x347345=_0x347345[_0x14063b(0x189)](_0x14063b(0x160),_0x37e3ca);function _0x3df854(_0x1d0f2f){let _0x50c5e4='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20style=\x22width:\x20100%;\x20border-collapse:\x20collapse;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return _0x1d0f2f['forEach'](_0x196e96=>{const _0x340f70=_0x1438;_0x50c5e4+=_0x340f70(0x147)+_0x196e96[_0x340f70(0x119)]+_0x340f70(0x180)+_0x196e96[_0x340f70(0x164)]+_0x340f70(0x162)+_0x196e96[_0x340f70(0x119)]+_0x340f70(0x1a3)+_0x196e96['price']+_0x340f70(0x18b);}),_0x50c5e4+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x50c5e4;}function _0xc84738(_0x436e91){const _0x49248b=_0x14063b;let _0x24f15e=_0x49248b(0x10f);return _0x436e91['forEach'](_0x34df3c=>{const _0x79168b=_0x49248b;_0x24f15e+=_0x79168b(0x1aa)+_0x34df3c[_0x79168b(0x119)]+_0x79168b(0x143)+_0x34df3c[_0x79168b(0x164)]+_0x79168b(0x190);}),_0x24f15e+='</tbody></table>',_0x24f15e;}function _0x1cdb88(_0xcd44ad){const _0x276a1b=_0x14063b;let _0x4cfe6c=_0x276a1b(0x132);return _0xcd44ad[_0x276a1b(0x15a)](_0x315e5d=>{const _0x5ea740=_0x276a1b;_0x4cfe6c+=_0x5ea740(0x1a7)+_0x315e5d+'</li>';}),_0x4cfe6c+=_0x276a1b(0x135),_0x4cfe6c;}_0x347345=_0x347345[_0x14063b(0x189)](_0x14063b(0x17d),_0x3df854(_0x14076a[_0x14063b(0xf3)]||[])),_0x347345=_0x347345['replace'](_0x14063b(0x108),_0xc84738(_0x14076a[_0x14063b(0xf3)]||[])),_0x347345=_0x347345[_0x14063b(0x189)](_0x14063b(0x14b),_0x1cdb88(_0x14076a['connections']||[])),_0x347345=_0x347345['replace'](_0x14063b(0x18c),_0x1cdb88(_0x14076a['products']||[])),_0x347345=_0x347345[_0x14063b(0x189)](_0x14063b(0x1ae),_0x14076a[_0x14063b(0x1ac)]||_0x14063b(0x15e)),_0x347345=_0x347345[_0x14063b(0x189)](_0x14063b(0xf0),_0x14076a['networkName']||_0x14063b(0xf2)),_0x347345=_0x347345['replace'](_0x14063b(0x146),_0x14076a[_0x14063b(0x186)]||'');const _0x11f878=new Blob([_0x347345],{'type':_0x14063b(0xf7)}),_0x34d329=URL[_0x14063b(0x13e)](_0x11f878),_0x337641=document[_0x14063b(0xfd)]('a');_0x337641['href']=_0x34d329,_0x337641[_0x14063b(0x100)]=_0x14063b(0x165),document[_0x14063b(0x136)][_0x14063b(0x1a5)](_0x337641),_0x337641[_0x14063b(0x138)](),document['body'][_0x14063b(0x1a1)](_0x337641),URL['revokeObjectURL'](_0x34d329),hideLoader();}catch(_0xee4d5a){console[_0x14063b(0xef)](_0x14063b(0x134),_0xee4d5a),alert(_0x14063b(0x148)),hideLoader();}}window[_0x52ecdb(0x1a8)]=downloadLoginFile,document['addEventListener']('DOMContentLoaded',async()=>{const _0x489473=_0x52ecdb;showPageLoader(),await initializeDatabase(),await checkLoginStatus(),processConnectedTickets()[_0x489473(0x14f)](()=>checkSubscriptionStatus())[_0x489473(0x14f)](()=>{hidePageLoader();})[_0x489473(0x19d)](_0x4e670e=>{const _0xbe569b=_0x489473;console[_0xbe569b(0xef)](_0xbe569b(0xeb),_0x4e670e),hidePageLoader(),showNotification('Erreur','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27initialisation.');});}),window['redirectToSubscription']=redirectToSubscription,window[_0x52ecdb(0xf5)]=redirectToSubscription;function closePaymentModal(){const _0x18c26c=_0x52ecdb;paymentModal[_0x18c26c(0x141)]['display']=_0x18c26c(0x126),overlay[_0x18c26c(0x141)][_0x18c26c(0x12c)]=_0x18c26c(0x126);}window[_0x52ecdb(0x17a)]=()=>{};
    </script>

</body>
</html>