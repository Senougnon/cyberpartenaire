<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN WIFI ZONE</title>
    <link rel="stylesheet" href="styleA.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>

    <style>
        /* ... (Styles CSS - Pas de modifications majeures, juste des ajustements pour le formulaire) ... */
       /* Style pour le modal de paiement */
       .payment-modal {
           display: none;
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           z-index: 1000;
           max-width: 400px;
           width: 90%;
           text-align: center;
       }

       .payment-modal h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .payment-modal p {
           color: #666;
           margin-bottom: 30px;
       }

       .payment-modal button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
           margin: 0 10px;
       }

       .payment-modal button:hover {
           background-color: #e6a727;
       }

       .close-modal {
           position: absolute;
           top: 10px;
           right: 10px;
           cursor: pointer;
           font-size: 1.2rem;
           color: #333;
       }

       /* Style pour l'overlay */
       .overlay {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 999;
       }
       #subscriptionSection {
           text-align: center;
           margin-bottom: 30px;
       }

       #subscriptionSection h2 {
           font-size: 24px;
           color: #fdbb2d;
           margin-bottom: 20px;
       }

       #subscriptionStatus {
           font-size: 18px;
           color: #fff;
           margin-bottom: 20px;
       }

       .subscription-buttons {
           display: flex;
           justify-content: center;
           gap: 20px;
       }

       .subscription-buttons button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
       }

       .subscription-buttons button:hover {
           background-color: #e6a727;
       }

       /* Style pour le message d'abonnement requis */
       .subscription-required {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgba(0, 0, 0, 0.5);
           z-index: 1000;
           justify-content: center;
           align-items: center;
           color: white;
           text-align: center;
           padding: 20px;
       }

       .subscription-required-content {
           background-color: white;
           padding: 30px;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
           max-width: 400px;
           width: 90%;
       }

       .subscription-required-content h2 {
           color: #333;
           margin-bottom: 20px;
       }

       .subscription-required-content p {
           color: #666;
           margin-bottom: 30px;
       }

       .subscription-required-content button {
           background-color: #fdbb2d;
           color: #1a2a6c;
           border: none;
           padding: 12px 20px;
           border-radius: 25px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 600;
           font-size: 0.9rem;
           margin: 0 10px;
       }

       .subscription-required-content button:hover {
           background-color: #e6a727;
       }
        .loader-wrapper {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
        }

        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .page-loader-wrapper {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1002;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .page-loader {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        .loader-message {
            color: white;
            margin-top: 16px;
            font-size: 1rem;
            text-align: center;
            max-width: 80%;
        }

        .header {
            display: flex; /* Added to align items */
            justify-content: center; /* MODIFICATION: Center content horizontally */
            align-items: center; /* Added to vertically align items */
            flex-direction: column; /* MODIFICATION: Stack items vertically */
            text-align: center; /* MODIFICATION: Center text within header */
        }

        .header h1 {
            margin: 0; /* Reset margin for h1 inside header */
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .logout-button:hover {
            background-color: #c0392b;
        }
       /* Styles pour le formulaire de portail captif */
      #portalForm {
          display: none; /*Caché par défaut*/
          flex-direction: column;
          gap: 10px;
          max-width: 600px; /* Limite la largeur du formulaire */
          margin: 20px auto;
          padding: 20px;
          background-color: rgba(255, 255, 255, 0.1); /* Léger fond pour le formulaire */
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2); /* Ombre légère */
      }
      #portalForm label {
          color: #fdbb2d; /* Couleur pour les labels */
      }
      #portalForm input[type="text"],
      #portalForm input[type="number"],
      #portalForm textarea,
      #portalForm select {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          background-color: rgba(255,255,255,0.2); /* Fond transparent */
          color: white; /* Couleur du texte */
      }

      #portalForm button {
          padding: 10px 15px;
          background-color: #fdbb2d;
          color: #1a2a6c;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
      }

      #portalForm button:hover {
          background-color: #e6a727;
      }
      #portalForm .list-input-container {
          display: flex;
          flex-direction: column;
      }

      #portalForm .list-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

      #portalForm .list-item input {
          flex: 1; /* Permet à l'input de prendre l'espace disponible */
          margin-right: 5px; /* Marge entre l'input et le bouton */
      }
        #portalForm .list-item button {
           padding: 5px 10px;
           background-color: #e74c3c; /* Couleur différente pour le bouton de suppression */
           color: white;
           border: none;
           border-radius: 4px;
           cursor: pointer;
           font-size: 14px;
        }

        #portalForm .list-item button:hover {
           background-color: #c0392b;
        }

        #configSection {
          margin-bottom:           20px;
          text-align: center; /* Center-align the buttons */
      }
        #configSection .config-buttons {
          display: inline-block;
          margin: 0 10px;
        }

        #systemVersionDisplay {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #fdbb2d;
            font-size: 0.8rem;
        }

    </style>
</head>
<body>
    <div class="page-loader-wrapper" id="pageLoaderWrapper">
        <div class="page-loader"></div>
        <div class="loader-message" id="pageLoaderMessage">Initialisation...</div>
    </div>
    <div class="loader-wrapper" id="loaderWrapper">
        <div class="loader"></div>
    </div>
    <div class="container" id="contentContainer" style="display:none;">
        <header class="header">
            <h1 id="networkNameDisplay">ADMIN WIFI ZONE</h1>
            <div class="wave"></div>
        </header>


        <main>
            <div id="subscriptionSection">
                <h2>Statut de l'Abonnement</h2>
                <div id="subscriptionStatus"></div>
                <div class="subscription-button">
                    <button id="subscribeMonthly">S'abonner (Mensuel - 1000 FCFA)</button>
                    <button id="subscribeYearly">S'abonner (Annuel - 10 000 FCFA)</button>
                </div>
            </div>

            <div id="configSection">
              <button onclick="togglePortalForm()" id="togglePortalFormBtn">Configurer le portail captif</button>
              <button onclick="downloadLoginFile()" id="downloadLoginBtn" style="display: none;">Télécharger le portail captif</button>
             </div>


            <form id="portalForm" style="display: none;">
                <label for="networkName">Nom du réseau:</label>
                <input type="text" id="networkName" name="networkName" required>

                <label for="contactNumber">Numéro à contacter:</label>
                <input type="text" id="contactNumber" name="contactNumber" required>

                <label for="loginMode">Mode de connexion par défaut :</label>
                <select id="loginMode" name="loginMode">
                    <option value="separate">Nom d'utilisateur et Mot de passe</option>
                    <option value="same">Identifiant unique</option>
                    <option value="pay">Page de paiement</option>
                </select>

                <div class="list-input-container">
                    <label>Tarifs:</label>
                    <div id="tariffsList">
                        <div class="list-item">
                            <input type="text" placeholder="Nom du tarif" data-type="tariffName">
                            <input type="number" placeholder="Prix" data-type="tariffPrice">
                            <button type="button" onclick="addListItem('tariffsList')">Ajouter</button>
                         </div>
                      </div>
                 </div>

                 <div class="list-input-container">
                      <label>Adresses de connexion:</label>
                      <div id="connectionsList">
                         <div class="list-item">
                            <input type="text" placeholder="Adresse" data-type="connection">
                            <button type="button" onclick="addListItem('connectionsList')">Ajouter</button>
                           </div>
                      </div>
                  </div>

                  <div class="list-input-container">
                      <label>Services et produits:</label>
                      <div id="productsList">
                         <div class="list-item">
                             <input type="text" placeholder="Service/Produit" data-type="product">
                             <button type="button" onclick="addListItem('productsList')">Ajouter</button>
                         </div>
                     </div>
                 </div>

                 <button type="submit">Enregistrer la configuration</button>
             </form>

            <div class="menu">
                <a href="PageVenteTicket.html" class="menu-item" id="vente">
                    <i class="fas fa-ticket-alt"></i>
                    <h2>Vente de Tickets</h2>
                    <p>Procédez à la vente de nouveaux tickets Wifi.</p>
                </a>
                <a href="AdminVentePartenaires.html" class="menu-item" id="inventaire">
                    <i class="fas fa-clipboard-list"></i>
                    <h2>Inventaire des Tickets</h2>
                    <p>Consultez l'état des ventes de vos partenaires.</p>
                </a>
                <a href="Stock.html" class="menu-item" id="stock">
                    <i class="fas fa-boxes"></i>
                    <h2>Gestion des Stocks Partenaire</h2>
                    <p>Suivez les stocks de tickets de vos partenaires.</p>
                </a>
                <a href="a3.html" class="menu-item" id="administration">
                    <i class="fas fa-cog"></i>
                    <h2>Administration des Tickets</h2>
                    <p>Gérez les tickets, activez ou désactivez-les.</p>
                </a>
                <button onclick="logout()" class="logout-button">Déconnexion</button>

            </div>
            <div id="systemersionDisplay">VERSION SYSTEME: <span id="versionNumber"></span></div>

        </main>

    </div>


    <div id="paymentModal" class="payment-modal" style="display: none;">
        <span class="close-modal" onclick="closePaymentModal()">×</span>
        <h2>Paiement de l'Abonnement</h2>
        <p>Choisissez votre plan d'abonnement et procédez au paiement via FedaPay.</p>
        <!-- Les boutons de paiement seront ajoutés ici par le script -->
    </div>

    <div id="subscriptionRequiredModal" class="subscription-required" style="display: none;">
        <div class="subscription-required-content">
            <h2>Abonnement Requis</h2>
            <p>Un abonnement actif est nécessaire pour accéder à cette fonctionnalité.</p>
            <button onclick="redirectToSubscription()">S'abonner</button>
            <button onclick="hideSubscriptionRequiredModal()">Fermer</button>
        </div>
    </div>

    <div class="overlay" id="overlay" style="display: none;" onclick="closePaymentModal()"></div>

    <script type="module">
 const _0x325ac7=_0x3823;(function(_0x4d23f4,_0x3db4be){const _0x16f4a0=_0x3823,_0x32fb01=_0x4d23f4();while(!![]){try{const _0x590b71=-parseInt(_0x16f4a0(0x125))/0x1+parseInt(_0x16f4a0(0x150))/0x2+parseInt(_0x16f4a0(0x17e))/0x3*(-parseInt(_0x16f4a0(0x187))/0x4)+-parseInt(_0x16f4a0(0xf9))/0x5*(-parseInt(_0x16f4a0(0x100))/0x6)+parseInt(_0x16f4a0(0x1b1))/0x7*(parseInt(_0x16f4a0(0x181))/0x8)+-parseInt(_0x16f4a0(0xef))/0x9*(parseInt(_0x16f4a0(0xfe))/0xa)+-parseInt(_0x16f4a0(0x1a4))/0xb;if(_0x590b71===_0x3db4be)break;else _0x32fb01['push'](_0x32fb01['shift']());}catch(_0x27e92d){_0x32fb01['push'](_0x32fb01['shift']());}}}(_0x109a,0xec1ac));import{getActiveDatabase}from'./firebase-config-manager.js';import{ref,get,set,push,remove,update}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';let db,adminRef,fedapayApiKey,systemVersion;async function initializeDatabase(){const _0x2e521f=_0x3823;db=await getActiveDatabase(),console['log'](_0x2e521f(0x1ba));}async function checkLoginStatus(){const _0x1bfb07=_0x3823;if(sessionStorage['getItem'](_0x1bfb07(0x15c))!=='true')redirectToLogin();else{const _0x378d10=sessionStorage['getItem']('currentUserId');if(!_0x378d10){console[_0x1bfb07(0x157)](_0x1bfb07(0x114)),redirectToLogin();return;}document[_0x1bfb07(0x126)]('contentContainer')[_0x1bfb07(0xe6)][_0x1bfb07(0x130)]=_0x1bfb07(0x133),adminRef=ref(db,_0x1bfb07(0xdd)+_0x378d10+'/admin/subscription');}}function redirectToLogin(){const _0xc4fc9c=_0x3823;window[_0xc4fc9c(0xfb)]['href']=_0xc4fc9c(0x16c);}window[_0x325ac7(0x190)]=function(){const _0x890657=_0x325ac7;sessionStorage[_0x890657(0x1a7)](),window[_0x890657(0xfb)][_0x890657(0x102)](_0x890657(0x16c));};const venteMenuItem=document[_0x325ac7(0x126)](_0x325ac7(0xd5)),inventaireMenuItem=document['getElementById'](_0x325ac7(0x131)),stockMenuItem=document['getElementById']('stock'),administrationMenuItem=document[_0x325ac7(0x126)](_0x325ac7(0x1ab)),subscriptionStatus=document[_0x325ac7(0x126)]('subscriptionStatus'),subscribeMonthlyButton=document[_0x325ac7(0x126)](_0x325ac7(0x123)),subscribeYearlyButton=document[_0x325ac7(0x126)](_0x325ac7(0xe2)),paymentModal=document[_0x325ac7(0x126)](_0x325ac7(0x12d)),overlay=document[_0x325ac7(0x126)]('overlay'),subscriptionRequiredModal=document['getElementById'](_0x325ac7(0x145));function showLoader(){const _0x35f40a=_0x325ac7;document['getElementById'](_0x35f40a(0x141))[_0x35f40a(0xe6)][_0x35f40a(0x130)]=_0x35f40a(0x133);}function hideLoader(){const _0x4eccf5=_0x325ac7;document[_0x4eccf5(0x126)]('loaderWrapper')[_0x4eccf5(0xe6)][_0x4eccf5(0x130)]=_0x4eccf5(0x175);}function showPageLoader(){const _0x584ed7=_0x325ac7;document[_0x584ed7(0x126)](_0x584ed7(0x13a))[_0x584ed7(0xe6)][_0x584ed7(0x130)]='flex';}function hidePageLoader(){const _0x28feb8=_0x325ac7;document[_0x28feb8(0x126)](_0x28feb8(0x13a))['style'][_0x28feb8(0x130)]=_0x28feb8(0x175);}function showSubscriptionRequiredModal(){const _0x39a7db=_0x325ac7;subscriptionRequiredModal[_0x39a7db(0xe6)][_0x39a7db(0x130)]=_0x39a7db(0x108);}function hideSubscriptionRequiredModal(){const _0x17fb75=_0x325ac7;subscriptionRequiredModal[_0x17fb75(0xe6)][_0x17fb75(0x130)]='none';}function redirectToSubscription(){hideSubscriptionRequiredModal();}function checkSubscriptionStatus(){const _0x3c2b08=_0x325ac7,_0x310792=sessionStorage[_0x3c2b08(0x10a)](_0x3c2b08(0x15a));if(!_0x310792){console[_0x3c2b08(0x157)](_0x3c2b08(0xd6));return;}const _0x921ea5=ref(db,_0x3c2b08(0xdd)+_0x310792+_0x3c2b08(0x165));get(_0x921ea5)[_0x3c2b08(0x18f)](_0x1cf02f=>{const _0x5803d5=_0x3c2b08,_0x24259c=_0x1cf02f['val'](),_0x2989e4=new Date();if(_0x24259c&&_0x24259c[_0x5803d5(0x16b)]==='active'){const _0x1ee50a=new Date(_0x24259c[_0x5803d5(0xeb)]);_0x1ee50a<_0x2989e4?(subscriptionStatus[_0x5803d5(0xdf)]=_0x5803d5(0x156),subscriptionStatus[_0x5803d5(0xe6)][_0x5803d5(0x1bb)]=_0x5803d5(0x148),subscribeMonthlyButton[_0x5803d5(0xe6)]['display']='inline-block',subscribeYearlyButton[_0x5803d5(0xe6)][_0x5803d5(0x130)]='inline-block',set(_0x921ea5,{..._0x24259c,'status':_0x5803d5(0x14f)})):(subscriptionStatus['textContent']=_0x5803d5(0x14b)+_0x1ee50a['toLocaleDateString'](),subscriptionStatus[_0x5803d5(0xe6)][_0x5803d5(0x1bb)]=_0x5803d5(0x179),subscribeMonthlyButton[_0x5803d5(0xe6)][_0x5803d5(0x130)]=_0x5803d5(0x175),subscribeYearlyButton[_0x5803d5(0xe6)][_0x5803d5(0x130)]=_0x5803d5(0x175));}else subscriptionStatus['textContent']='Statut\x20de\x20l\x27abonnement:\x20Inactif',subscriptionStatus[_0x5803d5(0xe6)][_0x5803d5(0x1bb)]='red',subscribeMonthlyButton[_0x5803d5(0xe6)][_0x5803d5(0x130)]=_0x5803d5(0x1ae),subscribeYearlyButton[_0x5803d5(0xe6)][_0x5803d5(0x130)]=_0x5803d5(0x1ae);})['catch'](_0x50fc28=>{const _0x3adc43=_0x3c2b08;console[_0x3adc43(0x157)](_0x3adc43(0x106),_0x50fc28);});}function checkUserAccess(){get(adminRef)['then'](_0x598373=>{const _0x2c20d6=_0x3823,_0x3eb814=_0x598373[_0x2c20d6(0xd7)]();(!_0x3eb814||_0x3eb814[_0x2c20d6(0x16b)]!==_0x2c20d6(0x1a3))&&showSubscriptionRequiredModal();});}venteMenuItem['addEventListener']('click',_0x3119be=>{const _0x1fe808=_0x325ac7;_0x3119be[_0x1fe808(0x164)](),checkUserAccess();const _0x2b1ef1=sessionStorage[_0x1fe808(0x10a)](_0x1fe808(0x15a));_0x2b1ef1?window[_0x1fe808(0xfb)][_0x1fe808(0xd8)]=_0x1fe808(0x178)+_0x2b1ef1:(console[_0x1fe808(0x157)](_0x1fe808(0x1bd)),alert(_0x1fe808(0x14c)));}),inventaireMenuItem[_0x325ac7(0x116)]('click',_0x2c0218=>{const _0x443314=_0x325ac7;_0x2c0218[_0x443314(0x164)](),checkUserAccess(),window[_0x443314(0xfb)]['href']=_0x443314(0xf6);}),stockMenuItem[_0x325ac7(0x116)](_0x325ac7(0x135),_0x563401=>{const _0xec9f88=_0x325ac7;_0x563401[_0xec9f88(0x164)](),checkUserAccess(),window[_0xec9f88(0xfb)][_0xec9f88(0xd8)]='Stock.html';}),administrationMenuItem[_0x325ac7(0x116)]('click',_0x44d644=>{const _0x2055e8=_0x325ac7;_0x44d644[_0x2055e8(0x164)](),checkUserAccess(),window[_0x2055e8(0xfb)][_0x2055e8(0xd8)]=_0x2055e8(0x112);}),subscribeMonthlyButton[_0x325ac7(0x116)]('click',()=>{const _0xdc7801=_0x325ac7;initiatePayment(_0xdc7801(0x194));}),subscribeYearlyButton['addEventListener'](_0x325ac7(0x135),()=>{const _0x8af419=_0x325ac7;initiatePayment(_0x8af419(0x163));});async function initiatePayment(_0x10a9bd){const _0x3bae6=_0x325ac7,_0x1e7803=_0x10a9bd===_0x3bae6(0x194)?0x3e8:0x2710,_0x267e49=_0x10a9bd===_0x3bae6(0x194)?_0x3bae6(0x121):'Abonnement\x20annuel',_0x3095bb=sessionStorage[_0x3bae6(0x10a)](_0x3bae6(0x15a));if(!_0x3095bb){console[_0x3bae6(0x157)](_0x3bae6(0x16d)),alert(_0x3bae6(0x12f));return;}FedaPay[_0x3bae6(0x177)]({'public_key':fedapayApiKey,'transaction':{'amount':_0x1e7803,'description':_0x267e49},'customer':{'email':_0x3bae6(0x191)},'onComplete':async function(_0x10e490){const _0x3f60dc=_0x3bae6;if(_0x10e490['reason']===FedaPay[_0x3f60dc(0x192)])alert(_0x3f60dc(0xee));else _0x10e490[_0x3f60dc(0x17d)]===FedaPay[_0x3f60dc(0x142)]&&handleSuccessfulPayment(_0x10a9bd,_0x10e490,_0x3095bb);}})[_0x3bae6(0x155)]();}async function handleSuccessfulPayment(_0x59724f,_0x361a9c,_0x516cd1){const _0x22303a=_0x325ac7,_0xb1ba7d=new Date(),_0x36a1fe=new Date(_0xb1ba7d);_0x59724f===_0x22303a(0x194)?_0x36a1fe[_0x22303a(0x14d)](_0x36a1fe[_0x22303a(0xde)]()+0x1):_0x36a1fe[_0x22303a(0x10e)](_0x36a1fe[_0x22303a(0xea)]()+0x1);const _0x31701a={'status':'active','startDate':_0xb1ba7d[_0x22303a(0x1a9)](),'endDate':_0x36a1fe[_0x22303a(0x1a9)](),'transactionId':_0x361a9c[_0x22303a(0x10b)]['id'],'plan':_0x59724f};try{const _0x5ed71d=ref(db,_0x22303a(0xdd)+_0x516cd1+_0x22303a(0x165));await set(_0x5ed71d,_0x31701a),checkSubscriptionStatus(),alert(_0x22303a(0x1b7)+(_0x59724f===_0x22303a(0x194)?'mensuel':_0x22303a(0x122))+_0x22303a(0xdb));}catch(_0x2e07fe){console[_0x22303a(0x157)](_0x22303a(0x1b3),_0x2e07fe),alert(_0x22303a(0xed));}}async function cancelSubscription(){const _0x2e31be=_0x325ac7,_0x3d1d22=sessionStorage['getItem']('currentUserId');if(!_0x3d1d22){console[_0x2e31be(0x157)](_0x2e31be(0x1b0)),alert('Vous\x20devez\x20être\x20connecté\x20pour\x20annuler\x20un\x20abonnement.');return;}try{const _0x4ea006=ref(db,_0x2e31be(0xdd)+_0x3d1d22+_0x2e31be(0x165));await set(_0x4ea006,{...(await get(_0x4ea006))[_0x2e31be(0xd7)](),'status':'cancelled'}),checkSubscriptionStatus(),alert(_0x2e31be(0x10d));}catch(_0x2f0a65){console[_0x2e31be(0x157)]('Erreur\x20lors\x20de\x20l\x27annulation\x20de\x20l\x27abonnement:',_0x2f0a65),alert(_0x2e31be(0x105));}}async function processConnectedTickets(){const _0xa7f501=_0x325ac7,_0x6df391=document[_0xa7f501(0x126)](_0xa7f501(0x13f)),_0x41d95d=sessionStorage[_0xa7f501(0x10a)]('currentUserId');if(!_0x41d95d){console[_0xa7f501(0x157)](_0xa7f501(0x114));return;}const _0xbcf278=ref(db,_0xa7f501(0xdd)+_0x41d95d+_0xa7f501(0xe8));try{_0x6df391[_0xa7f501(0xdf)]=_0xa7f501(0x183);const _0xc47edb=await get(_0xbcf278);let _0x5dd1f0=_0xc47edb[_0xa7f501(0xd7)]()||{};const _0x24baad={};for(const _0x59cef4 in _0x5dd1f0){const _0x390ee2=_0x5dd1f0[_0x59cef4][_0xa7f501(0x1bf)];!_0x24baad[_0x390ee2]&&(_0x24baad[_0x390ee2]=_0x5dd1f0[_0x59cef4]);}_0x6df391[_0xa7f501(0xdf)]=_0xa7f501(0x136);for(const _0x11fc3e in _0x24baad){await processTicket(_0x24baad[_0x11fc3e],_0x41d95d);}_0x6df391['textContent']=_0xa7f501(0xe5),await remove(_0xbcf278);}catch(_0x2b8df8){console['error'](_0xa7f501(0xe7),_0x2b8df8),showNotification(_0xa7f501(0x11e),_0xa7f501(0x184));}}function _0x3823(_0x22ad15,_0x4253c2){const _0x109aa4=_0x109a();return _0x3823=function(_0x38237e,_0x5752c2){_0x38237e=_0x38237e-0xd5;let _0x38bae4=_0x109aa4[_0x38237e];return _0x38bae4;},_0x3823(_0x22ad15,_0x4253c2);}async function processTicket(_0x4b3ce0,_0x4ab661){const _0x3e0d56=_0x325ac7,_0xbb0ff2=document[_0x3e0d56(0x126)](_0x3e0d56(0x13f));if(!_0x4ab661){console[_0x3e0d56(0x157)](_0x3e0d56(0x174));return;}try{_0xbb0ff2['textContent']='Vérification\x20du\x20ticket\x20pour\x20'+_0x4b3ce0[_0x3e0d56(0x1bf)]+'...';const _0x510927=ref(db,_0x3e0d56(0xdd)+_0x4ab661+_0x3e0d56(0x109)),_0x15114a=await get(_0x510927),_0x177f89=_0x15114a[_0x3e0d56(0xd7)]()||{};let _0x5e3d54=![];for(const _0x7f946a in _0x177f89){const _0x2f94ef=_0x177f89[_0x7f946a];for(const _0x41c2c5 in _0x2f94ef){if(_0x2f94ef[_0x41c2c5][_0x3e0d56(0x195)]===_0x4b3ce0[_0x3e0d56(0x1bf)]){_0x5e3d54=!![];break;}}if(_0x5e3d54)break;}if(!_0x5e3d54){_0xbb0ff2[_0x3e0d56(0xdf)]=_0x3e0d56(0x113)+_0x4b3ce0[_0x3e0d56(0x1bf)]+_0x3e0d56(0x15d);const _0x751d6f=ref(db,_0x3e0d56(0xdd)+_0x4ab661+'/TicketsTotal'),_0x2439c0=ref(db,_0x3e0d56(0xdd)+_0x4ab661+'/TicketsTransit'),_0x65c341=await get(_0x751d6f),_0xb75732=await get(_0x2439c0),_0x32b6b8=_0x65c341[_0x3e0d56(0xd7)]()||{},_0x4f1439=_0xb75732['val']()||{};let _0x7c7847=null,_0x324d33=null,_0x512e11=null;for(const _0x7f9b44 in _0x32b6b8){const _0x1b6878=(_0x32b6b8[_0x7f9b44]['utilisateur']||[])[_0x3e0d56(0x1be)](_0x4b3ce0['username']);if(_0x1b6878>-0x1){_0x7c7847={'category':_0x7f9b44,'user':_0x32b6b8[_0x7f9b44]['utilisateur'][_0x1b6878],'password':_0x32b6b8[_0x7f9b44][_0x3e0d56(0x168)][_0x1b6878],'price':_0x32b6b8[_0x7f9b44]['prix'][_0x1b6878],'updatedData':{..._0x32b6b8[_0x7f9b44],'utilisateur':_0x32b6b8[_0x7f9b44][_0x3e0d56(0x167)][_0x3e0d56(0x193)]((_0x3a6e44,_0x2b31c5)=>_0x2b31c5!==_0x1b6878),'motDePasse':_0x32b6b8[_0x7f9b44][_0x3e0d56(0x168)]['filter']((_0x42d57,_0x337e1c)=>_0x337e1c!==_0x1b6878),'prix':_0x32b6b8[_0x7f9b44][_0x3e0d56(0x117)][_0x3e0d56(0x193)]((_0x5d9f5c,_0x3d314c)=>_0x3d314c!==_0x1b6878)}},_0x324d33=ref(db,_0x3e0d56(0xdd)+_0x4ab661+_0x3e0d56(0x19e)+_0x7f9b44),_0x512e11=_0x3e0d56(0x14e);break;}}if(!_0x7c7847)for(const _0x1fb91f in _0x4f1439){if(_0x4f1439[_0x1fb91f][_0x3e0d56(0x195)]===_0x4b3ce0[_0x3e0d56(0x1bf)]){_0x7c7847={'category':_0x4f1439[_0x1fb91f][_0x3e0d56(0x188)],'user':_0x4f1439[_0x1fb91f][_0x3e0d56(0x195)],'password':_0x4f1439[_0x1fb91f][_0x3e0d56(0x115)],'price':_0x4f1439[_0x1fb91f][_0x3e0d56(0xe0)]},_0x324d33=ref(db,'users-data/'+_0x4ab661+_0x3e0d56(0x120)+_0x1fb91f),_0x512e11=_0x3e0d56(0x185);break;}}_0x7c7847&&(_0xbb0ff2[_0x3e0d56(0xdf)]=_0x3e0d56(0xe9)+_0x4b3ce0[_0x3e0d56(0x1bf)]+'...',await sellTicketAutomatically(_0x7c7847,_0x324d33,_0x512e11,_0x4ab661));}}catch(_0x1df41a){console['error']('Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20:',_0x1df41a),showNotification(_0x3e0d56(0x11e),'Erreur\x20lors\x20du\x20traitement\x20du\x20ticket\x20'+_0x4b3ce0['username']+'.');}}async function sellTicketAutomatically(_0x2e5747,_0x402638,_0x3fb48a,_0x211c46){const _0xf2278c=_0x325ac7;if(!_0x211c46){console['error'](_0xf2278c(0x186));return;}try{const _0x550b32=_0xf2278c(0x129),_0x218a84=ref(db,_0xf2278c(0xdd)+_0x211c46+_0xf2278c(0x18a)+_0x550b32);await push(_0x218a84,{'category':_0x2e5747[_0xf2278c(0x188)],'user':_0x2e5747[_0xf2278c(0x195)],'password':_0x2e5747['password'],'price':_0x2e5747[_0xf2278c(0xe0)],'soldAt':Date[_0xf2278c(0xf5)](),'vendorId':_0x550b32}),_0x3fb48a===_0xf2278c(0x14e)?await set(_0x402638,_0x2e5747[_0xf2278c(0xfa)]):await remove(_0x402638),console[_0xf2278c(0x144)](_0xf2278c(0x124)+_0x2e5747['user']+_0xf2278c(0x1a6));}catch(_0x1408e3){console[_0xf2278c(0x157)](_0xf2278c(0x171),_0x1408e3),showNotification(_0xf2278c(0x11e),_0xf2278c(0x13d));}}window[_0x325ac7(0x190)]=function(){const _0x5b0562=_0x325ac7;sessionStorage[_0x5b0562(0x1a7)](),window['location'][_0x5b0562(0x102)](_0x5b0562(0x16c));},window[_0x325ac7(0x17a)]=function(){const _0x432898=_0x325ac7,_0x1f129a=document[_0x432898(0x126)](_0x432898(0x1a0)),_0x5e15d9=document[_0x432898(0x126)](_0x432898(0x17f)),_0xb461b8=document['getElementById'](_0x432898(0x111));_0x1f129a[_0x432898(0xe6)]['display']===_0x432898(0x175)||_0x1f129a[_0x432898(0xe6)][_0x432898(0x130)]===''?(_0x1f129a[_0x432898(0xe6)][_0x432898(0x130)]=_0x432898(0x108),_0xb461b8['style']['display']=_0x432898(0x1ae),_0x5e15d9[_0x432898(0xdf)]='Masquer\x20le\x20formulaire'):(_0x1f129a[_0x432898(0xe6)][_0x432898(0x130)]=_0x432898(0x175),_0xb461b8['style'][_0x432898(0x130)]=_0x432898(0x175),_0x5e15d9[_0x432898(0xdf)]=_0x432898(0xff));},window[_0x325ac7(0x16a)]=function(_0x273bbf){const _0x3c1fd6=_0x325ac7,_0x365ae9=document[_0x3c1fd6(0x126)](_0x273bbf),_0x2e5f9c=document[_0x3c1fd6(0x12c)](_0x3c1fd6(0x161));_0x2e5f9c[_0x3c1fd6(0x182)]=_0x3c1fd6(0xe4);let _0x2c04d3='text';if(_0x273bbf===_0x3c1fd6(0x138))_0x2e5f9c[_0x3c1fd6(0x19f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20placeholder=\x22Nom\x20du\x20tarif\x22\x20data-type=\x22tariffName\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20placeholder=\x22Prix\x22\x20data-type=\x22tariffPrice\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>';else{let _0x3db241='';if(_0x273bbf===_0x3c1fd6(0x173))_0x3db241=_0x3c1fd6(0x1a5);else _0x273bbf===_0x3c1fd6(0x119)&&(_0x3db241='Service/Produit');_0x2e5f9c[_0x3c1fd6(0x19f)]=_0x3c1fd6(0x18e)+_0x2c04d3+_0x3c1fd6(0x10c)+_0x3db241+'\x22\x20data-type=\x22'+_0x273bbf[_0x3c1fd6(0xdc)](0x0,-0x4)+_0x3c1fd6(0x169);}_0x365ae9[_0x3c1fd6(0x143)](_0x2e5f9c);},window[_0x325ac7(0x12b)]=function(_0x34f383){const _0x490c06=_0x325ac7;_0x34f383['parentNode'][_0x490c06(0x12a)]();},document[_0x325ac7(0x126)](_0x325ac7(0x1a0))['addEventListener'](_0x325ac7(0x1bc),async _0x4787b1=>{const _0x10d2bc=_0x325ac7;_0x4787b1[_0x10d2bc(0x164)](),showLoader();const _0x2d7995=sessionStorage[_0x10d2bc(0x10a)](_0x10d2bc(0x15a));if(!_0x2d7995){console['error'](_0x10d2bc(0x118)),alert(_0x10d2bc(0x1b6)),hideLoader();return;}const _0x252c7a={'networkName':document[_0x10d2bc(0x126)](_0x10d2bc(0x10f))[_0x10d2bc(0x17c)],'contactNumber':document[_0x10d2bc(0x126)](_0x10d2bc(0x1a2))['value'],'loginMode':document[_0x10d2bc(0x126)]('loginMode')[_0x10d2bc(0x17c)],'tariffs':[],'connections':[],'products':[]};document[_0x10d2bc(0x18b)]('#tariffsList\x20.list-item')['forEach'](_0x1e8a08=>{const _0xd94403=_0x10d2bc,_0x36b920=_0x1e8a08[_0xd94403(0x17b)](_0xd94403(0xf8)),_0x3b8d9f=_0x1e8a08[_0xd94403(0x17b)](_0xd94403(0x1b5));if(_0x36b920&&_0x3b8d9f){const _0x1fa81b=_0x36b920[_0xd94403(0x17c)]['trim'](),_0x212c8f=parseFloat(_0x3b8d9f['value']);_0x1fa81b&&!isNaN(_0x212c8f)&&_0x252c7a[_0xd94403(0x11c)]['push']({'name':_0x1fa81b,'price':_0x212c8f});}}),document['querySelectorAll'](_0x10d2bc(0x199))[_0x10d2bc(0x13c)](_0x39da03=>{const _0x27dce1=_0x10d2bc,_0x50afa2=_0x39da03[_0x27dce1(0x17c)][_0x27dce1(0x197)]();_0x50afa2&&_0x252c7a['connections'][_0x27dce1(0x14a)](_0x50afa2);}),document['querySelectorAll']('#productsList\x20.list-item\x20input')[_0x10d2bc(0x13c)](_0x149dca=>{const _0x4b5b7f=_0x10d2bc,_0x435194=_0x149dca['value'][_0x4b5b7f(0x197)]();_0x435194&&_0x252c7a[_0x4b5b7f(0x15b)][_0x4b5b7f(0x14a)](_0x435194);});try{const _0x37887a=ref(db,_0x10d2bc(0xdd)+_0x2d7995+_0x10d2bc(0xf3));await set(_0x37887a,_0x252c7a),alert(_0x10d2bc(0x134)),hideLoader(),document[_0x10d2bc(0x126)]('portalForm')['reset'](),document[_0x10d2bc(0x126)](_0x10d2bc(0x1a0))[_0x10d2bc(0xe6)][_0x10d2bc(0x130)]=_0x10d2bc(0x175),document[_0x10d2bc(0x126)](_0x10d2bc(0x17f))[_0x10d2bc(0xdf)]='Configurer\x20le\x20portail\x20captif',document[_0x10d2bc(0x126)]('downloadLoginBtn')['style'][_0x10d2bc(0x130)]=_0x10d2bc(0x175),document[_0x10d2bc(0x126)]('networkNameDisplay')[_0x10d2bc(0xdf)]=_0x252c7a['networkName'];}catch(_0x34709f){console[_0x10d2bc(0x157)](_0x10d2bc(0x13b),_0x34709f),alert(_0x10d2bc(0x176)),hideLoader();}});async function downloadLoginFile(){const _0x30267a=_0x325ac7;showLoader();const _0x28371f=sessionStorage['getItem'](_0x30267a(0x15a));if(!_0x28371f){console[_0x30267a(0x157)](_0x30267a(0x152)),hideLoader(),alert(_0x30267a(0xda));return;}try{const _0x23da18=ref(db,_0x30267a(0xdd)+_0x28371f+_0x30267a(0xf3)),_0x113997=await get(_0x23da18);if(!_0x113997[_0x30267a(0x1c0)]()){alert(_0x30267a(0x180)),hideLoader();return;}const _0xa08b64=_0x113997[_0x30267a(0xd7)]();let _0x28effb='',_0x2dc468='';if(_0xa08b64[_0x30267a(0x16f)]===_0x30267a(0xf7)){const _0x1e678c=await fetch('login.html');_0x28effb=await _0x1e678c['text'](),_0x2dc468=_0x30267a(0x139);}else{if(_0xa08b64[_0x30267a(0x16f)]===_0x30267a(0xf4)){const _0x240194=await fetch('log.html');_0x28effb=await _0x240194[_0x30267a(0x11d)](),_0x2dc468='log.html';}else{if(_0xa08b64[_0x30267a(0x16f)]===_0x30267a(0x1a8)){const _0x1cc2d1=await fetch('pay.html');_0x28effb=await _0x1cc2d1[_0x30267a(0x11d)](),_0x2dc468=_0x30267a(0x153);}else{alert(_0x30267a(0x103)),hideLoader();return;}}}_0x28effb=_0x28effb[_0x30267a(0x102)](_0x30267a(0x1b2),_0x28371f);function _0x3a5d40(_0x160fbc){const _0x2074c7=_0x30267a;let _0x4beba4=_0x2074c7(0x162);return _0x160fbc['forEach'](_0x3c240a=>{const _0x11c063=_0x2074c7;_0x4beba4+=_0x11c063(0x172)+_0x3c240a[_0x11c063(0x11a)]+_0x11c063(0x1af)+_0x3c240a[_0x11c063(0xe0)]+_0x11c063(0x1b8)+_0x3c240a[_0x11c063(0x11a)]+_0x11c063(0x19c)+_0x3c240a[_0x11c063(0xe0)]+_0x11c063(0x19a);}),_0x4beba4+=_0x2074c7(0x159),_0x4beba4;}function _0x5a792b(_0x4dfda1){const _0x3f2b25=_0x30267a;let _0x502916=_0x3f2b25(0x154);return _0x4dfda1['forEach'](_0x5696f0=>{const _0x1c6a9d=_0x3f2b25;_0x502916+=_0x1c6a9d(0x160)+_0x5696f0[_0x1c6a9d(0x11a)]+_0x1c6a9d(0x11f)+_0x5696f0[_0x1c6a9d(0xe0)]+_0x1c6a9d(0x15e);}),_0x502916+='</tbody></table>',_0x502916;}function _0x2581a1(_0x419b64){const _0x6a49c7=_0x30267a;let _0x3dec2f=_0x6a49c7(0x18d);return _0x419b64[_0x6a49c7(0x13c)](_0xe9e04e=>{const _0x221070=_0x6a49c7;_0x3dec2f+=_0x221070(0x196)+_0xe9e04e+_0x221070(0x149);}),_0x3dec2f+=_0x6a49c7(0x110),_0x3dec2f;}_0x28effb=_0x28effb[_0x30267a(0x102)](_0x30267a(0xfc),_0x3a5d40(_0xa08b64[_0x30267a(0x11c)]||[])),_0x28effb=_0x28effb[_0x30267a(0x102)](_0x30267a(0x158),_0x5a792b(_0xa08b64['tariffs']||[])),_0x28effb=_0x28effb['replace'](_0x30267a(0x1b9),_0x2581a1(_0xa08b64[_0x30267a(0xec)]||[])),_0x28effb=_0x28effb[_0x30267a(0x102)](_0x30267a(0x18c),_0x2581a1(_0xa08b64['products']||[])),_0x28effb=_0x28effb['replace'](_0x30267a(0x189),_0xa08b64[_0x30267a(0x1a2)]||_0x30267a(0xf0)),_0x28effb=_0x28effb[_0x30267a(0x102)]('<!--\x20NETWORK_NAME\x20-->',_0xa08b64[_0x30267a(0x10f)]||_0x30267a(0xe1)),_0x28effb=_0x28effb['replace']('<!--\x20FEDAPAY_API_KEY\x20-->',fedapayApiKey||'');const _0x5c35d3=new Blob([_0x28effb],{'type':_0x30267a(0x166)}),_0x27aeca=URL[_0x30267a(0x1b4)](_0x5c35d3),_0x3f3ede=document[_0x30267a(0x12c)]('a');_0x3f3ede[_0x30267a(0xd8)]=_0x27aeca,_0x3f3ede['download']=_0x2dc468,document[_0x30267a(0x11b)][_0x30267a(0x143)](_0x3f3ede),_0x3f3ede[_0x30267a(0x135)](),document[_0x30267a(0x11b)][_0x30267a(0x15f)](_0x3f3ede),URL[_0x30267a(0x137)](_0x27aeca);const _0x3e15eb=document['createElement']('a');_0x3e15eb[_0x30267a(0xd8)]='firebase-config-manager.js',_0x3e15eb['download']=_0x30267a(0xd9),document[_0x30267a(0x11b)][_0x30267a(0x143)](_0x3e15eb),_0x3e15eb[_0x30267a(0x135)](),document[_0x30267a(0x11b)][_0x30267a(0x15f)](_0x3e15eb),hideLoader();}catch(_0x5c7160){console[_0x30267a(0x157)](_0x30267a(0x198),_0x5c7160),alert('Erreur\x20lors\x20du\x20téléchargement\x20du\x20portail\x20captif.'),hideLoader();}}function _0x109a(){const _0x22e030=['now','AdminVentePartenaires.html','separate','[data-type=\x22tariffName\x22]','35dGjEdV','updatedData','location','<!--\x20TARIFFS_TABLE\x20-->','product','2210RkMzDh','Configurer\x20le\x20portail\x20captif','1087836IOILiQ','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','replace','Mode\x20de\x20connexion\x20invalide.','System\x20Version\x20not\x20found\x20globally,\x20using\x20default.','Erreur\x20lors\x20de\x20l\x27annulation\x20de\x20l\x27abonnement.','Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20d\x27abonnement:','versionNumber','flex','/VendorsHistory','getItem','transaction','\x22\x20placeholder=\x22','Abonnement\x20annulé.','setFullYear','networkName','</ul>','downloadLoginBtn','a3.html','Traitement\x20du\x20ticket\x20','Current\x20user\x20ID\x20is\x20not\x20found\x20in\x20sessionStorage.','password','addEventListener','prix','User\x20ID\x20not\x20found.\x20Cannot\x20save\x20portal\x20configuration.','productsList','name','body','tariffs','text','Erreur','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','/TicketsTransit/','Abonnement\x20mensuel','annuel','subscribeMonthly','Ticket\x20','1259537waldhm','getElementById','API\x20configuration\x20not\x20found\x20globally.','<input\x20type=\x22text\x22\x20value=\x22','Vendeur\x20automatique','remove','removeListItem','createElement','paymentModal','redirectToSubscription','Vous\x20devez\x20être\x20connecté\x20pour\x20vous\x20abonner.','display','inventaire','\x22\x20data-type=\x22','block','Configuration\x20du\x20portail\x20captif\x20enregistrée\x20avec\x20succès!','click','Traitement\x20des\x20tickets\x20uniques...','revokeObjectURL','tariffsList','login.html','pageLoaderWrapper','Erreur\x20lors\x20de\x20l\x27enregistrement\x20de\x20la\x20configuration:','forEach','Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket.','1.0.0','pageLoaderMessage','Aucune\x20configuration\x20trouvée.','loaderWrapper','CHECKOUT_COMPLETED','appendChild','log','subscriptionRequiredModal','DOMContentLoaded','users/Version\x20du\x20système','red','</li>','push','Statut\x20de\x20l\x27abonnement:\x20Actif\x20jusqu\x27au\x20','Erreur:\x20ID\x20administrateur\x20non\x20trouvé.\x20Veuillez\x20vous\x20reconnecter.','setMonth','TicketsTotal','expired','1393110nuBYGW','connection','User\x20ID\x20not\x20found.\x20Cannot\x20download\x20login\x20file.','pay.html','<table\x20style=\x22width:\x20100%;\x20border-collapse:\x20collapse;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>','open','Statut\x20de\x20l\x27abonnement:\x20Expiré','error','<!--\x20TARIFFS_TABLE_SIMPLE\x20-->','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','currentUserId','products','isLoggedIn','...','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','removeChild','<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','div','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20style=\x22width:\x20100%;\x20border-collapse:\x20collapse;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x20text-align:\x20left;\x22>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','yearly','preventDefault','/admin/subscription','text/html','utilisateur','motDePasse','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>','addListItem','status','loginAccueil.html','User\x20ID\x20not\x20found.\x20Cannot\x20initiate\x20payment.','networkNameDisplay','loginMode','ADMIN\x20WIFI\x20ZONE','Erreur\x20lors\x20de\x20la\x20vente\x20automatique\x20du\x20ticket\x20:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','connectionsList','Current\x20user\x20ID\x20is\x20not\x20provided\x20to\x20processTicket.','none','Erreur\x20lors\x20de\x20l\x27enregistrement\x20de\x20la\x20configuration.','init','PageVenteTicket.html?adminId=','green','togglePortalForm','querySelector','value','reason','13128vrSjWx','togglePortalFormBtn','Aucune\x20configuration\x20de\x20portail\x20captif\x20trouvée.','16ktNHaE','className','Vérification\x20des\x20tickets\x20connectés...','Une\x20erreur\x20est\x20survenue\x20lors\x20du\x20traitement\x20des\x20tickets.','TicketsTransit','Current\x20user\x20ID\x20is\x20not\x20provided\x20to\x20sellTicketAutomatically.','1308FOiFRu','category','<!--\x20CONTACT_NUMBER\x20-->','/VendorsHistory/','querySelectorAll','<!--\x20PRODUCTS_LIST\x20-->','<ul>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22','then','logout','admin@example.com','DIALOG_DISMISSED','filter','monthly','user','<li>','trim','Erreur\x20lors\x20du\x20téléchargement\x20du\x20portail\x20captif:','#connectionsList\x20.list-item\x20input',')\x22>Payer</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20value=\x22','\x27,\x20','users/API','/TicketsTotal/','innerHTML','portalForm','downloadLoginFile','contactNumber','active','1345707VJERWQ','Adresse','\x20vendu\x20automatiquement\x20et\x20enregistré\x20dans\x20VendorsHistory.','clear','pay','toISOString','hideSubscriptionRequiredModal','administration','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20configuration:','\x22\x20data-type=\x22tariffName\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20value=\x22','inline-block','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22>','User\x20ID\x20not\x20found.\x20Cannot\x20cancel\x20subscription.','6700141RCDzAH','<!--\x20ADMIN_USER_ID\x20-->','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27abonnement:','createObjectURL','[data-type=\x22tariffPrice\x22]','Vous\x20devez\x20être\x20connecté\x20pour\x20configurer\x20le\x20portail.','Abonnement\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22padding:\x208px;\x20border-bottom:\x201px\x20solid\x20#ddd;\x22><button\x20onclick=\x22initPayment(\x27','<!--\x20CONNECTION_LOCATIONS\x20-->','Database\x20initialized\x20in\x20index.html','color','submit','Admin\x20ID\x20not\x20found\x20in\x20session\x20storage.','indexOf','username','exists','catch','vente','User\x20ID\x20not\x20found.\x20Cannot\x20check\x20subscription\x20status.','val','href','firebase-config-manager.js','Vous\x20devez\x20être\x20connecté\x20pour\x20télécharger\x20le\x20portail.','\x20réussi!','slice','users-data/','getMonth','textContent','price','CYBER\x20CAMPUS\x20WIFI\x20ZONE','subscribeYearly','onload','list-item','Nettoyage\x20des\x20tickets\x20traités...','style','Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20connectés\x20:','/TicketConnecté','Vente\x20du\x20ticket\x20','getFullYear','endDate','connections','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27abonnement.','Paiement\x20échoué.','4077HoUQtE','+229\x20XXXXXXXX','Erreur\x20lors\x20du\x20traitement\x20des\x20tickets\x20:','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27initialisation.','/portalConfig','same'];_0x109a=function(){return _0x22e030;};return _0x109a();}window[_0x325ac7(0x1a1)]=downloadLoginFile;async function loadPortalConfig(){const _0x25c172=_0x325ac7;showLoader();const _0x19c5fa=sessionStorage[_0x25c172(0x10a)](_0x25c172(0x15a));try{const _0x3a8d7b=ref(db,_0x25c172(0xdd)+_0x19c5fa+_0x25c172(0xf3)),_0x568049=ref(db,_0x25c172(0x19d)),_0x3c6665=ref(db,_0x25c172(0x147)),_0x323355=await get(_0x3a8d7b),_0x29fccb=await get(_0x568049),_0x53f16f=await get(_0x3c6665);_0x29fccb[_0x25c172(0x1c0)]()?fedapayApiKey=_0x29fccb['val']():(console['log'](_0x25c172(0x127)),fedapayApiKey='');_0x53f16f[_0x25c172(0x1c0)]()?systemVersion=_0x53f16f[_0x25c172(0xd7)]():(systemVersion=_0x25c172(0x13e),console[_0x25c172(0x144)](_0x25c172(0x104)));document['getElementById'](_0x25c172(0x107))[_0x25c172(0xdf)]=systemVersion;if(_0x323355['exists']()){const _0x568faf=_0x323355[_0x25c172(0xd7)]();document[_0x25c172(0x126)](_0x25c172(0x10f))[_0x25c172(0x17c)]=_0x568faf[_0x25c172(0x10f)]||'',document[_0x25c172(0x126)]('contactNumber')[_0x25c172(0x17c)]=_0x568faf[_0x25c172(0x1a2)]||'',document[_0x25c172(0x126)](_0x25c172(0x16f))[_0x25c172(0x17c)]=_0x568faf[_0x25c172(0x16f)]||_0x25c172(0xf7),document[_0x25c172(0x126)](_0x25c172(0x16e))[_0x25c172(0xdf)]=_0x568faf[_0x25c172(0x10f)]||_0x25c172(0x170);function _0x539dd1(_0x46b02e,_0x4ba629,_0x53c3c7){const _0x1f8bf4=_0x25c172,_0x2541e7=document[_0x1f8bf4(0x126)](_0x46b02e);_0x2541e7[_0x1f8bf4(0x19f)]='',_0x4ba629[_0x1f8bf4(0x13c)](_0x10c1bb=>{const _0x27228f=_0x1f8bf4,_0x5f32ad=document[_0x27228f(0x12c)](_0x27228f(0x161));_0x5f32ad[_0x27228f(0x182)]=_0x27228f(0xe4),_0x46b02e===_0x27228f(0x138)?_0x5f32ad[_0x27228f(0x19f)]=_0x27228f(0x19b)+_0x10c1bb['name']+_0x27228f(0x1ad)+_0x10c1bb['price']+'\x22\x20data-type=\x22tariffPrice\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20onclick=\x22removeListItem(this)\x22>Supprimer</button>':_0x5f32ad[_0x27228f(0x19f)]=_0x27228f(0x128)+_0x10c1bb+_0x27228f(0x132)+_0x53c3c7+_0x27228f(0x101),_0x2541e7[_0x27228f(0x143)](_0x5f32ad);}),addListItem(_0x46b02e);}_0x539dd1(_0x25c172(0x138),_0x568faf['tariffs']||[],null),_0x539dd1(_0x25c172(0x173),_0x568faf[_0x25c172(0xec)]||[],_0x25c172(0x151)),_0x539dd1(_0x25c172(0x119),_0x568faf[_0x25c172(0x15b)]||[],_0x25c172(0xfd));}else console[_0x25c172(0x144)](_0x25c172(0x140)),addListItem(_0x25c172(0x138)),addListItem(_0x25c172(0x173)),addListItem(_0x25c172(0x119));}catch(_0x1e2d31){console['error'](_0x25c172(0x1ac),_0x1e2d31),alert('Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20configuration.');}finally{hideLoader();}}document[_0x325ac7(0x116)](_0x325ac7(0x146),async()=>{const _0x1791a2=_0x325ac7;showPageLoader(),await initializeDatabase(),await checkLoginStatus(),await loadPortalConfig(),processConnectedTickets()[_0x1791a2(0x18f)](()=>checkSubscriptionStatus())[_0x1791a2(0x18f)](()=>{hidePageLoader();})[_0x1791a2(0x1c1)](_0x217403=>{const _0x187d20=_0x1791a2;console[_0x187d20(0x157)](_0x187d20(0xf1),_0x217403),hidePageLoader(),showNotification(_0x187d20(0x11e),_0x187d20(0xf2));});}),window[_0x325ac7(0x12e)]=redirectToSubscription,window[_0x325ac7(0x1aa)]=redirectToSubscription;function closePaymentModal(){const _0x1e6eb8=_0x325ac7;paymentModal[_0x1e6eb8(0xe6)][_0x1e6eb8(0x130)]='none',overlay[_0x1e6eb8(0xe6)][_0x1e6eb8(0x130)]=_0x1e6eb8(0x175);}window[_0x325ac7(0xe3)]=()=>{};
    </script>

</body>
</html>
