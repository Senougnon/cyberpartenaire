<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion Cyber Campus</title>
    <!--  Le même CSS que login.html -->
    <style>
        /* ... (Le CSS de login.html, copié ici) ... */
                @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #36ff03, #1900ff, #a7ff03);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }

        header {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .header-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .img1 {
            animation: slide1 10s linear infinite;
        }

        .img2 {
            animation: slide2 10s linear infinite;
        }

        .logo {
            font-size: 2.5em;
            color: white;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }

        .logo::before {
            content: '';
            font-size: 0.8em;
            margin-right: 10px;
            animation: rotate 5s linear infinite;
            display: inline-block;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .moon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: wrap;
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 150px;
            text-align: center;
            margin: 5px;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background-color: rgb(0, 0, 0);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .nav-button:hover::before {
            width: 300px;
            height: 300px;
        }

        @keyframes buttonPulse {
            0% { background-color: #020202; color: #ffffff; }
            50% { background-color: #1a2a6c; color: #c8ff00; }
            100% { background-color: #000000; color: #ffffff; }
        }

        .nav-button.animate-pay {
            animation: buttonPulse 3s ease-in-out infinite;
        }

        @keyframes textChange {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        main {
            display: flex;
            flex-direction: column;
            padding: 20px 10px;
            gap: 20px;
            flex: 1;
        }

        .login-section,
        .rates-section,
        .locations-section,
        .products-section {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        section:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .login-section {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        h2 {
            color: rgb(0, 0, 0);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #fdbb2d;
            transition: width 0.3s;
        }

        section:hover h2::after {
            width: 100%;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input {
            margin-bottom: 10px;
            padding: 12px;
            border: none;
            border-radius: 25px;
            background-color: rgb(255, 253, 250);
            color: rgb(0, 0, 0);
            transition: background-color 0.3s;
        }

        input:focus {
            background-color: rgba(255, 255, 255, 0.3);
            outline: none;
        }

        button {
            background-color: #000000;
            color: #ffffff;
            border: none;
            padding: 10px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        button:hover {
            background-color: #1a2a6c;
            color: #fdbb2d;
        }

        .rates-section {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .rates-section table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 10px 0;
        }

        .rates-section th,
        .rates-section td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .rates-section th:first-child,
        .rates-section td:first-child {
            padding-left: 20px;
        }

        .rates-section th:last-child,
        .rates-section td:last-child {
            padding-right: 20px;
        }

        .rates-section .loading-message {
            text-align: center;
            padding: 20px;
        }

        ul {
            list-style-type: none;
        }

        li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 20px;
        }

        li::before {
            content: '➤';
            position: absolute;
            left: 0;
            color: #fdbb2d;
        }

        footer {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 15px;
            text-align: center;
            margin-top: auto;
        }

        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
            color: #1a2a6c;
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        .notification h2 {
            color: #1a2a6c;
            margin-bottom: 20px;
        }

        .notification p {
            margin-bottom: 15px;
        }

        .close-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
        }

        .notification .ticket-info {
            margin-bottom: 15px;
            text-align: left;
        }

        .notification .ticket-info p {
            margin-bottom: 5px;
        }

        .notification .login-button,
        .notification .delete-button {
            display: inline-block;
            margin: 0 10px;
        }

        .notification .login-button {
            background-color: #fdbb2d;
            color: #1a2a6c;
        }

        .delete-button {
            background-color: #f44336;
            color: white;
        }

        .delete-button:hover {
            background-color: #d32f2f;
        }

        .notification.error {
            background-color: #fdd;
            border: 1px solid #faa;
            color: #f00;
        }

        /* Footer Popup Styles */
        .footer-popup {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translate(-50%, 200%);
            width: 95%;
            max-width: 600px;
            padding: 2rem;
            border-radius: 25px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, rgba(129, 0, 0, 0.95) 0%, rgba(0, 60, 150, 0.95) 100%);
            backdrop-filter: blur(10px);
            color: white;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3),
                        0 0 20px rgba(0, 89, 255, 0.3),
                        inset 0 0 60px rgba(0, 89, 255, 0.1);
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-popup.show {
            transform: translate(-50%, 0);
            opacity: 1;
        }

        .footer-popup .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        /* Animations */
        @keyframes slide1 {
            0% { transform: translateX(0); }
            50% { transform: translateX(-100%); }
            100% { transform: translateX(0); }
        }

        @keyframes slide2 {
            0% { transform: translateX(100%); }
            50% { transform: translateX(0); }
            100% { transform: translateX(100%); }
        }

        /* Media Queries */
        @media screen and (max-width: 768px) {
            .container {
                padding: 5px;
            }

            .logo {
                font-size: 2em;
            }

            nav {
                flex-direction: column;
                padding: 0 15px;
            }

            .nav-button {
                width: 100%;
                margin: 5px 0;
            }

            main {
                padding: 10px 5px;
            }

            .login-section,
            .rates-section,
            .locations-section,
            .products-section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .rates-section {
                margin: 0 -5px;
                width: calc(100% + 10px);
                border-radius: 0;
            }

            .rates-section table {
                font-size: 14px;
            }

            .rates-section th,
            .rates-section td {
                padding: 8px;
            }

            .footer-popup {
                width: 92%;
                padding: 1.5rem;
            }
        }

        @media screen and (max-width: 480px) {
            .logo {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.2em;
            }

            .rates-section th,
            .rates-section td {
                padding: 6px;
                font-size: 12px;
            }

            .notification {
                width: 95%;
                padding: 15px;
            }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: nowrap; /* Empêche le retour à la ligne */
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 0; /* Supprime la largeur minimale */
            text-align: center;
            margin: 5px;
            white-space: nowrap; /* Empêche le texte de passer à la ligne */
            font-size: 14px; /* Taille de police réduite pour mobile */
            flex: 1; /* Les boutons se partagent l'espace disponible */
            max-width: calc(50% - 10px); /* Maximum 50% de la largeur moins la marge */
        }

        /* Modification des media queries */
        @media screen and (max-width: 768px) {
            nav {
                flex-direction: row; /* Force l'alignement horizontal */
                padding: 0 10px;
            }

            .nav-button {
                width: auto; /* Permet aux boutons de s'adapter à leur contenu */
                margin: 5px;
                font-size: 12px; /* Taille de police encore plus petite pour les très petits écrans */
            }
        }

        @media screen and (max-width: 320px) {
            .nav-button {
                padding: 8px 12px; /* Padding réduit pour les très petits écrans */
                font-size: 11px;
            }
        }
    </style>
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script type="module">
(function(_0xe58480,_0x51f52a){var _0x5737f6=_0x3ad6,_0x253665=_0xe58480();while(!![]){try{var _0x58d210=-parseInt(_0x5737f6(0x1b9))/0x1*(-parseInt(_0x5737f6(0x1bd))/0x2)+parseInt(_0x5737f6(0x1c1))/0x3*(-parseInt(_0x5737f6(0x1bf))/0x4)+-parseInt(_0x5737f6(0x1be))/0x5+parseInt(_0x5737f6(0x1bb))/0x6+parseInt(_0x5737f6(0x1bc))/0x7+-parseInt(_0x5737f6(0x1ba))/0x8+-parseInt(_0x5737f6(0x1c0))/0x9;if(_0x58d210===_0x51f52a)break;else _0x253665['push'](_0x253665['shift']());}catch(_0x228527){_0x253665['push'](_0x253665['shift']());}}}(_0x1c3b,0xe3a04));import{getActiveDatabase}from'./firebase-config-manager.js';import{ref,get,set,push,remove}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';function _0x3ad6(_0x11f4c9,_0x44a453){var _0x1c3bba=_0x1c3b();return _0x3ad6=function(_0x3ad683,_0x3e8604){_0x3ad683=_0x3ad683-0x1b9;var _0x4b3f68=_0x1c3bba[_0x3ad683];return _0x4b3f68;},_0x3ad6(_0x11f4c9,_0x44a453);}function _0x1c3b(){var _0x419e15=['16mENEFz','5135048mJWJdE','8569848GVtEKy','2508877UnpmiA','130948lCgbCV','3232465KDrPSm','56504rHOpvv','4886487ZBYwRj','15yzxdVR'];_0x1c3b=function(){return _0x419e15;};return _0x1c3b();}
        const adminUserId = '<!-- ADMIN_USER_ID -->';
        const networkName = '<!-- NETWORK_NAME -->';
        const contactNumber = '<!-- CONTACT_NUMBER -->';
        const fedapayApiKey = '<!-- FEDAPAY_API_KEY -->';

const _0x584975=_0x4937;(function(_0x240ff6,_0xc8d4fc){const _0x332c32=_0x4937,_0x250e4b=_0x240ff6();while(!![]){try{const _0x419e60=-parseInt(_0x332c32(0x189))/0x1*(parseInt(_0x332c32(0x188))/0x2)+parseInt(_0x332c32(0x16f))/0x3+parseInt(_0x332c32(0x185))/0x4+-parseInt(_0x332c32(0x173))/0x5+-parseInt(_0x332c32(0x1b0))/0x6*(-parseInt(_0x332c32(0x177))/0x7)+parseInt(_0x332c32(0x16b))/0x8*(parseInt(_0x332c32(0x1cb))/0x9)+-parseInt(_0x332c32(0x169))/0xa*(parseInt(_0x332c32(0x161))/0xb);if(_0x419e60===_0xc8d4fc)break;else _0x250e4b['push'](_0x250e4b['shift']());}catch(_0x1d2f5d){_0x250e4b['push'](_0x250e4b['shift']());}}}(_0x6bd2,0x20744));let db,userConfigRef;async function initializeDatabase(){const _0xc07c97=_0x4937;db=await getActiveDatabase(),userConfigRef=ref(db,'users-data/'+adminUserId+'/portalConfig'),console[_0xc07c97(0x19a)]('Database\x20initialized\x20in\x20log.html');}let localTickets={};async function checkSubscriptionStatus(){const _0x1a9828=_0x4937;try{const _0x5e96e9=ref(db,_0x1a9828(0x1c1)+adminUserId+'/admin/subscription'),_0x149fcc=await get(_0x5e96e9),_0x3e776a=_0x149fcc[_0x1a9828(0x18d)](),_0x32e250=new Date();if(_0x3e776a&&_0x3e776a['status']==='active'){const _0x4a3b20=new Date(_0x3e776a['endDate']);return _0x4a3b20<_0x32e250?(await set(_0x5e96e9,{..._0x3e776a,'status':_0x1a9828(0x1b7)}),![]):!![];}else return![];}catch(_0x5cb7b7){return console['error'](_0x1a9828(0x15d),_0x5cb7b7),![];}}function _0x6bd2(){const _0x35fedf=['DOMContentLoaded','10ZJrckG','click','862216RYScBE','password','notification-message','Ticket\x20en\x20transit\x20supprimé:','94317gqElRL','.nav-button.animate-pay','getElementById','remove','604040CylhFz','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ticket-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Identifiant:\x20','find','/TicketsTotal/','7EAjZYF','/TicketsTransit','/TicketsTransit/','DIALOG_DISMISSED','now','removeItem','user','floor','toLowerCase','includes','CHECKOUT_COMPLETED',')\x22>','prix','Paiement\x20annulé','792612WWaYhi','value','keys','383458LHOJme','1tyMUaE','load','length','notification','val','warn','login-button','indexOf','\x20de\x20','</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','username','.rates-section','\x27,\x20','.rates-section\x20.loading-message','Aucun\x20ticket\x20disponible\x20pour\x20le\x20moment.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','scrollIntoView','log','\x0aMot\x20de\x20passe:\x20','submit','Ticket\x20de\x20connexion\x20stocké:','appendChild','Ticket\x20supprimé','.logo','parse','smooth','stringify','table','Supprimer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Obtenir','key','Non\x20disponible','Données\x20synchronisées:','open','error','storedTicket','lastFreeTicket','Erreur\x20lors\x20de\x20la\x20synchronisation\x20des\x20tickets:','1593282wqlcZQ','Votre\x20ticket\x20a\x20été\x20supprimé\x20avec\x20succès.','Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20paiement:','Le\x20paiement\x20a\x20été\x20annulé.','filter','TicketConnecté','entries','expired','insertRow','none','Votre\x20ticket','reason','.login-button,\x20.delete-button','className','\x20FCFA','/TicketsVendus','/TicketsTotal','users-data/','Erreur\x20lors\x20de\x20la\x20synchronisation\x20et\x20réservation\x20du\x20ticket:','unshift','client@example.com','innerHTML','motDePasse','textContent','forEach','utilisateur','createElement','9oKOBhl','login','getItem','Mot\x20de\x20passe:\x20','.rates-section\x20table','Voir\x20mon\x20ticket','split','Payer','display','Connexion','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Une\x20erreur\x20est\x20survenue.\x20Veuillez\x20réessayer\x20plus\x20tard.','notification-title','block','Prix:\x20','setItem','querySelector','addEventListener','.nav-button','✅\x20Paiement\x20validé\x20pour:\x0aPseudo:\x20','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','Données\x20incomplètes\x20pour\x20la\x20catégorie:\x20','button','price','1731917lqsKNl','Pas\x20d\x27abonnement\x20actif','Félicitations\x20!\x20Vous\x20avez\x20reçu\x20un\x20ticket\x20gratuit.','\x0aCatégorie:\x20','style','</p>\x20<!--\x20Changement\x20ici\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté\x20enregistré\x20dans\x20Firebase\x20avec\x20la\x20clé:'];_0x6bd2=function(){return _0x35fedf;};return _0x6bd2();}async function syncTickets(){const _0x1a2331=_0x4937;try{const _0x1f8254=await checkSubscriptionStatus();if(!_0x1f8254){document[_0x1a2331(0x159)]('.rates-section\x20.loading-message')[_0x1a2331(0x1c7)]=_0x1a2331(0x162);return;}const _0x233d25=ref(db,_0x1a2331(0x1c1)+adminUserId+_0x1a2331(0x1c0)),_0x161484=await get(_0x233d25);localTickets=_0x161484[_0x1a2331(0x18d)]()||{};const _0x351e42=ref(db,_0x1a2331(0x1c1)+adminUserId+_0x1a2331(0x1bf)),_0x263de7=await get(_0x351e42),_0x58996b=_0x263de7[_0x1a2331(0x18d)]()||{};for(const _0x286a5f in _0x58996b){const _0x47dc62=_0x58996b[_0x286a5f],_0x2ceab5=Object[_0x1a2331(0x187)](localTickets)[_0x1a2331(0x175)](_0x34956d=>localTickets[_0x34956d][_0x1a2331(0x1c9)]&&localTickets[_0x34956d][_0x1a2331(0x1c9)][_0x1a2331(0x180)](_0x47dc62['user']));if(_0x2ceab5){const _0x47cbb5=localTickets[_0x2ceab5][_0x1a2331(0x1c9)][_0x1a2331(0x190)](_0x47dc62[_0x1a2331(0x17d)]);_0x47cbb5>-0x1&&(localTickets[_0x2ceab5]={...localTickets[_0x2ceab5],'utilisateur':localTickets[_0x2ceab5]['utilisateur']['filter']((_0x3a9d1a,_0x2ada40)=>_0x2ada40!==_0x47cbb5),'motDePasse':localTickets[_0x2ceab5][_0x1a2331(0x1c6)][_0x1a2331(0x1b4)]((_0x3fd9be,_0x398c62)=>_0x398c62!==_0x47cbb5),'prix':localTickets[_0x2ceab5]['prix']['filter']((_0x2383b9,_0x3570c0)=>_0x3570c0!==_0x47cbb5)},localTickets[_0x2ceab5][_0x1a2331(0x1c9)][_0x1a2331(0x18b)]===0x0&&delete localTickets[_0x2ceab5]);}}console[_0x1a2331(0x19a)](_0x1a2331(0x1aa),localTickets),createTicketTable();}catch(_0x2cf2d2){console[_0x1a2331(0x1ac)](_0x1a2331(0x1af),_0x2cf2d2);}}document[_0x584975(0x15a)](_0x584975(0x168),async()=>{const _0x22babc=_0x584975;await initializeDatabase(),syncTickets(),setInterval(syncTickets,0x1388),document[_0x22babc(0x159)](_0x22babc(0x1a0))[_0x22babc(0x1c7)]=networkName,document['querySelector'](_0x22babc(0x15b))[_0x22babc(0x1c7)]=contactNumber;});function storeLoginTicket(_0x5d1b05,_0x5e307d){const _0x30ed85=_0x584975;localStorage[_0x30ed85(0x158)](_0x30ed85(0x1b5),JSON['stringify']({'user':_0x5d1b05,'password':_0x5e307d})),console[_0x30ed85(0x19a)](_0x30ed85(0x19d),_0x5d1b05);}document['login'][_0x584975(0x15a)](_0x584975(0x19c),function(_0x1aa6f4){const _0x215043=_0x584975;_0x1aa6f4['preventDefault']();const _0x1886fa=document[_0x215043(0x1cc)]['username']['value'];storeLoginTicket(_0x1886fa,_0x1886fa),storeConnectedTicket(_0x1886fa),this[_0x215043(0x19c)]();});async function storeTicketEnTransit(_0x413a58){const _0x17b463=_0x584975,_0x40fffe=await synchronizeAndReserveTicket(_0x413a58);if(!_0x40fffe)throw new Error('Aucun\x20ticket\x20disponible\x20pour\x20cette\x20catégorie.');const _0x2dbee3=ref(db,_0x17b463(0x1c1)+adminUserId+_0x17b463(0x178)),_0x46408d=push(_0x2dbee3);return await set(_0x46408d,{'id':_0x46408d['key'],'category':_0x413a58,..._0x40fffe}),console[_0x17b463(0x19a)]('Ticket\x20en\x20transit\x20stocké:',_0x46408d[_0x17b463(0x1a8)]),{'id':_0x46408d[_0x17b463(0x1a8)],..._0x40fffe};}async function removeTicketFromTransit(_0x271ef0){const _0x252e0c=_0x584975,_0x122168=ref(db,_0x252e0c(0x1c1)+adminUserId+_0x252e0c(0x179)+_0x271ef0);await remove(_0x122168),console[_0x252e0c(0x19a)](_0x252e0c(0x16e),_0x271ef0);}async function synchronizeAndReserveTicket(_0xd286e5){const _0x1b1b4d=_0x584975;try{const _0x58f52b=ref(db,_0x1b1b4d(0x1c1)+adminUserId+'/TicketsTotal/'+_0xd286e5),_0x5625a8=await get(_0x58f52b),_0x14a5e6=_0x5625a8[_0x1b1b4d(0x18d)]();if(!_0x14a5e6||!_0x14a5e6[_0x1b1b4d(0x1c9)]||_0x14a5e6[_0x1b1b4d(0x1c9)][_0x1b1b4d(0x18b)]===0x0)return null;const _0x2fdd6e={'user':_0x14a5e6[_0x1b1b4d(0x1c9)][0x0],'password':_0x14a5e6['motDePasse'][0x0],'price':_0x14a5e6[_0x1b1b4d(0x183)][0x0]},_0x2f7eb4={..._0x14a5e6,'utilisateur':_0x14a5e6[_0x1b1b4d(0x1c9)][_0x1b1b4d(0x1b4)]((_0x3f5958,_0x292cc3)=>_0x292cc3!==0x0),'motDePasse':_0x14a5e6['motDePasse'][_0x1b1b4d(0x1b4)]((_0x5f3558,_0x53ca74)=>_0x53ca74!==0x0),'prix':_0x14a5e6[_0x1b1b4d(0x183)]['filter']((_0x4125fd,_0x46c07b)=>_0x46c07b!==0x0)};return await set(_0x58f52b,_0x2f7eb4),_0x2fdd6e;}catch(_0x48ceb8){console['error'](_0x1b1b4d(0x1c2),_0x48ceb8);throw _0x48ceb8;}}async function restoreTicket(_0x191ba8,_0x37be6e){const _0x299444=_0x584975,_0xb5085c=ref(db,_0x299444(0x1c1)+adminUserId+_0x299444(0x176)+_0x191ba8),_0x99d8be=await get(_0xb5085c),_0x1e0171=_0x99d8be['val']()||{'utilisateur':[],'motDePasse':[],'prix':[]};_0x1e0171[_0x299444(0x1c9)][_0x299444(0x1c3)](_0x37be6e[_0x299444(0x17d)]),_0x1e0171[_0x299444(0x1c6)]['unshift'](_0x37be6e['password']),_0x1e0171[_0x299444(0x183)]['unshift'](_0x37be6e[_0x299444(0x160)]),await set(_0xb5085c,_0x1e0171);}function canGetFreeTicket(){const _0x2a2e0a=_0x584975,_0x28a182=localStorage[_0x2a2e0a(0x1cd)](_0x2a2e0a(0x1ae));if(!_0x28a182)return!![];const _0x1206b4=new Date(parseInt(_0x28a182)),_0x349c6b=new Date(),_0x121891=Math[_0x2a2e0a(0x17e)]((_0x349c6b-_0x1206b4)/(0x3e8*0x3c*0x3c*0x18));return _0x121891>=0x7;}window['initPayment']=async function(_0x1ede8b,_0x203ea1){const _0x1f01ff=_0x584975;let _0x184177=null;try{if(_0x1ede8b[_0x1f01ff(0x17f)]()[_0x1f01ff(0x180)]('ticket\x20cadeau')){if(!canGetFreeTicket()){showNotification(_0x1f01ff(0x1a9),'Vous\x20devez\x20attendre\x207\x20jours\x20entre\x20chaque\x20ticket\x20gratuit.',![]);return;}const _0x39a63e=await synchronizeAndReserveTicket(_0x1ede8b);localStorage[_0x1f01ff(0x158)]('lastFreeTicket',Date[_0x1f01ff(0x17b)]()['toString']()),showNotification('Ticket\x20cadeau',_0x1f01ff(0x163),!![]),displayTicket(_0x39a63e,_0x1ede8b),await storeTicketVendu(_0x39a63e);return;}_0x184177=await storeTicketEnTransit(_0x1ede8b);const _0x32574d=_0x1ede8b+';\x20'+_0x184177['user']+_0x1f01ff(0x191)+_0x184177[_0x1f01ff(0x160)]+_0x1f01ff(0x1be);var _0x31cb0a=FedaPay['init']({'public_key':fedapayApiKey,'transaction':{'amount':_0x203ea1,'description':_0x32574d},'customer':{'email':_0x1f01ff(0x1c4)},'onComplete':async function(_0xe4f39e){const _0x23b1ba=_0x1f01ff;if(_0xe4f39e[_0x23b1ba(0x1bb)]===FedaPay[_0x23b1ba(0x17a)])showNotification(_0x23b1ba(0x184),_0x23b1ba(0x1b3)),await restoreTicket(_0x1ede8b,_0x184177),await removeTicketFromTransit(_0x184177['id']);else{if(_0xe4f39e[_0x23b1ba(0x1bb)]===FedaPay[_0x23b1ba(0x181)]){const _0x4d4829=_0x23b1ba(0x15c)+_0x184177['user']+_0x23b1ba(0x19b)+_0x184177[_0x23b1ba(0x16c)]+_0x23b1ba(0x164)+_0x1ede8b+'\x0aPrix:\x20'+_0x184177[_0x23b1ba(0x160)]+'\x20FCFA\x0aMerci\x20pour\x20votre\x20achat!\x20🎉';showNotification('Paiement\x20réussi',_0x4d4829),await storeTicketVendu(_0x184177),displayTicket(_0x184177,_0x1ede8b);}}}});_0x31cb0a[_0x1f01ff(0x1ab)]();}catch(_0x44ad84){console[_0x1f01ff(0x1ac)](_0x1f01ff(0x1b2),_0x44ad84),showNotification('Erreur',_0x1f01ff(0x154)),_0x184177&&(await restoreTicket(_0x1ede8b,_0x184177),await removeTicketFromTransit(_0x184177['id']));}};function showTariffsTable(){const _0x4d613f=_0x584975,_0x4a89e9=document['querySelector'](_0x4d613f(0x1cf)),_0x4b18f0=document[_0x4d613f(0x159)](_0x4d613f(0x196));_0x4a89e9[_0x4d613f(0x165)][_0x4d613f(0x1d3)]=_0x4d613f(0x1a4),_0x4b18f0[_0x4d613f(0x165)][_0x4d613f(0x1d3)]=_0x4d613f(0x1b9);}async function createTicketTable(){const _0x54e14f=_0x584975,_0x36fcc7=document['querySelector'](_0x54e14f(0x1cf));_0x36fcc7[_0x54e14f(0x1c5)]=_0x54e14f(0x1a6);if(Object['keys'](localTickets)[_0x54e14f(0x18b)]===0x0){document[_0x54e14f(0x159)]('.rates-section\x20.loading-message')['textContent']=_0x54e14f(0x197);return;}for(const [_0x5c4303,_0x1276e8]of Object[_0x54e14f(0x1b6)](localTickets)){if(!_0x1276e8||!_0x1276e8[_0x54e14f(0x183)]||_0x1276e8[_0x54e14f(0x183)]['length']===0x0){console[_0x54e14f(0x18e)](_0x54e14f(0x15e)+_0x5c4303);continue;}const _0x104ec4=_0x1276e8[_0x54e14f(0x183)][0x0],_0x46330d=_0x36fcc7[_0x54e14f(0x1b8)](),_0xaee7e2=_0x5c4303['toLowerCase']()['includes']('ticket\x20cadeau')?_0x54e14f(0x1a7):_0x54e14f(0x1d2);_0x46330d['innerHTML']=_0x54e14f(0x153)+_0x5c4303+_0x54e14f(0x198)+_0x104ec4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20onclick=\x22initPayment(\x27'+_0x5c4303+_0x54e14f(0x195)+_0x104ec4+_0x54e14f(0x182)+_0xaee7e2+_0x54e14f(0x192);}showTariffsTable();}function showTicketNotification(_0x5d99eb){const _0xa167a1=_0x584975,_0x3b516f=document[_0xa167a1(0x171)](_0xa167a1(0x18c)),_0x1fa387=document[_0xa167a1(0x171)]('notification-title'),_0x5f2dda=document[_0xa167a1(0x171)](_0xa167a1(0x16d));_0x1fa387[_0xa167a1(0x1c7)]=_0xa167a1(0x1ba),_0x5f2dda[_0xa167a1(0x1c5)]=_0xa167a1(0x174)+_0x5d99eb['user']+_0xa167a1(0x166);const _0x5030d1=_0x3b516f['querySelectorAll'](_0xa167a1(0x1bc));_0x5030d1[_0xa167a1(0x1c8)](_0xdd4a9a=>_0xdd4a9a[_0xa167a1(0x172)]());const _0x5df252=document[_0xa167a1(0x1ca)](_0xa167a1(0x15f));_0x5df252['className']=_0xa167a1(0x18f),_0x5df252['textContent']=_0xa167a1(0x1d4),_0x5df252['addEventListener'](_0xa167a1(0x16a),()=>{const _0x1736a9=_0xa167a1;autoLogin(_0x5d99eb['user'],_0x5d99eb[_0x1736a9(0x17d)]);});const _0x50379b=document[_0xa167a1(0x1ca)](_0xa167a1(0x15f));_0x50379b[_0xa167a1(0x1bd)]='delete-button',_0x50379b[_0xa167a1(0x1c7)]=_0xa167a1(0x1a5),_0x50379b[_0xa167a1(0x15a)]('click',deleteTicket),_0x3b516f[_0xa167a1(0x19e)](_0x5df252),_0x3b516f[_0xa167a1(0x19e)](_0x50379b),_0x3b516f[_0xa167a1(0x165)][_0xa167a1(0x1d3)]=_0xa167a1(0x156);}function showNotification(_0x1d17b9,_0x5cfba0,_0x3657bf=![]){const _0x20a7d5=_0x584975,_0x75b752=document['getElementById'](_0x20a7d5(0x18c)),_0x1d068a=document[_0x20a7d5(0x171)](_0x20a7d5(0x155)),_0x68d4e9=document[_0x20a7d5(0x171)]('notification-message');_0x1d068a[_0x20a7d5(0x1c7)]=_0x1d17b9,_0x68d4e9['textContent']=_0x5cfba0;const _0x459e75=_0x75b752['querySelectorAll'](_0x20a7d5(0x1bc));_0x459e75[_0x20a7d5(0x1c8)](_0x22a429=>_0x22a429[_0x20a7d5(0x172)]());if(_0x3657bf){const _0x56c65a=document[_0x20a7d5(0x1ca)](_0x20a7d5(0x15f));_0x56c65a[_0x20a7d5(0x1bd)]=_0x20a7d5(0x18f),_0x56c65a[_0x20a7d5(0x1c7)]=_0x20a7d5(0x1d4),_0x56c65a[_0x20a7d5(0x15a)](_0x20a7d5(0x16a),()=>{const _0x261ffc=_0x20a7d5,_0x51d1e1=_0x5cfba0[_0x261ffc(0x1d1)]('\x0a'),_0x1f646d=_0x51d1e1[0x0][_0x261ffc(0x1d1)](':\x20')[0x1];autoLogin(_0x1f646d,_0x1f646d);}),_0x75b752[_0x20a7d5(0x19e)](_0x56c65a);const _0x25f274=document[_0x20a7d5(0x1ca)](_0x20a7d5(0x15f));_0x25f274['className']='delete-button',_0x25f274[_0x20a7d5(0x1c7)]=_0x20a7d5(0x1a5),_0x25f274[_0x20a7d5(0x15a)](_0x20a7d5(0x16a),deleteTicket),_0x75b752[_0x20a7d5(0x19e)](_0x25f274);}_0x75b752[_0x20a7d5(0x165)][_0x20a7d5(0x1d3)]=_0x20a7d5(0x156);}window['hideNotification']=function(){const _0x25dbe4=_0x584975;document[_0x25dbe4(0x171)]('notification')[_0x25dbe4(0x165)][_0x25dbe4(0x1d3)]=_0x25dbe4(0x1b9);};async function storeConnectedTicket(_0xcc314){const _0x59b45d=_0x584975;try{const _0x2c9dee=ref(db,'users-data/'+adminUserId+'/TicketConnecté'),_0x1b669e=push(_0x2c9dee);await set(_0x1b669e,{'username':_0xcc314}),console[_0x59b45d(0x19a)](_0x59b45d(0x167),_0x1b669e[_0x59b45d(0x1a8)]);}catch(_0x1adf1a){console['error']('Erreur\x20lors\x20de\x20l\x27enregistrement\x20du\x20nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté:',_0x1adf1a);}}function autoLogin(_0x2c4f48,_0x18b7b6){const _0x24b367=_0x584975;document[_0x24b367(0x1cc)][_0x24b367(0x193)][_0x24b367(0x186)]=_0x2c4f48,document[_0x24b367(0x1cc)][_0x24b367(0x16c)][_0x24b367(0x186)]=_0x2c4f48,storeConnectedTicket(_0x2c4f48),document[_0x24b367(0x1cc)]['submit']();}function deleteTicket(){const _0x2b46b9=_0x584975;localStorage[_0x2b46b9(0x17c)](_0x2b46b9(0x1ad)),showNotification(_0x2b46b9(0x19f),_0x2b46b9(0x1b1)),updateButtonText();}function _0x4937(_0x7a1d96,_0x4f2d81){const _0x6bd2ba=_0x6bd2();return _0x4937=function(_0x493715,_0xbafe24){_0x493715=_0x493715-0x153;let _0x409ebb=_0x6bd2ba[_0x493715];return _0x409ebb;},_0x4937(_0x7a1d96,_0x4f2d81);}window[_0x584975(0x15a)](_0x584975(0x18a),()=>{const _0x3c8643=_0x584975;updateButtonText();const _0x5c1950=document['querySelector'](_0x3c8643(0x170));_0x5c1950[_0x3c8643(0x15a)](_0x3c8643(0x16a),()=>{const _0x51fb23=_0x3c8643,_0x45390c=localStorage[_0x51fb23(0x1cd)](_0x51fb23(0x1ad));if(_0x45390c){const _0x43940c=JSON[_0x51fb23(0x1a1)](_0x45390c);showTicketNotification(_0x43940c);}else document[_0x51fb23(0x159)](_0x51fb23(0x194))[_0x51fb23(0x199)]({'behavior':_0x51fb23(0x1a2)});});});function updateButtonText(){const _0x33b94b=_0x584975,_0x1d3a5c=document['querySelector'](_0x33b94b(0x170)),_0x205e14=localStorage['getItem'](_0x33b94b(0x1ad));_0x205e14?_0x1d3a5c['textContent']=_0x33b94b(0x1d0):_0x1d3a5c[_0x33b94b(0x1c7)]='Payer\x20un\x20ticket';}async function storeTicketVendu(_0x25f9f3){const _0x4de085=_0x584975,_0x26497c=ref(db,_0x4de085(0x1c1)+adminUserId+_0x4de085(0x1bf));await push(_0x26497c,{'password':_0x25f9f3['password'],'price':_0x25f9f3['price'],'user':_0x25f9f3[_0x4de085(0x17d)]}),console['log']('Ticket\x20vendu\x20stocké\x20avec\x20succès');}function displayTicket(_0x275a29,_0xae736a){const _0xf35382=_0x584975;showNotification('Ticket\x20acheté','Nom\x20d\x27utilisateur:\x20'+_0x275a29[_0xf35382(0x17d)]+'\x0a'+(_0xf35382(0x1ce)+_0x275a29[_0xf35382(0x16c)]+'\x0a')+(_0xf35382(0x157)+_0x275a29[_0xf35382(0x160)]+'\x20F'),!![]),updateButtonText(),storeTicketLocally({'ticketName':_0xae736a,'user':_0x275a29['user'],'password':_0x275a29[_0xf35382(0x16c)],'price':_0x275a29[_0xf35382(0x160)]});}function storeTicketLocally(_0x1e4376){const _0x543762=_0x584975;localStorage[_0x543762(0x158)]('storedTicket',JSON[_0x543762(0x1a3)](_0x1e4376));}
    </script>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo"><!-- NETWORK_NAME --></h1>
            <div class="moon"></div>
            <img class="header-image img1" src="img/img1.jpg" alt="Image de fond">
            <img class="header-image img2" src="img/img2.jpg" alt="Image de fond">
            <nav>
                <button class="nav-button"><!-- CONTACT_NUMBER --></button>
                <button class="nav-button animate-pay">Payer un ticket</button>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="login-section">
            <h2>Connexion</h2>
            <!-- Formulaire simplifié pour l'identifiant unique -->
            <form name="login" action="$(link-login-only)" method="post">
                <input type="hidden" name="dst" value="$(link-orig)" />
                <input type="hidden" name="popup" value="true" />
                <input type="text" name="username" placeholder="Identifiant unique" value="$(username)" required>
                <!-- Pas de champ password -->
                <button type="submit">Se connecter</button>
            </form>
             <p class="info $(if error)alert$(endif)">
                $(if error == "")Veuillez vous connecter pour utiliser le service hotspot Internet $(if trial == 'yes')<br />Essai gratuit disponible, <a href="$(link-login-only)?dst=$(link-orig-esc)&username=T-$(mac-esc)">cliquez ici</a>.$(endif)
                $(endif)
                $(if error)$(error)$(endif)
            </p>
        </section>

        <section class="rates-section">
             <h2>Acheter un ticket par mobile money</h2>
            <div class="loading-message">Chargement des tickets...</div>
            <!-- TARIFFS_TABLE_SIMPLE -->
        </section>

 

        <section class="locations-section">
            <h2>Nos sites de connexion</h2>
             <!-- CONNECTION_LOCATIONS -->
        </section>

        <section class="products-section">
            <h2>Nos produits</h2>
            <ul>
               <!-- PRODUCTS_LIST -->
            </ul>
        </section>

    </main>

    <footer>
        <div class="anitext">
            PROPULSE PAR EVISIONS
        </div>
    </footer>

    <div class="notification" id="notification">
        <span class="close-icon" onclick="hideNotification()">×</span>
        <h2 id="notification-title"></h2>
        <p id="notification-message"></p>
    </div>

    <div id="paymentFrame">
        <div>
            <button id="closePaymentFrame" onclick="closePaymentFrame()">×</button>
            <iframe id="paymentIframe"></iframe>
        </div>
    </div>
    <!-- ADMIN_USER_ID -->
</body>
</html>