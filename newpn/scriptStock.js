const _0x385936=_0x2aa0;(function(_0x81ec36,_0x5ed616){const _0x549b03=_0x2aa0,_0x1aa898=_0x81ec36();while(!![]){try{const _0x9e14f4=-parseInt(_0x549b03(0x11a))/0x1*(parseInt(_0x549b03(0x147))/0x2)+parseInt(_0x549b03(0x12e))/0x3*(parseInt(_0x549b03(0x16d))/0x4)+parseInt(_0x549b03(0x1a0))/0x5+-parseInt(_0x549b03(0x13f))/0x6*(parseInt(_0x549b03(0x120))/0x7)+-parseInt(_0x549b03(0x17d))/0x8*(parseInt(_0x549b03(0x19d))/0x9)+-parseInt(_0x549b03(0x174))/0xa*(-parseInt(_0x549b03(0x1ae))/0xb)+parseInt(_0x549b03(0x199))/0xc;if(_0x9e14f4===_0x5ed616)break;else _0x1aa898['push'](_0x1aa898['shift']());}catch(_0xfef510){_0x1aa898['push'](_0x1aa898['shift']());}}}(_0xa2aa,0x4a39a));const firebaseConfig={'apiKey':_0x385936(0x162),'authDomain':_0x385936(0x189),'databaseURL':_0x385936(0x163),'projectId':'new-pn-wifi-zone','storageBucket':_0x385936(0x17f),'messagingSenderId':_0x385936(0x19f),'appId':_0x385936(0x15a),'measurementId':_0x385936(0x1b7)};firebase[_0x385936(0x13e)](firebaseConfig);const database=firebase[_0x385936(0x136)](),adminRef=database[_0x385936(0x124)](_0x385936(0x141)),loginForm=document[_0x385936(0x108)]('loginForm'),signupForm=document[_0x385936(0x108)](_0x385936(0x140)),loginContainer=document[_0x385936(0x108)](_0x385936(0x132)),signupContainer=document[_0x385936(0x108)](_0x385936(0x1af)),dashboardContainer=document[_0x385936(0x108)](_0x385936(0x18a)),salesForm=document[_0x385936(0x108)](_0x385936(0x12a)),salesTable=document[_0x385936(0x108)]('salesTable'),totalSalesElement=document[_0x385936(0x108)](_0x385936(0x10c)),averageSalesElement=document['getElementById'](_0x385936(0x19a)),userInfoElement=document['getElementById'](_0x385936(0x14d)),toggleAnalysisButton=document[_0x385936(0x108)](_0x385936(0x159)),toggleSalesButton=document[_0x385936(0x108)](_0x385936(0x133)),analysisSection=document[_0x385936(0x108)](_0x385936(0x121)),salesDetailsSection=document['getElementById'](_0x385936(0x146)),signupButton=document[_0x385936(0x108)](_0x385936(0x193)),loginFromSignup=document[_0x385936(0x108)]('loginFromSignup'),productSelect=document[_0x385936(0x108)](_0x385936(0x18b)),stockTableGlobal=document['getElementById'](_0x385936(0x114));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document['getElementById']('dateTime')['value']=new Date()[_0x385936(0x113)]()['slice'](0x0,0x10);function fetchTicketCategories(){const _0x3cca23=_0x385936;database[_0x3cca23(0x124)]('TicketsTotal')[_0x3cca23(0x16b)](_0x3cca23(0x1a8))[_0x3cca23(0x128)](_0xe8a78e=>{ticketCategories=_0xe8a78e['val']()||{},populateProductSelect();});}function populateProductSelect(){const _0x12f0e9=_0x385936;productSelect[_0x12f0e9(0x137)]='<option\x20value=\x22\x22>S√©lectionner\x20un\x20produit</option>';for(const _0x1ec634 in ticketCategories){const _0x1ded26=ticketCategories[_0x1ec634][_0x12f0e9(0x148)][0x0],_0x28cdca=document[_0x12f0e9(0x1b3)](_0x12f0e9(0x183));_0x28cdca['value']=_0x1ec634,_0x28cdca[_0x12f0e9(0x14c)]=_0x1ec634+'\x20('+_0x1ded26+_0x12f0e9(0x144),productSelect[_0x12f0e9(0x10e)](_0x28cdca);}}fetchTicketCategories(),loginForm[_0x385936(0x16c)](_0x385936(0x119),function(_0x1ef4b1){const _0x48e393=_0x385936;_0x1ef4b1[_0x48e393(0x160)]();const _0x2eed14=document[_0x48e393(0x108)](_0x48e393(0x1b2))[_0x48e393(0x1a8)],_0x2ca162=document['getElementById'](_0x48e393(0x112))[_0x48e393(0x1a8)];database[_0x48e393(0x124)]('users/'+_0x2eed14)[_0x48e393(0x16b)](_0x48e393(0x1a8))[_0x48e393(0x128)](_0x6505e6=>{const _0x115d33=_0x48e393;_0x6505e6[_0x115d33(0x1ac)]()?_0x6505e6[_0x115d33(0x169)]()[_0x115d33(0x112)]===_0x2ca162?loginSuccess(_0x2eed14):alert(_0x115d33(0x10d)):alert(_0x115d33(0x134));});}),signupForm['addEventListener'](_0x385936(0x119),function(_0x297ec7){const _0x204fcb=_0x385936;_0x297ec7[_0x204fcb(0x160)]();const _0x4d2b16=document['getElementById'](_0x204fcb(0x187))['value'],_0x396860=document[_0x204fcb(0x108)]('signupPassword')['value'];database[_0x204fcb(0x124)](_0x204fcb(0x10f)+_0x4d2b16)['once'](_0x204fcb(0x1a8))[_0x204fcb(0x128)](_0x2f1ce4=>{const _0x557db2=_0x204fcb;_0x2f1ce4[_0x557db2(0x1ac)]()?alert('Ce\x20nom\x20d\x27utilisateur\x20est\x20d√©j√†\x20utilis√©.'):database['ref'](_0x557db2(0x10f)+_0x4d2b16)[_0x557db2(0x18f)]({'password':_0x396860})[_0x557db2(0x128)](()=>{const _0x49caf2=_0x557db2;alert(_0x49caf2(0x117)),signupContainer['style']['display']=_0x49caf2(0x164),loginContainer['style'][_0x49caf2(0x153)]=_0x49caf2(0x15e);})['catch'](_0xbcce44=>{const _0x13fedc=_0x557db2;console[_0x13fedc(0x178)]('Error\x20creating\x20user:',_0xbcce44),alert('Erreur\x20lors\x20de\x20la\x20cr√©ation\x20du\x20compte');});});}),signupButton['addEventListener'](_0x385936(0x1a3),function(){const _0x5b1ddf=_0x385936;loginContainer['style']['display']=_0x5b1ddf(0x164),signupContainer[_0x5b1ddf(0x111)][_0x5b1ddf(0x153)]=_0x5b1ddf(0x15e);}),loginFromSignup['addEventListener'](_0x385936(0x1a3),function(){const _0x2cd0d3=_0x385936;signupContainer['style'][_0x2cd0d3(0x153)]=_0x2cd0d3(0x164),loginContainer[_0x2cd0d3(0x111)][_0x2cd0d3(0x153)]=_0x2cd0d3(0x15e);});function loginSuccess(_0x1183ae){const _0x249376=_0x385936;currentUser=_0x1183ae,loginContainer[_0x249376(0x111)][_0x249376(0x153)]=_0x249376(0x164),signupContainer[_0x249376(0x111)][_0x249376(0x153)]='none',dashboardContainer[_0x249376(0x111)][_0x249376(0x153)]=_0x249376(0x15e),userInfoElement['textContent']=_0x249376(0x10b)+_0x1183ae,checkSubscriptionStatus()[_0x249376(0x128)](_0x11706e=>{_0x11706e?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x249376(0x1b0)](_0x1f8359=>{const _0x165518=_0x249376;console[_0x165518(0x178)](_0x165518(0x15c),_0x1f8359),alert(_0x165518(0x191));});}function listenForSalesDataChanges(){const _0x45c16e=_0x385936;salesDataListener=database[_0x45c16e(0x124)](_0x45c16e(0x12c)+currentUser)['on'](_0x45c16e(0x1a8),_0xc75d15=>{const _0xbec091=_0x45c16e;salesData=[],_0xc75d15[_0xbec091(0x142)](_0x39ac63=>{const _0x6a9fc9=_0xbec091,_0x23899e=_0x39ac63[_0x6a9fc9(0x169)]();_0x23899e[_0x6a9fc9(0x130)]=_0x39ac63['key'],_0x23899e[_0x6a9fc9(0x14a)]=(_0x23899e['V']*_0x23899e['PV'])[_0x6a9fc9(0x125)](0x2),salesData[_0x6a9fc9(0x172)](_0x23899e);}),analysisSection['style'][_0xbec091(0x153)]===_0xbec091(0x15e)&&updateAnalysis(salesData);});}document[_0x385936(0x108)](_0x385936(0x18b))[_0x385936(0x16c)]('change',function(){const _0x2d35a2=_0x385936,_0x349a84=this[_0x2d35a2(0x1a8)];database[_0x2d35a2(0x124)](_0x2d35a2(0x12c)+currentUser)[_0x2d35a2(0x139)](_0x2d35a2(0x18b))['equalTo'](_0x349a84)[_0x2d35a2(0x15d)](0x1)[_0x2d35a2(0x16b)](_0x2d35a2(0x1a8))['then'](_0x39c4ed=>{const _0x4ae06c=_0x2d35a2;if(_0x39c4ed[_0x4ae06c(0x1ac)]()){const _0x5ace5e=Object[_0x4ae06c(0x192)](_0x39c4ed[_0x4ae06c(0x169)]())[0x0];document[_0x4ae06c(0x108)]('SI')[_0x4ae06c(0x1a8)]=_0x5ace5e['SF']||0x0;}else document[_0x4ae06c(0x108)]('SI')['value']=0x0;}),updatePV();}),document[_0x385936(0x108)]('V')['addEventListener'](_0x385936(0x18c),updateSF),document['getElementById'](_0x385936(0x17e))[_0x385936(0x16c)](_0x385936(0x18c),updateSF);function updateSF(){const _0x3fe775=_0x385936,_0x2c13df=parseInt(document[_0x3fe775(0x108)]('SI')[_0x3fe775(0x1a8)])||0x0,_0xd1ab63=parseInt(document[_0x3fe775(0x108)](_0x3fe775(0x17e))[_0x3fe775(0x1a8)])||0x0,_0x47ed03=parseInt(document[_0x3fe775(0x108)]('V')[_0x3fe775(0x1a8)])||0x0;document['getElementById']('SF')[_0x3fe775(0x1a8)]=_0x2c13df+_0xd1ab63-_0x47ed03;}function updatePV(){const _0x375006=_0x385936,_0x65c6b4=document[_0x375006(0x108)](_0x375006(0x18b))[_0x375006(0x1a8)],_0x514331=ticketCategories[_0x65c6b4]?.[_0x375006(0x148)][0x0];document[_0x375006(0x108)]('PV')['value']=_0x514331||0x0;}salesForm[_0x385936(0x16c)](_0x385936(0x119),function(_0x213407){const _0x69d929=_0x385936;_0x213407[_0x69d929(0x160)]();const _0x135785={'dateTime':document[_0x69d929(0x108)](_0x69d929(0x156))[_0x69d929(0x1a8)],'product':document[_0x69d929(0x108)](_0x69d929(0x18b))[_0x69d929(0x1a8)],'SI':parseInt(document[_0x69d929(0x108)]('SI')[_0x69d929(0x1a8)])||0x0,'APP':parseInt(document[_0x69d929(0x108)](_0x69d929(0x17e))[_0x69d929(0x1a8)])||0x0,'V':parseInt(document[_0x69d929(0x108)]('V')[_0x69d929(0x1a8)])||0x0,'SF':parseInt(document[_0x69d929(0x108)]('SF')[_0x69d929(0x1a8)])||0x0,'PV':parseFloat(document['getElementById']('PV')[_0x69d929(0x1a8)])||0x0};database[_0x69d929(0x124)](_0x69d929(0x12c)+currentUser)[_0x69d929(0x172)](_0x135785)[_0x69d929(0x128)](()=>{const _0x4bf3d8=_0x69d929;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x4bf3d8(0x165)](),document[_0x4bf3d8(0x108)](_0x4bf3d8(0x156))[_0x4bf3d8(0x1a8)]=new Date()['toISOString']()['slice'](0x0,0x10);})[_0x69d929(0x1b0)](_0x3a3350=>{const _0x391501=_0x69d929;console['error']('Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e\x20:',_0x3a3350),alert(_0x391501(0x19c));});});function updateTable(){const _0x18dfc2=_0x385936,_0x525d05=salesTable[_0x18dfc2(0x170)](_0x18dfc2(0x1b1));_0x525d05[_0x18dfc2(0x137)]='',database[_0x18dfc2(0x124)]('sales/'+currentUser)[_0x18dfc2(0x16b)](_0x18dfc2(0x1a8))['then'](_0x208c4e=>{salesData=[],_0x208c4e['forEach'](_0x52b7d5=>{const _0xb2ed06=_0x2aa0,_0x14041a=_0x52b7d5[_0xb2ed06(0x169)]();_0x14041a['total']=(_0x14041a['V']*_0x14041a['PV'])[_0xb2ed06(0x125)](0x2),salesData['push'](_0x14041a);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0xf3f3c6=_0x385936,_0x1427db=document[_0xf3f3c6(0x108)](_0xf3f3c6(0x114));_0x1427db[_0xf3f3c6(0x170)](_0xf3f3c6(0x1b1))['innerHTML']='',database['ref'](_0xf3f3c6(0x12c)+currentUser)[_0xf3f3c6(0x16b)](_0xf3f3c6(0x1a8))[_0xf3f3c6(0x128)](_0x2e1d94=>{const _0x1ec59c=_0xf3f3c6,_0x398ea0={};_0x2e1d94[_0x1ec59c(0x142)](_0x55d58c=>{const _0x3d0527=_0x1ec59c,_0x2b1d8b=_0x55d58c['val']();(!_0x398ea0[_0x2b1d8b[_0x3d0527(0x18b)]]||new Date(_0x2b1d8b[_0x3d0527(0x156)])>new Date(_0x398ea0[_0x2b1d8b[_0x3d0527(0x18b)]]['dateTime']))&&(_0x398ea0[_0x2b1d8b[_0x3d0527(0x18b)]]=_0x2b1d8b);}),Object[_0x1ec59c(0x192)](_0x398ea0)[_0x1ec59c(0x142)](_0x4ebac9=>{const _0x5701e3=_0x1ec59c,_0x48c0af=_0x1427db[_0x5701e3(0x170)](_0x5701e3(0x1b1))['insertRow']();_0x48c0af[_0x5701e3(0x1ab)](0x0)[_0x5701e3(0x14c)]=_0x4ebac9['product'],_0x48c0af['insertCell'](0x1)['textContent']=_0x4ebac9['SF'],_0x48c0af[_0x5701e3(0x1ab)](0x2)[_0x5701e3(0x14c)]=new Date(_0x4ebac9[_0x5701e3(0x156)])[_0x5701e3(0x1a2)]();}),setupSort(_0x1427db);});}function exportToExcel(){const _0x8b0a9c=_0x385936,_0xded909=XLSX['utils'][_0x8b0a9c(0x123)](),_0x464231=XLSX[_0x8b0a9c(0x1a1)][_0x8b0a9c(0x109)](document[_0x8b0a9c(0x108)]('salesTable'));XLSX[_0x8b0a9c(0x1a1)][_0x8b0a9c(0x1a9)](_0xded909,_0x464231,_0x8b0a9c(0x157)),XLSX['writeFile'](_0xded909,_0x8b0a9c(0x168));}document[_0x385936(0x108)](_0x385936(0x16a))[_0x385936(0x16c)](_0x385936(0x1a3),exportToExcel);function deleteEntry(_0x3b21d1){const _0x15cd1d=_0x385936;database[_0x15cd1d(0x124)](_0x15cd1d(0x12c)+currentUser+'/'+_0x3b21d1)['once']('value')[_0x15cd1d(0x128)](_0x4fedda=>{const _0x26bc0=_0x15cd1d,_0x11bed8=_0x4fedda[_0x26bc0(0x169)]();return database[_0x26bc0(0x124)]('sales/'+currentUser+'/'+_0x3b21d1)[_0x26bc0(0x107)]()[_0x26bc0(0x128)](()=>{const _0x2fc001=_0x26bc0;return console[_0x2fc001(0x19b)](_0x2fc001(0x13a)),updateStockAfterDeletion(_0x11bed8);});})[_0x15cd1d(0x128)](()=>{return updateTable();})['then'](()=>{updateStockTables(),updateAnalysis();})[_0x15cd1d(0x1b0)](_0x1166b7=>{const _0x3108c8=_0x15cd1d;console['error'](_0x3108c8(0x12b),_0x1166b7);});}function updateStockAfterDeletion(_0x50cf66){const _0x35d469=_0x385936;return database[_0x35d469(0x124)](_0x35d469(0x12c)+currentUser)[_0x35d469(0x139)](_0x35d469(0x156))[_0x35d469(0x17c)](_0x50cf66['dateTime'])[_0x35d469(0x15d)](0x2)[_0x35d469(0x16b)]('value')['then'](_0x41cad6=>{const _0x4d493a=_0x35d469;let _0x507085=[];_0x41cad6[_0x4d493a(0x142)](_0x40194f=>{const _0x386c0f=_0x4d493a;_0x507085[_0x386c0f(0x172)]({'key':_0x40194f[_0x386c0f(0x130)],..._0x40194f[_0x386c0f(0x169)]()});}),_0x507085['sort']((_0x2e47af,_0x3a2f9e)=>new Date(_0x3a2f9e[_0x4d493a(0x156)])-new Date(_0x2e47af[_0x4d493a(0x156)]));if(_0x507085[_0x4d493a(0x118)]>0x1&&_0x507085[0x0][_0x4d493a(0x130)]!==_0x50cf66[_0x4d493a(0x130)]){const _0x5c3c31=_0x507085[0x1],_0x980e80=_0x5c3c31['SF']+_0x50cf66['V']-_0x50cf66[_0x4d493a(0x17e)];return database[_0x4d493a(0x124)](_0x4d493a(0x12c)+currentUser+'/'+_0x5c3c31[_0x4d493a(0x130)])['update']({'SF':_0x980e80});}return Promise[_0x4d493a(0x155)]();});}function _0xa2aa(){const _0xaa7bd3=['Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement.','values','signupButton','location','add','filter','endDate','tbody\x20tr','10572792ehTdcQ','averageSales','log','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e.','8361fIunPj','\x20FCFA','529579072614','552190ZPdZQO','utils','toLocaleString','click','getContext','toLowerCase','DOMContentLoaded','Activer\x20le\x20mode\x20clair','value','book_append_sheet','insertRow','insertCell','exists','toUpperCase','11dZPgCR','signupContainer','catch','tbody','username','createElement','body','active','filterSalesDates','G-QHHRCPSL2Y','remove','getElementById','table_to_sheet','Masquer\x20le\x20d√©tail\x20des\x20ventes','Utilisateur:\x20','totalSales','Mot\x20de\x20passe\x20incorrect','appendChild','users/','every','style','password','toISOString','stockTableGlobal','href','expired','Inscription\x20r√©ussie\x20!\x20Connectez-vous.','length','submit','2521ZgJuEj','Total\x20des\x20ventes:\x20','getItem','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>√ätes-vous\x20s√ªr\x20de\x20vouloir\x20supprimer\x20cette\x20entr√©e\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','light-theme','setItem','7SMAYWw','analysisSection','labels','book_new','ref','toFixed','stopPropagation','keys','then','cancelDelete','salesForm','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entr√©e:','sales/','week','256773LiKUXZ','AverageSales','key','querySelectorAll','loginContainer','toggleSalesButton','Utilisateur\x20introuvable','aria-label','database','innerHTML','dataset','orderByChild','Entr√©e\x20supprim√©e\x20avec\x20succ√®s','rgba(255,\x20255,\x20255,\x200.1)','charAt','div','initializeApp','2039106CwBcfR','signupForm','admin/subscription','forEach','theme-toggle','\x20FCFA)','prices','salesDetailsSection','468YyOUlB','prix','salesEndDate','total','subscriptionRequiredModal','textContent','userInfo','sort','th[data-sort]','TotalSales','month','index.html','display','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','resolve','dateTime','Ventes','D√©tail\x20des\x20ventes','toggleAnalysisButton','1:529579072614:web:d6e9ed512df3fa18a0a1a7','Prix\x20de\x20vente','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement\x20:','limitToLast','block','salesTable','preventDefault','onclick','AIzaSyDRxNGo2d_WBZJW21I5DdFWXCIOmN4iP3o','https://new-pn-wifi-zone-default-rtdb.firebaseio.com','none','reset','true','darkTheme','ventes_wifi_zone.xlsx','val','exportExcel','once','addEventListener','12jdtQPK','td:first-child','slice','querySelector','status','push','setAttribute','2892970EeDpYk','Activer\x20le\x20mode\x20sombre','confirmDelete','includes','error','classList','className','stockEndDate','endAt','2616jaUWZN','APP','new-pn-wifi-zone.firebasestorage.app','Masquer\x20l\x27analyse\x20des\x20ventes','update','rgb(255,\x2099,\x20132)','option','line','sales','Analyse\x20des\x20ventes','signupUsername','destroy','new-pn-wifi-zone.firebaseapp.com','dashboardContainer','product','input','getTime','stockStartDate','set','rgb(0,\x20255,\x20255)'];_0xa2aa=function(){return _0xaa7bd3;};return _0xa2aa();}function _0x2aa0(_0xf90b07,_0x348c4b){const _0xa2aad5=_0xa2aa();return _0x2aa0=function(_0x2aa01d,_0x15e5d3){_0x2aa01d=_0x2aa01d-0x107;let _0x2e4ed3=_0xa2aad5[_0x2aa01d];return _0x2e4ed3;},_0x2aa0(_0xf90b07,_0x348c4b);}function updateTable(){const _0x336e8a=_0x385936;return database[_0x336e8a(0x124)]('sales/'+currentUser)[_0x336e8a(0x16b)](_0x336e8a(0x1a8))[_0x336e8a(0x128)](_0x2d47f8=>{const _0x5e1845=_0x336e8a;salesData=[],_0x2d47f8[_0x5e1845(0x142)](_0x5ddb8e=>{const _0x3b0b18=_0x5e1845,_0x50b36e=_0x5ddb8e[_0x3b0b18(0x169)]();_0x50b36e[_0x3b0b18(0x130)]=_0x5ddb8e[_0x3b0b18(0x130)],_0x50b36e[_0x3b0b18(0x14a)]=(_0x50b36e['V']*_0x50b36e['PV'])['toFixed'](0x2),salesData[_0x3b0b18(0x172)](_0x50b36e);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x46ff8e){const _0x5b88b3=_0x385936,_0x32ac84=salesTable[_0x5b88b3(0x170)](_0x5b88b3(0x1b1));_0x32ac84[_0x5b88b3(0x137)]='',_0x46ff8e['forEach'](_0x5da94e=>{const _0x54a4ef=_0x5b88b3,_0x54383a=_0x32ac84[_0x54a4ef(0x1aa)]();_0x54383a[_0x54a4ef(0x138)]['key']=_0x5da94e['key'],_0x54383a[_0x54a4ef(0x1ab)](0x0)[_0x54a4ef(0x14c)]=new Date(_0x5da94e[_0x54a4ef(0x156)])['toLocaleString'](),_0x54383a[_0x54a4ef(0x1ab)](0x1)[_0x54a4ef(0x14c)]=_0x5da94e[_0x54a4ef(0x18b)],_0x54383a[_0x54a4ef(0x1ab)](0x2)[_0x54a4ef(0x14c)]=_0x5da94e['SI'],_0x54383a['insertCell'](0x3)[_0x54a4ef(0x14c)]=_0x5da94e['APP'],_0x54383a[_0x54a4ef(0x1ab)](0x4)[_0x54a4ef(0x14c)]=_0x5da94e['V'],_0x54383a[_0x54a4ef(0x1ab)](0x5)['textContent']=_0x5da94e['SF'],_0x54383a[_0x54a4ef(0x1ab)](0x6)[_0x54a4ef(0x14c)]=_0x5da94e['PV'],_0x54383a['insertCell'](0x7)['textContent']=_0x5da94e[_0x54a4ef(0x14a)];}),addDeleteIcons();}function addDeleteIcons(){const _0x51c17b=_0x385936,_0x41858b=salesTable[_0x51c17b(0x131)](_0x51c17b(0x198));_0x41858b[_0x51c17b(0x142)](_0x4bb773=>{const _0x196d8a=_0x51c17b,_0x31adc3=document[_0x196d8a(0x1b3)]('span');_0x31adc3[_0x196d8a(0x137)]='‚úñ',_0x31adc3['className']='delete-icon',_0x31adc3[_0x196d8a(0x161)]=_0x4a3862=>{const _0x39beee=_0x196d8a;_0x4a3862[_0x39beee(0x126)](),showConfirmDialog(_0x4bb773[_0x39beee(0x138)][_0x39beee(0x130)]);},_0x4bb773[_0x196d8a(0x170)](_0x196d8a(0x16e))['appendChild'](_0x31adc3);});}function showConfirmDialog(_0x3c9301){const _0x21c63e=_0x385936,_0x173cb9=document[_0x21c63e(0x1b3)](_0x21c63e(0x13d));_0x173cb9[_0x21c63e(0x17a)]='confirm-dialog',_0x173cb9['innerHTML']=_0x21c63e(0x11d),document[_0x21c63e(0x1b4)][_0x21c63e(0x10e)](_0x173cb9),document[_0x21c63e(0x108)](_0x21c63e(0x176))[_0x21c63e(0x161)]=()=>{const _0x31b0f7=_0x21c63e;deleteEntry(_0x3c9301),document[_0x31b0f7(0x1b4)]['removeChild'](_0x173cb9);},document[_0x21c63e(0x108)](_0x21c63e(0x129))[_0x21c63e(0x161)]=()=>{const _0x710122=_0x21c63e;document[_0x710122(0x1b4)]['removeChild'](_0x173cb9);};}function setupSearch(){const _0x1ffef0=_0x385936,_0x3576fc=document[_0x1ffef0(0x131)]('#searchInputs\x20input');_0x3576fc[_0x1ffef0(0x142)](_0x1b9dbe=>{const _0xba4f83=_0x1ffef0;_0x1b9dbe[_0xba4f83(0x16c)](_0xba4f83(0x18c),()=>{const _0x3aab29=salesData['filter'](_0x25f6af=>{const _0x1b5bb8=_0x2aa0;return Object[_0x1b5bb8(0x127)](_0x25f6af)[_0x1b5bb8(0x110)](_0x34f592=>{const _0x99d2f7=_0x1b5bb8,_0xbc3e08=document['getElementById']('search'+(_0x34f592[_0x99d2f7(0x13c)](0x0)[_0x99d2f7(0x1ad)]()+_0x34f592[_0x99d2f7(0x16f)](0x1)))?.[_0x99d2f7(0x1a8)][_0x99d2f7(0x1a5)]()||'';return _0x25f6af[_0x34f592]['toString']()['toLowerCase']()[_0x99d2f7(0x177)](_0xbc3e08);});});renderTable(_0x3aab29),updateAnalysis(_0x3aab29);});});}function setupSort(_0x295b98){const _0x4f5b86=_0x385936,_0xac39d8=_0x295b98[_0x4f5b86(0x131)](_0x4f5b86(0x14f));_0xac39d8[_0x4f5b86(0x142)](_0x262093=>{const _0x1cb113=_0x4f5b86;_0x262093[_0x1cb113(0x16c)]('click',()=>{const _0x1984b6=_0x1cb113,_0x3c7c60=_0x262093[_0x1984b6(0x138)][_0x1984b6(0x14e)],_0xa2cce6=_0x295b98['id']==='salesTable'?salesData:stockData;_0xa2cce6[_0x1984b6(0x14e)]((_0x3bf7b5,_0x34a429)=>{if(_0x3bf7b5[_0x3c7c60]<_0x34a429[_0x3c7c60])return-0x1;if(_0x3bf7b5[_0x3c7c60]>_0x34a429[_0x3c7c60])return 0x1;return 0x0;}),_0x295b98['id']===_0x1984b6(0x15f)?(renderTable(_0xa2cce6),updateAnalysis(_0xa2cce6)):renderStockTable(_0xa2cce6,_0x295b98);});});}function renderStockTable(_0x556f79,_0x264209){const _0x2ec780=_0x385936,_0x23a689=_0x264209[_0x2ec780(0x170)]('tbody');_0x23a689[_0x2ec780(0x137)]='',_0x556f79[_0x2ec780(0x142)](_0x1fa713=>{const _0x162be3=_0x2ec780,_0x2ad48e=_0x23a689[_0x162be3(0x1aa)]();_0x2ad48e[_0x162be3(0x1ab)](0x0)[_0x162be3(0x14c)]=_0x1fa713['product'],_0x2ad48e[_0x162be3(0x1ab)](0x1)[_0x162be3(0x14c)]=_0x1fa713['SF'],_0x2ad48e[_0x162be3(0x1ab)](0x2)[_0x162be3(0x14c)]=new Date(_0x1fa713[_0x162be3(0x156)])[_0x162be3(0x1a2)]();});}function updateAnalysis(_0x59540e=salesData){const _0x488d0=_0x385936;let _0x2654b5=0x0,_0x4db066=0x0;const _0x4ba1c6={'labels':[],'sales':[],'prices':[]};_0x59540e[_0x488d0(0x142)](_0x15c476=>{const _0x3b5e88=_0x488d0;_0x2654b5+=_0x15c476['V']*_0x15c476['PV'],_0x4db066++,_0x4ba1c6[_0x3b5e88(0x122)][_0x3b5e88(0x172)](new Date(_0x15c476[_0x3b5e88(0x156)])['toLocaleString']()),_0x4ba1c6[_0x3b5e88(0x185)][_0x3b5e88(0x172)](_0x15c476['V']),_0x4ba1c6[_0x3b5e88(0x145)][_0x3b5e88(0x172)](_0x15c476['PV']);});const _0x32ea88=_0x2654b5/_0x4db066||0x0;totalSalesElement['textContent']=_0x488d0(0x11b)+_0x2654b5[_0x488d0(0x125)](0x2)+'\x20FCFA',averageSalesElement[_0x488d0(0x14c)]=_0x488d0(0x154)+_0x32ea88[_0x488d0(0x125)](0x2)+_0x488d0(0x19e),updateChart(_0x4ba1c6),updatePeriodAnalysis(_0x59540e);}function updateChart(_0x34bfdd){const _0x424f4d=_0x385936,_0x6a6673=document['getElementById']('salesChart')[_0x424f4d(0x1a4)]('2d');salesChart&&salesChart[_0x424f4d(0x188)](),salesChart=new Chart(_0x6a6673,{'type':_0x424f4d(0x184),'data':{'labels':_0x34bfdd['labels'],'datasets':[{'label':'Ventes','data':_0x34bfdd['sales'],'borderColor':_0x424f4d(0x190),'tension':0.1},{'label':_0x424f4d(0x15b),'data':_0x34bfdd['prices'],'borderColor':_0x424f4d(0x182),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':_0x424f4d(0x13b)},'ticks':{'color':_0x424f4d(0x190)}},'x':{'grid':{'color':_0x424f4d(0x13b)},'ticks':{'color':_0x424f4d(0x190)}}},'plugins':{'legend':{'labels':{'color':_0x424f4d(0x190)}}}}});}function updatePeriodAnalysis(_0x17f2b2){const _0x539bc4=_0x385936,_0x6b8724=new Date(),_0x5ea136=new Date(_0x6b8724['getTime']()-0x7*0x18*0x3c*0x3c*0x3e8),_0x260a60=new Date(_0x6b8724[_0x539bc4(0x18d)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x799062=new Date(_0x6b8724[_0x539bc4(0x18d)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0xd88241=_0x17f2b2[_0x539bc4(0x196)](_0x7e2bbf=>new Date(_0x7e2bbf[_0x539bc4(0x156)])>=_0x5ea136),_0x46b714=_0x17f2b2[_0x539bc4(0x196)](_0xf5fbba=>new Date(_0xf5fbba[_0x539bc4(0x156)])>=_0x260a60),_0x25f98b=_0x17f2b2[_0x539bc4(0x196)](_0xd9bfa0=>new Date(_0xd9bfa0[_0x539bc4(0x156)])>=_0x799062);updatePeriodStats(_0xd88241,_0x539bc4(0x12d)),updatePeriodStats(_0x46b714,_0x539bc4(0x151)),updatePeriodStats(_0x25f98b,'threeMonth');}function updatePeriodStats(_0x5db798,_0x1fee76){const _0x3226ff=_0x385936,_0x4f2b76=_0x5db798['reduce']((_0x419413,_0x4ffeb8)=>_0x419413+_0x4ffeb8['V']*_0x4ffeb8['PV'],0x0),_0x281b1c=_0x4f2b76/_0x5db798['length']||0x0;document[_0x3226ff(0x108)](_0x1fee76+_0x3226ff(0x150))[_0x3226ff(0x14c)]=_0x3226ff(0x11b)+_0x4f2b76[_0x3226ff(0x125)](0x2)+'\x20FCFA',document[_0x3226ff(0x108)](_0x1fee76+_0x3226ff(0x12f))['textContent']=_0x3226ff(0x154)+_0x281b1c[_0x3226ff(0x125)](0x2)+'\x20FCFA';}toggleAnalysisButton[_0x385936(0x16c)]('click',function(){const _0x3c3324=_0x385936;analysisSection[_0x3c3324(0x111)][_0x3c3324(0x153)]===_0x3c3324(0x164)||analysisSection[_0x3c3324(0x111)][_0x3c3324(0x153)]===''?(analysisSection[_0x3c3324(0x111)][_0x3c3324(0x153)]='block',salesDetailsSection[_0x3c3324(0x111)]['display']=_0x3c3324(0x164),this[_0x3c3324(0x14c)]=_0x3c3324(0x180),toggleSalesButton[_0x3c3324(0x14c)]=_0x3c3324(0x158),updateAnalysis(salesData)):(analysisSection[_0x3c3324(0x111)][_0x3c3324(0x153)]=_0x3c3324(0x164),this[_0x3c3324(0x14c)]=_0x3c3324(0x186));}),toggleSalesButton['addEventListener'](_0x385936(0x1a3),function(){const _0x57546f=_0x385936;salesDetailsSection[_0x57546f(0x111)][_0x57546f(0x153)]===_0x57546f(0x164)||salesDetailsSection['style'][_0x57546f(0x153)]===''?(salesDetailsSection[_0x57546f(0x111)]['display']=_0x57546f(0x15e),analysisSection[_0x57546f(0x111)][_0x57546f(0x153)]='none',this['textContent']=_0x57546f(0x10a),toggleAnalysisButton[_0x57546f(0x14c)]=_0x57546f(0x186)):(salesDetailsSection[_0x57546f(0x111)][_0x57546f(0x153)]='none',this[_0x57546f(0x14c)]=_0x57546f(0x158));});const themeToggle=document[_0x385936(0x108)](_0x385936(0x143)),root=document['documentElement'];let isDarkTheme=!![];function setTheme(_0x588696){const _0x50eefa=_0x385936;_0x588696?(root['classList'][_0x50eefa(0x107)](_0x50eefa(0x11e)),themeToggle[_0x50eefa(0x14c)]='üåô',themeToggle['setAttribute'](_0x50eefa(0x135),_0x50eefa(0x1a7))):(root[_0x50eefa(0x179)][_0x50eefa(0x195)](_0x50eefa(0x11e)),themeToggle[_0x50eefa(0x14c)]='‚òÄÔ∏è',themeToggle[_0x50eefa(0x173)](_0x50eefa(0x135),_0x50eefa(0x175))),isDarkTheme=_0x588696,localStorage[_0x50eefa(0x11f)](_0x50eefa(0x167),_0x588696);}themeToggle[_0x385936(0x16c)]('click',()=>{setTheme(!isDarkTheme);}),document[_0x385936(0x16c)](_0x385936(0x1a6),()=>{const _0x12281c=_0x385936,_0x51ed89=localStorage[_0x12281c(0x11c)](_0x12281c(0x167));_0x51ed89!==null?setTheme(_0x51ed89===_0x12281c(0x166)):setTheme(![]);}),document[_0x385936(0x108)]('filterStockDates')[_0x385936(0x16c)](_0x385936(0x1a3),function(){const _0x50437d=_0x385936,_0x164b7b=new Date(document[_0x50437d(0x108)](_0x50437d(0x18e))[_0x50437d(0x1a8)]),_0x11cc33=new Date(document[_0x50437d(0x108)](_0x50437d(0x17b))[_0x50437d(0x1a8)]);updateStockTables(_0x164b7b,_0x11cc33);}),document[_0x385936(0x108)](_0x385936(0x1b6))[_0x385936(0x16c)]('click',function(){const _0x4965ff=_0x385936,_0x335e2d=new Date(document['getElementById']('salesStartDate')[_0x4965ff(0x1a8)]),_0x29fdd4=new Date(document['getElementById'](_0x4965ff(0x149))[_0x4965ff(0x1a8)]),_0x3ef241=salesData[_0x4965ff(0x196)](_0xd9519c=>{const _0x78195=_0x4965ff,_0xa42ca1=new Date(_0xd9519c[_0x78195(0x156)]);return(!_0x335e2d||_0xa42ca1>=_0x335e2d)&&(!_0x29fdd4||_0xa42ca1<=_0x29fdd4);});renderTable(_0x3ef241),updateAnalysis(_0x3ef241);});function updateStockTables(_0x288890,_0x55a2d6){const _0x4ab0af=_0x385936,_0x59af68=document['getElementById']('stockTableGlobal');_0x59af68[_0x4ab0af(0x170)](_0x4ab0af(0x1b1))[_0x4ab0af(0x137)]='',database[_0x4ab0af(0x124)](_0x4ab0af(0x12c)+currentUser)[_0x4ab0af(0x16b)](_0x4ab0af(0x1a8))['then'](_0x2e230a=>{const _0x26b860=_0x4ab0af,_0x2555e7={};_0x2e230a[_0x26b860(0x142)](_0x12d368=>{const _0x55686a=_0x26b860,_0xf0d654=_0x12d368[_0x55686a(0x169)](),_0x1408ee=new Date(_0xf0d654['dateTime']);(!_0x288890||_0x1408ee>=_0x288890)&&(!_0x55a2d6||_0x1408ee<=_0x55a2d6)&&((!_0x2555e7[_0xf0d654[_0x55686a(0x18b)]]||_0x1408ee>new Date(_0x2555e7[_0xf0d654['product']][_0x55686a(0x156)]))&&(_0x2555e7[_0xf0d654[_0x55686a(0x18b)]]=_0xf0d654));}),Object[_0x26b860(0x192)](_0x2555e7)[_0x26b860(0x142)](_0xf16876=>{const _0x19fd4a=_0x26b860,_0x1e63c9=_0x59af68[_0x19fd4a(0x170)](_0x19fd4a(0x1b1))[_0x19fd4a(0x1aa)]();_0x1e63c9[_0x19fd4a(0x1ab)](0x0)[_0x19fd4a(0x14c)]=_0xf16876[_0x19fd4a(0x18b)],_0x1e63c9[_0x19fd4a(0x1ab)](0x1)[_0x19fd4a(0x14c)]=_0xf16876['SF'],_0x1e63c9[_0x19fd4a(0x1ab)](0x2)[_0x19fd4a(0x14c)]=new Date(_0xf16876['dateTime'])['toLocaleString']();}),setupSort(_0x59af68);});}function showSubscriptionRequiredModal(){const _0x14811d=_0x385936;document[_0x14811d(0x108)](_0x14811d(0x14b))['style']['display']='flex';}function hideSubscriptionRequiredModal(){const _0x175948=_0x385936;document['getElementById']('subscriptionRequiredModal')[_0x175948(0x111)][_0x175948(0x153)]=_0x175948(0x164);}function redirectToSubscription(){const _0x3081e9=_0x385936;window[_0x3081e9(0x194)][_0x3081e9(0x115)]=_0x3081e9(0x152);}async function checkSubscriptionStatus(){const _0x1e9243=_0x385936;try{const _0x1bad9c=await adminRef[_0x1e9243(0x16b)](_0x1e9243(0x1a8)),_0x17c8ed=_0x1bad9c[_0x1e9243(0x169)](),_0x7610fb=new Date();if(_0x17c8ed&&_0x17c8ed[_0x1e9243(0x171)]===_0x1e9243(0x1b5)){const _0x19bccc=new Date(_0x17c8ed[_0x1e9243(0x197)]);return _0x19bccc>=_0x7610fb?!![]:(await adminRef[_0x1e9243(0x181)]({'status':_0x1e9243(0x116)}),![]);}else return![];}catch(_0x36b68e){console[_0x1e9243(0x178)](_0x1e9243(0x15c),_0x36b68e);throw _0x36b68e;}}updateTable(),updateStockTables(),analysisSection[_0x385936(0x111)]['display']=_0x385936(0x164),salesDetailsSection[_0x385936(0x111)]['display']=_0x385936(0x164),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x385936(0x11c)](_0x385936(0x167));savedTheme!==null&&setTheme(savedTheme===_0x385936(0x166));