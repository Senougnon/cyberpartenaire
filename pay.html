<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paiement Cyber Campus</title>
    <!--  Le même CSS que login.html et log.html -->
    <style>
        /* ... (Le CSS de login.html/log.html, copié ici) ... */
                        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #36ff03, #1900ff, #a7ff03);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }

        header {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .header-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .img1 {
            animation: slide1 10s linear infinite;
        }

        .img2 {
            animation: slide2 10s linear infinite;
        }

        .logo {
            font-size: 2.5em;
            color: white;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }

        .logo::before {
            content: '';
            font-size: 0.8em;
            margin-right: 10px;
            animation: rotate 5s linear infinite;
            display: inline-block;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .moon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: wrap;
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 150px;
            text-align: center;
            margin: 5px;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background-color: rgb(0, 0, 0);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .nav-button:hover::before {
            width: 300px;
            height: 300px;
        }

        @keyframes buttonPulse {
            0% { background-color: #020202; color: #ffffff; }
            50% { background-color: #1a2a6c; color: #c8ff00; }
            100% { background-color: #000000; color: #ffffff; }
        }

        .nav-button.animate-pay {
            animation: buttonPulse 3s ease-in-out infinite;
        }

        @keyframes textChange {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        main {
            display: flex;
            flex-direction: column;
            padding: 20px 10px;
            gap: 20px;
            flex: 1;
        }

        .login-section,
        .rates-section,
        .locations-section,
        .products-section {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        section:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .login-section {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        h2 {
            color: rgb(0, 0, 0);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #fdbb2d;
            transition: width 0.3s;
        }

        section:hover h2::after {
            width: 100%;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input {
            margin-bottom: 10px;
            padding: 12px;
            border: none;
            border-radius: 25px;
            background-color: rgb(255, 253, 250);
            color: rgb(0, 0, 0);
            transition: background-color 0.3s;
        }

        input:focus {
            background-color: rgba(255, 255, 255, 0.3);
            outline: none;
        }

        button {
            background-color: #000000;
            color: #ffffff;
            border: none;
            padding: 10px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        button:hover {
            background-color: #1a2a6c;
            color: #fdbb2d;
        }

        .rates-section {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .rates-section table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 10px 0;
        }

        .rates-section th,
        .rates-section td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .rates-section th:first-child,
        .rates-section td:first-child {
            padding-left: 20px;
        }

        .rates-section th:last-child,
        .rates-section td:last-child {
            padding-right: 20px;
        }

        .rates-section .loading-message {
            text-align: center;
            padding: 20px;
        }

        ul {
            list-style-type: none;
        }

        li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 20px;
        }

        li::before {
            content: '➤';
            position: absolute;
            left: 0;
            color: #fdbb2d;
        }

        footer {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 15px;
            text-align: center;
            margin-top: auto;
        }

        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
            color: #1a2a6c;
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        .notification h2 {
            color: #1a2a6c;
            margin-bottom: 20px;
        }

        .notification p {
            margin-bottom: 15px;
        }

        .close-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
        }

        .notification .ticket-info {
            margin-bottom: 15px;
            text-align: left;
        }

        .notification .ticket-info p {
            margin-bottom: 5px;
        }

        .notification .login-button,
        .notification .delete-button {
            display: inline-block;
            margin: 0 10px;
        }

        .notification .login-button {
            background-color: #fdbb2d;
            color: #1a2a6c;
        }

        .delete-button {
            background-color: #f44336;
            color: white;
        }

        .delete-button:hover {
            background-color: #d32f2f;
        }

        .notification.error {
            background-color: #fdd;
            border: 1px solid #faa;
            color: #f00;
        }

        /* Footer Popup Styles */
        .footer-popup {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translate(-50%, 200%);
            width: 95%;
            max-width: 600px;
            padding: 2rem;
            border-radius: 25px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, rgba(129, 0, 0, 0.95) 0%, rgba(0, 60, 150, 0.95) 100%);
            backdrop-filter: blur(10px);
            color: white;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3),
                        0 0 20px rgba(0, 89, 255, 0.3),
                        inset 0 0 60px rgba(0, 89, 255, 0.1);
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-popup.show {
            transform: translate(-50%, 0);
            opacity: 1;
        }

        .footer-popup .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        /* Animations */
        @keyframes slide1 {
            0% { transform: translateX(0); }
            50% { transform: translateX(-100%); }
            100% { transform: translateX(0); }
        }

        @keyframes slide2 {
            0% { transform: translateX(100%); }
            50% { transform: translateX(0); }
            100% { transform: translateX(100%); }
        }

        /* Media Queries */
        @media screen and (max-width: 768px) {
            .container {
                padding: 5px;
            }

            .logo {
                font-size: 2em;
            }

            nav {
                flex-direction: column;
                padding: 0 15px;
            }

            .nav-button {
                width: 100%;
                margin: 5px 0;
            }

            main {
                padding: 10px 5px;
            }

            .login-section,
            .rates-section,
            .locations-section,
            .products-section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .rates-section {
                margin: 0 -5px;
                width: calc(100% + 10px);
                border-radius: 0;
            }

            .rates-section table {
                font-size: 14px;
            }

            .rates-section th,
            .rates-section td {
                padding: 8px;
            }

            .footer-popup {
                width: 92%;
                padding: 1.5rem;
            }
        }

        @media screen and (max-width: 480px) {
            .logo {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.2em;
            }

            .rates-section th,
            .rates-section td {
                padding: 6px;
                font-size: 12px;
            }

            .notification {
                width: 95%;
                padding: 15px;
            }
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 0 10px;
            flex-wrap: nowrap; /* Empêche le retour à la ligne */
        }

        .nav-button {
            background-color: rgba(0, 0, 0, 0.952);
            color: rgb(255, 255, 255);
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            width: auto;
            min-width: 0; /* Supprime la largeur minimale */
            text-align: center;
            margin: 5px;
            white-space: nowrap; /* Empêche le texte de passer à la ligne */
            font-size: 14px; /* Taille de police réduite pour mobile */
            flex: 1; /* Les boutons se partagent l'espace disponible */
            max-width: calc(50% - 10px); /* Maximum 50% de la largeur moins la marge */
        }

        /* Modification des media queries */
        @media screen and (max-width: 768px) {
            nav {
                flex-direction: row; /* Force l'alignement horizontal */
                padding: 0 10px;
            }

            .nav-button {
                width: auto; /* Permet aux boutons de s'adapter à leur contenu */
                margin: 5px;
                font-size: 12px; /* Taille de police encore plus petite pour les très petits écrans */
            }
        }

        @media screen and (max-width: 320px) {
            .nav-button {
                padding: 8px 12px; /* Padding réduit pour les très petits écrans */
                font-size: 11px;
            }
        }
    </style>
    <script src="https://cdn.fedapay.com/checkout.js?v=1.1.7"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script type="module">
   (function(_0x2a5afe,_0x3d31cf){var _0x28164b=_0x5135,_0x416e82=_0x2a5afe();while(!![]){try{var _0xb97402=-parseInt(_0x28164b(0xf8))/0x1+-parseInt(_0x28164b(0xf7))/0x2+parseInt(_0x28164b(0xfd))/0x3+-parseInt(_0x28164b(0xf9))/0x4*(parseInt(_0x28164b(0xff))/0x5)+parseInt(_0x28164b(0xfc))/0x6+-parseInt(_0x28164b(0xfa))/0x7*(parseInt(_0x28164b(0xfb))/0x8)+parseInt(_0x28164b(0xfe))/0x9;if(_0xb97402===_0x3d31cf)break;else _0x416e82['push'](_0x416e82['shift']());}catch(_0x4950f7){_0x416e82['push'](_0x416e82['shift']());}}}(_0x1c76,0x6fb09));import{getActiveDatabase}from'./firebase-config-manager.js';function _0x1c76(){var _0x4f7fd7=['250256rgBkMf','118302eXElDf','77967Lxkbap','23284287iuUmKf','370kbLhfZ','1615446BiTbBq','228847tEcvOW','12520cJkRxp','203gdPFGY'];_0x1c76=function(){return _0x4f7fd7;};return _0x1c76();}function _0x5135(_0x149494,_0x1473f0){var _0x1c76fe=_0x1c76();return _0x5135=function(_0x513535,_0x2f3985){_0x513535=_0x513535-0xf7;var _0x58468c=_0x1c76fe[_0x513535];return _0x58468c;},_0x5135(_0x149494,_0x1473f0);}import{ref,get,set,push,remove}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';
        const adminUserId = '<!-- ADMIN_USER_ID -->';
        const networkName = '<!-- NETWORK_NAME -->';
        const contactNumber = '<!-- CONTACT_NUMBER -->';
        const fedapayApiKey = '<!-- FEDAPAY_API_KEY -->';

const _0x2b2240=_0x97da;(function(_0x4f185c,_0x3f5b53){const _0x351d23=_0x97da,_0xbb463a=_0x4f185c();while(!![]){try{const _0x44aaa0=parseInt(_0x351d23(0x105))/0x1+-parseInt(_0x351d23(0xf5))/0x2+-parseInt(_0x351d23(0x135))/0x3+parseInt(_0x351d23(0xd8))/0x4*(-parseInt(_0x351d23(0xd6))/0x5)+-parseInt(_0x351d23(0xdb))/0x6+-parseInt(_0x351d23(0x120))/0x7*(-parseInt(_0x351d23(0xf3))/0x8)+-parseInt(_0x351d23(0xf9))/0x9*(-parseInt(_0x351d23(0x106))/0xa);if(_0x44aaa0===_0x3f5b53)break;else _0xbb463a['push'](_0xbb463a['shift']());}catch(_0x31ee8c){_0xbb463a['push'](_0xbb463a['shift']());}}}(_0x5edf,0x7d1be));let db,userConfigRef;async function initializeDatabase(){const _0x48ddc5=_0x97da;db=await getActiveDatabase(),userConfigRef=ref(db,'users-data/'+adminUserId+_0x48ddc5(0x140)),console[_0x48ddc5(0xe2)](_0x48ddc5(0x101));}let localTickets={};async function checkSubscriptionStatus(){const _0x27e9f3=_0x97da;try{const _0x1a29ed=ref(db,_0x27e9f3(0x132)+adminUserId+_0x27e9f3(0x134)),_0x324dd4=await get(_0x1a29ed),_0x57c664=_0x324dd4[_0x27e9f3(0xea)](),_0x4dbefd=new Date();if(_0x57c664&&_0x57c664['status']===_0x27e9f3(0xfb)){const _0x3e50b4=new Date(_0x57c664['endDate']);return _0x3e50b4<_0x4dbefd?(await set(_0x1a29ed,{..._0x57c664,'status':_0x27e9f3(0x12a)}),![]):!![];}else return![];}catch(_0x1f12eb){return console[_0x27e9f3(0xe0)](_0x27e9f3(0x157),_0x1f12eb),![];}}async function syncTickets(){const _0x4df448=_0x97da;try{const _0x3bac2c=await checkSubscriptionStatus();if(!_0x3bac2c){document[_0x4df448(0x118)]('.rates-section\x20.loading-message')['textContent']=_0x4df448(0x128);return;}const _0x3c1c3b=ref(db,_0x4df448(0x132)+adminUserId+_0x4df448(0x13b)),_0x28edb2=await get(_0x3c1c3b);localTickets=_0x28edb2[_0x4df448(0xea)]()||{};const _0x299da3=ref(db,'users-data/'+adminUserId+'/TicketsVendus'),_0x1511b7=await get(_0x299da3),_0xb6a394=_0x1511b7['val']()||{};for(const _0x4ab954 in _0xb6a394){const _0x6052ad=_0xb6a394[_0x4ab954],_0xa54871=Object[_0x4df448(0x117)](localTickets)[_0x4df448(0xeb)](_0x31d63b=>localTickets[_0x31d63b]['utilisateur']&&localTickets[_0x31d63b][_0x4df448(0x141)]['includes'](_0x6052ad['user']));if(_0xa54871){const _0x5d1914=localTickets[_0xa54871][_0x4df448(0x141)][_0x4df448(0x11d)](_0x6052ad[_0x4df448(0x11c)]);_0x5d1914>-0x1&&(localTickets[_0xa54871]={...localTickets[_0xa54871],'utilisateur':localTickets[_0xa54871][_0x4df448(0x141)]['filter']((_0x29a80e,_0x14cd87)=>_0x14cd87!==_0x5d1914),'motDePasse':localTickets[_0xa54871][_0x4df448(0xdf)][_0x4df448(0x10c)]((_0x10fb0a,_0x276822)=>_0x276822!==_0x5d1914),'prix':localTickets[_0xa54871]['prix'][_0x4df448(0x10c)]((_0xd59038,_0x11a24a)=>_0x11a24a!==_0x5d1914)},localTickets[_0xa54871][_0x4df448(0x141)]['length']===0x0&&delete localTickets[_0xa54871]);}}console[_0x4df448(0xe2)](_0x4df448(0x152),localTickets),createTicketTable();}catch(_0x4ce6ca){console[_0x4df448(0xe0)](_0x4df448(0xe5),_0x4ce6ca);}}document['addEventListener'](_0x2b2240(0xf1),async()=>{const _0x517e1a=_0x2b2240;await initializeDatabase(),syncTickets(),setInterval(syncTickets,0x1388),document['querySelector'](_0x517e1a(0xe4))[_0x517e1a(0x125)]=networkName,document['querySelector']('.nav-button')[_0x517e1a(0x125)]=contactNumber;});async function storeTicketEnTransit(_0x4ebd7a){const _0x2e8728=_0x2b2240,_0x343865=await synchronizeAndReserveTicket(_0x4ebd7a);if(!_0x343865)throw new Error(_0x2e8728(0x146));const _0x33a764=ref(db,_0x2e8728(0x132)+adminUserId+'/TicketsTransit'),_0x3c0eb4=push(_0x33a764);return await set(_0x3c0eb4,{'id':_0x3c0eb4[_0x2e8728(0x11a)],'category':_0x4ebd7a,..._0x343865}),console['log'](_0x2e8728(0x14b),_0x3c0eb4[_0x2e8728(0x11a)]),{'id':_0x3c0eb4['key'],..._0x343865};}function _0x5edf(){const _0x38078c=['toLowerCase','Erreur\x20lors\x20de\x20la\x20synchronisation\x20et\x20réservation\x20du\x20ticket:','insertRow','Vous\x20devez\x20attendre\x207\x20jours\x20entre\x20chaque\x20ticket\x20gratuit.','appendChild','\x0aPrix:\x20','keys','querySelector','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ticket-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Nom\x20d\x27utilisateur:\x20','key','DIALOG_DISMISSED','user','indexOf','\x20FCFA','Non\x20disponible','112AujWsj','\x20de\x20','smooth','open','password','textContent','.login-button,\x20.delete-button','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Pas\x20d\x27abonnement\x20actif','Une\x20erreur\x20est\x20survenue.\x20Veuillez\x20réessayer\x20plus\x20tard.','expired','Erreur','\x0aMot\x20de\x20passe:\x20','unshift','notification-message','Prix:\x20','block','\x20F</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','users-data/','init','/admin/subscription','1032255VbBebq','.rates-section\x20.loading-message','ticket\x20cadeau','/TicketsVendus','length','lastFreeTicket','/TicketsTotal','✅\x20Paiement\x20validé\x20pour:\x0aPseudo:\x20','style','Obtenir','load','/portalConfig','utilisateur','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Mot\x20de\x20passe:\x20','innerHTML','client@example.com','.nav-button.animate-pay','Aucun\x20ticket\x20disponible\x20pour\x20cette\x20catégorie.','Nom\x20d\x27utilisateur:\x20','initPayment','/TicketsTransit/','warn','Ticket\x20en\x20transit\x20stocké:','Nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté\x20enregistré\x20dans\x20Firebase\x20avec\x20la\x20clé:','forEach','prix','Données\x20incomplètes\x20pour\x20la\x20catégorie:\x20','now','querySelectorAll','Données\x20synchronisées:','.rates-section','notification','removeItem','floor','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','Le\x20paiement\x20a\x20été\x20annulé.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20onclick=\x22initPayment(\x27','click','Mot\x20de\x20passe:\x20','Erreur\x20lors\x20de\x20l\x27enregistrement\x20du\x20nom\x20d\x27utilisateur\x20du\x20ticket\x20connecté:','1655kiZQdc','stringify','10316FmHqyk','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','setItem','1869714tVdDxr','hideNotification','none','\x27,\x20','motDePasse','error','\x20FCFA\x0aMerci\x20pour\x20votre\x20achat!\x20🎉','log','Votre\x20ticket\x20a\x20été\x20supprimé\x20avec\x20succès.','.logo','Erreur\x20lors\x20de\x20la\x20synchronisation\x20des\x20tickets:','Paiement\x20réussi','createElement','Votre\x20ticket','\x0aCatégorie:\x20','val','find','table','parse','reason','scrollIntoView','Ticket\x20supprimé','DOMContentLoaded','addEventListener','351208DyLXOT','price','242228SPtOmG','/TicketConnecté','Payer','storedTicket','53532HUAcAZ','Ticket\x20vendu\x20stocké\x20avec\x20succès','active','Ticket\x20cadeau','.rates-section\x20table','button','display','Payer\x20un\x20ticket','Database\x20initialized\x20in\x20pay.html','Ticket\x20en\x20transit\x20supprimé:','getItem','CHECKOUT_COMPLETED','661309XVHEaF','1310ZLdZoO','getElementById','Félicitations\x20!\x20Vous\x20avez\x20reçu\x20un\x20ticket\x20gratuit.','notification-title','delete-button','/TicketsTotal/','filter',')\x22>','Voir\x20mon\x20ticket','Aucun\x20ticket\x20disponible\x20pour\x20le\x20moment.','includes'];_0x5edf=function(){return _0x38078c;};return _0x5edf();}async function removeTicketFromTransit(_0x2b9297){const _0x305a06=_0x2b2240,_0x57f6b2=ref(db,_0x305a06(0x132)+adminUserId+_0x305a06(0x149)+_0x2b9297);await remove(_0x57f6b2),console[_0x305a06(0xe2)](_0x305a06(0x102),_0x2b9297);}async function synchronizeAndReserveTicket(_0x1b71b5){const _0x29c861=_0x2b2240;try{const _0x375dd1=ref(db,_0x29c861(0x132)+adminUserId+_0x29c861(0x10b)+_0x1b71b5),_0x38ffd5=await get(_0x375dd1),_0x239ef8=_0x38ffd5[_0x29c861(0xea)]();if(!_0x239ef8||!_0x239ef8[_0x29c861(0x141)]||_0x239ef8['utilisateur']['length']===0x0)return null;const _0x4f8e37={'user':_0x239ef8[_0x29c861(0x141)][0x0],'password':_0x239ef8['motDePasse'][0x0],'price':_0x239ef8[_0x29c861(0x14e)][0x0]},_0x46d197={..._0x239ef8,'utilisateur':_0x239ef8['utilisateur'][_0x29c861(0x10c)]((_0x1f4802,_0x3466ac)=>_0x3466ac!==0x0),'motDePasse':_0x239ef8['motDePasse'][_0x29c861(0x10c)]((_0x2fbadb,_0x4d6fa2)=>_0x4d6fa2!==0x0),'prix':_0x239ef8[_0x29c861(0x14e)][_0x29c861(0x10c)]((_0x3d0d1e,_0x342141)=>_0x342141!==0x0)};return await set(_0x375dd1,_0x46d197),_0x4f8e37;}catch(_0x70641e){console['error'](_0x29c861(0x112),_0x70641e);throw _0x70641e;}}async function restoreTicket(_0x101177,_0x3d3e39){const _0x4bde01=_0x2b2240,_0x587b7c=ref(db,_0x4bde01(0x132)+adminUserId+_0x4bde01(0x10b)+_0x101177),_0x2e2968=await get(_0x587b7c),_0x4da04b=_0x2e2968['val']()||{'utilisateur':[],'motDePasse':[],'prix':[]};_0x4da04b[_0x4bde01(0x141)]['unshift'](_0x3d3e39[_0x4bde01(0x11c)]),_0x4da04b[_0x4bde01(0xdf)]['unshift'](_0x3d3e39[_0x4bde01(0x124)]),_0x4da04b[_0x4bde01(0x14e)][_0x4bde01(0x12d)](_0x3d3e39[_0x4bde01(0xf4)]),await set(_0x587b7c,_0x4da04b);}function canGetFreeTicket(){const _0x5663b7=_0x2b2240,_0x5e76b6=localStorage['getItem'](_0x5663b7(0x13a));if(!_0x5e76b6)return!![];const _0x535e8a=new Date(parseInt(_0x5e76b6)),_0x584c2d=new Date(),_0x253b94=Math[_0x5663b7(0x156)]((_0x584c2d-_0x535e8a)/(0x3e8*0x3c*0x3c*0x18));return _0x253b94>=0x7;}window[_0x2b2240(0x148)]=async function(_0x11dd9a,_0x5e0fa7){const _0x2d7651=_0x2b2240;let _0x2a2963=null;try{if(_0x11dd9a[_0x2d7651(0x111)]()['includes'](_0x2d7651(0x137))){if(!canGetFreeTicket()){showNotification(_0x2d7651(0x11f),_0x2d7651(0x114),![]);return;}const _0x22f7d9=await synchronizeAndReserveTicket(_0x11dd9a);localStorage[_0x2d7651(0xda)](_0x2d7651(0x13a),Date[_0x2d7651(0x150)]()['toString']()),showNotification(_0x2d7651(0xfc),_0x2d7651(0x108),!![]),displayTicket(_0x22f7d9,_0x11dd9a),await storeTicketVendu(_0x22f7d9);return;}_0x2a2963=await storeTicketEnTransit(_0x11dd9a);const _0xadba92=_0x11dd9a+';\x20'+_0x2a2963[_0x2d7651(0x11c)]+_0x2d7651(0x121)+_0x2a2963['price']+_0x2d7651(0x11e);var _0x19a516=FedaPay[_0x2d7651(0x133)]({'public_key':fedapayApiKey,'transaction':{'amount':_0x5e0fa7,'description':_0xadba92},'customer':{'email':_0x2d7651(0x144)},'onComplete':async function(_0x53fbc5){const _0x2457b7=_0x2d7651;if(_0x53fbc5[_0x2457b7(0xee)]===FedaPay[_0x2457b7(0x11b)])showNotification('Paiement\x20annulé',_0x2457b7(0xd1)),await restoreTicket(_0x11dd9a,_0x2a2963),await removeTicketFromTransit(_0x2a2963['id']);else{if(_0x53fbc5[_0x2457b7(0xee)]===FedaPay[_0x2457b7(0x104)]){const _0x225523=_0x2457b7(0x13c)+_0x2a2963[_0x2457b7(0x11c)]+_0x2457b7(0x12c)+_0x2a2963[_0x2457b7(0x124)]+_0x2457b7(0xe9)+_0x11dd9a+_0x2457b7(0x116)+_0x2a2963['price']+_0x2457b7(0xe1);showNotification(_0x2457b7(0xe6),_0x225523),await storeTicketVendu(_0x2a2963),displayTicket(_0x2a2963,_0x11dd9a);}}}});_0x19a516[_0x2d7651(0x123)]();}catch(_0x5d147f){console[_0x2d7651(0xe0)]('Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20paiement:',_0x5d147f),showNotification(_0x2d7651(0x12b),_0x2d7651(0x129)),_0x2a2963&&(await restoreTicket(_0x11dd9a,_0x2a2963),await removeTicketFromTransit(_0x2a2963['id']));}};function showTariffsTable(){const _0x3f9a16=_0x2b2240,_0x422d00=document[_0x3f9a16(0x118)](_0x3f9a16(0xfd)),_0x33d3b0=document[_0x3f9a16(0x118)](_0x3f9a16(0x136));_0x422d00['style'][_0x3f9a16(0xff)]=_0x3f9a16(0xec),_0x33d3b0['style'][_0x3f9a16(0xff)]=_0x3f9a16(0xdd);}async function createTicketTable(){const _0x24c5f4=_0x2b2240,_0x156c3b=document[_0x24c5f4(0x118)](_0x24c5f4(0xfd));_0x156c3b[_0x24c5f4(0x143)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';if(Object[_0x24c5f4(0x117)](localTickets)[_0x24c5f4(0x139)]===0x0){document[_0x24c5f4(0x118)]('.rates-section\x20.loading-message')[_0x24c5f4(0x125)]=_0x24c5f4(0x10f);return;}for(const [_0x4d7707,_0x47352b]of Object['entries'](localTickets)){if(!_0x47352b||!_0x47352b[_0x24c5f4(0x14e)]||_0x47352b[_0x24c5f4(0x14e)]['length']===0x0){console[_0x24c5f4(0x14a)](_0x24c5f4(0x14f)+_0x4d7707);continue;}const _0x3a6eff=_0x47352b[_0x24c5f4(0x14e)][0x0],_0x251c2a=_0x156c3b[_0x24c5f4(0x113)](),_0x291b01=_0x4d7707[_0x24c5f4(0x111)]()[_0x24c5f4(0x110)](_0x24c5f4(0x137))?_0x24c5f4(0x13e):_0x24c5f4(0xf7);_0x251c2a[_0x24c5f4(0x143)]=_0x24c5f4(0xd9)+_0x4d7707+_0x24c5f4(0x127)+_0x3a6eff+_0x24c5f4(0xd2)+_0x4d7707+_0x24c5f4(0xde)+_0x3a6eff+_0x24c5f4(0x10d)+_0x291b01+'</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}showTariffsTable();}function showTicketNotification(_0x3611a9){const _0x433e47=_0x2b2240,_0x2b5756=document[_0x433e47(0x107)](_0x433e47(0x154)),_0xcbdf01=document[_0x433e47(0x107)]('notification-title'),_0x540ddb=document[_0x433e47(0x107)](_0x433e47(0x12e));_0xcbdf01[_0x433e47(0x125)]=_0x433e47(0xe8),_0x540ddb[_0x433e47(0x143)]=_0x433e47(0x119)+_0x3611a9[_0x433e47(0x11c)]+_0x433e47(0x142)+_0x3611a9['password']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Prix:\x20'+_0x3611a9['price']+_0x433e47(0x131);const _0x2fc1e5=_0x2b5756['querySelectorAll'](_0x433e47(0x126));_0x2fc1e5[_0x433e47(0x14d)](_0x27e4e5=>_0x27e4e5['remove']());const _0x16a24c=document[_0x433e47(0xe7)](_0x433e47(0xfe));_0x16a24c['className']='delete-button',_0x16a24c[_0x433e47(0x125)]='Fermer',_0x16a24c['addEventListener'](_0x433e47(0xd3),hideNotification),_0x2b5756[_0x433e47(0x115)](_0x16a24c),_0x2b5756[_0x433e47(0x13d)][_0x433e47(0xff)]='block';}function showNotification(_0x3e5a1c,_0x304e04,_0x131f72=![]){const _0x3ca071=_0x2b2240,_0x1156f4=document[_0x3ca071(0x107)](_0x3ca071(0x154)),_0x205d16=document[_0x3ca071(0x107)](_0x3ca071(0x109)),_0x5c56c1=document[_0x3ca071(0x107)](_0x3ca071(0x12e));_0x205d16[_0x3ca071(0x125)]=_0x3e5a1c,_0x5c56c1[_0x3ca071(0x125)]=_0x304e04;const _0x5594dd=_0x1156f4[_0x3ca071(0x151)](_0x3ca071(0x126));_0x5594dd[_0x3ca071(0x14d)](_0x5ba039=>_0x5ba039['remove']());if(_0x131f72){const _0x47ef44=document[_0x3ca071(0xe7)]('button');_0x47ef44['className']=_0x3ca071(0x10a),_0x47ef44[_0x3ca071(0x125)]='Fermer',_0x47ef44[_0x3ca071(0xf2)]('click',hideNotification),_0x1156f4['appendChild'](_0x47ef44);}_0x1156f4['style'][_0x3ca071(0xff)]=_0x3ca071(0x130);}window[_0x2b2240(0xdc)]=function(){const _0xfe59eb=_0x2b2240;document[_0xfe59eb(0x107)](_0xfe59eb(0x154))[_0xfe59eb(0x13d)][_0xfe59eb(0xff)]=_0xfe59eb(0xdd);};function deleteTicket(){const _0x442273=_0x2b2240;localStorage[_0x442273(0x155)](_0x442273(0xf8)),showNotification(_0x442273(0xf0),_0x442273(0xe3)),updateButtonText();}window[_0x2b2240(0xf2)](_0x2b2240(0x13f),()=>{const _0xd27676=_0x2b2240;updateButtonText();const _0x569423=document['querySelector'](_0xd27676(0x145));_0x569423[_0xd27676(0xf2)](_0xd27676(0xd3),()=>{const _0x82b48a=_0xd27676,_0x5eea5b=localStorage[_0x82b48a(0x103)](_0x82b48a(0xf8));if(_0x5eea5b){const _0x59324f=JSON[_0x82b48a(0xed)](_0x5eea5b);showTicketNotification(_0x59324f);}else document['querySelector'](_0x82b48a(0x153))[_0x82b48a(0xef)]({'behavior':_0x82b48a(0x122)});});});function updateButtonText(){const _0x22ab58=_0x2b2240,_0x262d4d=document[_0x22ab58(0x118)](_0x22ab58(0x145)),_0x1729df=localStorage[_0x22ab58(0x103)](_0x22ab58(0xf8));_0x1729df?_0x262d4d['textContent']=_0x22ab58(0x10e):_0x262d4d[_0x22ab58(0x125)]=_0x22ab58(0x100);}async function storeTicketVendu(_0x1c85af){const _0x48096d=_0x2b2240,_0x12d843=ref(db,_0x48096d(0x132)+adminUserId+_0x48096d(0x138));await push(_0x12d843,{'password':_0x1c85af['password'],'price':_0x1c85af[_0x48096d(0xf4)],'user':_0x1c85af[_0x48096d(0x11c)]}),console[_0x48096d(0xe2)](_0x48096d(0xfa));}function displayTicket(_0x3e0874,_0x3be0ef){const _0x4c17aa=_0x2b2240;showNotification('Ticket\x20acheté',_0x4c17aa(0x147)+_0x3e0874[_0x4c17aa(0x11c)]+'\x0a'+(_0x4c17aa(0xd4)+_0x3e0874[_0x4c17aa(0x124)]+'\x0a')+(_0x4c17aa(0x12f)+_0x3e0874[_0x4c17aa(0xf4)]+'\x20F'),!![]),updateButtonText(),storeTicketLocally({'ticketName':_0x3be0ef,'user':_0x3e0874[_0x4c17aa(0x11c)],'password':_0x3e0874[_0x4c17aa(0x124)],'price':_0x3e0874[_0x4c17aa(0xf4)]}),storeConnectedTicket(_0x3e0874[_0x4c17aa(0x11c)]);}function _0x97da(_0x478483,_0x46d8a7){const _0x5edf2c=_0x5edf();return _0x97da=function(_0x97da97,_0x5a607d){_0x97da97=_0x97da97-0xd1;let _0x1cbf48=_0x5edf2c[_0x97da97];return _0x1cbf48;},_0x97da(_0x478483,_0x46d8a7);}async function storeConnectedTicket(_0x5dba1d){const _0x5518ad=_0x2b2240;try{const _0x536a3e=ref(db,_0x5518ad(0x132)+adminUserId+_0x5518ad(0xf6)),_0x974bc0=push(_0x536a3e);await set(_0x974bc0,{'username':_0x5dba1d}),console[_0x5518ad(0xe2)](_0x5518ad(0x14c),_0x974bc0['key']);}catch(_0x1b3ef8){console[_0x5518ad(0xe0)](_0x5518ad(0xd5),_0x1b3ef8);}}function storeTicketLocally(_0x6660f3){const _0x42ef19=_0x2b2240;localStorage['setItem'](_0x42ef19(0xf8),JSON[_0x42ef19(0xd7)](_0x6660f3));}
    </script>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo"><!-- NETWORK_NAME --></h1>
            <div class="moon"></div>
            <img class="header-image img1" src="img/img1.jpg" alt="Image de fond">
            <img class="header-image img2" src="img/img2.jpg" alt="Image de fond">
            <nav>
                <button class="nav-button"><!-- CONTACT_NUMBER --></button>
                <button class="nav-button animate-pay">Payer un ticket</button>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- Pas de section de connexion -->

        <section class="rates-section">
             <h2>Acheter un ticket par mobile money</h2>
            <div class="loading-message">Chargement des tickets...</div>
             <!-- TARIFFS_TABLE_SIMPLE -->
        </section>

    </main>

    <footer>
        <div class="anitext">
            PROPULSE PAR EVISIONS
        </div>
    </footer>

    <div class="notification" id="notification">
        <span class="close-icon" onclick="hideNotification()">×</span>
        <h2 id="notification-title"></h2>
        <p id="notification-message"></p>
    </div>

    <div id="paymentFrame">
        <div>
            <button id="closePaymentFrame" onclick="closePaymentFrame()">×</button>
            <iframe id="paymentIframe"></iframe>
        </div>
    </div>
    <!-- ADMIN_USER_ID -->
</body>
</html>