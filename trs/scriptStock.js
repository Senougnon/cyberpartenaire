const _0xba1a92=_0x15ba;(function(_0x5c447b,_0x2fb9ff){const _0x1b070e=_0x15ba,_0xb07547=_0x5c447b();while(!![]){try{const _0x14e5b3=-parseInt(_0x1b070e(0x12c))/0x1+-parseInt(_0x1b070e(0x110))/0x2*(parseInt(_0x1b070e(0x10a))/0x3)+parseInt(_0x1b070e(0x131))/0x4+parseInt(_0x1b070e(0x17b))/0x5*(-parseInt(_0x1b070e(0xe8))/0x6)+parseInt(_0x1b070e(0x16a))/0x7*(parseInt(_0x1b070e(0x161))/0x8)+parseInt(_0x1b070e(0x15f))/0x9+parseInt(_0x1b070e(0x15b))/0xa*(parseInt(_0x1b070e(0x112))/0xb);if(_0x14e5b3===_0x2fb9ff)break;else _0xb07547['push'](_0xb07547['shift']());}catch(_0x1b76fd){_0xb07547['push'](_0xb07547['shift']());}}}(_0x1930,0x6ab7e));const firebaseConfig={'apiKey':_0xba1a92(0x176),'authDomain':_0xba1a92(0x116),'databaseURL':_0xba1a92(0x14a),'projectId':_0xba1a92(0xfc),'storageBucket':_0xba1a92(0x189),'messagingSenderId':_0xba1a92(0x122),'appId':_0xba1a92(0x16f),'measurementId':_0xba1a92(0x13d)};firebase[_0xba1a92(0xed)](firebaseConfig);const database=firebase[_0xba1a92(0x128)](),adminRef=database['ref'](_0xba1a92(0x135)),loginForm=document[_0xba1a92(0x13f)](_0xba1a92(0xfa)),signupForm=document[_0xba1a92(0x13f)]('signupForm'),loginContainer=document[_0xba1a92(0x13f)](_0xba1a92(0x10b)),signupContainer=document[_0xba1a92(0x13f)]('signupContainer'),dashboardContainer=document['getElementById'](_0xba1a92(0x185)),salesForm=document['getElementById'](_0xba1a92(0x151)),salesTable=document[_0xba1a92(0x13f)](_0xba1a92(0x107)),totalSalesElement=document[_0xba1a92(0x13f)](_0xba1a92(0x163)),averageSalesElement=document[_0xba1a92(0x13f)]('averageSales'),userInfoElement=document[_0xba1a92(0x13f)](_0xba1a92(0x133)),toggleAnalysisButton=document[_0xba1a92(0x13f)](_0xba1a92(0x154)),toggleSalesButton=document['getElementById'](_0xba1a92(0x170)),analysisSection=document[_0xba1a92(0x13f)](_0xba1a92(0x13b)),salesDetailsSection=document['getElementById'](_0xba1a92(0x16c)),signupButton=document['getElementById'](_0xba1a92(0x14d)),loginFromSignup=document[_0xba1a92(0x13f)]('loginFromSignup'),productSelect=document[_0xba1a92(0x13f)](_0xba1a92(0xfe)),stockTableGlobal=document[_0xba1a92(0x13f)](_0xba1a92(0x121));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0xba1a92(0x13f)]('dateTime')[_0xba1a92(0x11f)]=new Date()['toISOString']()['slice'](0x0,0x10);function fetchTicketCategories(){const _0x49a591=_0xba1a92;database[_0x49a591(0x10d)]('TicketsTotal')[_0x49a591(0x12d)](_0x49a591(0x11f))['then'](_0x2bcd5b=>{const _0x4b70b2=_0x49a591;ticketCategories=_0x2bcd5b[_0x4b70b2(0x160)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x1ffce8=_0xba1a92;productSelect[_0x1ffce8(0x130)]=_0x1ffce8(0x11b);for(const _0x370250 in ticketCategories){const _0x1af367=ticketCategories[_0x370250][_0x1ffce8(0x11c)][0x0],_0x27111=document[_0x1ffce8(0x17c)]('option');_0x27111[_0x1ffce8(0x11f)]=_0x370250,_0x27111[_0x1ffce8(0x11a)]=_0x370250+'\x20('+_0x1af367+_0x1ffce8(0x174),productSelect[_0x1ffce8(0x147)](_0x27111);}}fetchTicketCategories(),loginForm['addEventListener']('submit',function(_0x533e68){const _0xb26d39=_0xba1a92;_0x533e68[_0xb26d39(0x172)]();const _0x46c388=document['getElementById'](_0xb26d39(0xf6))['value'],_0x451f52=document['getElementById'](_0xb26d39(0xe5))[_0xb26d39(0x11f)];database['ref'](_0xb26d39(0x144)+_0x46c388)[_0xb26d39(0x12d)](_0xb26d39(0x11f))[_0xb26d39(0x188)](_0x31b6fa=>{const _0x72fd91=_0xb26d39;_0x31b6fa[_0x72fd91(0x17e)]()?_0x31b6fa[_0x72fd91(0x160)]()[_0x72fd91(0xe5)]===_0x451f52?loginSuccess(_0x46c388):alert(_0x72fd91(0x171)):alert(_0x72fd91(0xfd));});}),signupForm[_0xba1a92(0xf0)]('submit',function(_0x4851a9){const _0x5e0825=_0xba1a92;_0x4851a9[_0x5e0825(0x172)]();const _0x8caae6=document['getElementById'](_0x5e0825(0x190))[_0x5e0825(0x11f)],_0x576bd4=document[_0x5e0825(0x13f)](_0x5e0825(0x12b))[_0x5e0825(0x11f)];database['ref'](_0x5e0825(0x144)+_0x8caae6)[_0x5e0825(0x12d)](_0x5e0825(0x11f))['then'](_0x4895e1=>{const _0x39b356=_0x5e0825;_0x4895e1[_0x39b356(0x17e)]()?alert('Ce\x20nom\x20d\x27utilisateur\x20est\x20déjà\x20utilisé.'):database[_0x39b356(0x10d)](_0x39b356(0x144)+_0x8caae6)[_0x39b356(0xe9)]({'password':_0x576bd4})[_0x39b356(0x188)](()=>{const _0x207642=_0x39b356;alert('Inscription\x20réussie\x20!\x20Connectez-vous.'),signupContainer['style'][_0x207642(0x111)]=_0x207642(0xf8),loginContainer[_0x207642(0x13c)][_0x207642(0x111)]=_0x207642(0x148);})[_0x39b356(0x119)](_0x3f356d=>{const _0xc4d952=_0x39b356;console[_0xc4d952(0x182)](_0xc4d952(0x18d),_0x3f356d),alert(_0xc4d952(0x106));});});}),signupButton[_0xba1a92(0xf0)](_0xba1a92(0x14f),function(){const _0x4adce6=_0xba1a92;loginContainer[_0x4adce6(0x13c)][_0x4adce6(0x111)]=_0x4adce6(0xf8),signupContainer[_0x4adce6(0x13c)][_0x4adce6(0x111)]=_0x4adce6(0x148);}),loginFromSignup[_0xba1a92(0xf0)](_0xba1a92(0x14f),function(){const _0x5df0f9=_0xba1a92;signupContainer['style'][_0x5df0f9(0x111)]=_0x5df0f9(0xf8),loginContainer[_0x5df0f9(0x13c)]['display']=_0x5df0f9(0x148);});function loginSuccess(_0x24bdd7){const _0x45c732=_0xba1a92;currentUser=_0x24bdd7,loginContainer[_0x45c732(0x13c)][_0x45c732(0x111)]=_0x45c732(0xf8),signupContainer[_0x45c732(0x13c)][_0x45c732(0x111)]=_0x45c732(0xf8),dashboardContainer[_0x45c732(0x13c)][_0x45c732(0x111)]=_0x45c732(0x148),userInfoElement[_0x45c732(0x11a)]=_0x45c732(0x164)+_0x24bdd7,checkSubscriptionStatus()[_0x45c732(0x188)](_0x4d51bd=>{_0x4d51bd?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x45c732(0x119)](_0x32c57e=>{const _0x56f5d5=_0x45c732;console['error'](_0x56f5d5(0xf3),_0x32c57e),alert(_0x56f5d5(0x101));});}function listenForSalesDataChanges(){const _0x56b193=_0xba1a92;salesDataListener=database[_0x56b193(0x10d)]('sales/'+currentUser)['on'](_0x56b193(0x11f),_0x4816d3=>{const _0x5e3ea5=_0x56b193;salesData=[],_0x4816d3['forEach'](_0x3314fd=>{const _0x3c2c84=_0x15ba,_0x4f5be0=_0x3314fd[_0x3c2c84(0x160)]();_0x4f5be0[_0x3c2c84(0xe3)]=_0x3314fd['key'],_0x4f5be0[_0x3c2c84(0x137)]=(_0x4f5be0['V']*_0x4f5be0['PV'])[_0x3c2c84(0x152)](0x2),salesData[_0x3c2c84(0x104)](_0x4f5be0);}),analysisSection[_0x5e3ea5(0x13c)][_0x5e3ea5(0x111)]===_0x5e3ea5(0x148)&&updateAnalysis(salesData);});}function _0x1930(){const _0x40f66a=['true','none','Ventes','loginForm','documentElement','trs100','Utilisateur\x20introuvable','product','insertRow','input','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.','log','toString','push','month','Erreur\x20lors\x20de\x20la\x20création\x20du\x20compte','salesTable','salesEndDate','length','10689QRYpCT','loginContainer','filterSalesDates','ref','subscriptionRequiredModal','classList','466WEEDpe','display','4279YNILwT','className','aria-label','reset','trs100.firebaseapp.com','remove','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrée:','catch','textContent','<option\x20value=\x22\x22>Sélectionner\x20un\x20produit</option>','prix','stockEndDate','utils','value','setItem','stockTableGlobal','515975925887','labels','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée\x20:','rgb(255,\x2099,\x20132)','limitToLast','toLocaleString','database','line','dataset','signupPassword','774136SdPJcc','once','DOMContentLoaded','span','innerHTML','1704720AOTvNP','querySelector','userInfo','toUpperCase','admin/subscription','exportExcel','total','onclick','body','expired','analysisSection','style','G-VMB231DY1L','theme-toggle','getElementById','filter','Activer\x20le\x20mode\x20sombre','tbody\x20tr','stockStartDate','users/','Masquer\x20le\x20détail\x20des\x20ventes','sort','appendChild','block','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','https://trs100-default-rtdb.firebaseio.com','dateTime','delete-icon','signupButton','book_new','click','div','salesForm','toFixed','confirmDelete','toggleAnalysisButton','Prix\x20de\x20vente','href','Total\x20des\x20ventes:\x20','week','Masquer\x20l\x27analyse\x20des\x20ventes','values','23350TZNGeR','getItem','keys','getContext','2325960mzDDIA','val','48dXmOHg','th[data-sort]','totalSales','Utilisateur:\x20','light-theme','submit','Détail\x20des\x20ventes','querySelectorAll','book_append_sheet','763973JXsoxo','change','salesDetailsSection','status','sales/','1:515975925887:web:d4f867778ec322d8f52f4a','toggleSalesButton','Mot\x20de\x20passe\x20incorrect','preventDefault','resolve','\x20FCFA)','active','AIzaSyAAqwJ7Ta4SHKzLOptCNmCUFzmD9dRV1bw','getTime','#searchInputs\x20input','setAttribute','td:first-child','130QILiqw','createElement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20entrée\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','exists','removeChild','index.html','TotalSales','error','sales','forEach','dashboardContainer','Entrée\x20supprimée\x20avec\x20succès','equalTo','then','trs100.firebasestorage.app','toISOString','\x20FCFA','Analyse\x20des\x20ventes','Error\x20creating\x20user:','filterStockDates','tbody','signupUsername','key','orderByChild','password','update','prices','47616szqTam','set','slice','cancelDelete','insertCell','initializeApp','endAt','darkTheme','addEventListener','rgb(0,\x20255,\x20255)','APP','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','table_to_sheet','every','username'];_0x1930=function(){return _0x40f66a;};return _0x1930();}document[_0xba1a92(0x13f)](_0xba1a92(0xfe))[_0xba1a92(0xf0)](_0xba1a92(0x16b),function(){const _0x344817=_0xba1a92,_0x253cb6=this[_0x344817(0x11f)];database[_0x344817(0x10d)](_0x344817(0x16e)+currentUser)['orderByChild'](_0x344817(0xfe))[_0x344817(0x187)](_0x253cb6)['limitToLast'](0x1)[_0x344817(0x12d)](_0x344817(0x11f))[_0x344817(0x188)](_0x4859bd=>{const _0x17656a=_0x344817;if(_0x4859bd[_0x17656a(0x17e)]()){const _0x4ff051=Object[_0x17656a(0x15a)](_0x4859bd[_0x17656a(0x160)]())[0x0];document['getElementById']('SI')[_0x17656a(0x11f)]=_0x4ff051['SF']||0x0;}else document[_0x17656a(0x13f)]('SI')[_0x17656a(0x11f)]=0x0;}),updatePV();}),document[_0xba1a92(0x13f)]('V')[_0xba1a92(0xf0)]('input',updateSF),document[_0xba1a92(0x13f)]('APP')[_0xba1a92(0xf0)]('input',updateSF);function updateSF(){const _0x41bbab=_0xba1a92,_0x35bfb3=parseInt(document[_0x41bbab(0x13f)]('SI')[_0x41bbab(0x11f)])||0x0,_0x25af6b=parseInt(document[_0x41bbab(0x13f)](_0x41bbab(0xf2))[_0x41bbab(0x11f)])||0x0,_0x4be3b8=parseInt(document[_0x41bbab(0x13f)]('V')[_0x41bbab(0x11f)])||0x0;document[_0x41bbab(0x13f)]('SF')[_0x41bbab(0x11f)]=_0x35bfb3+_0x25af6b-_0x4be3b8;}function updatePV(){const _0x57eefb=_0xba1a92,_0x4e4fd0=document[_0x57eefb(0x13f)](_0x57eefb(0xfe))[_0x57eefb(0x11f)],_0x49d154=ticketCategories[_0x4e4fd0]?.[_0x57eefb(0x11c)][0x0];document['getElementById']('PV')[_0x57eefb(0x11f)]=_0x49d154||0x0;}salesForm[_0xba1a92(0xf0)](_0xba1a92(0x166),function(_0x299de0){const _0x30f1cd=_0xba1a92;_0x299de0[_0x30f1cd(0x172)]();const _0x63a2da={'dateTime':document['getElementById'](_0x30f1cd(0x14b))[_0x30f1cd(0x11f)],'product':document[_0x30f1cd(0x13f)](_0x30f1cd(0xfe))[_0x30f1cd(0x11f)],'SI':parseInt(document[_0x30f1cd(0x13f)]('SI')[_0x30f1cd(0x11f)])||0x0,'APP':parseInt(document[_0x30f1cd(0x13f)](_0x30f1cd(0xf2))[_0x30f1cd(0x11f)])||0x0,'V':parseInt(document[_0x30f1cd(0x13f)]('V')[_0x30f1cd(0x11f)])||0x0,'SF':parseInt(document[_0x30f1cd(0x13f)]('SF')[_0x30f1cd(0x11f)])||0x0,'PV':parseFloat(document[_0x30f1cd(0x13f)]('PV')[_0x30f1cd(0x11f)])||0x0};database[_0x30f1cd(0x10d)]('sales/'+currentUser)[_0x30f1cd(0x104)](_0x63a2da)[_0x30f1cd(0x188)](()=>{const _0x4337cf=_0x30f1cd;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x4337cf(0x115)](),document[_0x4337cf(0x13f)]('dateTime')[_0x4337cf(0x11f)]=new Date()[_0x4337cf(0x18a)]()[_0x4337cf(0xea)](0x0,0x10);})[_0x30f1cd(0x119)](_0x127e3f=>{const _0x28acc0=_0x30f1cd;console['error'](_0x28acc0(0x124),_0x127e3f),alert('Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée.');});});function updateTable(){const _0x101768=_0xba1a92,_0x3d1922=salesTable[_0x101768(0x132)](_0x101768(0x18f));_0x3d1922[_0x101768(0x130)]='',database[_0x101768(0x10d)](_0x101768(0x16e)+currentUser)[_0x101768(0x12d)](_0x101768(0x11f))['then'](_0x328e80=>{const _0xaf74f9=_0x101768;salesData=[],_0x328e80[_0xaf74f9(0x184)](_0x2641ae=>{const _0xc24334=_0xaf74f9,_0x54d076=_0x2641ae[_0xc24334(0x160)]();_0x54d076[_0xc24334(0x137)]=(_0x54d076['V']*_0x54d076['PV'])['toFixed'](0x2),salesData[_0xc24334(0x104)](_0x54d076);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x29c8fb=_0xba1a92,_0x2ed6a5=document[_0x29c8fb(0x13f)]('stockTableGlobal');_0x2ed6a5[_0x29c8fb(0x132)](_0x29c8fb(0x18f))[_0x29c8fb(0x130)]='',database[_0x29c8fb(0x10d)](_0x29c8fb(0x16e)+currentUser)[_0x29c8fb(0x12d)](_0x29c8fb(0x11f))['then'](_0x2a81f7=>{const _0x3c2925=_0x29c8fb,_0x1485ed={};_0x2a81f7['forEach'](_0x5defb8=>{const _0x4524e7=_0x15ba,_0x20bc0c=_0x5defb8[_0x4524e7(0x160)]();(!_0x1485ed[_0x20bc0c[_0x4524e7(0xfe)]]||new Date(_0x20bc0c['dateTime'])>new Date(_0x1485ed[_0x20bc0c[_0x4524e7(0xfe)]]['dateTime']))&&(_0x1485ed[_0x20bc0c[_0x4524e7(0xfe)]]=_0x20bc0c);}),Object['values'](_0x1485ed)[_0x3c2925(0x184)](_0x18e452=>{const _0x434f4a=_0x3c2925,_0x57fe4f=_0x2ed6a5[_0x434f4a(0x132)](_0x434f4a(0x18f))[_0x434f4a(0xff)]();_0x57fe4f['insertCell'](0x0)[_0x434f4a(0x11a)]=_0x18e452[_0x434f4a(0xfe)],_0x57fe4f[_0x434f4a(0xec)](0x1)[_0x434f4a(0x11a)]=_0x18e452['SF'],_0x57fe4f['insertCell'](0x2)[_0x434f4a(0x11a)]=new Date(_0x18e452[_0x434f4a(0x14b)])[_0x434f4a(0x127)]();}),setupSort(_0x2ed6a5);});}function exportToExcel(){const _0x465de9=_0xba1a92,_0x3f8adb=XLSX['utils'][_0x465de9(0x14e)](),_0x4b38d9=XLSX[_0x465de9(0x11e)][_0x465de9(0xf4)](document[_0x465de9(0x13f)](_0x465de9(0x107)));XLSX[_0x465de9(0x11e)][_0x465de9(0x169)](_0x3f8adb,_0x4b38d9,'Ventes'),XLSX['writeFile'](_0x3f8adb,'ventes_wifi_zone.xlsx');}document['getElementById'](_0xba1a92(0x136))[_0xba1a92(0xf0)](_0xba1a92(0x14f),exportToExcel);function deleteEntry(_0x5d59f0){const _0x226f7a=_0xba1a92;database[_0x226f7a(0x10d)](_0x226f7a(0x16e)+currentUser+'/'+_0x5d59f0)[_0x226f7a(0x12d)]('value')['then'](_0x344863=>{const _0x3b6d73=_0x226f7a,_0x2f6ab0=_0x344863[_0x3b6d73(0x160)]();return database[_0x3b6d73(0x10d)](_0x3b6d73(0x16e)+currentUser+'/'+_0x5d59f0)[_0x3b6d73(0x117)]()[_0x3b6d73(0x188)](()=>{const _0x482bdd=_0x3b6d73;return console[_0x482bdd(0x102)](_0x482bdd(0x186)),updateStockAfterDeletion(_0x2f6ab0);});})[_0x226f7a(0x188)](()=>{return updateTable();})[_0x226f7a(0x188)](()=>{updateStockTables(),updateAnalysis();})[_0x226f7a(0x119)](_0x598e03=>{const _0x16072e=_0x226f7a;console[_0x16072e(0x182)](_0x16072e(0x118),_0x598e03);});}function updateStockAfterDeletion(_0x158560){const _0x24e9a1=_0xba1a92;return database['ref']('sales/'+currentUser)[_0x24e9a1(0xe4)](_0x24e9a1(0x14b))[_0x24e9a1(0xee)](_0x158560['dateTime'])[_0x24e9a1(0x126)](0x2)[_0x24e9a1(0x12d)]('value')[_0x24e9a1(0x188)](_0x45fcf4=>{const _0x8c642c=_0x24e9a1;let _0x50ee6c=[];_0x45fcf4['forEach'](_0x2a3413=>{const _0x5a085a=_0x15ba;_0x50ee6c['push']({'key':_0x2a3413[_0x5a085a(0xe3)],..._0x2a3413[_0x5a085a(0x160)]()});}),_0x50ee6c[_0x8c642c(0x146)]((_0x1766a4,_0x294fa4)=>new Date(_0x294fa4['dateTime'])-new Date(_0x1766a4[_0x8c642c(0x14b)]));if(_0x50ee6c[_0x8c642c(0x109)]>0x1&&_0x50ee6c[0x0][_0x8c642c(0xe3)]!==_0x158560[_0x8c642c(0xe3)]){const _0x57ebe2=_0x50ee6c[0x1],_0x20e3bf=_0x57ebe2['SF']+_0x158560['V']-_0x158560['APP'];return database[_0x8c642c(0x10d)](_0x8c642c(0x16e)+currentUser+'/'+_0x57ebe2['key'])[_0x8c642c(0xe6)]({'SF':_0x20e3bf});}return Promise[_0x8c642c(0x173)]();});}function updateTable(){const _0x4f4e7b=_0xba1a92;return database[_0x4f4e7b(0x10d)](_0x4f4e7b(0x16e)+currentUser)[_0x4f4e7b(0x12d)](_0x4f4e7b(0x11f))[_0x4f4e7b(0x188)](_0x2596a6=>{salesData=[],_0x2596a6['forEach'](_0x157c62=>{const _0x4c4237=_0x15ba,_0x113171=_0x157c62[_0x4c4237(0x160)]();_0x113171[_0x4c4237(0xe3)]=_0x157c62[_0x4c4237(0xe3)],_0x113171['total']=(_0x113171['V']*_0x113171['PV'])['toFixed'](0x2),salesData[_0x4c4237(0x104)](_0x113171);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x719285){const _0x5a9edb=_0xba1a92,_0x177be3=salesTable['querySelector'](_0x5a9edb(0x18f));_0x177be3['innerHTML']='',_0x719285[_0x5a9edb(0x184)](_0x8e9e3=>{const _0x116b1f=_0x5a9edb,_0x55d68f=_0x177be3['insertRow']();_0x55d68f[_0x116b1f(0x12a)]['key']=_0x8e9e3[_0x116b1f(0xe3)],_0x55d68f['insertCell'](0x0)[_0x116b1f(0x11a)]=new Date(_0x8e9e3[_0x116b1f(0x14b)])['toLocaleString'](),_0x55d68f['insertCell'](0x1)['textContent']=_0x8e9e3[_0x116b1f(0xfe)],_0x55d68f[_0x116b1f(0xec)](0x2)[_0x116b1f(0x11a)]=_0x8e9e3['SI'],_0x55d68f['insertCell'](0x3)['textContent']=_0x8e9e3[_0x116b1f(0xf2)],_0x55d68f['insertCell'](0x4)[_0x116b1f(0x11a)]=_0x8e9e3['V'],_0x55d68f['insertCell'](0x5)[_0x116b1f(0x11a)]=_0x8e9e3['SF'],_0x55d68f['insertCell'](0x6)[_0x116b1f(0x11a)]=_0x8e9e3['PV'],_0x55d68f['insertCell'](0x7)['textContent']=_0x8e9e3[_0x116b1f(0x137)];}),addDeleteIcons();}function addDeleteIcons(){const _0x5c126e=_0xba1a92,_0x49f560=salesTable[_0x5c126e(0x168)](_0x5c126e(0x142));_0x49f560['forEach'](_0x4dffa3=>{const _0x1abb27=_0x5c126e,_0x4d813d=document[_0x1abb27(0x17c)](_0x1abb27(0x12f));_0x4d813d['innerHTML']='✖',_0x4d813d[_0x1abb27(0x113)]=_0x1abb27(0x14c),_0x4d813d[_0x1abb27(0x138)]=_0x508071=>{const _0x2e3daf=_0x1abb27;_0x508071['stopPropagation'](),showConfirmDialog(_0x4dffa3[_0x2e3daf(0x12a)][_0x2e3daf(0xe3)]);},_0x4dffa3['querySelector'](_0x1abb27(0x17a))[_0x1abb27(0x147)](_0x4d813d);});}function showConfirmDialog(_0x5f2817){const _0x5720ce=_0xba1a92,_0x3cbad8=document[_0x5720ce(0x17c)](_0x5720ce(0x150));_0x3cbad8[_0x5720ce(0x113)]='confirm-dialog',_0x3cbad8['innerHTML']=_0x5720ce(0x17d),document[_0x5720ce(0x139)][_0x5720ce(0x147)](_0x3cbad8),document[_0x5720ce(0x13f)](_0x5720ce(0x153))[_0x5720ce(0x138)]=()=>{const _0x4047fc=_0x5720ce;deleteEntry(_0x5f2817),document[_0x4047fc(0x139)][_0x4047fc(0x17f)](_0x3cbad8);},document['getElementById'](_0x5720ce(0xeb))[_0x5720ce(0x138)]=()=>{const _0x278e5b=_0x5720ce;document[_0x278e5b(0x139)][_0x278e5b(0x17f)](_0x3cbad8);};}function setupSearch(){const _0x1dcb77=_0xba1a92,_0x33c965=document[_0x1dcb77(0x168)](_0x1dcb77(0x178));_0x33c965[_0x1dcb77(0x184)](_0x359c69=>{const _0x18a81f=_0x1dcb77;_0x359c69['addEventListener'](_0x18a81f(0x100),()=>{const _0x5b6852=_0x18a81f,_0xde7573=salesData[_0x5b6852(0x140)](_0x56a002=>{const _0x3e8365=_0x5b6852;return Object[_0x3e8365(0x15d)](_0x56a002)[_0x3e8365(0xf5)](_0xc91326=>{const _0x997c98=_0x3e8365,_0x28431e=document[_0x997c98(0x13f)]('search'+(_0xc91326['charAt'](0x0)[_0x997c98(0x134)]()+_0xc91326[_0x997c98(0xea)](0x1)))?.['value']['toLowerCase']()||'';return _0x56a002[_0xc91326][_0x997c98(0x103)]()['toLowerCase']()['includes'](_0x28431e);});});renderTable(_0xde7573),updateAnalysis(_0xde7573);});});}function setupSort(_0x100dd1){const _0x13a4d7=_0xba1a92,_0x178708=_0x100dd1['querySelectorAll'](_0x13a4d7(0x162));_0x178708[_0x13a4d7(0x184)](_0x259d6f=>{const _0x1b5c1c=_0x13a4d7;_0x259d6f[_0x1b5c1c(0xf0)]('click',()=>{const _0x295b21=_0x1b5c1c,_0x1ddb34=_0x259d6f[_0x295b21(0x12a)][_0x295b21(0x146)],_0x5559af=_0x100dd1['id']===_0x295b21(0x107)?salesData:stockData;_0x5559af['sort']((_0x201f05,_0x6675e4)=>{if(_0x201f05[_0x1ddb34]<_0x6675e4[_0x1ddb34])return-0x1;if(_0x201f05[_0x1ddb34]>_0x6675e4[_0x1ddb34])return 0x1;return 0x0;}),_0x100dd1['id']===_0x295b21(0x107)?(renderTable(_0x5559af),updateAnalysis(_0x5559af)):renderStockTable(_0x5559af,_0x100dd1);});});}function renderStockTable(_0x305448,_0x336ced){const _0x2e7b80=_0xba1a92,_0x4f986e=_0x336ced[_0x2e7b80(0x132)](_0x2e7b80(0x18f));_0x4f986e[_0x2e7b80(0x130)]='',_0x305448[_0x2e7b80(0x184)](_0x19cd96=>{const _0x302a0e=_0x2e7b80,_0x4d4c2f=_0x4f986e['insertRow']();_0x4d4c2f[_0x302a0e(0xec)](0x0)[_0x302a0e(0x11a)]=_0x19cd96[_0x302a0e(0xfe)],_0x4d4c2f[_0x302a0e(0xec)](0x1)[_0x302a0e(0x11a)]=_0x19cd96['SF'],_0x4d4c2f[_0x302a0e(0xec)](0x2)[_0x302a0e(0x11a)]=new Date(_0x19cd96[_0x302a0e(0x14b)])[_0x302a0e(0x127)]();});}function _0x15ba(_0x3ce28e,_0x587c6f){const _0x193031=_0x1930();return _0x15ba=function(_0x15ba1d,_0x226201){_0x15ba1d=_0x15ba1d-0xe3;let _0x32c869=_0x193031[_0x15ba1d];return _0x32c869;},_0x15ba(_0x3ce28e,_0x587c6f);}function updateAnalysis(_0x368b1f=salesData){const _0x4dc4d1=_0xba1a92;let _0x3105ae=0x0,_0x2b83e7=0x0;const _0x14f4dc={'labels':[],'sales':[],'prices':[]};_0x368b1f[_0x4dc4d1(0x184)](_0x2b10d0=>{const _0x43ea94=_0x4dc4d1;_0x3105ae+=_0x2b10d0['V']*_0x2b10d0['PV'],_0x2b83e7++,_0x14f4dc[_0x43ea94(0x123)]['push'](new Date(_0x2b10d0[_0x43ea94(0x14b)])['toLocaleString']()),_0x14f4dc[_0x43ea94(0x183)]['push'](_0x2b10d0['V']),_0x14f4dc[_0x43ea94(0xe7)][_0x43ea94(0x104)](_0x2b10d0['PV']);});const _0x461289=_0x3105ae/_0x2b83e7||0x0;totalSalesElement[_0x4dc4d1(0x11a)]=_0x4dc4d1(0x157)+_0x3105ae[_0x4dc4d1(0x152)](0x2)+_0x4dc4d1(0x18b),averageSalesElement[_0x4dc4d1(0x11a)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x461289['toFixed'](0x2)+_0x4dc4d1(0x18b),updateChart(_0x14f4dc),updatePeriodAnalysis(_0x368b1f);}function updateChart(_0x490274){const _0x50cf81=_0xba1a92,_0x501b3a=document[_0x50cf81(0x13f)]('salesChart')[_0x50cf81(0x15e)]('2d');salesChart&&salesChart['destroy'](),salesChart=new Chart(_0x501b3a,{'type':_0x50cf81(0x129),'data':{'labels':_0x490274[_0x50cf81(0x123)],'datasets':[{'label':_0x50cf81(0xf9),'data':_0x490274[_0x50cf81(0x183)],'borderColor':_0x50cf81(0xf1),'tension':0.1},{'label':_0x50cf81(0x155),'data':_0x490274[_0x50cf81(0xe7)],'borderColor':_0x50cf81(0x125),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x50cf81(0xf1)}},'x':{'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x50cf81(0xf1)}}},'plugins':{'legend':{'labels':{'color':_0x50cf81(0xf1)}}}}});}function updatePeriodAnalysis(_0x154d7a){const _0x661d5d=_0xba1a92,_0x258c71=new Date(),_0x4d121=new Date(_0x258c71[_0x661d5d(0x177)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x502be8=new Date(_0x258c71['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x55bc85=new Date(_0x258c71['getTime']()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x25c3a6=_0x154d7a[_0x661d5d(0x140)](_0x45d265=>new Date(_0x45d265[_0x661d5d(0x14b)])>=_0x4d121),_0x18f87c=_0x154d7a[_0x661d5d(0x140)](_0x1cd7ea=>new Date(_0x1cd7ea[_0x661d5d(0x14b)])>=_0x502be8),_0x4e3ed9=_0x154d7a[_0x661d5d(0x140)](_0x24c5cd=>new Date(_0x24c5cd[_0x661d5d(0x14b)])>=_0x55bc85);updatePeriodStats(_0x25c3a6,_0x661d5d(0x158)),updatePeriodStats(_0x18f87c,_0x661d5d(0x105)),updatePeriodStats(_0x4e3ed9,'threeMonth');}function updatePeriodStats(_0x22cf6a,_0x4de235){const _0x10960c=_0xba1a92,_0x3cb3f7=_0x22cf6a['reduce']((_0x1297f8,_0x38aab3)=>_0x1297f8+_0x38aab3['V']*_0x38aab3['PV'],0x0),_0x427934=_0x3cb3f7/_0x22cf6a['length']||0x0;document['getElementById'](_0x4de235+_0x10960c(0x181))[_0x10960c(0x11a)]=_0x10960c(0x157)+_0x3cb3f7[_0x10960c(0x152)](0x2)+_0x10960c(0x18b),document[_0x10960c(0x13f)](_0x4de235+'AverageSales')[_0x10960c(0x11a)]=_0x10960c(0x149)+_0x427934[_0x10960c(0x152)](0x2)+_0x10960c(0x18b);}toggleAnalysisButton[_0xba1a92(0xf0)]('click',function(){const _0xb79705=_0xba1a92;analysisSection[_0xb79705(0x13c)][_0xb79705(0x111)]==='none'||analysisSection[_0xb79705(0x13c)][_0xb79705(0x111)]===''?(analysisSection[_0xb79705(0x13c)]['display']=_0xb79705(0x148),salesDetailsSection[_0xb79705(0x13c)][_0xb79705(0x111)]='none',this['textContent']=_0xb79705(0x159),toggleSalesButton[_0xb79705(0x11a)]=_0xb79705(0x167),updateAnalysis(salesData)):(analysisSection[_0xb79705(0x13c)][_0xb79705(0x111)]=_0xb79705(0xf8),this[_0xb79705(0x11a)]=_0xb79705(0x18c));}),toggleSalesButton[_0xba1a92(0xf0)](_0xba1a92(0x14f),function(){const _0x4c1ce6=_0xba1a92;salesDetailsSection['style']['display']==='none'||salesDetailsSection[_0x4c1ce6(0x13c)]['display']===''?(salesDetailsSection[_0x4c1ce6(0x13c)][_0x4c1ce6(0x111)]=_0x4c1ce6(0x148),analysisSection[_0x4c1ce6(0x13c)]['display']=_0x4c1ce6(0xf8),this[_0x4c1ce6(0x11a)]=_0x4c1ce6(0x145),toggleAnalysisButton['textContent']=_0x4c1ce6(0x18c)):(salesDetailsSection[_0x4c1ce6(0x13c)]['display']=_0x4c1ce6(0xf8),this['textContent']='Détail\x20des\x20ventes');});const themeToggle=document[_0xba1a92(0x13f)](_0xba1a92(0x13e)),root=document[_0xba1a92(0xfb)];let isDarkTheme=!![];function setTheme(_0x3d7b31){const _0x4964c8=_0xba1a92;_0x3d7b31?(root['classList'][_0x4964c8(0x117)]('light-theme'),themeToggle[_0x4964c8(0x11a)]='🌙',themeToggle[_0x4964c8(0x179)](_0x4964c8(0x114),'Activer\x20le\x20mode\x20clair')):(root[_0x4964c8(0x10f)]['add'](_0x4964c8(0x165)),themeToggle['textContent']='☀️',themeToggle[_0x4964c8(0x179)](_0x4964c8(0x114),_0x4964c8(0x141))),isDarkTheme=_0x3d7b31,localStorage[_0x4964c8(0x120)](_0x4964c8(0xef),_0x3d7b31);}themeToggle[_0xba1a92(0xf0)](_0xba1a92(0x14f),()=>{setTheme(!isDarkTheme);}),document['addEventListener'](_0xba1a92(0x12e),()=>{const _0x4cf3fb=_0xba1a92,_0xe9a3b0=localStorage[_0x4cf3fb(0x15c)](_0x4cf3fb(0xef));_0xe9a3b0!==null?setTheme(_0xe9a3b0===_0x4cf3fb(0xf7)):setTheme(![]);}),document[_0xba1a92(0x13f)](_0xba1a92(0x18e))[_0xba1a92(0xf0)](_0xba1a92(0x14f),function(){const _0x36c079=_0xba1a92,_0xed0163=new Date(document[_0x36c079(0x13f)](_0x36c079(0x143))[_0x36c079(0x11f)]),_0x345bb1=new Date(document[_0x36c079(0x13f)](_0x36c079(0x11d))[_0x36c079(0x11f)]);updateStockTables(_0xed0163,_0x345bb1);}),document[_0xba1a92(0x13f)](_0xba1a92(0x10c))['addEventListener']('click',function(){const _0x5a020e=_0xba1a92,_0x36f6c9=new Date(document[_0x5a020e(0x13f)]('salesStartDate')[_0x5a020e(0x11f)]),_0x1f1eef=new Date(document[_0x5a020e(0x13f)](_0x5a020e(0x108))['value']),_0x296e2b=salesData[_0x5a020e(0x140)](_0x24e12d=>{const _0xbdb9b4=_0x5a020e,_0x362029=new Date(_0x24e12d[_0xbdb9b4(0x14b)]);return(!_0x36f6c9||_0x362029>=_0x36f6c9)&&(!_0x1f1eef||_0x362029<=_0x1f1eef);});renderTable(_0x296e2b),updateAnalysis(_0x296e2b);});function updateStockTables(_0x559675,_0xa84347){const _0x385ab1=_0xba1a92,_0x49f93d=document[_0x385ab1(0x13f)](_0x385ab1(0x121));_0x49f93d[_0x385ab1(0x132)](_0x385ab1(0x18f))['innerHTML']='',database[_0x385ab1(0x10d)](_0x385ab1(0x16e)+currentUser)['once']('value')[_0x385ab1(0x188)](_0x49121d=>{const _0x3d444e=_0x385ab1,_0x3a2e9e={};_0x49121d[_0x3d444e(0x184)](_0xfe93a8=>{const _0x236e0=_0x3d444e,_0x455d73=_0xfe93a8[_0x236e0(0x160)](),_0x327a88=new Date(_0x455d73['dateTime']);(!_0x559675||_0x327a88>=_0x559675)&&(!_0xa84347||_0x327a88<=_0xa84347)&&((!_0x3a2e9e[_0x455d73[_0x236e0(0xfe)]]||_0x327a88>new Date(_0x3a2e9e[_0x455d73[_0x236e0(0xfe)]]['dateTime']))&&(_0x3a2e9e[_0x455d73[_0x236e0(0xfe)]]=_0x455d73));}),Object['values'](_0x3a2e9e)[_0x3d444e(0x184)](_0x3c28a5=>{const _0x57bee3=_0x3d444e,_0x3d411c=_0x49f93d[_0x57bee3(0x132)]('tbody')['insertRow']();_0x3d411c['insertCell'](0x0)['textContent']=_0x3c28a5[_0x57bee3(0xfe)],_0x3d411c[_0x57bee3(0xec)](0x1)['textContent']=_0x3c28a5['SF'],_0x3d411c[_0x57bee3(0xec)](0x2)[_0x57bee3(0x11a)]=new Date(_0x3c28a5[_0x57bee3(0x14b)])[_0x57bee3(0x127)]();}),setupSort(_0x49f93d);});}function showSubscriptionRequiredModal(){const _0x27c6cd=_0xba1a92;document[_0x27c6cd(0x13f)](_0x27c6cd(0x10e))[_0x27c6cd(0x13c)][_0x27c6cd(0x111)]='flex';}function hideSubscriptionRequiredModal(){const _0x5cce17=_0xba1a92;document[_0x5cce17(0x13f)](_0x5cce17(0x10e))[_0x5cce17(0x13c)][_0x5cce17(0x111)]=_0x5cce17(0xf8);}function redirectToSubscription(){const _0x3dc5b1=_0xba1a92;window['location'][_0x3dc5b1(0x156)]=_0x3dc5b1(0x180);}async function checkSubscriptionStatus(){const _0x210318=_0xba1a92;try{const _0x41d34b=await adminRef[_0x210318(0x12d)](_0x210318(0x11f)),_0x52516c=_0x41d34b[_0x210318(0x160)](),_0x3b3cc1=new Date();if(_0x52516c&&_0x52516c[_0x210318(0x16d)]===_0x210318(0x175)){const _0x1c15e7=new Date(_0x52516c['endDate']);return _0x1c15e7>=_0x3b3cc1?!![]:(await adminRef[_0x210318(0xe6)]({'status':_0x210318(0x13a)}),![]);}else return![];}catch(_0x305197){console[_0x210318(0x182)](_0x210318(0xf3),_0x305197);throw _0x305197;}}updateTable(),updateStockTables(),analysisSection['style'][_0xba1a92(0x111)]='none',salesDetailsSection[_0xba1a92(0x13c)][_0xba1a92(0x111)]=_0xba1a92(0xf8),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage['getItem'](_0xba1a92(0xef));savedTheme!==null&&setTheme(savedTheme===_0xba1a92(0xf7));