const _0x74a9bb=_0x4983;(function(_0x5993ca,_0x2e239c){const _0x49c5a7=_0x4983,_0x51847=_0x5993ca();while(!![]){try{const _0x46929e=-parseInt(_0x49c5a7(0x175))/0x1+-parseInt(_0x49c5a7(0x1de))/0x2*(-parseInt(_0x49c5a7(0x19f))/0x3)+parseInt(_0x49c5a7(0x176))/0x4+-parseInt(_0x49c5a7(0x18c))/0x5*(-parseInt(_0x49c5a7(0x1e0))/0x6)+parseInt(_0x49c5a7(0x183))/0x7*(parseInt(_0x49c5a7(0x17b))/0x8)+parseInt(_0x49c5a7(0x149))/0x9*(parseInt(_0x49c5a7(0x17e))/0xa)+parseInt(_0x49c5a7(0x17c))/0xb*(-parseInt(_0x49c5a7(0x15a))/0xc);if(_0x46929e===_0x2e239c)break;else _0x51847['push'](_0x51847['shift']());}catch(_0x23ac8b){_0x51847['push'](_0x51847['shift']());}}}(_0x2e0f,0x71679));const firebaseConfig={'apiKey':_0x74a9bb(0x179),'authDomain':_0x74a9bb(0x1ea),'databaseURL':_0x74a9bb(0x1b1),'projectId':_0x74a9bb(0x18f),'storageBucket':'mcl-prod-50357.firebasestorage.app','messagingSenderId':'4448533810','appId':'1:4448533810:web:3c6663a93602c31eaa6b2b','measurementId':'G-YLLCW6BTJ6'};firebase['initializeApp'](firebaseConfig);const database=firebase[_0x74a9bb(0x1b4)](),adminRef=database['ref'](_0x74a9bb(0x1e8)),loginForm=document[_0x74a9bb(0x1db)]('loginForm'),signupForm=document[_0x74a9bb(0x1db)](_0x74a9bb(0x158)),loginContainer=document[_0x74a9bb(0x1db)]('loginContainer'),signupContainer=document[_0x74a9bb(0x1db)]('signupContainer'),dashboardContainer=document[_0x74a9bb(0x1db)](_0x74a9bb(0x1eb)),salesForm=document[_0x74a9bb(0x1db)]('salesForm'),salesTable=document[_0x74a9bb(0x1db)](_0x74a9bb(0x186)),totalSalesElement=document[_0x74a9bb(0x1db)](_0x74a9bb(0x165)),averageSalesElement=document[_0x74a9bb(0x1db)](_0x74a9bb(0x162)),userInfoElement=document['getElementById'](_0x74a9bb(0x1dd)),toggleAnalysisButton=document[_0x74a9bb(0x1db)]('toggleAnalysisButton'),toggleSalesButton=document[_0x74a9bb(0x1db)](_0x74a9bb(0x1c3)),analysisSection=document[_0x74a9bb(0x1db)](_0x74a9bb(0x1d0)),salesDetailsSection=document[_0x74a9bb(0x1db)](_0x74a9bb(0x1e9)),signupButton=document[_0x74a9bb(0x1db)](_0x74a9bb(0x1d8)),loginFromSignup=document[_0x74a9bb(0x1db)](_0x74a9bb(0x190)),productSelect=document[_0x74a9bb(0x1db)](_0x74a9bb(0x163)),stockTableGlobal=document['getElementById'](_0x74a9bb(0x154));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document['getElementById']('dateTime')[_0x74a9bb(0x17f)]=new Date()[_0x74a9bb(0x16e)]()[_0x74a9bb(0x1cd)](0x0,0x10);function fetchTicketCategories(){const _0x2dfe4f=_0x74a9bb;database[_0x2dfe4f(0x1c9)]('TicketsTotal')[_0x2dfe4f(0x156)](_0x2dfe4f(0x17f))[_0x2dfe4f(0x16f)](_0x23bd4a=>{const _0x38e9d4=_0x2dfe4f;ticketCategories=_0x23bd4a[_0x38e9d4(0x191)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x2547dc=_0x74a9bb;productSelect['innerHTML']=_0x2547dc(0x171);for(const _0x3cdf43 in ticketCategories){const _0x3abac1=ticketCategories[_0x3cdf43][_0x2547dc(0x1ae)][0x0],_0x55e163=document['createElement'](_0x2547dc(0x1c2));_0x55e163[_0x2547dc(0x17f)]=_0x3cdf43,_0x55e163[_0x2547dc(0x148)]=_0x3cdf43+'\x20('+_0x3abac1+_0x2547dc(0x1f1),productSelect[_0x2547dc(0x1af)](_0x55e163);}}fetchTicketCategories(),loginForm['addEventListener'](_0x74a9bb(0x1cc),function(_0x3713eb){const _0x3566a4=_0x74a9bb;_0x3713eb[_0x3566a4(0x181)]();const _0x4b8271=document['getElementById'](_0x3566a4(0x1b2))[_0x3566a4(0x17f)],_0x2af67d=document[_0x3566a4(0x1db)](_0x3566a4(0x188))[_0x3566a4(0x17f)];database['ref']('users/'+_0x4b8271)[_0x3566a4(0x156)](_0x3566a4(0x17f))[_0x3566a4(0x16f)](_0x481855=>{const _0x39e8a6=_0x3566a4;_0x481855[_0x39e8a6(0x160)]()?_0x481855[_0x39e8a6(0x191)]()[_0x39e8a6(0x188)]===_0x2af67d?loginSuccess(_0x4b8271):alert(_0x39e8a6(0x1cf)):alert(_0x39e8a6(0x197));});}),signupForm[_0x74a9bb(0x159)](_0x74a9bb(0x1cc),function(_0x5837fa){const _0x2fcc85=_0x74a9bb;_0x5837fa['preventDefault']();const _0xc3ef8d=document['getElementById'](_0x2fcc85(0x195))['value'],_0x2d3c44=document[_0x2fcc85(0x1db)](_0x2fcc85(0x19c))[_0x2fcc85(0x17f)];database[_0x2fcc85(0x1c9)](_0x2fcc85(0x1d5)+_0xc3ef8d)[_0x2fcc85(0x156)](_0x2fcc85(0x17f))[_0x2fcc85(0x16f)](_0x133dc5=>{const _0x37d81a=_0x2fcc85;_0x133dc5[_0x37d81a(0x160)]()?alert(_0x37d81a(0x155)):database[_0x37d81a(0x1c9)]('users/'+_0xc3ef8d)[_0x37d81a(0x187)]({'password':_0x2d3c44})[_0x37d81a(0x16f)](()=>{const _0x3a7f98=_0x37d81a;alert(_0x3a7f98(0x18b)),signupContainer[_0x3a7f98(0x15c)][_0x3a7f98(0x1b0)]=_0x3a7f98(0x1c7),loginContainer[_0x3a7f98(0x15c)][_0x3a7f98(0x1b0)]=_0x3a7f98(0x18a);})[_0x37d81a(0x1a2)](_0x56fe70=>{const _0x15c515=_0x37d81a;console[_0x15c515(0x182)](_0x15c515(0x1c4),_0x56fe70),alert(_0x15c515(0x198));});});}),signupButton[_0x74a9bb(0x159)](_0x74a9bb(0x1c0),function(){const _0x15d32c=_0x74a9bb;loginContainer[_0x15d32c(0x15c)][_0x15d32c(0x1b0)]=_0x15d32c(0x1c7),signupContainer[_0x15d32c(0x15c)][_0x15d32c(0x1b0)]=_0x15d32c(0x18a);}),loginFromSignup[_0x74a9bb(0x159)]('click',function(){const _0x593828=_0x74a9bb;signupContainer[_0x593828(0x15c)][_0x593828(0x1b0)]=_0x593828(0x1c7),loginContainer['style'][_0x593828(0x1b0)]=_0x593828(0x18a);});function loginSuccess(_0x4628e5){const _0x45c405=_0x74a9bb;currentUser=_0x4628e5,loginContainer[_0x45c405(0x15c)][_0x45c405(0x1b0)]=_0x45c405(0x1c7),signupContainer[_0x45c405(0x15c)][_0x45c405(0x1b0)]=_0x45c405(0x1c7),dashboardContainer[_0x45c405(0x15c)][_0x45c405(0x1b0)]='block',userInfoElement[_0x45c405(0x148)]=_0x45c405(0x15f)+_0x4628e5,checkSubscriptionStatus()['then'](_0x38760d=>{_0x38760d?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x45c405(0x1a2)](_0x1ffa86=>{const _0x19593a=_0x45c405;console[_0x19593a(0x182)](_0x19593a(0x1ef),_0x1ffa86),alert('Erreur\x20lors\x20de\x20la\x20vÃ©rification\x20de\x20l\x27abonnement.');});}function listenForSalesDataChanges(){const _0x371695=_0x74a9bb;salesDataListener=database[_0x371695(0x1c9)]('sales/'+currentUser)['on']('value',_0x11baf5=>{const _0x1ffee2=_0x371695;salesData=[],_0x11baf5[_0x1ffee2(0x196)](_0x28cce5=>{const _0x56cf3c=_0x1ffee2,_0x53a72b=_0x28cce5[_0x56cf3c(0x191)]();_0x53a72b[_0x56cf3c(0x1d4)]=_0x28cce5[_0x56cf3c(0x1d4)],_0x53a72b[_0x56cf3c(0x19a)]=(_0x53a72b['V']*_0x53a72b['PV'])['toFixed'](0x2),salesData['push'](_0x53a72b);}),analysisSection[_0x1ffee2(0x15c)]['display']===_0x1ffee2(0x18a)&&updateAnalysis(salesData);});}document[_0x74a9bb(0x1db)](_0x74a9bb(0x163))[_0x74a9bb(0x159)](_0x74a9bb(0x1c1),function(){const _0x42cb33=_0x74a9bb,_0x305772=this[_0x42cb33(0x17f)];database[_0x42cb33(0x1c9)](_0x42cb33(0x1d1)+currentUser)[_0x42cb33(0x185)](_0x42cb33(0x163))['equalTo'](_0x305772)[_0x42cb33(0x1e4)](0x1)[_0x42cb33(0x156)](_0x42cb33(0x17f))[_0x42cb33(0x16f)](_0x44a510=>{const _0x37a53d=_0x42cb33;if(_0x44a510[_0x37a53d(0x160)]()){const _0x4a83a8=Object[_0x37a53d(0x193)](_0x44a510['val']())[0x0];document[_0x37a53d(0x1db)]('SI')[_0x37a53d(0x17f)]=_0x4a83a8['SF']||0x0;}else document[_0x37a53d(0x1db)]('SI')['value']=0x0;}),updatePV();}),document[_0x74a9bb(0x1db)]('V')[_0x74a9bb(0x159)]('input',updateSF),document['getElementById'](_0x74a9bb(0x14e))[_0x74a9bb(0x159)](_0x74a9bb(0x1e6),updateSF);function updateSF(){const _0x1bb539=_0x74a9bb,_0x4e47ba=parseInt(document[_0x1bb539(0x1db)]('SI')[_0x1bb539(0x17f)])||0x0,_0x67ccff=parseInt(document[_0x1bb539(0x1db)](_0x1bb539(0x14e))[_0x1bb539(0x17f)])||0x0,_0x2be45b=parseInt(document['getElementById']('V')['value'])||0x0;document[_0x1bb539(0x1db)]('SF')[_0x1bb539(0x17f)]=_0x4e47ba+_0x67ccff-_0x2be45b;}function updatePV(){const _0x872849=_0x74a9bb,_0xceb2ae=document[_0x872849(0x1db)](_0x872849(0x163))[_0x872849(0x17f)],_0x5016a2=ticketCategories[_0xceb2ae]?.[_0x872849(0x1ae)][0x0];document[_0x872849(0x1db)]('PV')[_0x872849(0x17f)]=_0x5016a2||0x0;}salesForm[_0x74a9bb(0x159)](_0x74a9bb(0x1cc),function(_0x21587c){const _0x59085f=_0x74a9bb;_0x21587c[_0x59085f(0x181)]();const _0x2c3f9a={'dateTime':document[_0x59085f(0x1db)](_0x59085f(0x1da))[_0x59085f(0x17f)],'product':document[_0x59085f(0x1db)](_0x59085f(0x163))[_0x59085f(0x17f)],'SI':parseInt(document['getElementById']('SI')['value'])||0x0,'APP':parseInt(document[_0x59085f(0x1db)]('APP')[_0x59085f(0x17f)])||0x0,'V':parseInt(document[_0x59085f(0x1db)]('V')[_0x59085f(0x17f)])||0x0,'SF':parseInt(document[_0x59085f(0x1db)]('SF')['value'])||0x0,'PV':parseFloat(document[_0x59085f(0x1db)]('PV')[_0x59085f(0x17f)])||0x0};database[_0x59085f(0x1c9)](_0x59085f(0x1d1)+currentUser)[_0x59085f(0x1b7)](_0x2c3f9a)[_0x59085f(0x16f)](()=>{const _0xab1be=_0x59085f;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0xab1be(0x1ed)](),document['getElementById'](_0xab1be(0x1da))[_0xab1be(0x17f)]=new Date()[_0xab1be(0x16e)]()[_0xab1be(0x1cd)](0x0,0x10);})[_0x59085f(0x1a2)](_0x2641e1=>{const _0xe24301=_0x59085f;console[_0xe24301(0x182)](_0xe24301(0x19b),_0x2641e1),alert(_0xe24301(0x194));});});function updateTable(){const _0x1f0d74=_0x74a9bb,_0x39d458=salesTable[_0x1f0d74(0x1b6)]('tbody');_0x39d458[_0x1f0d74(0x14a)]='',database[_0x1f0d74(0x1c9)]('sales/'+currentUser)[_0x1f0d74(0x156)](_0x1f0d74(0x17f))[_0x1f0d74(0x16f)](_0x3b0678=>{const _0x1aa3bf=_0x1f0d74;salesData=[],_0x3b0678[_0x1aa3bf(0x196)](_0x3a58eb=>{const _0x3b20c8=_0x1aa3bf,_0x364c27=_0x3a58eb[_0x3b20c8(0x191)]();_0x364c27[_0x3b20c8(0x19a)]=(_0x364c27['V']*_0x364c27['PV'])[_0x3b20c8(0x189)](0x2),salesData[_0x3b20c8(0x1b7)](_0x364c27);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0xae7b66=_0x74a9bb,_0x33e409=document[_0xae7b66(0x1db)](_0xae7b66(0x154));_0x33e409['querySelector']('tbody')['innerHTML']='',database['ref'](_0xae7b66(0x1d1)+currentUser)[_0xae7b66(0x156)](_0xae7b66(0x17f))[_0xae7b66(0x16f)](_0x3808b7=>{const _0x1301a0=_0xae7b66,_0x3c8359={};_0x3808b7[_0x1301a0(0x196)](_0x57e751=>{const _0x534ad2=_0x1301a0,_0x36f1d0=_0x57e751[_0x534ad2(0x191)]();(!_0x3c8359[_0x36f1d0['product']]||new Date(_0x36f1d0['dateTime'])>new Date(_0x3c8359[_0x36f1d0[_0x534ad2(0x163)]][_0x534ad2(0x1da)]))&&(_0x3c8359[_0x36f1d0[_0x534ad2(0x163)]]=_0x36f1d0);}),Object[_0x1301a0(0x193)](_0x3c8359)[_0x1301a0(0x196)](_0x475881=>{const _0x236cd4=_0x1301a0,_0xe4f8dd=_0x33e409[_0x236cd4(0x1b6)](_0x236cd4(0x1a6))[_0x236cd4(0x1c6)]();_0xe4f8dd[_0x236cd4(0x180)](0x0)[_0x236cd4(0x148)]=_0x475881['product'],_0xe4f8dd[_0x236cd4(0x180)](0x1)[_0x236cd4(0x148)]=_0x475881['SF'],_0xe4f8dd[_0x236cd4(0x180)](0x2)[_0x236cd4(0x148)]=new Date(_0x475881[_0x236cd4(0x1da)])[_0x236cd4(0x1a8)]();}),setupSort(_0x33e409);});}function exportToExcel(){const _0x5cd51c=_0x74a9bb,_0x3c692e=XLSX[_0x5cd51c(0x167)][_0x5cd51c(0x1bd)](),_0x702d5e=XLSX[_0x5cd51c(0x167)][_0x5cd51c(0x1ca)](document[_0x5cd51c(0x1db)](_0x5cd51c(0x186)));XLSX['utils'][_0x5cd51c(0x1bf)](_0x3c692e,_0x702d5e,'Ventes'),XLSX[_0x5cd51c(0x16c)](_0x3c692e,_0x5cd51c(0x1ec));}document['getElementById'](_0x74a9bb(0x172))[_0x74a9bb(0x159)](_0x74a9bb(0x1c0),exportToExcel);function deleteEntry(_0x43f57c){const _0x550c47=_0x74a9bb;database['ref'](_0x550c47(0x1d1)+currentUser+'/'+_0x43f57c)[_0x550c47(0x156)](_0x550c47(0x17f))[_0x550c47(0x16f)](_0x21087e=>{const _0x120f65=_0x550c47,_0x5524a2=_0x21087e['val']();return database[_0x120f65(0x1c9)](_0x120f65(0x1d1)+currentUser+'/'+_0x43f57c)['remove']()['then'](()=>{const _0x4a3b2d=_0x120f65;return console[_0x4a3b2d(0x16a)]('EntrÃ©e\x20supprimÃ©e\x20avec\x20succÃ¨s'),updateStockAfterDeletion(_0x5524a2);});})[_0x550c47(0x16f)](()=>{return updateTable();})[_0x550c47(0x16f)](()=>{updateStockTables(),updateAnalysis();})[_0x550c47(0x1a2)](_0x2df486=>{const _0x5945ec=_0x550c47;console[_0x5945ec(0x182)](_0x5945ec(0x1bb),_0x2df486);});}function updateStockAfterDeletion(_0x2806d7){const _0x145941=_0x74a9bb;return database[_0x145941(0x1c9)](_0x145941(0x1d1)+currentUser)[_0x145941(0x185)](_0x145941(0x1da))['endAt'](_0x2806d7[_0x145941(0x1da)])[_0x145941(0x1e4)](0x2)[_0x145941(0x156)]('value')['then'](_0x3e2338=>{const _0x2ce2f9=_0x145941;let _0x36d48c=[];_0x3e2338[_0x2ce2f9(0x196)](_0x22f560=>{const _0x5c6ed7=_0x2ce2f9;_0x36d48c[_0x5c6ed7(0x1b7)]({'key':_0x22f560[_0x5c6ed7(0x1d4)],..._0x22f560[_0x5c6ed7(0x191)]()});}),_0x36d48c[_0x2ce2f9(0x1aa)]((_0x527c37,_0x51b1e5)=>new Date(_0x51b1e5[_0x2ce2f9(0x1da)])-new Date(_0x527c37['dateTime']));if(_0x36d48c['length']>0x1&&_0x36d48c[0x0][_0x2ce2f9(0x1d4)]!==_0x2806d7[_0x2ce2f9(0x1d4)]){const _0x36c0fc=_0x36d48c[0x1],_0x4bb40f=_0x36c0fc['SF']+_0x2806d7['V']-_0x2806d7[_0x2ce2f9(0x14e)];return database[_0x2ce2f9(0x1c9)]('sales/'+currentUser+'/'+_0x36c0fc[_0x2ce2f9(0x1d4)])[_0x2ce2f9(0x1a9)]({'SF':_0x4bb40f});}return Promise[_0x2ce2f9(0x15e)]();});}function updateTable(){const _0x49f3ce=_0x74a9bb;return database[_0x49f3ce(0x1c9)]('sales/'+currentUser)[_0x49f3ce(0x156)](_0x49f3ce(0x17f))[_0x49f3ce(0x16f)](_0x5713b7=>{const _0x41bf84=_0x49f3ce;salesData=[],_0x5713b7[_0x41bf84(0x196)](_0x404414=>{const _0x47a1bc=_0x41bf84,_0x62d43f=_0x404414[_0x47a1bc(0x191)]();_0x62d43f[_0x47a1bc(0x1d4)]=_0x404414[_0x47a1bc(0x1d4)],_0x62d43f[_0x47a1bc(0x19a)]=(_0x62d43f['V']*_0x62d43f['PV'])[_0x47a1bc(0x189)](0x2),salesData[_0x47a1bc(0x1b7)](_0x62d43f);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0xda9d3a){const _0x170b4d=_0x74a9bb,_0x2dfe04=salesTable[_0x170b4d(0x1b6)]('tbody');_0x2dfe04[_0x170b4d(0x14a)]='',_0xda9d3a[_0x170b4d(0x196)](_0x20a6fc=>{const _0x3cee7f=_0x170b4d,_0x17f577=_0x2dfe04[_0x3cee7f(0x1c6)]();_0x17f577[_0x3cee7f(0x14c)][_0x3cee7f(0x1d4)]=_0x20a6fc[_0x3cee7f(0x1d4)],_0x17f577['insertCell'](0x0)[_0x3cee7f(0x148)]=new Date(_0x20a6fc[_0x3cee7f(0x1da)])[_0x3cee7f(0x1a8)](),_0x17f577[_0x3cee7f(0x180)](0x1)['textContent']=_0x20a6fc[_0x3cee7f(0x163)],_0x17f577[_0x3cee7f(0x180)](0x2)['textContent']=_0x20a6fc['SI'],_0x17f577['insertCell'](0x3)[_0x3cee7f(0x148)]=_0x20a6fc[_0x3cee7f(0x14e)],_0x17f577[_0x3cee7f(0x180)](0x4)[_0x3cee7f(0x148)]=_0x20a6fc['V'],_0x17f577[_0x3cee7f(0x180)](0x5)[_0x3cee7f(0x148)]=_0x20a6fc['SF'],_0x17f577[_0x3cee7f(0x180)](0x6)[_0x3cee7f(0x148)]=_0x20a6fc['PV'],_0x17f577[_0x3cee7f(0x180)](0x7)[_0x3cee7f(0x148)]=_0x20a6fc[_0x3cee7f(0x19a)];}),addDeleteIcons();}function addDeleteIcons(){const _0xf463cc=_0x74a9bb,_0x18823c=salesTable['querySelectorAll']('tbody\x20tr');_0x18823c[_0xf463cc(0x196)](_0x68f039=>{const _0x488339=_0xf463cc,_0x1a991d=document['createElement']('span');_0x1a991d[_0x488339(0x14a)]='â',_0x1a991d[_0x488339(0x1e1)]='delete-icon',_0x1a991d[_0x488339(0x1ac)]=_0x5adea8=>{const _0x572ec6=_0x488339;_0x5adea8[_0x572ec6(0x169)](),showConfirmDialog(_0x68f039[_0x572ec6(0x14c)]['key']);},_0x68f039[_0x488339(0x1b6)](_0x488339(0x1e7))[_0x488339(0x1af)](_0x1a991d);});}function _0x4983(_0x4c1e8b,_0x337159){const _0x2e0f3c=_0x2e0f();return _0x4983=function(_0x498330,_0x2bce72){_0x498330=_0x498330-0x148;let _0x1ea46d=_0x2e0f3c[_0x498330];return _0x1ea46d;},_0x4983(_0x4c1e8b,_0x337159);}function showConfirmDialog(_0x2b755e){const _0x444510=_0x74a9bb,_0x2c2aba=document[_0x444510(0x1e5)](_0x444510(0x14f));_0x2c2aba[_0x444510(0x1e1)]=_0x444510(0x168),_0x2c2aba[_0x444510(0x14a)]=_0x444510(0x1d9),document[_0x444510(0x161)][_0x444510(0x1af)](_0x2c2aba),document[_0x444510(0x1db)](_0x444510(0x184))['onclick']=()=>{const _0x4bde2e=_0x444510;deleteEntry(_0x2b755e),document[_0x4bde2e(0x161)]['removeChild'](_0x2c2aba);},document[_0x444510(0x1db)]('cancelDelete')['onclick']=()=>{const _0xc1dcca=_0x444510;document[_0xc1dcca(0x161)][_0xc1dcca(0x1ee)](_0x2c2aba);};}function setupSearch(){const _0x3aaaf6=_0x74a9bb,_0x3e4a65=document[_0x3aaaf6(0x17d)](_0x3aaaf6(0x1e3));_0x3e4a65[_0x3aaaf6(0x196)](_0x4699a6=>{const _0x14ea74=_0x3aaaf6;_0x4699a6[_0x14ea74(0x159)](_0x14ea74(0x1e6),()=>{const _0x18dbbc=_0x14ea74,_0x25a1f4=salesData[_0x18dbbc(0x178)](_0x46e32e=>{const _0x16c411=_0x18dbbc;return Object[_0x16c411(0x14d)](_0x46e32e)[_0x16c411(0x1ab)](_0x132a61=>{const _0x58226b=_0x16c411,_0x3bec9e=document[_0x58226b(0x1db)](_0x58226b(0x15d)+(_0x132a61[_0x58226b(0x1bc)](0x0)[_0x58226b(0x1df)]()+_0x132a61['slice'](0x1)))?.[_0x58226b(0x17f)][_0x58226b(0x1f2)]()||'';return _0x46e32e[_0x132a61][_0x58226b(0x1f0)]()['toLowerCase']()['includes'](_0x3bec9e);});});renderTable(_0x25a1f4),updateAnalysis(_0x25a1f4);});});}function setupSort(_0x44b995){const _0x49b974=_0x74a9bb,_0x55bf64=_0x44b995[_0x49b974(0x17d)](_0x49b974(0x16d));_0x55bf64[_0x49b974(0x196)](_0x1c0dfc=>{const _0x42db8e=_0x49b974;_0x1c0dfc[_0x42db8e(0x159)]('click',()=>{const _0x186a23=_0x42db8e,_0x586a8b=_0x1c0dfc[_0x186a23(0x14c)][_0x186a23(0x1aa)],_0x1505e4=_0x44b995['id']==='salesTable'?salesData:stockData;_0x1505e4[_0x186a23(0x1aa)]((_0x435fcf,_0x153cb5)=>{if(_0x435fcf[_0x586a8b]<_0x153cb5[_0x586a8b])return-0x1;if(_0x435fcf[_0x586a8b]>_0x153cb5[_0x586a8b])return 0x1;return 0x0;}),_0x44b995['id']==='salesTable'?(renderTable(_0x1505e4),updateAnalysis(_0x1505e4)):renderStockTable(_0x1505e4,_0x44b995);});});}function renderStockTable(_0x9d7fac,_0x433ece){const _0x4a3cf1=_0x74a9bb,_0x2b4a7e=_0x433ece[_0x4a3cf1(0x1b6)]('tbody');_0x2b4a7e[_0x4a3cf1(0x14a)]='',_0x9d7fac[_0x4a3cf1(0x196)](_0x52f80d=>{const _0x28946d=_0x4a3cf1,_0xbeaa16=_0x2b4a7e[_0x28946d(0x1c6)]();_0xbeaa16['insertCell'](0x0)[_0x28946d(0x148)]=_0x52f80d[_0x28946d(0x163)],_0xbeaa16['insertCell'](0x1)[_0x28946d(0x148)]=_0x52f80d['SF'],_0xbeaa16['insertCell'](0x2)[_0x28946d(0x148)]=new Date(_0x52f80d['dateTime'])[_0x28946d(0x1a8)]();});}function updateAnalysis(_0x1c0200=salesData){const _0x1eb8fd=_0x74a9bb;let _0x465fef=0x0,_0x3e74d7=0x0;const _0x1d3b0b={'labels':[],'sales':[],'prices':[]};_0x1c0200[_0x1eb8fd(0x196)](_0xd5d162=>{const _0x25d564=_0x1eb8fd;_0x465fef+=_0xd5d162['V']*_0xd5d162['PV'],_0x3e74d7++,_0x1d3b0b[_0x25d564(0x177)][_0x25d564(0x1b7)](new Date(_0xd5d162[_0x25d564(0x1da)])[_0x25d564(0x1a8)]()),_0x1d3b0b[_0x25d564(0x170)][_0x25d564(0x1b7)](_0xd5d162['V']),_0x1d3b0b[_0x25d564(0x1c5)][_0x25d564(0x1b7)](_0xd5d162['PV']);});const _0x441ee5=_0x465fef/_0x3e74d7||0x0;totalSalesElement[_0x1eb8fd(0x148)]=_0x1eb8fd(0x15b)+_0x465fef[_0x1eb8fd(0x189)](0x2)+_0x1eb8fd(0x1a3),averageSalesElement[_0x1eb8fd(0x148)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x441ee5['toFixed'](0x2)+_0x1eb8fd(0x1a3),updateChart(_0x1d3b0b),updatePeriodAnalysis(_0x1c0200);}function updateChart(_0x15565e){const _0x3f9c97=_0x74a9bb,_0x8899f8=document[_0x3f9c97(0x1db)](_0x3f9c97(0x1be))[_0x3f9c97(0x1a7)]('2d');salesChart&&salesChart['destroy'](),salesChart=new Chart(_0x8899f8,{'type':_0x3f9c97(0x1b8),'data':{'labels':_0x15565e[_0x3f9c97(0x177)],'datasets':[{'label':_0x3f9c97(0x1d3),'data':_0x15565e[_0x3f9c97(0x170)],'borderColor':_0x3f9c97(0x157),'tension':0.1},{'label':_0x3f9c97(0x1a0),'data':_0x15565e[_0x3f9c97(0x1c5)],'borderColor':'rgb(255,\x2099,\x20132)','tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x3f9c97(0x157)}},'x':{'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x3f9c97(0x157)}}},'plugins':{'legend':{'labels':{'color':_0x3f9c97(0x157)}}}}});}function updatePeriodAnalysis(_0x38538d){const _0x43a198=_0x74a9bb,_0x239190=new Date(),_0x29d5c2=new Date(_0x239190['getTime']()-0x7*0x18*0x3c*0x3c*0x3e8),_0x10f4e9=new Date(_0x239190[_0x43a198(0x14b)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x38b30f=new Date(_0x239190[_0x43a198(0x14b)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0xa0a0d2=_0x38538d['filter'](_0xdeeb5e=>new Date(_0xdeeb5e['dateTime'])>=_0x29d5c2),_0x4e2ee9=_0x38538d[_0x43a198(0x178)](_0x3cf1e7=>new Date(_0x3cf1e7[_0x43a198(0x1da)])>=_0x10f4e9),_0x3b80e4=_0x38538d[_0x43a198(0x178)](_0x1a64b9=>new Date(_0x1a64b9[_0x43a198(0x1da)])>=_0x38b30f);updatePeriodStats(_0xa0a0d2,_0x43a198(0x1e2)),updatePeriodStats(_0x4e2ee9,_0x43a198(0x174)),updatePeriodStats(_0x3b80e4,'threeMonth');}function updatePeriodStats(_0x1e324a,_0xb113ed){const _0x535952=_0x74a9bb,_0x27bbc5=_0x1e324a[_0x535952(0x1c8)]((_0xac5762,_0x463e8c)=>_0xac5762+_0x463e8c['V']*_0x463e8c['PV'],0x0),_0x539cff=_0x27bbc5/_0x1e324a[_0x535952(0x1b5)]||0x0;document['getElementById'](_0xb113ed+'TotalSales')[_0x535952(0x148)]=_0x535952(0x15b)+_0x27bbc5[_0x535952(0x189)](0x2)+_0x535952(0x1a3),document[_0x535952(0x1db)](_0xb113ed+_0x535952(0x166))[_0x535952(0x148)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x539cff[_0x535952(0x189)](0x2)+_0x535952(0x1a3);}toggleAnalysisButton[_0x74a9bb(0x159)]('click',function(){const _0x49b57d=_0x74a9bb;analysisSection[_0x49b57d(0x15c)][_0x49b57d(0x1b0)]==='none'||analysisSection[_0x49b57d(0x15c)][_0x49b57d(0x1b0)]===''?(analysisSection[_0x49b57d(0x15c)]['display']=_0x49b57d(0x18a),salesDetailsSection[_0x49b57d(0x15c)][_0x49b57d(0x1b0)]=_0x49b57d(0x1c7),this['textContent']='Masquer\x20l\x27analyse\x20des\x20ventes',toggleSalesButton['textContent']=_0x49b57d(0x1ba),updateAnalysis(salesData)):(analysisSection[_0x49b57d(0x15c)]['display']=_0x49b57d(0x1c7),this[_0x49b57d(0x148)]=_0x49b57d(0x1d6));}),toggleSalesButton[_0x74a9bb(0x159)](_0x74a9bb(0x1c0),function(){const _0x2eeb79=_0x74a9bb;salesDetailsSection[_0x2eeb79(0x15c)][_0x2eeb79(0x1b0)]===_0x2eeb79(0x1c7)||salesDetailsSection[_0x2eeb79(0x15c)][_0x2eeb79(0x1b0)]===''?(salesDetailsSection[_0x2eeb79(0x15c)][_0x2eeb79(0x1b0)]='block',analysisSection[_0x2eeb79(0x15c)][_0x2eeb79(0x1b0)]=_0x2eeb79(0x1c7),this['textContent']='Masquer\x20le\x20dÃ©tail\x20des\x20ventes',toggleAnalysisButton[_0x2eeb79(0x148)]='Analyse\x20des\x20ventes'):(salesDetailsSection[_0x2eeb79(0x15c)][_0x2eeb79(0x1b0)]='none',this['textContent']=_0x2eeb79(0x1ba));});const themeToggle=document[_0x74a9bb(0x1db)](_0x74a9bb(0x1ad)),root=document['documentElement'];let isDarkTheme=!![];function setTheme(_0x368c1e){const _0x2fb927=_0x74a9bb;_0x368c1e?(root[_0x2fb927(0x1b9)]['remove'](_0x2fb927(0x1a4)),themeToggle['textContent']='ð',themeToggle['setAttribute'](_0x2fb927(0x164),_0x2fb927(0x150))):(root[_0x2fb927(0x1b9)][_0x2fb927(0x1b3)](_0x2fb927(0x1a4)),themeToggle[_0x2fb927(0x148)]='âï¸',themeToggle[_0x2fb927(0x19d)]('aria-label',_0x2fb927(0x1a1))),isDarkTheme=_0x368c1e,localStorage['setItem']('darkTheme',_0x368c1e);}themeToggle[_0x74a9bb(0x159)](_0x74a9bb(0x1c0),()=>{setTheme(!isDarkTheme);}),document[_0x74a9bb(0x159)](_0x74a9bb(0x18e),()=>{const _0x1e708f=_0x74a9bb,_0x2ffbac=localStorage[_0x1e708f(0x16b)](_0x1e708f(0x1a5));_0x2ffbac!==null?setTheme(_0x2ffbac===_0x1e708f(0x199)):setTheme(![]);}),document['getElementById'](_0x74a9bb(0x1cb))[_0x74a9bb(0x159)](_0x74a9bb(0x1c0),function(){const _0x2d3e7d=_0x74a9bb,_0xce3342=new Date(document[_0x2d3e7d(0x1db)](_0x2d3e7d(0x153))[_0x2d3e7d(0x17f)]),_0x1c0eac=new Date(document['getElementById'](_0x2d3e7d(0x152))['value']);updateStockTables(_0xce3342,_0x1c0eac);}),document['getElementById']('filterSalesDates')[_0x74a9bb(0x159)]('click',function(){const _0x173934=_0x74a9bb,_0x452b4b=new Date(document[_0x173934(0x1db)](_0x173934(0x1d2))[_0x173934(0x17f)]),_0x5ced0d=new Date(document[_0x173934(0x1db)](_0x173934(0x1ce))[_0x173934(0x17f)]),_0x561fcb=salesData[_0x173934(0x178)](_0x2f0e1c=>{const _0x50b6c7=new Date(_0x2f0e1c['dateTime']);return(!_0x452b4b||_0x50b6c7>=_0x452b4b)&&(!_0x5ced0d||_0x50b6c7<=_0x5ced0d);});renderTable(_0x561fcb),updateAnalysis(_0x561fcb);});function updateStockTables(_0x32ce73,_0x1f49f5){const _0x5d3c1b=_0x74a9bb,_0x70d76a=document[_0x5d3c1b(0x1db)]('stockTableGlobal');_0x70d76a['querySelector'](_0x5d3c1b(0x1a6))['innerHTML']='',database[_0x5d3c1b(0x1c9)]('sales/'+currentUser)['once'](_0x5d3c1b(0x17f))[_0x5d3c1b(0x16f)](_0x3b739a=>{const _0x23aa80=_0x5d3c1b,_0xa79831={};_0x3b739a['forEach'](_0x132f56=>{const _0x534897=_0x4983,_0x4a6ad4=_0x132f56['val'](),_0x925684=new Date(_0x4a6ad4[_0x534897(0x1da)]);(!_0x32ce73||_0x925684>=_0x32ce73)&&(!_0x1f49f5||_0x925684<=_0x1f49f5)&&((!_0xa79831[_0x4a6ad4['product']]||_0x925684>new Date(_0xa79831[_0x4a6ad4['product']][_0x534897(0x1da)]))&&(_0xa79831[_0x4a6ad4[_0x534897(0x163)]]=_0x4a6ad4));}),Object['values'](_0xa79831)[_0x23aa80(0x196)](_0x16d43e=>{const _0x56eda4=_0x23aa80,_0x4dea83=_0x70d76a['querySelector'](_0x56eda4(0x1a6))[_0x56eda4(0x1c6)]();_0x4dea83[_0x56eda4(0x180)](0x0)['textContent']=_0x16d43e['product'],_0x4dea83[_0x56eda4(0x180)](0x1)[_0x56eda4(0x148)]=_0x16d43e['SF'],_0x4dea83[_0x56eda4(0x180)](0x2)[_0x56eda4(0x148)]=new Date(_0x16d43e['dateTime'])[_0x56eda4(0x1a8)]();}),setupSort(_0x70d76a);});}function showSubscriptionRequiredModal(){const _0x1b4688=_0x74a9bb;document['getElementById'](_0x1b4688(0x192))[_0x1b4688(0x15c)][_0x1b4688(0x1b0)]=_0x1b4688(0x18d);}function hideSubscriptionRequiredModal(){const _0x307be9=_0x74a9bb;document[_0x307be9(0x1db)](_0x307be9(0x192))['style'][_0x307be9(0x1b0)]='none';}function redirectToSubscription(){const _0x55a236=_0x74a9bb;window[_0x55a236(0x1dc)][_0x55a236(0x151)]='index.html';}async function checkSubscriptionStatus(){const _0x49de00=_0x74a9bb;try{const _0x166249=await adminRef['once']('value'),_0x31db6e=_0x166249[_0x49de00(0x191)](),_0x2ef1d8=new Date();if(_0x31db6e&&_0x31db6e[_0x49de00(0x173)]===_0x49de00(0x1d7)){const _0x268e0d=new Date(_0x31db6e[_0x49de00(0x19e)]);return _0x268e0d>=_0x2ef1d8?!![]:(await adminRef[_0x49de00(0x1a9)]({'status':_0x49de00(0x17a)}),![]);}else return![];}catch(_0xd70a2a){console['error'](_0x49de00(0x1ef),_0xd70a2a);throw _0xd70a2a;}}updateTable(),updateStockTables(),analysisSection['style'][_0x74a9bb(0x1b0)]=_0x74a9bb(0x1c7),salesDetailsSection[_0x74a9bb(0x15c)][_0x74a9bb(0x1b0)]=_0x74a9bb(0x1c7),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x74a9bb(0x16b)]('darkTheme');savedTheme!==null&&setTheme(savedTheme===_0x74a9bb(0x199));function _0x2e0f(){const _0x46b5a8=['slice','salesEndDate','Mot\x20de\x20passe\x20incorrect','analysisSection','sales/','salesStartDate','Ventes','key','users/','Analyse\x20des\x20ventes','active','signupButton','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Ãtes-vous\x20sÃ»r\x20de\x20vouloir\x20supprimer\x20cette\x20entrÃ©e\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','dateTime','getElementById','location','userInfo','2516NsCDMG','toUpperCase','6JElhnI','className','week','#searchInputs\x20input','limitToLast','createElement','input','td:first-child','admin/subscription','salesDetailsSection','mcl-prod-50357.firebaseapp.com','dashboardContainer','ventes_wifi_zone.xlsx','reset','removeChild','Erreur\x20lors\x20de\x20la\x20vÃ©rification\x20de\x20l\x27abonnement\x20:','toString','\x20FCFA)','toLowerCase','textContent','3937131OIGlFR','innerHTML','getTime','dataset','keys','APP','div','Activer\x20le\x20mode\x20clair','href','stockEndDate','stockStartDate','stockTableGlobal','Ce\x20nom\x20d\x27utilisateur\x20est\x20dÃ©jÃ \x20utilisÃ©.','once','rgb(0,\x20255,\x20255)','signupForm','addEventListener','389700hcNhrw','Total\x20des\x20ventes:\x20','style','search','resolve','Utilisateur:\x20','exists','body','averageSales','product','aria-label','totalSales','AverageSales','utils','confirm-dialog','stopPropagation','log','getItem','writeFile','th[data-sort]','toISOString','then','sales','<option\x20value=\x22\x22>SÃ©lectionner\x20un\x20produit</option>','exportExcel','status','month','152890YNrdSb','1847728wVjXZi','labels','filter','AIzaSyDvEQr4EFU5zYfuXKxYLSvOr_erNo3bV14','expired','93608mtJOET','825lCZTiw','querySelectorAll','10BLWZZc','value','insertCell','preventDefault','error','553BvbwPq','confirmDelete','orderByChild','salesTable','set','password','toFixed','block','Inscription\x20rÃ©ussie\x20!\x20Connectez-vous.','3667990aKqJYk','flex','DOMContentLoaded','mcl-prod-50357','loginFromSignup','val','subscriptionRequiredModal','values','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrÃ©e.','signupUsername','forEach','Utilisateur\x20introuvable','Erreur\x20lors\x20de\x20la\x20crÃ©ation\x20du\x20compte','true','total','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrÃ©e\x20:','signupPassword','setAttribute','endDate','1182xldPiL','Prix\x20de\x20vente','Activer\x20le\x20mode\x20sombre','catch','\x20FCFA','light-theme','darkTheme','tbody','getContext','toLocaleString','update','sort','every','onclick','theme-toggle','prix','appendChild','display','https://mcl-prod-50357-default-rtdb.firebaseio.com','username','add','database','length','querySelector','push','line','classList','DÃ©tail\x20des\x20ventes','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrÃ©e:','charAt','book_new','salesChart','book_append_sheet','click','change','option','toggleSalesButton','Error\x20creating\x20user:','prices','insertRow','none','reduce','ref','table_to_sheet','filterStockDates','submit'];_0x2e0f=function(){return _0x46b5a8;};return _0x2e0f();}