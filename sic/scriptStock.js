const _0x249908=_0x55e8;(function(_0x3f3110,_0x232490){const _0x55a366=_0x55e8,_0x1df355=_0x3f3110();while(!![]){try{const _0x5660e9=parseInt(_0x55a366(0x1bb))/0x1*(parseInt(_0x55a366(0x1d2))/0x2)+parseInt(_0x55a366(0x197))/0x3+-parseInt(_0x55a366(0x19d))/0x4*(-parseInt(_0x55a366(0x1dc))/0x5)+-parseInt(_0x55a366(0x1ea))/0x6*(parseInt(_0x55a366(0x21d))/0x7)+parseInt(_0x55a366(0x207))/0x8*(-parseInt(_0x55a366(0x21f))/0x9)+-parseInt(_0x55a366(0x213))/0xa+parseInt(_0x55a366(0x1a7))/0xb*(-parseInt(_0x55a366(0x206))/0xc);if(_0x5660e9===_0x232490)break;else _0x1df355['push'](_0x1df355['shift']());}catch(_0x16f314){_0x1df355['push'](_0x1df355['shift']());}}}(_0x1dd3,0x6a478));const firebaseConfig={'apiKey':'AIzaSyDlpP8jqtmVqNAES51e18nXzY1a_f2YaFs','authDomain':_0x249908(0x1f3),'databaseURL':'https://sic-wifi-zone-default-rtdb.firebaseio.com','projectId':_0x249908(0x1dd),'storageBucket':'sic-wifi-zone.firebasestorage.app','messagingSenderId':'538299261046','appId':_0x249908(0x1ad),'measurementId':_0x249908(0x1a8)};firebase[_0x249908(0x203)](firebaseConfig);const database=firebase[_0x249908(0x1e0)](),adminRef=database[_0x249908(0x186)](_0x249908(0x1bf)),loginForm=document[_0x249908(0x1ee)](_0x249908(0x1e1)),signupForm=document[_0x249908(0x1ee)](_0x249908(0x1fe)),loginContainer=document[_0x249908(0x1ee)](_0x249908(0x1bc)),signupContainer=document['getElementById'](_0x249908(0x1b2)),dashboardContainer=document[_0x249908(0x1ee)](_0x249908(0x1b8)),salesForm=document[_0x249908(0x1ee)]('salesForm'),salesTable=document[_0x249908(0x1ee)](_0x249908(0x189)),totalSalesElement=document[_0x249908(0x1ee)](_0x249908(0x1c3)),averageSalesElement=document[_0x249908(0x1ee)]('averageSales'),userInfoElement=document['getElementById'](_0x249908(0x1c4)),toggleAnalysisButton=document[_0x249908(0x1ee)](_0x249908(0x1ef)),toggleSalesButton=document['getElementById'](_0x249908(0x18e)),analysisSection=document[_0x249908(0x1ee)](_0x249908(0x202)),salesDetailsSection=document[_0x249908(0x1ee)](_0x249908(0x19f)),signupButton=document[_0x249908(0x1ee)](_0x249908(0x1d3)),loginFromSignup=document[_0x249908(0x1ee)](_0x249908(0x1fa)),productSelect=document['getElementById'](_0x249908(0x1e4)),stockTableGlobal=document[_0x249908(0x1ee)](_0x249908(0x185));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x249908(0x1ee)]('dateTime')[_0x249908(0x17d)]=new Date()[_0x249908(0x1ab)]()[_0x249908(0x19a)](0x0,0x10);function fetchTicketCategories(){const _0x149a98=_0x249908;database[_0x149a98(0x186)](_0x149a98(0x1b6))[_0x149a98(0x223)](_0x149a98(0x17d))[_0x149a98(0x212)](_0x5e8322=>{ticketCategories=_0x5e8322['val']()||{},populateProductSelect();});}function populateProductSelect(){const _0x4835ad=_0x249908;productSelect[_0x4835ad(0x1c8)]='<option\x20value=\x22\x22>S√©lectionner\x20un\x20produit</option>';for(const _0x11fdf5 in ticketCategories){const _0x8844f7=ticketCategories[_0x11fdf5]['prix'][0x0],_0x577827=document[_0x4835ad(0x1ff)](_0x4835ad(0x1a1));_0x577827[_0x4835ad(0x17d)]=_0x11fdf5,_0x577827[_0x4835ad(0x1a3)]=_0x11fdf5+'\x20('+_0x8844f7+_0x4835ad(0x221),productSelect[_0x4835ad(0x214)](_0x577827);}}fetchTicketCategories(),loginForm[_0x249908(0x1a5)](_0x249908(0x1e2),function(_0x50098e){const _0xec58d=_0x249908;_0x50098e[_0xec58d(0x1fb)]();const _0x115533=document[_0xec58d(0x1ee)](_0xec58d(0x1a9))[_0xec58d(0x17d)],_0x3c872b=document['getElementById'](_0xec58d(0x1b7))[_0xec58d(0x17d)];database['ref'](_0xec58d(0x1af)+_0x115533)['once'](_0xec58d(0x17d))[_0xec58d(0x212)](_0x51efaf=>{const _0xadd8a4=_0xec58d;_0x51efaf['exists']()?_0x51efaf[_0xadd8a4(0x1f9)]()[_0xadd8a4(0x1b7)]===_0x3c872b?loginSuccess(_0x115533):alert(_0xadd8a4(0x1df)):alert(_0xadd8a4(0x219));});}),signupForm[_0x249908(0x1a5)]('submit',function(_0x1f81a7){const _0x184485=_0x249908;_0x1f81a7[_0x184485(0x1fb)]();const _0x4ae772=document['getElementById']('signupUsername')[_0x184485(0x17d)],_0x27abe2=document[_0x184485(0x1ee)]('signupPassword')[_0x184485(0x17d)];database['ref']('users/'+_0x4ae772)[_0x184485(0x223)](_0x184485(0x17d))[_0x184485(0x212)](_0x356bf1=>{const _0x270586=_0x184485;_0x356bf1[_0x270586(0x195)]()?alert(_0x270586(0x192)):database[_0x270586(0x186)](_0x270586(0x1af)+_0x4ae772)[_0x270586(0x1a6)]({'password':_0x27abe2})[_0x270586(0x212)](()=>{const _0x84ff6c=_0x270586;alert('Inscription\x20r√©ussie\x20!\x20Connectez-vous.'),signupContainer[_0x84ff6c(0x180)][_0x84ff6c(0x205)]=_0x84ff6c(0x216),loginContainer[_0x84ff6c(0x180)]['display']=_0x84ff6c(0x191);})[_0x270586(0x179)](_0x379049=>{const _0x17b44e=_0x270586;console['error']('Error\x20creating\x20user:',_0x379049),alert(_0x17b44e(0x1cd));});});}),signupButton[_0x249908(0x1a5)]('click',function(){const _0x2908c5=_0x249908;loginContainer[_0x2908c5(0x180)][_0x2908c5(0x205)]=_0x2908c5(0x216),signupContainer[_0x2908c5(0x180)][_0x2908c5(0x205)]=_0x2908c5(0x191);}),loginFromSignup[_0x249908(0x1a5)]('click',function(){const _0x5b1324=_0x249908;signupContainer['style'][_0x5b1324(0x205)]=_0x5b1324(0x216),loginContainer[_0x5b1324(0x180)][_0x5b1324(0x205)]='block';});function loginSuccess(_0x471e70){const _0x5d9f1c=_0x249908;currentUser=_0x471e70,loginContainer[_0x5d9f1c(0x180)][_0x5d9f1c(0x205)]=_0x5d9f1c(0x216),signupContainer[_0x5d9f1c(0x180)]['display']=_0x5d9f1c(0x216),dashboardContainer[_0x5d9f1c(0x180)][_0x5d9f1c(0x205)]=_0x5d9f1c(0x191),userInfoElement[_0x5d9f1c(0x1a3)]='Utilisateur:\x20'+_0x471e70,checkSubscriptionStatus()[_0x5d9f1c(0x212)](_0x334500=>{_0x334500?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})['catch'](_0x454c60=>{const _0x1f5c26=_0x5d9f1c;console[_0x1f5c26(0x1aa)](_0x1f5c26(0x1ba),_0x454c60),alert(_0x1f5c26(0x204));});}function listenForSalesDataChanges(){const _0x818bf3=_0x249908;salesDataListener=database[_0x818bf3(0x186)](_0x818bf3(0x18c)+currentUser)['on'](_0x818bf3(0x17d),_0x4e9090=>{const _0x59f4c9=_0x818bf3;salesData=[],_0x4e9090['forEach'](_0x63b401=>{const _0x29230a=_0x55e8,_0x5bdadf=_0x63b401[_0x29230a(0x1f9)]();_0x5bdadf['key']=_0x63b401[_0x29230a(0x1f0)],_0x5bdadf[_0x29230a(0x1e7)]=(_0x5bdadf['V']*_0x5bdadf['PV'])['toFixed'](0x2),salesData[_0x29230a(0x1c9)](_0x5bdadf);}),analysisSection['style'][_0x59f4c9(0x205)]===_0x59f4c9(0x191)&&updateAnalysis(salesData);});}document[_0x249908(0x1ee)](_0x249908(0x1e4))[_0x249908(0x1a5)]('change',function(){const _0x22c19d=_0x249908,_0x14376f=this[_0x22c19d(0x17d)];database[_0x22c19d(0x186)]('sales/'+currentUser)[_0x22c19d(0x21e)]('product')['equalTo'](_0x14376f)[_0x22c19d(0x1d6)](0x1)[_0x22c19d(0x223)]('value')['then'](_0x385a97=>{const _0x46c63e=_0x22c19d;if(_0x385a97[_0x46c63e(0x195)]()){const _0x1ff9ce=Object[_0x46c63e(0x20a)](_0x385a97['val']())[0x0];document['getElementById']('SI')[_0x46c63e(0x17d)]=_0x1ff9ce['SF']||0x0;}else document['getElementById']('SI')[_0x46c63e(0x17d)]=0x0;}),updatePV();}),document['getElementById']('V')[_0x249908(0x1a5)](_0x249908(0x1cc),updateSF),document[_0x249908(0x1ee)]('APP')['addEventListener'](_0x249908(0x1cc),updateSF);function updateSF(){const _0x4e9710=_0x249908,_0x246363=parseInt(document[_0x4e9710(0x1ee)]('SI')[_0x4e9710(0x17d)])||0x0,_0x12d7d4=parseInt(document[_0x4e9710(0x1ee)](_0x4e9710(0x21a))[_0x4e9710(0x17d)])||0x0,_0xc51f3e=parseInt(document[_0x4e9710(0x1ee)]('V')[_0x4e9710(0x17d)])||0x0;document[_0x4e9710(0x1ee)]('SF')[_0x4e9710(0x17d)]=_0x246363+_0x12d7d4-_0xc51f3e;}function updatePV(){const _0x199299=_0x249908,_0x4a71c1=document[_0x199299(0x1ee)](_0x199299(0x1e4))[_0x199299(0x17d)],_0x266b64=ticketCategories[_0x4a71c1]?.[_0x199299(0x181)][0x0];document['getElementById']('PV')['value']=_0x266b64||0x0;}salesForm[_0x249908(0x1a5)](_0x249908(0x1e2),function(_0x228ed4){const _0x5c41d4=_0x249908;_0x228ed4[_0x5c41d4(0x1fb)]();const _0x57d389={'dateTime':document[_0x5c41d4(0x1ee)](_0x5c41d4(0x196))['value'],'product':document['getElementById']('product')[_0x5c41d4(0x17d)],'SI':parseInt(document['getElementById']('SI')['value'])||0x0,'APP':parseInt(document[_0x5c41d4(0x1ee)](_0x5c41d4(0x21a))[_0x5c41d4(0x17d)])||0x0,'V':parseInt(document['getElementById']('V')[_0x5c41d4(0x17d)])||0x0,'SF':parseInt(document[_0x5c41d4(0x1ee)]('SF')[_0x5c41d4(0x17d)])||0x0,'PV':parseFloat(document[_0x5c41d4(0x1ee)]('PV')[_0x5c41d4(0x17d)])||0x0};database[_0x5c41d4(0x186)](_0x5c41d4(0x18c)+currentUser)['push'](_0x57d389)['then'](()=>{const _0x38b194=_0x5c41d4;updateTable(),updateStockTables(),updateAnalysis(),salesForm['reset'](),document['getElementById']('dateTime')[_0x38b194(0x17d)]=new Date()[_0x38b194(0x1ab)]()[_0x38b194(0x19a)](0x0,0x10);})[_0x5c41d4(0x179)](_0x6d2e4f=>{const _0x448e99=_0x5c41d4;console['error'](_0x448e99(0x1e9),_0x6d2e4f),alert('Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e.');});});function updateTable(){const _0x536923=_0x249908,_0x39031a=salesTable['querySelector'](_0x536923(0x190));_0x39031a['innerHTML']='',database[_0x536923(0x186)](_0x536923(0x18c)+currentUser)[_0x536923(0x223)](_0x536923(0x17d))[_0x536923(0x212)](_0x5c9cff=>{const _0x2a3b5a=_0x536923;salesData=[],_0x5c9cff[_0x2a3b5a(0x1eb)](_0x45c9fd=>{const _0x5adea7=_0x2a3b5a,_0x572d3f=_0x45c9fd['val']();_0x572d3f[_0x5adea7(0x1e7)]=(_0x572d3f['V']*_0x572d3f['PV'])[_0x5adea7(0x1d5)](0x2),salesData['push'](_0x572d3f);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x144732=_0x249908,_0x3682d2=document['getElementById'](_0x144732(0x185));_0x3682d2[_0x144732(0x17e)](_0x144732(0x190))[_0x144732(0x1c8)]='',database[_0x144732(0x186)](_0x144732(0x18c)+currentUser)['once'](_0x144732(0x17d))[_0x144732(0x212)](_0x5082dd=>{const _0xac61e8=_0x144732,_0x53d406={};_0x5082dd[_0xac61e8(0x1eb)](_0x82478f=>{const _0x2eff7b=_0xac61e8,_0x2a5e79=_0x82478f[_0x2eff7b(0x1f9)]();(!_0x53d406[_0x2a5e79[_0x2eff7b(0x1e4)]]||new Date(_0x2a5e79[_0x2eff7b(0x196)])>new Date(_0x53d406[_0x2a5e79['product']]['dateTime']))&&(_0x53d406[_0x2a5e79[_0x2eff7b(0x1e4)]]=_0x2a5e79);}),Object[_0xac61e8(0x20a)](_0x53d406)[_0xac61e8(0x1eb)](_0x4260fd=>{const _0x4cbe59=_0xac61e8,_0x79e88a=_0x3682d2[_0x4cbe59(0x17e)](_0x4cbe59(0x190))['insertRow']();_0x79e88a[_0x4cbe59(0x17f)](0x0)[_0x4cbe59(0x1a3)]=_0x4260fd[_0x4cbe59(0x1e4)],_0x79e88a[_0x4cbe59(0x17f)](0x1)['textContent']=_0x4260fd['SF'],_0x79e88a[_0x4cbe59(0x17f)](0x2)[_0x4cbe59(0x1a3)]=new Date(_0x4260fd[_0x4cbe59(0x196)])[_0x4cbe59(0x220)]();}),setupSort(_0x3682d2);});}function exportToExcel(){const _0x1fa4e8=_0x249908,_0x31e574=XLSX[_0x1fa4e8(0x1be)][_0x1fa4e8(0x1f2)](),_0x4b5a58=XLSX[_0x1fa4e8(0x1be)]['table_to_sheet'](document[_0x1fa4e8(0x1ee)](_0x1fa4e8(0x189)));XLSX[_0x1fa4e8(0x1be)]['book_append_sheet'](_0x31e574,_0x4b5a58,_0x1fa4e8(0x1ed)),XLSX[_0x1fa4e8(0x1f8)](_0x31e574,'ventes_wifi_zone.xlsx');}document['getElementById'](_0x249908(0x1d1))[_0x249908(0x1a5)](_0x249908(0x1b1),exportToExcel);function deleteEntry(_0x2d205d){const _0x492c58=_0x249908;database[_0x492c58(0x186)]('sales/'+currentUser+'/'+_0x2d205d)[_0x492c58(0x223)](_0x492c58(0x17d))[_0x492c58(0x212)](_0x5a254d=>{const _0x406bb6=_0x492c58,_0x4b527d=_0x5a254d[_0x406bb6(0x1f9)]();return database[_0x406bb6(0x186)](_0x406bb6(0x18c)+currentUser+'/'+_0x2d205d)[_0x406bb6(0x1cf)]()[_0x406bb6(0x212)](()=>{const _0x126a09=_0x406bb6;return console['log'](_0x126a09(0x1b0)),updateStockAfterDeletion(_0x4b527d);});})[_0x492c58(0x212)](()=>{return updateTable();})[_0x492c58(0x212)](()=>{updateStockTables(),updateAnalysis();})[_0x492c58(0x179)](_0x5f3d87=>{const _0x5b112b=_0x492c58;console[_0x5b112b(0x1aa)](_0x5b112b(0x1d8),_0x5f3d87);});}function updateStockAfterDeletion(_0x36e84a){const _0x230581=_0x249908;return database[_0x230581(0x186)](_0x230581(0x18c)+currentUser)['orderByChild']('dateTime')[_0x230581(0x1b3)](_0x36e84a[_0x230581(0x196)])[_0x230581(0x1d6)](0x2)[_0x230581(0x223)](_0x230581(0x17d))['then'](_0xd73de7=>{const _0x232105=_0x230581;let _0x12e4d2=[];_0xd73de7[_0x232105(0x1eb)](_0x11f83d=>{const _0x1299fb=_0x232105;_0x12e4d2[_0x1299fb(0x1c9)]({'key':_0x11f83d[_0x1299fb(0x1f0)],..._0x11f83d[_0x1299fb(0x1f9)]()});}),_0x12e4d2[_0x232105(0x1fc)]((_0x2164b4,_0x502712)=>new Date(_0x502712['dateTime'])-new Date(_0x2164b4[_0x232105(0x196)]));if(_0x12e4d2[_0x232105(0x183)]>0x1&&_0x12e4d2[0x0][_0x232105(0x1f0)]!==_0x36e84a[_0x232105(0x1f0)]){const _0x3378e8=_0x12e4d2[0x1],_0x5e9a39=_0x3378e8['SF']+_0x36e84a['V']-_0x36e84a['APP'];return database[_0x232105(0x186)](_0x232105(0x18c)+currentUser+'/'+_0x3378e8['key'])[_0x232105(0x208)]({'SF':_0x5e9a39});}return Promise['resolve']();});}function _0x55e8(_0x10ba74,_0x1d2ff6){const _0x1dd346=_0x1dd3();return _0x55e8=function(_0x55e845,_0x1ce5b1){_0x55e845=_0x55e845-0x179;let _0x21b87f=_0x1dd346[_0x55e845];return _0x21b87f;},_0x55e8(_0x10ba74,_0x1d2ff6);}function updateTable(){const _0x7dd23=_0x249908;return database[_0x7dd23(0x186)](_0x7dd23(0x18c)+currentUser)[_0x7dd23(0x223)](_0x7dd23(0x17d))[_0x7dd23(0x212)](_0x555d14=>{salesData=[],_0x555d14['forEach'](_0x3960f6=>{const _0x4ab666=_0x55e8,_0x2b115c=_0x3960f6[_0x4ab666(0x1f9)]();_0x2b115c[_0x4ab666(0x1f0)]=_0x3960f6[_0x4ab666(0x1f0)],_0x2b115c[_0x4ab666(0x1e7)]=(_0x2b115c['V']*_0x2b115c['PV'])[_0x4ab666(0x1d5)](0x2),salesData[_0x4ab666(0x1c9)](_0x2b115c);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x25b088){const _0x3af6dd=_0x249908,_0x232e96=salesTable[_0x3af6dd(0x17e)](_0x3af6dd(0x190));_0x232e96[_0x3af6dd(0x1c8)]='',_0x25b088[_0x3af6dd(0x1eb)](_0x4e64e6=>{const _0x24ec33=_0x3af6dd,_0xceb765=_0x232e96[_0x24ec33(0x19c)]();_0xceb765['dataset']['key']=_0x4e64e6[_0x24ec33(0x1f0)],_0xceb765[_0x24ec33(0x17f)](0x0)[_0x24ec33(0x1a3)]=new Date(_0x4e64e6[_0x24ec33(0x196)])[_0x24ec33(0x220)](),_0xceb765[_0x24ec33(0x17f)](0x1)[_0x24ec33(0x1a3)]=_0x4e64e6[_0x24ec33(0x1e4)],_0xceb765['insertCell'](0x2)[_0x24ec33(0x1a3)]=_0x4e64e6['SI'],_0xceb765[_0x24ec33(0x17f)](0x3)[_0x24ec33(0x1a3)]=_0x4e64e6[_0x24ec33(0x21a)],_0xceb765[_0x24ec33(0x17f)](0x4)[_0x24ec33(0x1a3)]=_0x4e64e6['V'],_0xceb765[_0x24ec33(0x17f)](0x5)[_0x24ec33(0x1a3)]=_0x4e64e6['SF'],_0xceb765[_0x24ec33(0x17f)](0x6)[_0x24ec33(0x1a3)]=_0x4e64e6['PV'],_0xceb765['insertCell'](0x7)[_0x24ec33(0x1a3)]=_0x4e64e6[_0x24ec33(0x1e7)];}),addDeleteIcons();}function addDeleteIcons(){const _0x2996a5=_0x249908,_0x4a700a=salesTable[_0x2996a5(0x20d)]('tbody\x20tr');_0x4a700a['forEach'](_0x368084=>{const _0xf4deb1=_0x2996a5,_0x451739=document[_0xf4deb1(0x1ff)]('span');_0x451739['innerHTML']='‚úñ',_0x451739['className']=_0xf4deb1(0x193),_0x451739[_0xf4deb1(0x1a2)]=_0x32a45c=>{const _0x1b1c0f=_0xf4deb1;_0x32a45c[_0x1b1c0f(0x1c7)](),showConfirmDialog(_0x368084[_0x1b1c0f(0x21c)][_0x1b1c0f(0x1f0)]);},_0x368084[_0xf4deb1(0x17e)]('td:first-child')[_0xf4deb1(0x214)](_0x451739);});}function showConfirmDialog(_0x2a5109){const _0x4ae05b=_0x249908,_0x14af25=document[_0x4ae05b(0x1ff)](_0x4ae05b(0x20c));_0x14af25[_0x4ae05b(0x1a4)]=_0x4ae05b(0x1e6),_0x14af25[_0x4ae05b(0x1c8)]=_0x4ae05b(0x1ca),document[_0x4ae05b(0x17b)][_0x4ae05b(0x214)](_0x14af25),document[_0x4ae05b(0x1ee)](_0x4ae05b(0x194))['onclick']=()=>{const _0xbe4ae3=_0x4ae05b;deleteEntry(_0x2a5109),document[_0xbe4ae3(0x17b)][_0xbe4ae3(0x1d4)](_0x14af25);},document[_0x4ae05b(0x1ee)](_0x4ae05b(0x210))['onclick']=()=>{const _0x4c3263=_0x4ae05b;document[_0x4c3263(0x17b)]['removeChild'](_0x14af25);};}function setupSearch(){const _0x1f8458=_0x249908,_0x4c278a=document['querySelectorAll'](_0x1f8458(0x1f7));_0x4c278a[_0x1f8458(0x1eb)](_0x4c0acd=>{const _0x5ac7d0=_0x1f8458;_0x4c0acd[_0x5ac7d0(0x1a5)]('input',()=>{const _0x34d346=salesData['filter'](_0xc9f5ea=>{const _0x4d17db=_0x55e8;return Object[_0x4d17db(0x1c1)](_0xc9f5ea)['every'](_0xa34d93=>{const _0x1a000c=_0x4d17db,_0x305d46=document[_0x1a000c(0x1ee)](_0x1a000c(0x201)+(_0xa34d93[_0x1a000c(0x1b5)](0x0)[_0x1a000c(0x20f)]()+_0xa34d93['slice'](0x1)))?.['value'][_0x1a000c(0x1c2)]()||'';return _0xc9f5ea[_0xa34d93]['toString']()[_0x1a000c(0x1c2)]()[_0x1a000c(0x1f5)](_0x305d46);});});renderTable(_0x34d346),updateAnalysis(_0x34d346);});});}function setupSort(_0xe06e11){const _0x4987c4=_0x249908,_0x2c5aca=_0xe06e11[_0x4987c4(0x20d)](_0x4987c4(0x1b4));_0x2c5aca['forEach'](_0x33f3d6=>{const _0x40cbbe=_0x4987c4;_0x33f3d6['addEventListener'](_0x40cbbe(0x1b1),()=>{const _0x36c92d=_0x40cbbe,_0x5edee4=_0x33f3d6['dataset'][_0x36c92d(0x1fc)],_0x173e97=_0xe06e11['id']===_0x36c92d(0x189)?salesData:stockData;_0x173e97[_0x36c92d(0x1fc)]((_0x5adea1,_0x53351e)=>{if(_0x5adea1[_0x5edee4]<_0x53351e[_0x5edee4])return-0x1;if(_0x5adea1[_0x5edee4]>_0x53351e[_0x5edee4])return 0x1;return 0x0;}),_0xe06e11['id']===_0x36c92d(0x189)?(renderTable(_0x173e97),updateAnalysis(_0x173e97)):renderStockTable(_0x173e97,_0xe06e11);});});}function renderStockTable(_0x4c3c18,_0x21f2e5){const _0x2926d8=_0x249908,_0x13b9e5=_0x21f2e5[_0x2926d8(0x17e)]('tbody');_0x13b9e5['innerHTML']='',_0x4c3c18[_0x2926d8(0x1eb)](_0x339b8a=>{const _0x4d33f4=_0x2926d8,_0x3537be=_0x13b9e5[_0x4d33f4(0x19c)]();_0x3537be[_0x4d33f4(0x17f)](0x0)[_0x4d33f4(0x1a3)]=_0x339b8a[_0x4d33f4(0x1e4)],_0x3537be[_0x4d33f4(0x17f)](0x1)[_0x4d33f4(0x1a3)]=_0x339b8a['SF'],_0x3537be[_0x4d33f4(0x17f)](0x2)[_0x4d33f4(0x1a3)]=new Date(_0x339b8a[_0x4d33f4(0x196)])[_0x4d33f4(0x220)]();});}function updateAnalysis(_0x496e43=salesData){const _0xbd6e41=_0x249908;let _0x4df96a=0x0,_0x2bbd56=0x0;const _0xb4bf7f={'labels':[],'sales':[],'prices':[]};_0x496e43['forEach'](_0x4ba833=>{const _0x54516e=_0x55e8;_0x4df96a+=_0x4ba833['V']*_0x4ba833['PV'],_0x2bbd56++,_0xb4bf7f[_0x54516e(0x18a)][_0x54516e(0x1c9)](new Date(_0x4ba833[_0x54516e(0x196)])[_0x54516e(0x220)]()),_0xb4bf7f[_0x54516e(0x17a)][_0x54516e(0x1c9)](_0x4ba833['V']),_0xb4bf7f[_0x54516e(0x1f6)][_0x54516e(0x1c9)](_0x4ba833['PV']);});const _0x36d462=_0x4df96a/_0x2bbd56||0x0;totalSalesElement[_0xbd6e41(0x1a3)]='Total\x20des\x20ventes:\x20'+_0x4df96a[_0xbd6e41(0x1d5)](0x2)+_0xbd6e41(0x1c5),averageSalesElement[_0xbd6e41(0x1a3)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x36d462[_0xbd6e41(0x1d5)](0x2)+_0xbd6e41(0x1c5),updateChart(_0xb4bf7f),updatePeriodAnalysis(_0x496e43);}function updateChart(_0x105d7e){const _0x33b0e8=_0x249908,_0x54288b=document[_0x33b0e8(0x1ee)](_0x33b0e8(0x222))[_0x33b0e8(0x1ce)]('2d');salesChart&&salesChart[_0x33b0e8(0x20b)](),salesChart=new Chart(_0x54288b,{'type':_0x33b0e8(0x1bd),'data':{'labels':_0x105d7e[_0x33b0e8(0x18a)],'datasets':[{'label':_0x33b0e8(0x1ed),'data':_0x105d7e['sales'],'borderColor':_0x33b0e8(0x1e8),'tension':0.1},{'label':_0x33b0e8(0x18f),'data':_0x105d7e[_0x33b0e8(0x1f6)],'borderColor':_0x33b0e8(0x188),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':_0x33b0e8(0x18d)},'ticks':{'color':_0x33b0e8(0x1e8)}},'x':{'grid':{'color':_0x33b0e8(0x18d)},'ticks':{'color':_0x33b0e8(0x1e8)}}},'plugins':{'legend':{'labels':{'color':_0x33b0e8(0x1e8)}}}}});}function updatePeriodAnalysis(_0x2fc372){const _0x5024fa=_0x249908,_0x27d3ab=new Date(),_0x10f57d=new Date(_0x27d3ab[_0x5024fa(0x1e5)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x268834=new Date(_0x27d3ab['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x3e756f=new Date(_0x27d3ab[_0x5024fa(0x1e5)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x5e5187=_0x2fc372[_0x5024fa(0x215)](_0x33ce76=>new Date(_0x33ce76[_0x5024fa(0x196)])>=_0x10f57d),_0x4dd7f5=_0x2fc372[_0x5024fa(0x215)](_0x2f6110=>new Date(_0x2f6110[_0x5024fa(0x196)])>=_0x268834),_0xd6ac8=_0x2fc372[_0x5024fa(0x215)](_0x35e528=>new Date(_0x35e528[_0x5024fa(0x196)])>=_0x3e756f);updatePeriodStats(_0x5e5187,_0x5024fa(0x18b)),updatePeriodStats(_0x4dd7f5,_0x5024fa(0x19e)),updatePeriodStats(_0xd6ac8,_0x5024fa(0x187));}function updatePeriodStats(_0x29182f,_0x908349){const _0x1d44ed=_0x249908,_0x52e350=_0x29182f[_0x1d44ed(0x1d7)]((_0x425231,_0x5ec954)=>_0x425231+_0x5ec954['V']*_0x5ec954['PV'],0x0),_0x1cd24a=_0x52e350/_0x29182f[_0x1d44ed(0x183)]||0x0;document['getElementById'](_0x908349+'TotalSales')[_0x1d44ed(0x1a3)]='Total\x20des\x20ventes:\x20'+_0x52e350[_0x1d44ed(0x1d5)](0x2)+_0x1d44ed(0x1c5),document[_0x1d44ed(0x1ee)](_0x908349+_0x1d44ed(0x1ae))['textContent']=_0x1d44ed(0x1f4)+_0x1cd24a[_0x1d44ed(0x1d5)](0x2)+_0x1d44ed(0x1c5);}toggleAnalysisButton[_0x249908(0x1a5)](_0x249908(0x1b1),function(){const _0x51da49=_0x249908;analysisSection['style'][_0x51da49(0x205)]===_0x51da49(0x216)||analysisSection[_0x51da49(0x180)][_0x51da49(0x205)]===''?(analysisSection[_0x51da49(0x180)]['display']=_0x51da49(0x191),salesDetailsSection[_0x51da49(0x180)][_0x51da49(0x205)]=_0x51da49(0x216),this['textContent']=_0x51da49(0x209),toggleSalesButton[_0x51da49(0x1a3)]=_0x51da49(0x1b9),updateAnalysis(salesData)):(analysisSection[_0x51da49(0x180)][_0x51da49(0x205)]=_0x51da49(0x216),this['textContent']=_0x51da49(0x1de));}),toggleSalesButton[_0x249908(0x1a5)](_0x249908(0x1b1),function(){const _0x1fed60=_0x249908;salesDetailsSection[_0x1fed60(0x180)]['display']===_0x1fed60(0x216)||salesDetailsSection[_0x1fed60(0x180)][_0x1fed60(0x205)]===''?(salesDetailsSection['style']['display']='block',analysisSection[_0x1fed60(0x180)][_0x1fed60(0x205)]='none',this[_0x1fed60(0x1a3)]=_0x1fed60(0x199),toggleAnalysisButton['textContent']=_0x1fed60(0x1de)):(salesDetailsSection[_0x1fed60(0x180)][_0x1fed60(0x205)]='none',this[_0x1fed60(0x1a3)]='D√©tail\x20des\x20ventes');});const themeToggle=document[_0x249908(0x1ee)](_0x249908(0x1d0)),root=document['documentElement'];let isDarkTheme=!![];function setTheme(_0x29c989){const _0x11f872=_0x249908;_0x29c989?(root[_0x11f872(0x200)][_0x11f872(0x1cf)](_0x11f872(0x1ec)),themeToggle[_0x11f872(0x1a3)]='üåô',themeToggle[_0x11f872(0x184)](_0x11f872(0x1da),'Activer\x20le\x20mode\x20clair')):(root[_0x11f872(0x200)][_0x11f872(0x182)](_0x11f872(0x1ec)),themeToggle['textContent']='‚òÄÔ∏è',themeToggle['setAttribute'](_0x11f872(0x1da),_0x11f872(0x17c))),isDarkTheme=_0x29c989,localStorage['setItem']('darkTheme',_0x29c989);}themeToggle[_0x249908(0x1a5)]('click',()=>{setTheme(!isDarkTheme);}),document[_0x249908(0x1a5)](_0x249908(0x1db),()=>{const _0x24d568=_0x249908,_0x1f3fcc=localStorage[_0x24d568(0x1c6)](_0x24d568(0x211));_0x1f3fcc!==null?setTheme(_0x1f3fcc===_0x24d568(0x1ac)):setTheme(![]);}),document[_0x249908(0x1ee)](_0x249908(0x217))[_0x249908(0x1a5)](_0x249908(0x1b1),function(){const _0x9a52fa=_0x249908,_0x188451=new Date(document[_0x9a52fa(0x1ee)]('stockStartDate')[_0x9a52fa(0x17d)]),_0x4bb3d5=new Date(document[_0x9a52fa(0x1ee)](_0x9a52fa(0x1fd))[_0x9a52fa(0x17d)]);updateStockTables(_0x188451,_0x4bb3d5);}),document[_0x249908(0x1ee)](_0x249908(0x1cb))[_0x249908(0x1a5)]('click',function(){const _0x236983=_0x249908,_0x5a0e8a=new Date(document[_0x236983(0x1ee)](_0x236983(0x1a0))[_0x236983(0x17d)]),_0x5e5892=new Date(document[_0x236983(0x1ee)](_0x236983(0x1e3))[_0x236983(0x17d)]),_0x2540a5=salesData[_0x236983(0x215)](_0x311e1b=>{const _0x3d019e=new Date(_0x311e1b['dateTime']);return(!_0x5a0e8a||_0x3d019e>=_0x5a0e8a)&&(!_0x5e5892||_0x3d019e<=_0x5e5892);});renderTable(_0x2540a5),updateAnalysis(_0x2540a5);});function updateStockTables(_0x20acac,_0x4bf97e){const _0x2bceff=_0x249908,_0x4ac6a3=document[_0x2bceff(0x1ee)](_0x2bceff(0x185));_0x4ac6a3[_0x2bceff(0x17e)]('tbody')[_0x2bceff(0x1c8)]='',database[_0x2bceff(0x186)](_0x2bceff(0x18c)+currentUser)[_0x2bceff(0x223)](_0x2bceff(0x17d))[_0x2bceff(0x212)](_0x26dc82=>{const _0x2aa467=_0x2bceff,_0x4b1f03={};_0x26dc82[_0x2aa467(0x1eb)](_0x1b9448=>{const _0x509081=_0x2aa467,_0x3a554a=_0x1b9448[_0x509081(0x1f9)](),_0x4cc079=new Date(_0x3a554a[_0x509081(0x196)]);(!_0x20acac||_0x4cc079>=_0x20acac)&&(!_0x4bf97e||_0x4cc079<=_0x4bf97e)&&((!_0x4b1f03[_0x3a554a[_0x509081(0x1e4)]]||_0x4cc079>new Date(_0x4b1f03[_0x3a554a['product']][_0x509081(0x196)]))&&(_0x4b1f03[_0x3a554a['product']]=_0x3a554a));}),Object[_0x2aa467(0x20a)](_0x4b1f03)['forEach'](_0x426c73=>{const _0x8a6a16=_0x2aa467,_0x5ef2a9=_0x4ac6a3[_0x8a6a16(0x17e)](_0x8a6a16(0x190))[_0x8a6a16(0x19c)]();_0x5ef2a9[_0x8a6a16(0x17f)](0x0)['textContent']=_0x426c73[_0x8a6a16(0x1e4)],_0x5ef2a9[_0x8a6a16(0x17f)](0x1)['textContent']=_0x426c73['SF'],_0x5ef2a9[_0x8a6a16(0x17f)](0x2)[_0x8a6a16(0x1a3)]=new Date(_0x426c73[_0x8a6a16(0x196)])[_0x8a6a16(0x220)]();}),setupSort(_0x4ac6a3);});}function showSubscriptionRequiredModal(){const _0x7fcae2=_0x249908;document[_0x7fcae2(0x1ee)](_0x7fcae2(0x20e))[_0x7fcae2(0x180)][_0x7fcae2(0x205)]=_0x7fcae2(0x19b);}function hideSubscriptionRequiredModal(){const _0x51e554=_0x249908;document[_0x51e554(0x1ee)](_0x51e554(0x20e))[_0x51e554(0x180)][_0x51e554(0x205)]='none';}function _0x1dd3(){const _0x4ad784=['endAt','th[data-sort]','charAt','TicketsTotal','password','dashboardContainer','D√©tail\x20des\x20ventes','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement\x20:','271vxyVbT','loginContainer','line','utils','admin/subscription','active','keys','toLowerCase','totalSales','userInfo','\x20FCFA','getItem','stopPropagation','innerHTML','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>√ätes-vous\x20s√ªr\x20de\x20vouloir\x20supprimer\x20cette\x20entr√©e\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','filterSalesDates','input','Erreur\x20lors\x20de\x20la\x20cr√©ation\x20du\x20compte','getContext','remove','theme-toggle','exportExcel','4718brxCXd','signupButton','removeChild','toFixed','limitToLast','reduce','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entr√©e:','href','aria-label','DOMContentLoaded','2037005CNaibR','sic-wifi-zone','Analyse\x20des\x20ventes','Mot\x20de\x20passe\x20incorrect','database','loginForm','submit','salesEndDate','product','getTime','confirm-dialog','total','rgb(0,\x20255,\x20255)','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e\x20:','3950262BICTQD','forEach','light-theme','Ventes','getElementById','toggleAnalysisButton','key','location','book_new','sic-wifi-zone.firebaseapp.com','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','includes','prices','#searchInputs\x20input','writeFile','val','loginFromSignup','preventDefault','sort','stockEndDate','signupForm','createElement','classList','search','analysisSection','initializeApp','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement.','display','215088EqVlij','40ggqQxR','update','Masquer\x20l\x27analyse\x20des\x20ventes','values','destroy','div','querySelectorAll','subscriptionRequiredModal','toUpperCase','cancelDelete','darkTheme','then','459270lttRgF','appendChild','filter','none','filterStockDates','endDate','Utilisateur\x20introuvable','APP','status','dataset','7PVJpeh','orderByChild','934137gFUqFs','toLocaleString','\x20FCFA)','salesChart','once','catch','sales','body','Activer\x20le\x20mode\x20sombre','value','querySelector','insertCell','style','prix','add','length','setAttribute','stockTableGlobal','ref','threeMonth','rgb(255,\x2099,\x20132)','salesTable','labels','week','sales/','rgba(255,\x20255,\x20255,\x200.1)','toggleSalesButton','Prix\x20de\x20vente','tbody','block','Ce\x20nom\x20d\x27utilisateur\x20est\x20d√©j√†\x20utilis√©.','delete-icon','confirmDelete','exists','dateTime','1943241vPqvvo','expired','Masquer\x20le\x20d√©tail\x20des\x20ventes','slice','flex','insertRow','4ktrRkC','month','salesDetailsSection','salesStartDate','option','onclick','textContent','className','addEventListener','set','22HhOQoN','G-SPJ3LG1FY5','username','error','toISOString','true','1:538299261046:web:45ba9618a8cd3cb225ff57','AverageSales','users/','Entr√©e\x20supprim√©e\x20avec\x20succ√®s','click','signupContainer'];_0x1dd3=function(){return _0x4ad784;};return _0x1dd3();}function redirectToSubscription(){const _0x31b4da=_0x249908;window[_0x31b4da(0x1f1)][_0x31b4da(0x1d9)]='index.html';}async function checkSubscriptionStatus(){const _0x31a7e0=_0x249908;try{const _0x31cc1d=await adminRef[_0x31a7e0(0x223)]('value'),_0x38e712=_0x31cc1d[_0x31a7e0(0x1f9)](),_0x3ef951=new Date();if(_0x38e712&&_0x38e712[_0x31a7e0(0x21b)]===_0x31a7e0(0x1c0)){const _0x771885=new Date(_0x38e712[_0x31a7e0(0x218)]);return _0x771885>=_0x3ef951?!![]:(await adminRef[_0x31a7e0(0x208)]({'status':_0x31a7e0(0x198)}),![]);}else return![];}catch(_0x2efdb4){console[_0x31a7e0(0x1aa)](_0x31a7e0(0x1ba),_0x2efdb4);throw _0x2efdb4;}}updateTable(),updateStockTables(),analysisSection[_0x249908(0x180)][_0x249908(0x205)]='none',salesDetailsSection[_0x249908(0x180)]['display']=_0x249908(0x216),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage['getItem']('darkTheme');savedTheme!==null&&setTheme(savedTheme==='true');