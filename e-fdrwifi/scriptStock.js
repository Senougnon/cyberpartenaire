const _0x54fa58=_0x4504;(function(_0xbdd8a7,_0x340f85){const _0x336f94=_0x4504,_0x2f0998=_0xbdd8a7();while(!![]){try{const _0x2bc85a=-parseInt(_0x336f94(0x176))/0x1*(-parseInt(_0x336f94(0x16e))/0x2)+parseInt(_0x336f94(0x164))/0x3*(parseInt(_0x336f94(0x12a))/0x4)+parseInt(_0x336f94(0x1a5))/0x5+parseInt(_0x336f94(0x1ba))/0x6+parseInt(_0x336f94(0x1c0))/0x7+-parseInt(_0x336f94(0x167))/0x8+-parseInt(_0x336f94(0x1b4))/0x9*(parseInt(_0x336f94(0x1ad))/0xa);if(_0x2bc85a===_0x340f85)break;else _0x2f0998['push'](_0x2f0998['shift']());}catch(_0x5c2e68){_0x2f0998['push'](_0x2f0998['shift']());}}}(_0x30b9,0x3f4fd));const firebaseConfig={'apiKey':_0x54fa58(0x1a1),'authDomain':_0x54fa58(0x121),'databaseURL':'https://e-fdr-wifi-zone-default-rtdb.firebaseio.com','projectId':'e-fdr-wifi-zone','storageBucket':_0x54fa58(0x153),'messagingSenderId':_0x54fa58(0x151),'appId':_0x54fa58(0x128),'measurementId':'G-ZP7NDJ1TCW'};firebase[_0x54fa58(0x16d)](firebaseConfig);const database=firebase[_0x54fa58(0x187)](),adminRef=database['ref']('admin/subscription'),loginForm=document[_0x54fa58(0x159)](_0x54fa58(0x13b)),signupForm=document[_0x54fa58(0x159)](_0x54fa58(0x127)),loginContainer=document[_0x54fa58(0x159)](_0x54fa58(0x185)),signupContainer=document['getElementById'](_0x54fa58(0x1b9)),dashboardContainer=document[_0x54fa58(0x159)]('dashboardContainer'),salesForm=document[_0x54fa58(0x159)]('salesForm'),salesTable=document[_0x54fa58(0x159)](_0x54fa58(0x162)),totalSalesElement=document[_0x54fa58(0x159)](_0x54fa58(0x19b)),averageSalesElement=document[_0x54fa58(0x159)](_0x54fa58(0x1c4)),userInfoElement=document['getElementById'](_0x54fa58(0x13c)),toggleAnalysisButton=document[_0x54fa58(0x159)]('toggleAnalysisButton'),toggleSalesButton=document[_0x54fa58(0x159)](_0x54fa58(0x145)),analysisSection=document[_0x54fa58(0x159)](_0x54fa58(0x190)),salesDetailsSection=document[_0x54fa58(0x159)](_0x54fa58(0x1b1)),signupButton=document[_0x54fa58(0x159)](_0x54fa58(0x17b)),loginFromSignup=document[_0x54fa58(0x159)](_0x54fa58(0x1a9)),productSelect=document['getElementById'](_0x54fa58(0x120)),stockTableGlobal=document[_0x54fa58(0x159)](_0x54fa58(0x1b7));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document['getElementById'](_0x54fa58(0x1b5))[_0x54fa58(0x180)]=new Date()[_0x54fa58(0x175)]()[_0x54fa58(0x173)](0x0,0x10);function fetchTicketCategories(){const _0x4a9970=_0x54fa58;database[_0x4a9970(0x18b)](_0x4a9970(0x129))['once'](_0x4a9970(0x180))[_0x4a9970(0x18a)](_0x54c00d=>{const _0x4226a3=_0x4a9970;ticketCategories=_0x54c00d[_0x4226a3(0x149)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x420cf5=_0x54fa58;productSelect[_0x420cf5(0x189)]='<option\x20value=\x22\x22>Sélectionner\x20un\x20produit</option>';for(const _0x52e5c9 in ticketCategories){const _0x1c3e06=ticketCategories[_0x52e5c9][_0x420cf5(0x1b8)][0x0],_0x22d79d=document[_0x420cf5(0x195)](_0x420cf5(0x1a3));_0x22d79d[_0x420cf5(0x180)]=_0x52e5c9,_0x22d79d[_0x420cf5(0x168)]=_0x52e5c9+'\x20('+_0x1c3e06+_0x420cf5(0x19a),productSelect[_0x420cf5(0x143)](_0x22d79d);}}fetchTicketCategories(),loginForm[_0x54fa58(0x170)](_0x54fa58(0x172),function(_0x54083d){const _0x5eae82=_0x54fa58;_0x54083d[_0x5eae82(0x19e)]();const _0x2fc521=document['getElementById'](_0x5eae82(0x11e))[_0x5eae82(0x180)],_0x38bb13=document[_0x5eae82(0x159)]('password')[_0x5eae82(0x180)];database['ref'](_0x5eae82(0x158)+_0x2fc521)['once'](_0x5eae82(0x180))['then'](_0x5c52fb=>{const _0x424199=_0x5eae82;_0x5c52fb['exists']()?_0x5c52fb[_0x424199(0x149)]()[_0x424199(0x1c1)]===_0x38bb13?loginSuccess(_0x2fc521):alert(_0x424199(0x12f)):alert(_0x424199(0x198));});}),signupForm[_0x54fa58(0x170)](_0x54fa58(0x172),function(_0x36599d){const _0x339d7c=_0x54fa58;_0x36599d[_0x339d7c(0x19e)]();const _0x218ca3=document[_0x339d7c(0x159)](_0x339d7c(0x15d))[_0x339d7c(0x180)],_0x2d42f6=document[_0x339d7c(0x159)](_0x339d7c(0x126))[_0x339d7c(0x180)];database[_0x339d7c(0x18b)](_0x339d7c(0x158)+_0x218ca3)[_0x339d7c(0x14b)](_0x339d7c(0x180))[_0x339d7c(0x18a)](_0x8feb07=>{const _0x29437c=_0x339d7c;_0x8feb07[_0x29437c(0x1ae)]()?alert(_0x29437c(0x122)):database[_0x29437c(0x18b)](_0x29437c(0x158)+_0x218ca3)[_0x29437c(0x18d)]({'password':_0x2d42f6})['then'](()=>{const _0x1718a1=_0x29437c;alert('Inscription\x20réussie\x20!\x20Connectez-vous.'),signupContainer['style'][_0x1718a1(0x12c)]=_0x1718a1(0x157),loginContainer[_0x1718a1(0x130)][_0x1718a1(0x12c)]=_0x1718a1(0x188);})[_0x29437c(0x161)](_0x9e931e=>{const _0x85a379=_0x29437c;console['error'](_0x85a379(0x146),_0x9e931e),alert('Erreur\x20lors\x20de\x20la\x20création\x20du\x20compte');});});}),signupButton[_0x54fa58(0x170)](_0x54fa58(0x1ab),function(){const _0x42caff=_0x54fa58;loginContainer[_0x42caff(0x130)][_0x42caff(0x12c)]=_0x42caff(0x157),signupContainer[_0x42caff(0x130)][_0x42caff(0x12c)]=_0x42caff(0x188);}),loginFromSignup[_0x54fa58(0x170)](_0x54fa58(0x1ab),function(){const _0x2f8db9=_0x54fa58;signupContainer[_0x2f8db9(0x130)][_0x2f8db9(0x12c)]=_0x2f8db9(0x157),loginContainer['style']['display']=_0x2f8db9(0x188);});function loginSuccess(_0x3643a0){const _0x547608=_0x54fa58;currentUser=_0x3643a0,loginContainer[_0x547608(0x130)][_0x547608(0x12c)]='none',signupContainer[_0x547608(0x130)][_0x547608(0x12c)]=_0x547608(0x157),dashboardContainer[_0x547608(0x130)][_0x547608(0x12c)]=_0x547608(0x188),userInfoElement['textContent']=_0x547608(0x124)+_0x3643a0,checkSubscriptionStatus()['then'](_0x147544=>{_0x147544?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x547608(0x161)](_0x1b727c=>{const _0x549126=_0x547608;console[_0x549126(0x165)](_0x549126(0x1a4),_0x1b727c),alert(_0x549126(0x17d));});}function listenForSalesDataChanges(){const _0x4705c1=_0x54fa58;salesDataListener=database[_0x4705c1(0x18b)](_0x4705c1(0x15e)+currentUser)['on']('value',_0x2ae7f9=>{const _0x30844b=_0x4705c1;salesData=[],_0x2ae7f9[_0x30844b(0x15c)](_0x3dad78=>{const _0x396d0c=_0x30844b,_0x55b502=_0x3dad78[_0x396d0c(0x149)]();_0x55b502['key']=_0x3dad78[_0x396d0c(0x171)],_0x55b502[_0x396d0c(0x154)]=(_0x55b502['V']*_0x55b502['PV'])[_0x396d0c(0x147)](0x2),salesData[_0x396d0c(0x134)](_0x55b502);}),analysisSection[_0x30844b(0x130)][_0x30844b(0x12c)]===_0x30844b(0x188)&&updateAnalysis(salesData);});}document[_0x54fa58(0x159)](_0x54fa58(0x120))['addEventListener']('change',function(){const _0x580b1c=_0x54fa58,_0x4b358d=this[_0x580b1c(0x180)];database[_0x580b1c(0x18b)](_0x580b1c(0x15e)+currentUser)[_0x580b1c(0x1a8)]('product')[_0x580b1c(0x14e)](_0x4b358d)['limitToLast'](0x1)['once'](_0x580b1c(0x180))[_0x580b1c(0x18a)](_0xa0a9ad=>{const _0x55fd32=_0x580b1c;if(_0xa0a9ad[_0x55fd32(0x1ae)]()){const _0x9ae648=Object['values'](_0xa0a9ad[_0x55fd32(0x149)]())[0x0];document[_0x55fd32(0x159)]('SI')[_0x55fd32(0x180)]=_0x9ae648['SF']||0x0;}else document[_0x55fd32(0x159)]('SI')['value']=0x0;}),updatePV();}),document[_0x54fa58(0x159)]('V')[_0x54fa58(0x170)]('input',updateSF),document[_0x54fa58(0x159)](_0x54fa58(0x139))['addEventListener'](_0x54fa58(0x1bf),updateSF);function updateSF(){const _0x5df4e0=_0x54fa58,_0x51f231=parseInt(document[_0x5df4e0(0x159)]('SI')['value'])||0x0,_0x52d550=parseInt(document[_0x5df4e0(0x159)](_0x5df4e0(0x139))[_0x5df4e0(0x180)])||0x0,_0x4e13b2=parseInt(document[_0x5df4e0(0x159)]('V')[_0x5df4e0(0x180)])||0x0;document['getElementById']('SF')[_0x5df4e0(0x180)]=_0x51f231+_0x52d550-_0x4e13b2;}function updatePV(){const _0x4307d9=_0x54fa58,_0x4fe452=document[_0x4307d9(0x159)]('product')[_0x4307d9(0x180)],_0x2bb0ed=ticketCategories[_0x4fe452]?.[_0x4307d9(0x1b8)][0x0];document['getElementById']('PV')['value']=_0x2bb0ed||0x0;}salesForm[_0x54fa58(0x170)](_0x54fa58(0x172),function(_0x20f068){const _0x5998b4=_0x54fa58;_0x20f068[_0x5998b4(0x19e)]();const _0x484089={'dateTime':document['getElementById']('dateTime')['value'],'product':document['getElementById'](_0x5998b4(0x120))[_0x5998b4(0x180)],'SI':parseInt(document[_0x5998b4(0x159)]('SI')[_0x5998b4(0x180)])||0x0,'APP':parseInt(document[_0x5998b4(0x159)](_0x5998b4(0x139))[_0x5998b4(0x180)])||0x0,'V':parseInt(document[_0x5998b4(0x159)]('V')['value'])||0x0,'SF':parseInt(document[_0x5998b4(0x159)]('SF')['value'])||0x0,'PV':parseFloat(document[_0x5998b4(0x159)]('PV')['value'])||0x0};database[_0x5998b4(0x18b)](_0x5998b4(0x15e)+currentUser)[_0x5998b4(0x134)](_0x484089)[_0x5998b4(0x18a)](()=>{const _0x427c5c=_0x5998b4;updateTable(),updateStockTables(),updateAnalysis(),salesForm['reset'](),document[_0x427c5c(0x159)](_0x427c5c(0x1b5))[_0x427c5c(0x180)]=new Date()[_0x427c5c(0x175)]()[_0x427c5c(0x173)](0x0,0x10);})['catch'](_0x14e742=>{const _0x81addd=_0x5998b4;console[_0x81addd(0x165)](_0x81addd(0x16a),_0x14e742),alert(_0x81addd(0x182));});});function updateTable(){const _0x198f97=_0x54fa58,_0x146685=salesTable[_0x198f97(0x1c2)](_0x198f97(0x156));_0x146685[_0x198f97(0x189)]='',database[_0x198f97(0x18b)]('sales/'+currentUser)['once'](_0x198f97(0x180))[_0x198f97(0x18a)](_0x4a299e=>{const _0x2ca94b=_0x198f97;salesData=[],_0x4a299e[_0x2ca94b(0x15c)](_0x30940a=>{const _0x26f66f=_0x2ca94b,_0x48f65e=_0x30940a[_0x26f66f(0x149)]();_0x48f65e[_0x26f66f(0x154)]=(_0x48f65e['V']*_0x48f65e['PV'])[_0x26f66f(0x147)](0x2),salesData['push'](_0x48f65e);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x13040b=_0x54fa58,_0x7e8b04=document[_0x13040b(0x159)](_0x13040b(0x1b7));_0x7e8b04[_0x13040b(0x1c2)](_0x13040b(0x156))[_0x13040b(0x189)]='',database[_0x13040b(0x18b)](_0x13040b(0x15e)+currentUser)['once']('value')[_0x13040b(0x18a)](_0x2056e6=>{const _0x126f30=_0x13040b,_0x276186={};_0x2056e6[_0x126f30(0x15c)](_0x12f70c=>{const _0x5e6ce4=_0x126f30,_0x47d4e4=_0x12f70c[_0x5e6ce4(0x149)]();(!_0x276186[_0x47d4e4['product']]||new Date(_0x47d4e4[_0x5e6ce4(0x1b5)])>new Date(_0x276186[_0x47d4e4[_0x5e6ce4(0x120)]][_0x5e6ce4(0x1b5)]))&&(_0x276186[_0x47d4e4['product']]=_0x47d4e4);}),Object[_0x126f30(0x13e)](_0x276186)[_0x126f30(0x15c)](_0x3d8aa4=>{const _0x467cd6=_0x126f30,_0xd692b7=_0x7e8b04[_0x467cd6(0x1c2)](_0x467cd6(0x156))[_0x467cd6(0x148)]();_0xd692b7[_0x467cd6(0x17a)](0x0)[_0x467cd6(0x168)]=_0x3d8aa4[_0x467cd6(0x120)],_0xd692b7[_0x467cd6(0x17a)](0x1)['textContent']=_0x3d8aa4['SF'],_0xd692b7['insertCell'](0x2)['textContent']=new Date(_0x3d8aa4['dateTime'])[_0x467cd6(0x179)]();}),setupSort(_0x7e8b04);});}function exportToExcel(){const _0x3202ab=_0x54fa58,_0x39d940=XLSX[_0x3202ab(0x1c3)]['book_new'](),_0x47ae7f=XLSX[_0x3202ab(0x1c3)]['table_to_sheet'](document[_0x3202ab(0x159)](_0x3202ab(0x162)));XLSX[_0x3202ab(0x1c3)]['book_append_sheet'](_0x39d940,_0x47ae7f,_0x3202ab(0x181)),XLSX[_0x3202ab(0x166)](_0x39d940,_0x3202ab(0x133));}document['getElementById']('exportExcel')[_0x54fa58(0x170)]('click',exportToExcel);function deleteEntry(_0x1ece51){const _0x36fd24=_0x54fa58;database[_0x36fd24(0x18b)]('sales/'+currentUser+'/'+_0x1ece51)['once'](_0x36fd24(0x180))['then'](_0x1e49b8=>{const _0x90fdd2=_0x36fd24,_0x49073d=_0x1e49b8['val']();return database[_0x90fdd2(0x18b)]('sales/'+currentUser+'/'+_0x1ece51)['remove']()[_0x90fdd2(0x18a)](()=>{const _0xf8323c=_0x90fdd2;return console['log'](_0xf8323c(0x15f)),updateStockAfterDeletion(_0x49073d);});})[_0x36fd24(0x18a)](()=>{return updateTable();})[_0x36fd24(0x18a)](()=>{updateStockTables(),updateAnalysis();})['catch'](_0x39b8ea=>{const _0x2c45ae=_0x36fd24;console[_0x2c45ae(0x165)](_0x2c45ae(0x13f),_0x39b8ea);});}function updateStockAfterDeletion(_0x19bf29){const _0x399c73=_0x54fa58;return database['ref']('sales/'+currentUser)['orderByChild'](_0x399c73(0x1b5))[_0x399c73(0x17f)](_0x19bf29[_0x399c73(0x1b5)])[_0x399c73(0x142)](0x2)[_0x399c73(0x14b)]('value')['then'](_0x3259df=>{const _0x362194=_0x399c73;let _0x4e90c5=[];_0x3259df[_0x362194(0x15c)](_0x1463f0=>{const _0x527406=_0x362194;_0x4e90c5['push']({'key':_0x1463f0['key'],..._0x1463f0[_0x527406(0x149)]()});}),_0x4e90c5[_0x362194(0x1a2)]((_0x4288ca,_0x5c7789)=>new Date(_0x5c7789[_0x362194(0x1b5)])-new Date(_0x4288ca['dateTime']));if(_0x4e90c5[_0x362194(0x141)]>0x1&&_0x4e90c5[0x0][_0x362194(0x171)]!==_0x19bf29[_0x362194(0x171)]){const _0x57d11b=_0x4e90c5[0x1],_0x37fb4e=_0x57d11b['SF']+_0x19bf29['V']-_0x19bf29[_0x362194(0x139)];return database[_0x362194(0x18b)]('sales/'+currentUser+'/'+_0x57d11b[_0x362194(0x171)])[_0x362194(0x191)]({'SF':_0x37fb4e});}return Promise[_0x362194(0x14a)]();});}function updateTable(){const _0x17ca50=_0x54fa58;return database[_0x17ca50(0x18b)](_0x17ca50(0x15e)+currentUser)['once'](_0x17ca50(0x180))[_0x17ca50(0x18a)](_0x1e9f07=>{const _0x38b48e=_0x17ca50;salesData=[],_0x1e9f07[_0x38b48e(0x15c)](_0x18254b=>{const _0x3dc40b=_0x38b48e,_0x1a03af=_0x18254b[_0x3dc40b(0x149)]();_0x1a03af[_0x3dc40b(0x171)]=_0x18254b['key'],_0x1a03af[_0x3dc40b(0x154)]=(_0x1a03af['V']*_0x1a03af['PV'])[_0x3dc40b(0x147)](0x2),salesData['push'](_0x1a03af);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x313e02){const _0x2b68b3=_0x54fa58,_0x55a71a=salesTable[_0x2b68b3(0x1c2)](_0x2b68b3(0x156));_0x55a71a['innerHTML']='',_0x313e02[_0x2b68b3(0x15c)](_0x5d7cd2=>{const _0x42cede=_0x2b68b3,_0x3c301d=_0x55a71a['insertRow']();_0x3c301d[_0x42cede(0x123)][_0x42cede(0x171)]=_0x5d7cd2[_0x42cede(0x171)],_0x3c301d['insertCell'](0x0)['textContent']=new Date(_0x5d7cd2['dateTime'])[_0x42cede(0x179)](),_0x3c301d[_0x42cede(0x17a)](0x1)[_0x42cede(0x168)]=_0x5d7cd2['product'],_0x3c301d['insertCell'](0x2)[_0x42cede(0x168)]=_0x5d7cd2['SI'],_0x3c301d['insertCell'](0x3)[_0x42cede(0x168)]=_0x5d7cd2[_0x42cede(0x139)],_0x3c301d[_0x42cede(0x17a)](0x4)[_0x42cede(0x168)]=_0x5d7cd2['V'],_0x3c301d['insertCell'](0x5)['textContent']=_0x5d7cd2['SF'],_0x3c301d['insertCell'](0x6)['textContent']=_0x5d7cd2['PV'],_0x3c301d[_0x42cede(0x17a)](0x7)['textContent']=_0x5d7cd2[_0x42cede(0x154)];}),addDeleteIcons();}function addDeleteIcons(){const _0x47126f=_0x54fa58,_0x5e11bf=salesTable[_0x47126f(0x196)](_0x47126f(0x144));_0x5e11bf['forEach'](_0x4c0009=>{const _0x547f7c=_0x47126f,_0x3632d2=document[_0x547f7c(0x195)](_0x547f7c(0x1ac));_0x3632d2[_0x547f7c(0x189)]='✖',_0x3632d2[_0x547f7c(0x16c)]=_0x547f7c(0x186),_0x3632d2[_0x547f7c(0x140)]=_0x32d7d0=>{const _0x266c4e=_0x547f7c;_0x32d7d0[_0x266c4e(0x135)](),showConfirmDialog(_0x4c0009[_0x266c4e(0x123)]['key']);},_0x4c0009['querySelector']('td:first-child')[_0x547f7c(0x143)](_0x3632d2);});}function showConfirmDialog(_0x17a167){const _0x15711d=_0x54fa58,_0x2d5b9f=document[_0x15711d(0x195)](_0x15711d(0x132));_0x2d5b9f[_0x15711d(0x16c)]=_0x15711d(0x16b),_0x2d5b9f[_0x15711d(0x189)]=_0x15711d(0x13d),document[_0x15711d(0x193)][_0x15711d(0x143)](_0x2d5b9f),document[_0x15711d(0x159)]('confirmDelete')[_0x15711d(0x140)]=()=>{const _0x26177f=_0x15711d;deleteEntry(_0x17a167),document[_0x26177f(0x193)]['removeChild'](_0x2d5b9f);},document['getElementById']('cancelDelete')[_0x15711d(0x140)]=()=>{const _0x551a6c=_0x15711d;document[_0x551a6c(0x193)][_0x551a6c(0x150)](_0x2d5b9f);};}function setupSearch(){const _0x2b7716=_0x54fa58,_0x4d58af=document[_0x2b7716(0x196)](_0x2b7716(0x11f));_0x4d58af[_0x2b7716(0x15c)](_0x17d519=>{const _0x5425c4=_0x2b7716;_0x17d519['addEventListener'](_0x5425c4(0x1bf),()=>{const _0x536d83=_0x5425c4,_0x295af4=salesData[_0x536d83(0x138)](_0x53bca3=>{const _0x1f5611=_0x536d83;return Object[_0x1f5611(0x1bb)](_0x53bca3)[_0x1f5611(0x125)](_0x9d2394=>{const _0x29eda9=_0x1f5611,_0x398194=document[_0x29eda9(0x159)](_0x29eda9(0x177)+(_0x9d2394['charAt'](0x0)['toUpperCase']()+_0x9d2394[_0x29eda9(0x173)](0x1)))?.[_0x29eda9(0x180)][_0x29eda9(0x155)]()||'';return _0x53bca3[_0x9d2394][_0x29eda9(0x15b)]()[_0x29eda9(0x155)]()[_0x29eda9(0x1aa)](_0x398194);});});renderTable(_0x295af4),updateAnalysis(_0x295af4);});});}function _0x4504(_0x3aefa0,_0xd56b90){const _0x30b9eb=_0x30b9();return _0x4504=function(_0x4504c7,_0x109393){_0x4504c7=_0x4504c7-0x11e;let _0x4b2e0f=_0x30b9eb[_0x4504c7];return _0x4b2e0f;},_0x4504(_0x3aefa0,_0xd56b90);}function setupSort(_0x49d994){const _0x3c923b=_0x54fa58,_0x246f72=_0x49d994[_0x3c923b(0x196)]('th[data-sort]');_0x246f72[_0x3c923b(0x15c)](_0x27f848=>{const _0x337eb5=_0x3c923b;_0x27f848[_0x337eb5(0x170)](_0x337eb5(0x1ab),()=>{const _0x4fc3f5=_0x337eb5,_0x4ba13b=_0x27f848['dataset'][_0x4fc3f5(0x1a2)],_0x2ebe0b=_0x49d994['id']===_0x4fc3f5(0x162)?salesData:stockData;_0x2ebe0b[_0x4fc3f5(0x1a2)]((_0x488a4d,_0x1c6171)=>{if(_0x488a4d[_0x4ba13b]<_0x1c6171[_0x4ba13b])return-0x1;if(_0x488a4d[_0x4ba13b]>_0x1c6171[_0x4ba13b])return 0x1;return 0x0;}),_0x49d994['id']===_0x4fc3f5(0x162)?(renderTable(_0x2ebe0b),updateAnalysis(_0x2ebe0b)):renderStockTable(_0x2ebe0b,_0x49d994);});});}function _0x30b9(){const _0x2e6c93=['querySelector','utils','averageSales','\x20FCFA','username','#searchInputs\x20input','product','e-fdr-wifi-zone.firebaseapp.com','Ce\x20nom\x20d\x27utilisateur\x20est\x20déjà\x20utilisé.','dataset','Utilisateur:\x20','every','signupPassword','signupForm','1:345974541860:web:a296190bcea2ce496bd2b1','TicketsTotal','892yhftsP','endDate','display','true','threeMonth','Mot\x20de\x20passe\x20incorrect','style','location','div','ventes_wifi_zone.xlsx','push','stopPropagation','stockEndDate','Masquer\x20l\x27analyse\x20des\x20ventes','filter','APP','month','loginForm','userInfo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20entrée\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','values','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrée:','onclick','length','limitToLast','appendChild','tbody\x20tr','toggleSalesButton','Error\x20creating\x20user:','toFixed','insertRow','val','resolve','once','rgb(0,\x20255,\x20255)','Détail\x20des\x20ventes','equalTo','prices','removeChild','345974541860','index.html','e-fdr-wifi-zone.firebasestorage.app','total','toLowerCase','tbody','none','users/','getElementById','flex','toString','forEach','signupUsername','sales/','Entrée\x20supprimée\x20avec\x20succès','salesEndDate','catch','salesTable','sales','5469iePqYO','error','writeFile','1107208BkkvzY','textContent','Analyse\x20des\x20ventes','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée\x20:','confirm-dialog','className','initializeApp','94756pmcezc','darkTheme','addEventListener','key','submit','slice','add','toISOString','1JnLufi','search','remove','toLocaleString','insertCell','signupButton','filterStockDates','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.','active','endAt','value','Ventes','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée.','labels','getContext','loginContainer','delete-icon','database','block','innerHTML','then','ref','Prix\x20de\x20vente','set','getItem','classList','analysisSection','update','AverageSales','body','subscriptionRequiredModal','createElement','querySelectorAll','theme-toggle','Utilisateur\x20introuvable','Total\x20des\x20ventes:\x20','\x20FCFA)','totalSales','getTime','light-theme','preventDefault','setItem','filterSalesDates','AIzaSyA427nwGB3DfsySqvBCnkpRUdDAcYyhn2Q','sort','option','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','2374190GLdcRb','rgba(255,\x20255,\x20255,\x200.1)','status','orderByChild','loginFromSignup','includes','click','span','1700330NyFbxa','exists','Masquer\x20le\x20détail\x20des\x20ventes','stockStartDate','salesDetailsSection','destroy','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','45JsqWYm','dateTime','setAttribute','stockTableGlobal','prix','signupContainer','1554792bXnXGb','keys','line','aria-label','DOMContentLoaded','input','420098JVQXrq','password'];_0x30b9=function(){return _0x2e6c93;};return _0x30b9();}function renderStockTable(_0x18a1c0,_0x2be756){const _0x6588ad=_0x54fa58,_0x7e6014=_0x2be756[_0x6588ad(0x1c2)](_0x6588ad(0x156));_0x7e6014['innerHTML']='',_0x18a1c0[_0x6588ad(0x15c)](_0x1b27d7=>{const _0x11a3ed=_0x6588ad,_0x56d672=_0x7e6014[_0x11a3ed(0x148)]();_0x56d672[_0x11a3ed(0x17a)](0x0)[_0x11a3ed(0x168)]=_0x1b27d7[_0x11a3ed(0x120)],_0x56d672[_0x11a3ed(0x17a)](0x1)[_0x11a3ed(0x168)]=_0x1b27d7['SF'],_0x56d672[_0x11a3ed(0x17a)](0x2)[_0x11a3ed(0x168)]=new Date(_0x1b27d7[_0x11a3ed(0x1b5)])['toLocaleString']();});}function updateAnalysis(_0x59621f=salesData){const _0x307694=_0x54fa58;let _0x4cd972=0x0,_0x59431c=0x0;const _0x107b23={'labels':[],'sales':[],'prices':[]};_0x59621f[_0x307694(0x15c)](_0x13304f=>{const _0x1cd75f=_0x307694;_0x4cd972+=_0x13304f['V']*_0x13304f['PV'],_0x59431c++,_0x107b23[_0x1cd75f(0x183)][_0x1cd75f(0x134)](new Date(_0x13304f[_0x1cd75f(0x1b5)])[_0x1cd75f(0x179)]()),_0x107b23[_0x1cd75f(0x163)][_0x1cd75f(0x134)](_0x13304f['V']),_0x107b23[_0x1cd75f(0x14f)][_0x1cd75f(0x134)](_0x13304f['PV']);});const _0x419da4=_0x4cd972/_0x59431c||0x0;totalSalesElement[_0x307694(0x168)]=_0x307694(0x199)+_0x4cd972['toFixed'](0x2)+_0x307694(0x1c5),averageSalesElement[_0x307694(0x168)]=_0x307694(0x1b3)+_0x419da4[_0x307694(0x147)](0x2)+_0x307694(0x1c5),updateChart(_0x107b23),updatePeriodAnalysis(_0x59621f);}function updateChart(_0x45b089){const _0x1d899e=_0x54fa58,_0x44f6c9=document['getElementById']('salesChart')[_0x1d899e(0x184)]('2d');salesChart&&salesChart[_0x1d899e(0x1b2)](),salesChart=new Chart(_0x44f6c9,{'type':_0x1d899e(0x1bc),'data':{'labels':_0x45b089[_0x1d899e(0x183)],'datasets':[{'label':_0x1d899e(0x181),'data':_0x45b089[_0x1d899e(0x163)],'borderColor':_0x1d899e(0x14c),'tension':0.1},{'label':_0x1d899e(0x18c),'data':_0x45b089[_0x1d899e(0x14f)],'borderColor':'rgb(255,\x2099,\x20132)','tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x1d899e(0x14c)}},'x':{'grid':{'color':_0x1d899e(0x1a6)},'ticks':{'color':_0x1d899e(0x14c)}}},'plugins':{'legend':{'labels':{'color':_0x1d899e(0x14c)}}}}});}function updatePeriodAnalysis(_0x605247){const _0x46c37b=_0x54fa58,_0x52910f=new Date(),_0x32f6ec=new Date(_0x52910f['getTime']()-0x7*0x18*0x3c*0x3c*0x3e8),_0x6d924=new Date(_0x52910f[_0x46c37b(0x19c)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x4e3676=new Date(_0x52910f['getTime']()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x119942=_0x605247[_0x46c37b(0x138)](_0x31c988=>new Date(_0x31c988[_0x46c37b(0x1b5)])>=_0x32f6ec),_0x2c11db=_0x605247[_0x46c37b(0x138)](_0x3a2a9f=>new Date(_0x3a2a9f[_0x46c37b(0x1b5)])>=_0x6d924),_0x5aff7c=_0x605247['filter'](_0x1f4be0=>new Date(_0x1f4be0['dateTime'])>=_0x4e3676);updatePeriodStats(_0x119942,'week'),updatePeriodStats(_0x2c11db,_0x46c37b(0x13a)),updatePeriodStats(_0x5aff7c,_0x46c37b(0x12e));}function updatePeriodStats(_0x2de7a6,_0x2608f9){const _0xadd07b=_0x54fa58,_0x201b24=_0x2de7a6['reduce']((_0x545973,_0x9c155f)=>_0x545973+_0x9c155f['V']*_0x9c155f['PV'],0x0),_0x425b12=_0x201b24/_0x2de7a6[_0xadd07b(0x141)]||0x0;document['getElementById'](_0x2608f9+'TotalSales')[_0xadd07b(0x168)]=_0xadd07b(0x199)+_0x201b24[_0xadd07b(0x147)](0x2)+_0xadd07b(0x1c5),document[_0xadd07b(0x159)](_0x2608f9+_0xadd07b(0x192))['textContent']='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x425b12[_0xadd07b(0x147)](0x2)+'\x20FCFA';}toggleAnalysisButton[_0x54fa58(0x170)](_0x54fa58(0x1ab),function(){const _0x1cdce3=_0x54fa58;analysisSection[_0x1cdce3(0x130)][_0x1cdce3(0x12c)]===_0x1cdce3(0x157)||analysisSection[_0x1cdce3(0x130)]['display']===''?(analysisSection['style'][_0x1cdce3(0x12c)]=_0x1cdce3(0x188),salesDetailsSection[_0x1cdce3(0x130)][_0x1cdce3(0x12c)]='none',this[_0x1cdce3(0x168)]=_0x1cdce3(0x137),toggleSalesButton[_0x1cdce3(0x168)]=_0x1cdce3(0x14d),updateAnalysis(salesData)):(analysisSection[_0x1cdce3(0x130)][_0x1cdce3(0x12c)]=_0x1cdce3(0x157),this[_0x1cdce3(0x168)]=_0x1cdce3(0x169));}),toggleSalesButton[_0x54fa58(0x170)](_0x54fa58(0x1ab),function(){const _0x38f975=_0x54fa58;salesDetailsSection[_0x38f975(0x130)][_0x38f975(0x12c)]===_0x38f975(0x157)||salesDetailsSection[_0x38f975(0x130)]['display']===''?(salesDetailsSection['style'][_0x38f975(0x12c)]='block',analysisSection[_0x38f975(0x130)]['display']=_0x38f975(0x157),this['textContent']=_0x38f975(0x1af),toggleAnalysisButton['textContent']='Analyse\x20des\x20ventes'):(salesDetailsSection[_0x38f975(0x130)][_0x38f975(0x12c)]=_0x38f975(0x157),this[_0x38f975(0x168)]='Détail\x20des\x20ventes');});const themeToggle=document[_0x54fa58(0x159)](_0x54fa58(0x197)),root=document['documentElement'];let isDarkTheme=!![];function setTheme(_0x5b8386){const _0x5070d6=_0x54fa58;_0x5b8386?(root[_0x5070d6(0x18f)][_0x5070d6(0x178)]('light-theme'),themeToggle[_0x5070d6(0x168)]='🌙',themeToggle[_0x5070d6(0x1b6)](_0x5070d6(0x1bd),'Activer\x20le\x20mode\x20clair')):(root[_0x5070d6(0x18f)][_0x5070d6(0x174)](_0x5070d6(0x19d)),themeToggle[_0x5070d6(0x168)]='☀️',themeToggle['setAttribute'](_0x5070d6(0x1bd),'Activer\x20le\x20mode\x20sombre')),isDarkTheme=_0x5b8386,localStorage[_0x5070d6(0x19f)](_0x5070d6(0x16f),_0x5b8386);}themeToggle['addEventListener'](_0x54fa58(0x1ab),()=>{setTheme(!isDarkTheme);}),document[_0x54fa58(0x170)](_0x54fa58(0x1be),()=>{const _0xd5b725=_0x54fa58,_0x2719ea=localStorage['getItem']('darkTheme');_0x2719ea!==null?setTheme(_0x2719ea===_0xd5b725(0x12d)):setTheme(![]);}),document[_0x54fa58(0x159)](_0x54fa58(0x17c))['addEventListener'](_0x54fa58(0x1ab),function(){const _0x1686fc=_0x54fa58,_0x189887=new Date(document[_0x1686fc(0x159)](_0x1686fc(0x1b0))[_0x1686fc(0x180)]),_0x55b2d0=new Date(document[_0x1686fc(0x159)](_0x1686fc(0x136))['value']);updateStockTables(_0x189887,_0x55b2d0);}),document[_0x54fa58(0x159)](_0x54fa58(0x1a0))['addEventListener']('click',function(){const _0x1ac620=_0x54fa58,_0x416ec0=new Date(document[_0x1ac620(0x159)]('salesStartDate')[_0x1ac620(0x180)]),_0x14f385=new Date(document[_0x1ac620(0x159)](_0x1ac620(0x160))[_0x1ac620(0x180)]),_0x3a491a=salesData[_0x1ac620(0x138)](_0x41977a=>{const _0x5b857f=_0x1ac620,_0x23283f=new Date(_0x41977a[_0x5b857f(0x1b5)]);return(!_0x416ec0||_0x23283f>=_0x416ec0)&&(!_0x14f385||_0x23283f<=_0x14f385);});renderTable(_0x3a491a),updateAnalysis(_0x3a491a);});function updateStockTables(_0x450166,_0x13778e){const _0x1a03a8=_0x54fa58,_0x2bf7a4=document[_0x1a03a8(0x159)](_0x1a03a8(0x1b7));_0x2bf7a4['querySelector']('tbody')[_0x1a03a8(0x189)]='',database[_0x1a03a8(0x18b)](_0x1a03a8(0x15e)+currentUser)['once'](_0x1a03a8(0x180))[_0x1a03a8(0x18a)](_0xfc2163=>{const _0x2e9973=_0x1a03a8,_0x18b55a={};_0xfc2163[_0x2e9973(0x15c)](_0x3190c9=>{const _0x27416e=_0x2e9973,_0x32fba6=_0x3190c9[_0x27416e(0x149)](),_0x5f40fc=new Date(_0x32fba6[_0x27416e(0x1b5)]);(!_0x450166||_0x5f40fc>=_0x450166)&&(!_0x13778e||_0x5f40fc<=_0x13778e)&&((!_0x18b55a[_0x32fba6['product']]||_0x5f40fc>new Date(_0x18b55a[_0x32fba6[_0x27416e(0x120)]]['dateTime']))&&(_0x18b55a[_0x32fba6['product']]=_0x32fba6));}),Object['values'](_0x18b55a)[_0x2e9973(0x15c)](_0xe3fe9b=>{const _0x57bc26=_0x2e9973,_0x208ab3=_0x2bf7a4[_0x57bc26(0x1c2)](_0x57bc26(0x156))[_0x57bc26(0x148)]();_0x208ab3['insertCell'](0x0)['textContent']=_0xe3fe9b[_0x57bc26(0x120)],_0x208ab3[_0x57bc26(0x17a)](0x1)['textContent']=_0xe3fe9b['SF'],_0x208ab3['insertCell'](0x2)[_0x57bc26(0x168)]=new Date(_0xe3fe9b[_0x57bc26(0x1b5)])['toLocaleString']();}),setupSort(_0x2bf7a4);});}function showSubscriptionRequiredModal(){const _0x42e78a=_0x54fa58;document[_0x42e78a(0x159)](_0x42e78a(0x194))[_0x42e78a(0x130)][_0x42e78a(0x12c)]=_0x42e78a(0x15a);}function hideSubscriptionRequiredModal(){const _0x5bd80c=_0x54fa58;document[_0x5bd80c(0x159)](_0x5bd80c(0x194))[_0x5bd80c(0x130)][_0x5bd80c(0x12c)]=_0x5bd80c(0x157);}function redirectToSubscription(){const _0xd8d95d=_0x54fa58;window[_0xd8d95d(0x131)]['href']=_0xd8d95d(0x152);}async function checkSubscriptionStatus(){const _0x35d572=_0x54fa58;try{const _0x22c42c=await adminRef[_0x35d572(0x14b)](_0x35d572(0x180)),_0x4f2e3b=_0x22c42c[_0x35d572(0x149)](),_0x2d94f5=new Date();if(_0x4f2e3b&&_0x4f2e3b[_0x35d572(0x1a7)]===_0x35d572(0x17e)){const _0xd74abe=new Date(_0x4f2e3b[_0x35d572(0x12b)]);return _0xd74abe>=_0x2d94f5?!![]:(await adminRef[_0x35d572(0x191)]({'status':'expired'}),![]);}else return![];}catch(_0x34b700){console['error'](_0x35d572(0x1a4),_0x34b700);throw _0x34b700;}}updateTable(),updateStockTables(),analysisSection['style'][_0x54fa58(0x12c)]=_0x54fa58(0x157),salesDetailsSection[_0x54fa58(0x130)][_0x54fa58(0x12c)]=_0x54fa58(0x157),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x54fa58(0x18e)](_0x54fa58(0x16f));savedTheme!==null&&setTheme(savedTheme==='true');