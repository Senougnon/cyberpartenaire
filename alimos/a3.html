<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* ... (vos variables CSS) ... */
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
        .logout-button {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        background-color: #e74c3c;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button:hover {
        background-color: #c0392b;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .logout-button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button i {
        font-size: 16px;
    }

    @media (max-width: 768px) {
        .logout-button {
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 12px;
        }
    }
      .database-selector {
        margin-bottom: 20px;
    }

    .database-selector select {
        padding: 10px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        color: var(--text-color);
        cursor: pointer;
    }

    .database-selector select:focus {
        outline: none;
        border-color: var(--primary-color);
    }
    </style>
</head>
<body>
<button onclick="logout()" class="logout-button">
    <i class="fas fa-sign-out-alt"></i> Déconnexion
</button>
    <div class="container">
        <h1>Gestion des tickets</h1>

        <div class="database-selector">
            <label for="databaseSelect">Choisir la base de données : </label>
            <select id="databaseSelect" onchange="changeDatabase()">
                <option value="TicketsTotal">TicketsTotal</option>
                <option value="TicketsTransit">TicketsTransit</option>
            </select>
        </div>

        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".json,.csv,.txt" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editId" placeholder="ID" disabled>
            <input type="text" id="editCategory" placeholder="Catégorie">
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newCategory" placeholder="Catégorie">
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
const _0x47863c=_0x30af;(function(_0x1bcd9e,_0x124943){const _0x2b4527=_0x30af,_0x4e823d=_0x1bcd9e();while(!![]){try{const _0x56034f=-parseInt(_0x2b4527(0x223))/0x1+-parseInt(_0x2b4527(0x1ea))/0x2+-parseInt(_0x2b4527(0x19a))/0x3+-parseInt(_0x2b4527(0x20a))/0x4*(-parseInt(_0x2b4527(0x20d))/0x5)+parseInt(_0x2b4527(0x1af))/0x6+-parseInt(_0x2b4527(0x220))/0x7+parseInt(_0x2b4527(0x1b3))/0x8*(parseInt(_0x2b4527(0x1f3))/0x9);if(_0x56034f===_0x124943)break;else _0x4e823d['push'](_0x4e823d['shift']());}catch(_0x54f5af){_0x4e823d['push'](_0x4e823d['shift']());}}}(_0x1db2,0x5718a));const firebaseConfig={'apiKey':'AIzaSyDzNd9m8S5d1TgtMuEiAukVve8XZ2kt-aY','authDomain':_0x47863c(0x1da),'databaseURL':_0x47863c(0x227),'projectId':_0x47863c(0x1ab),'storageBucket':_0x47863c(0x19e),'messagingSenderId':_0x47863c(0x20b),'appId':_0x47863c(0x1c3),'measurementId':_0x47863c(0x212)};firebase[_0x47863c(0x21c)](firebaseConfig);const database=firebase[_0x47863c(0x1c7)]();let allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,currentDatabase=_0x47863c(0x1e8),editingCategory='',editingIndex=-0x1,editingId='';(function(){const _0xce22e3=_0x47863c,_0x3d9b1f=sessionStorage['getItem'](_0xce22e3(0x1ee));!_0x3d9b1f&&window[_0xce22e3(0x222)][_0xce22e3(0x1c1)](_0xce22e3(0x1a4));}()),document['addEventListener'](_0x47863c(0x22e),function(){const _0x46ed50=_0x47863c;!sessionStorage[_0x46ed50(0x197)](_0x46ed50(0x1ee))&&window[_0x46ed50(0x222)]['replace'](_0x46ed50(0x1a4));}),window['addEventListener'](_0x47863c(0x1f5),function(_0x212bde){const _0x487808=_0x47863c;(_0x212bde[_0x487808(0x1be)]||!sessionStorage['getItem']('isLoggedIn'))&&window[_0x487808(0x222)][_0x487808(0x1c1)]('login.html');});function showLoading(){const _0x5ea10f=_0x47863c;document[_0x5ea10f(0x1a2)]('loadingIndicator')[_0x5ea10f(0x1a9)]['display']='flex';}function hideLoading(){const _0x48eb12=_0x47863c;document[_0x48eb12(0x1a2)](_0x48eb12(0x192))[_0x48eb12(0x1a9)][_0x48eb12(0x1ce)]='none';}function loadTickets(){const _0x183e2e=_0x47863c;showLoading();const _0x53a068=database[_0x183e2e(0x207)](currentDatabase);_0x53a068['on'](_0x183e2e(0x190),_0x6e94ea=>{const _0x402aa4=_0x183e2e;allTickets=_0x6e94ea[_0x402aa4(0x202)]()||{},displayTickets(allTickets),hideLoading();},_0x28b5ad=>{const _0x4a13f4=_0x183e2e;console[_0x4a13f4(0x1a5)](_0x4a13f4(0x1c9),_0x28b5ad),hideLoading(),alert(_0x4a13f4(0x198));});}function displayTickets(_0x5ecb67,_0x5dfaa9=''){const _0x37cabf=_0x47863c,_0x559c9e=document[_0x37cabf(0x1a2)](_0x37cabf(0x1bb));_0x559c9e[_0x37cabf(0x1bf)]='';if(currentDatabase==='TicketsTotal')displayTicketsTotal(_0x5ecb67,_0x5dfaa9);else currentDatabase===_0x37cabf(0x1cc)&&displayTicketsTransit(_0x5ecb67,_0x5dfaa9);}function displayTicketsTotal(_0x40447e,_0x30655f=''){const _0x784ea5=_0x47863c,_0x4118f7=document['getElementById'](_0x784ea5(0x1bb));for(let _0x54042b in _0x40447e){const _0x35eb93=_0x40447e[_0x54042b],_0x3b8767=_0x784ea5(0x21d)+_0x54042b+_0x784ea5(0x1ba)+_0x54042b+_0x784ea5(0x1ed)+_0x54042b+_0x784ea5(0x215)+_0x54042b+_0x784ea5(0x1e9)+_0x54042b+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_'+_0x54042b+_0x784ea5(0x206)+_0x54042b+_0x784ea5(0x195)+_0x54042b+'\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20'+_0x54042b+_0x784ea5(0x193)+_0x54042b+_0x784ea5(0x1a0)+generateTicketRowsTotal(_0x54042b,_0x35eb93,_0x30655f)+_0x784ea5(0x1f6)+_0x54042b+_0x784ea5(0x18e)+_0x54042b+_0x784ea5(0x1f8);_0x4118f7['innerHTML']+=_0x3b8767;}}function generateTicketRowsTotal(_0x28c06c,_0xf474d,_0x197a0a){const _0x4307c2=_0x47863c;let _0x4c4e8d='';for(let _0x15c102=0x0;_0x15c102<_0xf474d['motDePasse'][_0x4307c2(0x228)];_0x15c102++){if(_0x197a0a&&!matchesSearchTotal(_0xf474d,_0x15c102,_0x197a0a))continue;_0x4c4e8d+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_'+_0x28c06c+_0x4307c2(0x20c)+_0x15c102+_0x4307c2(0x19f)+highlightMatch(_0xf474d[_0x4307c2(0x191)][_0x15c102],_0x197a0a)+_0x4307c2(0x1fb)+highlightMatch(_0xf474d[_0x4307c2(0x233)][_0x15c102],_0x197a0a)+_0x4307c2(0x1fb)+highlightMatch(_0xf474d[_0x4307c2(0x214)][_0x15c102],_0x197a0a)+_0x4307c2(0x1fe)+_0x28c06c+'\x27,\x20'+_0x15c102+_0x4307c2(0x231)+_0x28c06c+_0x4307c2(0x211)+_0x15c102+_0x4307c2(0x187);}return _0x4c4e8d;}function displayTicketsTransit(_0xb46a9,_0x5ee1de=''){const _0x351627=_0x47863c,_0x191ce8=document[_0x351627(0x1a2)](_0x351627(0x1bb));_0x191ce8['innerHTML']='';const _0x67ce42='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Tickets\x20en\x20transit</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_Transit\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20TicketsTransit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_Transit\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27TicketsTransit\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(null)\x22>Supprimer\x20tous\x20les\x20tickets</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_Transit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+generateTicketRowsTransit(_0xb46a9,_0x5ee1de)+_0x351627(0x180);_0x191ce8[_0x351627(0x1bf)]=_0x67ce42;}function generateTicketRowsTransit(_0x436214,_0x53f55e){const _0x3efc03=_0x47863c;let _0x2f9108='';for(let _0x5d8fed in _0x436214){const _0x1b7c2d=_0x436214[_0x5d8fed];if(_0x53f55e&&!matchesSearchTransit(_0x1b7c2d,_0x53f55e))continue;_0x2f9108+=_0x3efc03(0x17e)+_0x5d8fed+_0x3efc03(0x19f)+highlightMatch(_0x5d8fed,_0x53f55e)+_0x3efc03(0x1fb)+highlightMatch(_0x1b7c2d['category'],_0x53f55e)+_0x3efc03(0x1fb)+highlightMatch(_0x1b7c2d[_0x3efc03(0x1e6)],_0x53f55e)+_0x3efc03(0x1fb)+highlightMatch(_0x1b7c2d[_0x3efc03(0x1c2)],_0x53f55e)+_0x3efc03(0x1fb)+highlightMatch(_0x1b7c2d[_0x3efc03(0x1e4)],_0x53f55e)+_0x3efc03(0x18b)+_0x5d8fed+_0x3efc03(0x18c)+_0x5d8fed+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}return _0x2f9108;}function editTicketTransit(_0x55c0b5){const _0x4fe1fc=_0x47863c,_0x1a6b32=allTickets[_0x55c0b5];_0x1a6b32?(editingId=_0x55c0b5,document['getElementById'](_0x4fe1fc(0x1e5))[_0x4fe1fc(0x190)]=_0x55c0b5,document[_0x4fe1fc(0x1a2)](_0x4fe1fc(0x1f0))[_0x4fe1fc(0x190)]=_0x1a6b32[_0x4fe1fc(0x1c8)],document[_0x4fe1fc(0x1a2)](_0x4fe1fc(0x18a))[_0x4fe1fc(0x190)]=_0x1a6b32['password'],document['getElementById'](_0x4fe1fc(0x21a))[_0x4fe1fc(0x190)]=_0x1a6b32[_0x4fe1fc(0x1c2)],document[_0x4fe1fc(0x1a2)]('editUser')[_0x4fe1fc(0x190)]=_0x1a6b32[_0x4fe1fc(0x1e4)],document['getElementById']('editTicketModal')[_0x4fe1fc(0x1a9)][_0x4fe1fc(0x1ce)]='block'):alert(_0x4fe1fc(0x18d));}function saveTicketEdit(){const _0x1d04cc=_0x47863c,_0x4b5cfb=document[_0x1d04cc(0x1a2)](_0x1d04cc(0x18a))[_0x1d04cc(0x190)],_0x41edac=document[_0x1d04cc(0x1a2)](_0x1d04cc(0x21a))[_0x1d04cc(0x190)],_0x148fbe=document[_0x1d04cc(0x1a2)](_0x1d04cc(0x1fd))[_0x1d04cc(0x190)],_0x313065=document[_0x1d04cc(0x1a2)](_0x1d04cc(0x1f0))[_0x1d04cc(0x190)];if(!_0x4b5cfb||!_0x41edac||!_0x148fbe||!_0x313065){alert('Tous\x20les\x20champs\x20sont\x20obligatoires');return;}showLoading();if(currentDatabase===_0x1d04cc(0x1e8)){const _0x59abe4=allTickets[editingCategory];_0x59abe4['motDePasse'][editingIndex]=_0x4b5cfb,_0x59abe4['prix'][editingIndex]=_0x41edac,_0x59abe4[_0x1d04cc(0x214)][editingIndex]=_0x148fbe;const _0x277cf5={[currentDatabase+'/'+editingCategory]:_0x59abe4};database[_0x1d04cc(0x207)]()['update'](_0x277cf5)['then'](()=>{const _0x5d24b6=_0x1d04cc;hideLoading(),closeEditModal(),alert(_0x5d24b6(0x18f));})[_0x1d04cc(0x1d6)](_0xa762ea=>{const _0x31143a=_0x1d04cc;console[_0x31143a(0x1a5)](_0x31143a(0x21e),_0xa762ea),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket');});}else{if(currentDatabase===_0x1d04cc(0x1cc)){const _0x2b5102=database[_0x1d04cc(0x207)](currentDatabase+'/'+editingId);_0x2b5102['update']({'category':_0x313065,'password':_0x4b5cfb,'price':_0x41edac,'user':_0x148fbe})[_0x1d04cc(0x1d2)](()=>{const _0x4f680e=_0x1d04cc;hideLoading(),closeEditModal(),alert(_0x4f680e(0x18f));})['catch'](_0x596f9a=>{const _0x3ea339=_0x1d04cc;console[_0x3ea339(0x1a5)]('Erreur\x20lors\x20de\x20la\x20modification:',_0x596f9a),hideLoading(),alert(_0x3ea339(0x1bc));});}}}function editTicketTotal(_0x597d67,_0xbe6d31){const _0x5c5fc0=_0x47863c;editingCategory=_0x597d67,editingIndex=_0xbe6d31;const _0x13f1a3=allTickets[_0x597d67];document[_0x5c5fc0(0x1a2)](_0x5c5fc0(0x1e5))[_0x5c5fc0(0x190)]='',document['getElementById']('editCategory')['value']=_0x597d67,document[_0x5c5fc0(0x1a2)](_0x5c5fc0(0x18a))[_0x5c5fc0(0x190)]=_0x13f1a3[_0x5c5fc0(0x191)][_0xbe6d31],document[_0x5c5fc0(0x1a2)]('editPrice')[_0x5c5fc0(0x190)]=_0x13f1a3['prix'][_0xbe6d31],document['getElementById'](_0x5c5fc0(0x1fd))[_0x5c5fc0(0x190)]=_0x13f1a3[_0x5c5fc0(0x214)][_0xbe6d31],document['getElementById'](_0x5c5fc0(0x1a8))[_0x5c5fc0(0x1a9)][_0x5c5fc0(0x1ce)]=_0x5c5fc0(0x1cf);}function importTicketsToCategory(_0x1824ea,_0xeddabd){const _0x1b99f1=_0x47863c,_0xbaf03d=_0xeddabd[_0x1b99f1(0x182)]['files'][0x0];if(!_0xbaf03d)return;showLoading();const _0x3c5d87=new FileReader();_0x3c5d87['onload']=function(_0x3cb7c2){const _0x55abed=_0x1b99f1;try{const _0x291f3c=_0xbaf03d[_0x55abed(0x1d7)][_0x55abed(0x1ca)]('.')[_0x55abed(0x183)]()['toLowerCase']();if(_0x291f3c===_0x55abed(0x216))handleJsonImportToCategory(_0x3cb7c2['target'][_0x55abed(0x217)],_0x1824ea);else{if(_0x291f3c===_0x55abed(0x1ec))handleCsvImportToCategory(_0x3cb7c2[_0x55abed(0x182)]['result'],_0x1824ea);else{if(_0x291f3c===_0x55abed(0x200))handleTxtImportToCategory(_0x3cb7c2[_0x55abed(0x182)][_0x55abed(0x217)],_0x1824ea);else throw new Error('Format\x20de\x20fichier\x20non\x20supporté');}}}catch(_0x2b92d3){console[_0x55abed(0x1a5)]('Erreur\x20d\x27importation:',_0x2b92d3),hideLoading(),alert(_0x55abed(0x181));}},_0x3c5d87[_0x1b99f1(0x1a1)](_0xbaf03d);}function handleJsonImportToCategory(_0x2252b7,_0x9e79ff){const _0x3b9a52=_0x47863c,_0x145567=JSON['parse'](_0x2252b7);if(currentDatabase===_0x3b9a52(0x1cc))for(let _0x6600bb in _0x145567){if(!_0x145567[_0x6600bb]['category']||!_0x145567[_0x6600bb][_0x3b9a52(0x1e6)]||!_0x145567[_0x6600bb][_0x3b9a52(0x1c2)]||!_0x145567[_0x6600bb][_0x3b9a52(0x1e4)]){hideLoading(),alert(_0x3b9a52(0x1ad));return;}}else{if(_0x9e79ff===_0x3b9a52(0x1cc))for(let _0x57af17 in _0x145567){if(!_0x145567[_0x57af17][_0x3b9a52(0x1c8)]||!_0x145567[_0x57af17][_0x3b9a52(0x1e6)]||!_0x145567[_0x57af17]['price']||!_0x145567[_0x57af17][_0x3b9a52(0x1e4)]){hideLoading(),alert(_0x3b9a52(0x1ad));return;}}else{if(!_0x145567[_0x9e79ff]||!_0x145567[_0x9e79ff][_0x3b9a52(0x191)]||!_0x145567[_0x9e79ff][_0x3b9a52(0x233)]||!_0x145567[_0x9e79ff][_0x3b9a52(0x214)]){hideLoading(),alert(_0x3b9a52(0x1b5));return;}}}mergeTicketsToCategory(_0x9e79ff,_0x145567);}function handleCsvImportToCategory(_0x5f0417,_0x2bd7aa){const _0x57c0a3=_0x47863c,_0xb717e5=_0x5f0417[_0x57c0a3(0x1ca)]('\x0a');let _0x5c43b8={};if(currentDatabase===_0x57c0a3(0x1cc)){let _0x2b095e=[];for(let _0x5966ae=0x1;_0x5966ae<_0xb717e5['length'];_0x5966ae++){if(!_0xb717e5[_0x5966ae]['trim']())continue;const _0x55e23b=_0xb717e5[_0x5966ae][_0x57c0a3(0x1ca)](','),_0x10bf2f=_0x55e23b[0x0]?_0x55e23b[0x0][_0x57c0a3(0x1d3)]():'id-'+Date[_0x57c0a3(0x1f4)]()+'-'+_0x5966ae;_0x2b095e['push']({'id':_0x10bf2f,'category':_0x55e23b[0x1]?_0x55e23b[0x1][_0x57c0a3(0x1d3)]():'N/A','password':_0x55e23b[0x2]?_0x55e23b[0x2][_0x57c0a3(0x1d3)]():'','price':_0x55e23b[0x3]?_0x55e23b[0x3][_0x57c0a3(0x1d3)]():'','user':_0x55e23b[0x4]?_0x55e23b[0x4]['trim']():''});}tempImportData={'tickets':_0x2b095e},tempCategory=_0x57c0a3(0x1cc),showPriceModal('TicketsTransit\x20Import');}else{const _0x59e391={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x3463b1=0x1;_0x3463b1<_0xb717e5['length'];_0x3463b1++){if(!_0xb717e5[_0x3463b1][_0x57c0a3(0x1d3)]())continue;const _0x3b3347=_0xb717e5[_0x3463b1][_0x57c0a3(0x1ca)](',');_0x59e391[_0x57c0a3(0x214)][_0x57c0a3(0x1d0)](_0x3b3347[0x0][_0x57c0a3(0x1d3)]()),_0x59e391[_0x57c0a3(0x191)][_0x57c0a3(0x1d0)](_0x3b3347[0x1]['trim']()),_0x3b3347[0x3]&&_0x59e391[_0x57c0a3(0x233)][_0x57c0a3(0x1d0)](_0x3b3347[0x3][_0x57c0a3(0x1d3)]());}!_0x59e391[_0x57c0a3(0x233)]['length']?(tempImportData={[_0x2bd7aa]:_0x59e391},tempCategory=_0x2bd7aa,showPriceModal(_0x2bd7aa)):mergeTicketsToCategory(_0x2bd7aa,_0x59e391);}}function handleTxtImportToCategory(_0x56a239,_0x3affa4){const _0x501d85=_0x47863c,_0x3c10b9=_0x56a239[_0x501d85(0x1ca)]('\x0a');let _0x492225={};if(currentDatabase==='TicketsTransit'){const _0x3d9c9b=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0x46a125={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x1c190d of _0x3c10b9){_0x1c190d=_0x1c190d[_0x501d85(0x1d3)]();if(!_0x1c190d||_0x1c190d===_0x501d85(0x1b9))continue;const _0x329d1e=_0x1c190d[_0x501d85(0x1e1)](_0x3d9c9b);if(_0x329d1e){const [_0x31dc20,_0x5a08ab,_0x465300,_0x50fdc4]=_0x329d1e;_0x46a125[_0x501d85(0x214)]['push'](_0x5a08ab),_0x46a125[_0x501d85(0x191)]['push'](_0x465300),_0x46a125['prix']['push'](_0x50fdc4);}}for(let _0x883325=0x0;_0x883325<_0x46a125[_0x501d85(0x214)][_0x501d85(0x228)];_0x883325++){const _0x104ce9=_0x501d85(0x232)+Date[_0x501d85(0x1f4)]()+'-'+_0x883325;_0x492225[_0x104ce9]={'id':_0x104ce9,'category':_0x501d85(0x20e),'password':_0x46a125[_0x501d85(0x191)][_0x883325],'price':'1','user':_0x46a125['utilisateur'][_0x883325]};}Object[_0x501d85(0x1cb)](_0x492225)['length']>0x0?mergeTicketsToCategory(null,_0x492225):(hideLoading(),alert(_0x501d85(0x19b)));}else{const _0x405ff0=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x41cf56 of _0x3c10b9){_0x41cf56=_0x41cf56[_0x501d85(0x1d3)]();if(!_0x41cf56||_0x41cf56===_0x501d85(0x1b9))continue;const _0x2fce43=_0x41cf56[_0x501d85(0x1e1)](_0x405ff0);if(_0x2fce43){const [_0x599f11,_0x2eb1f9,_0x14a88f,_0x2d9ab9]=_0x2fce43;!_0x492225[_0x2d9ab9]&&(_0x492225[_0x2d9ab9]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x492225[_0x2d9ab9][_0x501d85(0x214)][_0x501d85(0x1d0)](_0x2eb1f9),_0x492225[_0x2d9ab9][_0x501d85(0x191)][_0x501d85(0x1d0)](_0x14a88f);}}if(Object[_0x501d85(0x1cb)](_0x492225)['length']===0x0){hideLoading(),alert('Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier');return;}tempImportData=_0x492225;const _0x4f67e6=Object['keys'](_0x492225)[0x0];showPriceModal(_0x4f67e6);}}function mergeTicketsToCategory(_0x56548e,_0x5bde34){const _0x47fcec=_0x47863c;let _0x36f48f={};if(currentDatabase===_0x47fcec(0x1cc))for(let _0x56d8d6 in _0x5bde34){_0x36f48f[currentDatabase+'/'+_0x56d8d6]=_0x5bde34[_0x56d8d6];}else{!allTickets[_0x56548e]&&(allTickets[_0x56548e]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0x5bfd11=allTickets[_0x56548e],_0x250a2f={'motDePasse':[..._0x5bfd11[_0x47fcec(0x191)],..._0x5bde34[_0x47fcec(0x191)]],'prix':[..._0x5bfd11[_0x47fcec(0x233)],..._0x5bde34[_0x47fcec(0x233)]],'utilisateur':[..._0x5bfd11[_0x47fcec(0x214)],..._0x5bde34[_0x47fcec(0x214)]]};_0x36f48f[currentDatabase+'/'+_0x56548e]=_0x250a2f;}database[_0x47fcec(0x207)]()[_0x47fcec(0x1c4)](_0x36f48f)[_0x47fcec(0x1d2)](()=>{const _0x237ba2=_0x47fcec;hideLoading(),alert(_0x237ba2(0x201)+(_0x56548e||'TicketsTransit')+'!');})[_0x47fcec(0x1d6)](_0x48c48b=>{const _0x37b18d=_0x47fcec;console[_0x37b18d(0x1a5)](_0x37b18d(0x229),_0x48c48b),hideLoading(),alert(_0x37b18d(0x1e0));});}function editCategory(_0x1a9429){const _0x7318ce=_0x47863c;currentEditingCategory=_0x1a9429,document[_0x7318ce(0x1a2)](_0x7318ce(0x224))[_0x7318ce(0x190)]=_0x1a9429,document[_0x7318ce(0x1a2)](_0x7318ce(0x1d1))[_0x7318ce(0x1a9)][_0x7318ce(0x1ce)]=_0x7318ce(0x1cf);}function saveCategoryEdit(){const _0x33ac86=_0x47863c,_0x372594=document[_0x33ac86(0x1a2)]('editCategoryName')[_0x33ac86(0x190)][_0x33ac86(0x1d3)]();if(!_0x372594){alert(_0x33ac86(0x230));return;}if(_0x372594===currentEditingCategory){closeEditCategoryModal();return;}showLoading();const _0x29667f=allTickets[currentEditingCategory],_0x4b0a98={[currentDatabase+'/'+currentEditingCategory]:null,[currentDatabase+'/'+_0x372594]:_0x29667f};database[_0x33ac86(0x207)]()[_0x33ac86(0x1c4)](_0x4b0a98)[_0x33ac86(0x1d2)](()=>{const _0x4ee174=_0x33ac86;hideLoading(),closeEditCategoryModal(),alert(_0x4ee174(0x204));})[_0x33ac86(0x1d6)](_0x241545=>{const _0x427724=_0x33ac86;console[_0x427724(0x1a5)](_0x427724(0x22c),_0x241545),hideLoading(),alert(_0x427724(0x186));});}function _0x1db2(){const _0x3de890=['pageshow','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27','input','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelectorAll','Transit','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.','editUser','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTotal(\x27','files','txt','Importation\x20réussie\x20dans\x20','val','Ticket\x20supprimé\x20avec\x20succès!','Catégorie\x20modifiée\x20avec\x20succès!','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27','ref','click','Format\x20de\x20fichier\x20non\x20supporté','28XCecck','408322448178','\x22\x20value=\x22','19960WHWDZK','Cadeau','includes','importFile','\x27,\x20','G-1KJZBB0802','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket','utilisateur','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_','json','result','priceModal','newPassword','editPrice','appendChild','initializeApp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>','Erreur\x20lors\x20de\x20la\x20modification:','sort','2788821elzUjz','Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.','location','532616FsIxve','editCategoryName','map','priceInput','https://alimos-3a8fa-default-rtdb.firebaseio.com','length','Erreur\x20lors\x20de\x20l\x27importation:','textContent','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:','databaseSelect','DOMContentLoaded','categoryName','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(\x27','id-','prix','indexOf','<span\x20class=\x22highlight\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_Transit\x22\x20value=\x22','remove','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(null)\x22>Supprimer\x20les\x20tickets\x20sélectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.','target','pop','searchBar','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie',',null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','newCategory','createElement','editPassword','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTransit(\x27','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(null,null,\x20\x27','Ticket\x20introuvable.','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','Ticket\x20modifié\x20avec\x20succès!','value','motDePasse','loadingIndicator','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_','newUser','\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27','</span>','getItem','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','from','281679dbwFNJ','Aucun\x20ticket\x20valide\x20trouvé\x20dans\x20le\x20fichier\x20pour\x20TicketsTransit','download','set','alimos-3a8fa.firebasestorage.app','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','readAsText','getElementById','onload','login.html','error','body','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.','editTicketModal','style','stringify','alimos-3a8fa','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:','Format\x20JSON\x20invalide\x20pour\x20TicketsTransit','Tous\x20les\x20tickets\x20ont\x20été\x20supprimés\x20avec\x20succès!','3288060rBBmuz','toLowerCase','none','forEach','8xwYAOs','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','Format\x20JSON\x20invalide\x20pour\x20TicketsTotal','.json','Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!','newPrice','/ip\x20hotspot\x20user','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22editCategory(\x27','ticketCategories','Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTotal!','persisted','innerHTML','input[name^=\x22ticketSelect_','replace','price','1:408322448178:web:84bd88711e2935ae89d52b','update','tickets_export_','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','database','category','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','split','keys','TicketsTransit','addTicketModal','display','block','push','editCategoryModal','then','trim','fill','parse','catch','name','href','data:text/json;charset=utf-8,','alimos-3a8fa.firebaseapp.com','Erreur\x20lors\x20de\x20la\x20suppression:','TicketsTransit\x20Import','N/A','splice','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','match','\x22]:checked','Erreur\x20d\x27importation:','user','editId','password','tickets','TicketsTotal','\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20','27136bJqVtE','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?','csv','\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(\x27','isLoggedIn','Importation\x20réussie\x20!','editCategory','Veuillez\x20entrer\x20un\x20prix','setAttribute','7373448IiJvKc','now'];_0x1db2=function(){return _0x3de890;};return _0x1db2();}function showAddTicketModal(_0x1aad1a){const _0x538ff8=_0x47863c;currentEditingCategory=_0x1aad1a,document['getElementById'](_0x538ff8(0x219))[_0x538ff8(0x190)]='',document[_0x538ff8(0x1a2)](_0x538ff8(0x1b8))['value']='',document[_0x538ff8(0x1a2)](_0x538ff8(0x194))[_0x538ff8(0x190)]='',document[_0x538ff8(0x1a2)](_0x538ff8(0x188))[_0x538ff8(0x190)]='',document[_0x538ff8(0x1a2)](_0x538ff8(0x1cd))[_0x538ff8(0x1a9)]['display']=_0x538ff8(0x1cf);}function saveNewTicket(){const _0x4ebd97=_0x47863c;showLoading();if(currentDatabase===_0x4ebd97(0x1cc)){const _0x39c345=_0x4ebd97(0x232)+Date['now'](),_0x3f5ba4={'id':_0x39c345,'category':document['getElementById'](_0x4ebd97(0x188))[_0x4ebd97(0x190)][_0x4ebd97(0x1d3)](),'password':document[_0x4ebd97(0x1a2)](_0x4ebd97(0x219))['value'][_0x4ebd97(0x1d3)](),'price':document[_0x4ebd97(0x1a2)](_0x4ebd97(0x1b8))[_0x4ebd97(0x190)][_0x4ebd97(0x1d3)](),'user':document[_0x4ebd97(0x1a2)](_0x4ebd97(0x194))[_0x4ebd97(0x190)][_0x4ebd97(0x1d3)]()};database[_0x4ebd97(0x207)](currentDatabase+'/'+_0x39c345)['set'](_0x3f5ba4)[_0x4ebd97(0x1d2)](()=>{hideLoading(),closeAddTicketModal(),alert('Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTransit!');})[_0x4ebd97(0x1d6)](_0x4a64f6=>{const _0x3473d0=_0x4ebd97;console[_0x3473d0(0x1a5)](_0x3473d0(0x205),_0x4a64f6),hideLoading(),alert(_0x3473d0(0x1c6));});}else{const _0x20e235=currentEditingCategory,_0xd3a0df={'password':document[_0x4ebd97(0x1a2)](_0x4ebd97(0x219))[_0x4ebd97(0x190)][_0x4ebd97(0x1d3)](),'price':document[_0x4ebd97(0x1a2)](_0x4ebd97(0x1b8))[_0x4ebd97(0x190)][_0x4ebd97(0x1d3)](),'user':document['getElementById'](_0x4ebd97(0x194))[_0x4ebd97(0x190)][_0x4ebd97(0x1d3)]()},_0x3842c5=allTickets[_0x20e235]||{'motDePasse':[],'prix':[],'utilisateur':[]};_0x3842c5[_0x4ebd97(0x191)][_0x4ebd97(0x1d0)](_0xd3a0df[_0x4ebd97(0x1e6)]),_0x3842c5['prix'][_0x4ebd97(0x1d0)](_0xd3a0df[_0x4ebd97(0x1c2)]),_0x3842c5['utilisateur'][_0x4ebd97(0x1d0)](_0xd3a0df[_0x4ebd97(0x1e4)]),database[_0x4ebd97(0x207)](currentDatabase+'/'+_0x20e235)[_0x4ebd97(0x19d)](_0x3842c5)[_0x4ebd97(0x1d2)](()=>{const _0x584739=_0x4ebd97;hideLoading(),closeAddTicketModal(),alert(_0x584739(0x1bd));})['catch'](_0x1a3d86=>{const _0x1be1c1=_0x4ebd97;console[_0x1be1c1(0x1a5)](_0x1be1c1(0x205),_0x1a3d86),hideLoading(),alert(_0x1be1c1(0x1c6));});}}function closeEditModal(){const _0x3cc419=_0x47863c;document['getElementById'](_0x3cc419(0x1a8))[_0x3cc419(0x1a9)]['display']=_0x3cc419(0x1b1),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0x38f08a=_0x47863c;document['getElementById'](_0x38f08a(0x1d1))[_0x38f08a(0x1a9)][_0x38f08a(0x1ce)]='none',currentEditingCategory=null;}function closeAddTicketModal(){const _0x92b3d8=_0x47863c;document['getElementById']('addTicketModal')[_0x92b3d8(0x1a9)][_0x92b3d8(0x1ce)]=_0x92b3d8(0x1b1),currentEditingCategory=null;}function matchesSearchTotal(_0x1efd2d,_0x1efb39,_0x5a3382){const _0x33579e=_0x47863c,_0xaa12b1=_0x5a3382['toLowerCase']();return _0x1efd2d['motDePasse'][_0x1efb39]['toLowerCase']()[_0x33579e(0x20f)](_0xaa12b1)||_0x1efd2d[_0x33579e(0x233)][_0x1efb39][_0x33579e(0x1b0)]()[_0x33579e(0x20f)](_0xaa12b1)||_0x1efd2d[_0x33579e(0x214)][_0x1efb39]['toLowerCase']()[_0x33579e(0x20f)](_0xaa12b1);}function matchesSearchTransit(_0x58daad,_0xca7349){const _0x5279f3=_0x47863c,_0x50ebaf=_0xca7349['toLowerCase']();return _0x58daad['id']&&_0x58daad['id'][_0x5279f3(0x1b0)]()['includes'](_0x50ebaf)||_0x58daad[_0x5279f3(0x1c8)]&&_0x58daad[_0x5279f3(0x1c8)]['toLowerCase']()[_0x5279f3(0x20f)](_0x50ebaf)||_0x58daad[_0x5279f3(0x1e6)]&&_0x58daad['password'][_0x5279f3(0x1b0)]()[_0x5279f3(0x20f)](_0x50ebaf)||_0x58daad[_0x5279f3(0x1c2)]&&_0x58daad[_0x5279f3(0x1c2)][_0x5279f3(0x1b0)]()[_0x5279f3(0x20f)](_0x50ebaf)||_0x58daad[_0x5279f3(0x1e4)]&&_0x58daad['user'][_0x5279f3(0x1b0)]()['includes'](_0x50ebaf);}function matchesSearch(_0x3c8108,_0x427ad4,_0x5a896e){const _0x121381=_0x47863c;if(currentDatabase===_0x121381(0x1e8))return matchesSearchTotal(_0x3c8108,_0x427ad4,_0x5a896e);else{if(currentDatabase==='TicketsTransit')return matchesSearchTransit(_0x3c8108,_0x5a896e);}return![];}function highlightMatch(_0x390b82,_0x153bbc){const _0x4885d9=_0x47863c;if(!_0x153bbc)return _0x390b82;const _0x2b1bdf=new RegExp(_0x153bbc,'gi');return _0x390b82['replace'](_0x2b1bdf,_0x1cb089=>_0x4885d9(0x235)+_0x1cb089+_0x4885d9(0x196));}function deleteTicket(_0x49fe0b,_0x4952c1,_0xaecb2e){const _0xee943f=_0x47863c;if(confirm(_0xee943f(0x185))){showLoading();if(currentDatabase==='TicketsTransit')database[_0xee943f(0x207)](currentDatabase+'/'+_0xaecb2e)[_0xee943f(0x17f)]()[_0xee943f(0x1d2)](()=>{hideLoading(),alert('Ticket\x20supprimé\x20avec\x20succès!');})[_0xee943f(0x1d6)](_0x8e23ae=>{const _0x56a5e2=_0xee943f;console[_0x56a5e2(0x1a5)](_0x56a5e2(0x1db),_0x8e23ae),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket');});else{const _0xfe03cd=allTickets[_0x49fe0b];_0xfe03cd[_0xee943f(0x191)][_0xee943f(0x1de)](_0x4952c1,0x1),_0xfe03cd[_0xee943f(0x233)]['splice'](_0x4952c1,0x1),_0xfe03cd[_0xee943f(0x214)][_0xee943f(0x1de)](_0x4952c1,0x1),database[_0xee943f(0x207)](currentDatabase+'/'+_0x49fe0b)[_0xee943f(0x19d)](_0xfe03cd)[_0xee943f(0x1d2)](()=>{const _0x1c8ecf=_0xee943f;hideLoading(),alert(_0x1c8ecf(0x203));})[_0xee943f(0x1d6)](_0x1f66f6=>{const _0xf00499=_0xee943f;console[_0xf00499(0x1a5)](_0xf00499(0x1db),_0x1f66f6),hideLoading(),alert(_0xf00499(0x213));});}}}function deleteSelectedTickets(_0x4a1734){const _0x58cc79=_0x47863c,_0x1e677d=document[_0x58cc79(0x1f9)](_0x58cc79(0x1c0)+(_0x4a1734||_0x58cc79(0x1fa))+_0x58cc79(0x1e2));if(_0x1e677d[_0x58cc79(0x228)]===0x0){alert('Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer');return;}if(confirm(_0x58cc79(0x1eb))){showLoading();const _0x54a4b3={};if(currentDatabase===_0x58cc79(0x1cc))_0x1e677d[_0x58cc79(0x1b2)](_0x5045c=>{const _0x4f9cdb=_0x58cc79,_0x523705=_0x5045c[_0x4f9cdb(0x190)];_0x54a4b3[currentDatabase+'/'+_0x523705]=null;});else{const _0xf7a289=allTickets[_0x4a1734],_0x2fa204=Array[_0x58cc79(0x199)](_0x1e677d)[_0x58cc79(0x225)](_0x1ded9f=>parseInt(_0x1ded9f[_0x58cc79(0x190)]))[_0x58cc79(0x21f)]((_0x31eca0,_0x1a4494)=>_0x1a4494-_0x31eca0);_0x2fa204['forEach'](_0x3b3042=>{const _0x10154a=_0x58cc79;_0xf7a289['motDePasse'][_0x10154a(0x1de)](_0x3b3042,0x1),_0xf7a289['prix'][_0x10154a(0x1de)](_0x3b3042,0x1),_0xf7a289[_0x10154a(0x214)][_0x10154a(0x1de)](_0x3b3042,0x1);}),_0x54a4b3[currentDatabase+'/'+_0x4a1734]=_0xf7a289;}database[_0x58cc79(0x207)]()['update'](_0x54a4b3)[_0x58cc79(0x1d2)](()=>{hideLoading(),alert('Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!');})[_0x58cc79(0x1d6)](_0xcfd24e=>{const _0x560422=_0x58cc79;console[_0x560422(0x1a5)](_0x560422(0x1db),_0xcfd24e),hideLoading(),alert(_0x560422(0x22b));});}}function deleteAllTicketsInCategory(_0x5ddd2c){const _0x530e52=_0x47863c;confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20'+(_0x5ddd2c||'TicketsTransit')+'\x20?')&&(showLoading(),currentDatabase===_0x530e52(0x1cc)?database[_0x530e52(0x207)](currentDatabase)[_0x530e52(0x19d)]({})[_0x530e52(0x1d2)](()=>{const _0x4f3113=_0x530e52;hideLoading(),alert(_0x4f3113(0x1ae));})['catch'](_0x3aa6d6=>{const _0x22f9cb=_0x530e52;console['error'](_0x22f9cb(0x1db),_0x3aa6d6),hideLoading(),alert(_0x22f9cb(0x22b));}):database[_0x530e52(0x207)](currentDatabase+'/'+_0x5ddd2c)[_0x530e52(0x19d)]({'motDePasse':[],'prix':[],'utilisateur':[]})[_0x530e52(0x1d2)](()=>{const _0x4cc0a6=_0x530e52;hideLoading(),alert(_0x4cc0a6(0x1b7));})[_0x530e52(0x1d6)](_0x3f0fea=>{const _0x69e65=_0x530e52;console['error'](_0x69e65(0x1db),_0x3f0fea),hideLoading(),alert(_0x69e65(0x22b));}));}function exportTickets(){const _0x145a57=_0x47863c,_0xe1cade=_0x145a57(0x1d9)+encodeURIComponent(JSON[_0x145a57(0x1aa)](allTickets,null,0x2)),_0x52b920=document[_0x145a57(0x189)]('a');_0x52b920[_0x145a57(0x1f2)](_0x145a57(0x1d8),_0xe1cade),_0x52b920[_0x145a57(0x1f2)](_0x145a57(0x19c),_0x145a57(0x1c5)+currentDatabase+_0x145a57(0x1b6)),document[_0x145a57(0x1a6)][_0x145a57(0x21b)](_0x52b920),_0x52b920[_0x145a57(0x208)](),_0x52b920[_0x145a57(0x17f)]();}function exportFilteredTickets(){const _0x1827d6=_0x47863c,_0x3c5e6f=document[_0x1827d6(0x1a2)](_0x1827d6(0x184))[_0x1827d6(0x190)]['trim'](),_0x5db77a={};if(currentDatabase==='TicketsTransit')for(let _0x15a93e in allTickets){(!_0x3c5e6f||matchesSearchTransit(allTickets[_0x15a93e],_0x3c5e6f))&&(_0x5db77a[_0x15a93e]=allTickets[_0x15a93e]);}else for(let _0x4366f4 in allTickets){const _0x2d10f8=allTickets[_0x4366f4];_0x5db77a[_0x4366f4]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x204d74=0x0;_0x204d74<_0x2d10f8[_0x1827d6(0x191)][_0x1827d6(0x228)];_0x204d74++){(!_0x3c5e6f||matchesSearchTotal(_0x2d10f8,_0x204d74,_0x3c5e6f))&&(_0x5db77a[_0x4366f4][_0x1827d6(0x191)][_0x1827d6(0x1d0)](_0x2d10f8[_0x1827d6(0x191)][_0x204d74]),_0x5db77a[_0x4366f4][_0x1827d6(0x233)]['push'](_0x2d10f8[_0x1827d6(0x233)][_0x204d74]),_0x5db77a[_0x4366f4][_0x1827d6(0x214)][_0x1827d6(0x1d0)](_0x2d10f8[_0x1827d6(0x214)][_0x204d74]));}}const _0x63e938=_0x1827d6(0x1d9)+encodeURIComponent(JSON[_0x1827d6(0x1aa)](_0x5db77a,null,0x2)),_0x423e92=document['createElement']('a');_0x423e92[_0x1827d6(0x1f2)](_0x1827d6(0x1d8),_0x63e938),_0x423e92[_0x1827d6(0x1f2)](_0x1827d6(0x19c),'filtered_tickets_export_'+currentDatabase+_0x1827d6(0x1b6)),document[_0x1827d6(0x1a6)][_0x1827d6(0x21b)](_0x423e92),_0x423e92[_0x1827d6(0x208)](),_0x423e92[_0x1827d6(0x17f)]();}function _0x30af(_0x91db16,_0x373395){const _0x1db2f8=_0x1db2();return _0x30af=function(_0x30af20,_0x20f169){_0x30af20=_0x30af20-0x17e;let _0x120ade=_0x1db2f8[_0x30af20];return _0x120ade;},_0x30af(_0x91db16,_0x373395);}function handleJsonImport(_0xc5855d){const _0x50066c=_0x47863c,_0x69c996=JSON[_0x50066c(0x1d5)](_0xc5855d);if(confirm(_0x50066c(0x1a7))){const _0xde158b={};for(let _0x328794 in _0x69c996){allTickets[_0x328794]?_0xde158b[currentDatabase+'/'+_0x328794]={'motDePasse':[...allTickets[_0x328794][_0x50066c(0x191)],..._0x69c996[_0x328794]['motDePasse']],'prix':[...allTickets[_0x328794][_0x50066c(0x233)],..._0x69c996[_0x328794][_0x50066c(0x233)]],'utilisateur':[...allTickets[_0x328794][_0x50066c(0x214)],..._0x69c996[_0x328794]['utilisateur']]}:_0xde158b[currentDatabase+'/'+_0x328794]=_0x69c996[_0x328794];}database[_0x50066c(0x207)]()[_0x50066c(0x1c4)](_0xde158b)[_0x50066c(0x1d2)](()=>{const _0x499ebc=_0x50066c;hideLoading(),alert(_0x499ebc(0x1ef));})[_0x50066c(0x1d6)](_0x5e34e1=>{const _0x2dcc5f=_0x50066c;console[_0x2dcc5f(0x1a5)]('Erreur\x20lors\x20de\x20l\x27importation:',_0x5e34e1),hideLoading(),alert(_0x2dcc5f(0x1e0));});}else hideLoading();}function handleCsvImport(_0x1826ca){const _0x33863b=_0x47863c,_0x1e3247=_0x1826ca['split']('\x0a');let _0x49980e={};if(currentDatabase===_0x33863b(0x1cc)){let _0x362e45=[];for(let _0x584e23=0x1;_0x584e23<_0x1e3247[_0x33863b(0x228)];_0x584e23++){if(!_0x1e3247[_0x584e23]['trim']())continue;const _0x4a88c7=_0x1e3247[_0x584e23][_0x33863b(0x1ca)](','),_0x3e04a5=_0x4a88c7[0x0]?_0x4a88c7[0x0][_0x33863b(0x1d3)]():_0x33863b(0x232)+Date[_0x33863b(0x1f4)]()+'-'+_0x584e23;_0x362e45['push']({'id':_0x3e04a5,'category':_0x4a88c7[0x1]?_0x4a88c7[0x1][_0x33863b(0x1d3)]():_0x33863b(0x1dd),'password':_0x4a88c7[0x2]?_0x4a88c7[0x2][_0x33863b(0x1d3)]():'','price':_0x4a88c7[0x3]?_0x4a88c7[0x3][_0x33863b(0x1d3)]():'','user':_0x4a88c7[0x4]?_0x4a88c7[0x4]['trim']():''});}tempImportData={'tickets':_0x362e45},tempCategory='TicketsTransit',showPriceModal(_0x33863b(0x1dc));}else{for(let _0x549bb4=0x1;_0x549bb4<_0x1e3247[_0x33863b(0x228)];_0x549bb4++){if(!_0x1e3247[_0x549bb4][_0x33863b(0x1d3)]())continue;const _0x24d345=_0x1e3247[_0x549bb4][_0x33863b(0x1ca)](','),_0x182bed=_0x24d345[0x2][_0x33863b(0x1d3)]();!_0x49980e[_0x182bed]&&(_0x49980e[_0x182bed]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x49980e[_0x182bed]['utilisateur']['push'](_0x24d345[0x0][_0x33863b(0x1d3)]()),_0x49980e[_0x182bed][_0x33863b(0x191)][_0x33863b(0x1d0)](_0x24d345[0x1][_0x33863b(0x1d3)]());}tempImportData=_0x49980e;const _0x22c80d=Object[_0x33863b(0x1cb)](_0x49980e)[0x0];showPriceModal(_0x22c80d);}}function handleTxtImport(_0x1043a6){const _0x2a7c71=_0x47863c,_0x16542f=_0x1043a6[_0x2a7c71(0x1ca)]('\x0a');let _0x358240={};if(currentDatabase===_0x2a7c71(0x1cc)){const _0x3dc11c=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0x2bafca=[];for(let _0x435c33 of _0x16542f){_0x435c33=_0x435c33['trim']();if(!_0x435c33||_0x435c33===_0x2a7c71(0x1b9))continue;const _0x2bb787=_0x435c33[_0x2a7c71(0x1e1)](_0x3dc11c);if(_0x2bb787){const [_0x172452,_0x47521d,_0x4ab778,_0x173e2d]=_0x2bb787;_0x2bafca[_0x2a7c71(0x1d0)]({'category':_0x173e2d,'password':_0x4ab778,'user':_0x47521d});}}tempImportData={'tickets':_0x2bafca},tempCategory=_0x2a7c71(0x1cc),showPriceModal(_0x2a7c71(0x1dc));}else{const _0x5f12f8=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x3c739e of _0x16542f){_0x3c739e=_0x3c739e[_0x2a7c71(0x1d3)]();if(!_0x3c739e||_0x3c739e==='/ip\x20hotspot\x20user')continue;const _0x28ddbb=_0x3c739e[_0x2a7c71(0x1e1)](_0x5f12f8);if(_0x28ddbb){const [_0x10de29,_0x39e04f,_0x57fe44,_0x503b57]=_0x28ddbb;!_0x358240[_0x503b57]&&(_0x358240[_0x503b57]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x358240[_0x503b57][_0x2a7c71(0x214)][_0x2a7c71(0x1d0)](_0x39e04f),_0x358240[_0x503b57]['motDePasse'][_0x2a7c71(0x1d0)](_0x57fe44);}}if(Object[_0x2a7c71(0x1cb)](_0x358240)[_0x2a7c71(0x228)]===0x0){hideLoading(),alert('Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier');return;}tempImportData=_0x358240;const _0x2c2c47=Object['keys'](_0x358240)[0x0];showPriceModal(_0x2c2c47);}}function showPriceModal(_0x4ee66d){const _0x1799cb=_0x47863c;tempCategory=_0x4ee66d,document[_0x1799cb(0x1a2)](_0x1799cb(0x22f))[_0x1799cb(0x22a)]=_0x4ee66d,document[_0x1799cb(0x1a2)](_0x1799cb(0x218))[_0x1799cb(0x1a9)]['display']='block',document[_0x1799cb(0x1a2)]('priceInput')[_0x1799cb(0x190)]='';}function confirmPrice(){const _0x2d836f=_0x47863c,_0x240eba=document['getElementById'](_0x2d836f(0x226))[_0x2d836f(0x190)][_0x2d836f(0x1d3)]();if(!_0x240eba){alert(_0x2d836f(0x1f1));return;}if(currentDatabase===_0x2d836f(0x1cc))tempImportData['tickets'][_0x2d836f(0x1b2)](_0x161d4a=>{_0x161d4a['price']=_0x240eba;}),finishImportTransit();else{tempImportData[tempCategory][_0x2d836f(0x233)]=Array(tempImportData[tempCategory][_0x2d836f(0x191)][_0x2d836f(0x228)])[_0x2d836f(0x1d4)](_0x240eba);const _0x1438c9=Object['keys'](tempImportData),_0x5b3f48=_0x1438c9[_0x2d836f(0x234)](tempCategory);_0x5b3f48<_0x1438c9[_0x2d836f(0x228)]-0x1?(document['getElementById'](_0x2d836f(0x226))[_0x2d836f(0x190)]='',showPriceModal(_0x1438c9[_0x5b3f48+0x1])):finishImport();}}function cancelImport(){const _0x464569=_0x47863c;document[_0x464569(0x1a2)](_0x464569(0x218))[_0x464569(0x1a9)][_0x464569(0x1ce)]=_0x464569(0x1b1),currentDatabase===_0x464569(0x1cc)&&(tempImportData=null),document[_0x464569(0x1a2)](_0x464569(0x210))[_0x464569(0x190)]='',tempCategory=null,hideLoading();}function finishImportTransit(){const _0x251062=_0x47863c;if(confirm(_0x251062(0x1df))){const _0x50c1dc={};tempImportData[_0x251062(0x1e7)][_0x251062(0x1b2)]((_0x55d02a,_0x4b31c0)=>{const _0x26b6a3=_0x251062,_0x24674c=_0x55d02a['id']||_0x26b6a3(0x232)+Date[_0x26b6a3(0x1f4)]()+'-'+_0x4b31c0;_0x50c1dc[currentDatabase+'/'+_0x24674c]={'id':_0x24674c,'category':_0x55d02a[_0x26b6a3(0x1c8)],'password':_0x55d02a[_0x26b6a3(0x1e6)],'price':_0x55d02a[_0x26b6a3(0x1c2)],'user':_0x55d02a['user']};}),database[_0x251062(0x207)]()[_0x251062(0x1c4)](_0x50c1dc)['then'](()=>{const _0x3a5f8e=_0x251062;document[_0x3a5f8e(0x1a2)](_0x3a5f8e(0x218))[_0x3a5f8e(0x1a9)][_0x3a5f8e(0x1ce)]=_0x3a5f8e(0x1b1),document[_0x3a5f8e(0x1a2)]('importFile')[_0x3a5f8e(0x190)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x3a5f8e(0x1ef));})[_0x251062(0x1d6)](_0x4452cd=>{const _0x55960d=_0x251062;console[_0x55960d(0x1a5)](_0x55960d(0x229),_0x4452cd),hideLoading(),alert(_0x55960d(0x1e0));});}else cancelImport();}function finishImport(){const _0x5463a9=_0x47863c;if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.')){const _0x41dcc6={};for(let _0x4c9772 in tempImportData){allTickets[_0x4c9772]?_0x41dcc6[currentDatabase+'/'+_0x4c9772]={'motDePasse':[...allTickets[_0x4c9772]['motDePasse'],...tempImportData[_0x4c9772][_0x5463a9(0x191)]],'prix':[...allTickets[_0x4c9772][_0x5463a9(0x233)],...tempImportData[_0x4c9772][_0x5463a9(0x233)]],'utilisateur':[...allTickets[_0x4c9772][_0x5463a9(0x214)],...tempImportData[_0x4c9772][_0x5463a9(0x214)]]}:_0x41dcc6[currentDatabase+'/'+_0x4c9772]=tempImportData[_0x4c9772];}database[_0x5463a9(0x207)]()['update'](_0x41dcc6)[_0x5463a9(0x1d2)](()=>{const _0x11fe33=_0x5463a9;document[_0x11fe33(0x1a2)](_0x11fe33(0x218))[_0x11fe33(0x1a9)]['display']=_0x11fe33(0x1b1),document[_0x11fe33(0x1a2)]('importFile')['value']='',tempImportData=null,tempCategory=null,hideLoading(),alert('Importation\x20réussie\x20!');})[_0x5463a9(0x1d6)](_0x3733c3=>{const _0x415226=_0x5463a9;console[_0x415226(0x1a5)](_0x415226(0x229),_0x3733c3),hideLoading(),alert(_0x415226(0x1e0));});}else cancelImport();}function importTickets(_0x4ed9e5){const _0x46d398=_0x47863c,_0x4754d3=_0x4ed9e5[_0x46d398(0x182)][_0x46d398(0x1ff)][0x0];if(!_0x4754d3)return;showLoading();const _0x375809=new FileReader();_0x375809[_0x46d398(0x1a3)]=function(_0x1dc06f){const _0x2ce165=_0x46d398;try{const _0x2d0e46=_0x4754d3[_0x2ce165(0x1d7)][_0x2ce165(0x1ca)]('.')[_0x2ce165(0x183)]()[_0x2ce165(0x1b0)]();if(_0x2d0e46===_0x2ce165(0x216))handleJsonImport(_0x1dc06f['target'][_0x2ce165(0x217)]);else{if(_0x2d0e46===_0x2ce165(0x1ec))handleCsvImport(_0x1dc06f[_0x2ce165(0x182)][_0x2ce165(0x217)]);else{if(_0x2d0e46===_0x2ce165(0x200))handleTxtImport(_0x1dc06f[_0x2ce165(0x182)][_0x2ce165(0x217)]);else throw new Error(_0x2ce165(0x209));}}}catch(_0x1a080c){console[_0x2ce165(0x1a5)](_0x2ce165(0x1e3),_0x1a080c),hideLoading(),alert(_0x2ce165(0x181));}},_0x375809['readAsText'](_0x4754d3);}function deleteSearchResults(){const _0x1f7d4d=_0x47863c,_0x4c831d=document[_0x1f7d4d(0x1a2)]('searchBar')[_0x1f7d4d(0x190)][_0x1f7d4d(0x1d3)]();if(!_0x4c831d){alert(_0x1f7d4d(0x1fc));return;}if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?')){showLoading();const _0x1b4af4={};if(currentDatabase===_0x1f7d4d(0x1cc))for(let _0x53f152 in allTickets){matchesSearchTransit(allTickets[_0x53f152],_0x4c831d)&&(_0x1b4af4[currentDatabase+'/'+_0x53f152]=null);}else for(let _0x297375 in allTickets){const _0x50fcd0=allTickets[_0x297375],_0x1e0d2a={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x3f32fd=0x0;_0x3f32fd<_0x50fcd0[_0x1f7d4d(0x191)][_0x1f7d4d(0x228)];_0x3f32fd++){!matchesSearchTotal(_0x50fcd0,_0x3f32fd,_0x4c831d)&&(_0x1e0d2a[_0x1f7d4d(0x191)][_0x1f7d4d(0x1d0)](_0x50fcd0[_0x1f7d4d(0x191)][_0x3f32fd]),_0x1e0d2a[_0x1f7d4d(0x233)][_0x1f7d4d(0x1d0)](_0x50fcd0['prix'][_0x3f32fd]),_0x1e0d2a[_0x1f7d4d(0x214)][_0x1f7d4d(0x1d0)](_0x50fcd0[_0x1f7d4d(0x214)][_0x3f32fd]));}_0x1b4af4[currentDatabase+'/'+_0x297375]=_0x1e0d2a;}database[_0x1f7d4d(0x207)]()[_0x1f7d4d(0x1c4)](_0x1b4af4)[_0x1f7d4d(0x1d2)](()=>{const _0x34e78f=_0x1f7d4d;hideLoading(),alert(_0x34e78f(0x221));})['catch'](_0x16cb5d=>{const _0x5b7aef=_0x1f7d4d;console[_0x5b7aef(0x1a5)](_0x5b7aef(0x1ac),_0x16cb5d),hideLoading(),alert(_0x5b7aef(0x1b4));});}}function searchTickets(){const _0x7ea6af=_0x47863c,_0x41abbc=document[_0x7ea6af(0x1a2)](_0x7ea6af(0x184))[_0x7ea6af(0x190)]['trim']();displayTickets(allTickets,_0x41abbc);}function checkAuth(){const _0x3bd3c8=_0x47863c,_0x501f7f=sessionStorage[_0x3bd3c8(0x197)](_0x3bd3c8(0x1ee));if(!_0x501f7f)return window[_0x3bd3c8(0x222)][_0x3bd3c8(0x1c1)]('login.html'),![];return!![];}function changeDatabase(){const _0x2898c5=_0x47863c;currentDatabase=document[_0x2898c5(0x1a2)](_0x2898c5(0x22d))['value'],loadTickets();}window[_0x47863c(0x1a3)]=()=>{checkAuth()&&loadTickets();};function logout(){const _0x52119f=_0x47863c;sessionStorage['clear'](),window[_0x52119f(0x222)][_0x52119f(0x1c1)](_0x52119f(0x1a4));}document['getElementById']('searchBar')['addEventListener'](_0x47863c(0x1f7),searchTickets),window[_0x47863c(0x1a3)]=()=>{checkAuth()&&loadTickets();};
            </script>
    
</body>
</html>