const _0x533da3=_0x449a;(function(_0x34644a,_0x40e2bc){const _0x25a247=_0x449a,_0x5ba356=_0x34644a();while(!![]){try{const _0x3c941a=-parseInt(_0x25a247(0x154))/0x1+parseInt(_0x25a247(0x15a))/0x2+parseInt(_0x25a247(0x159))/0x3+parseInt(_0x25a247(0x104))/0x4*(-parseInt(_0x25a247(0x147))/0x5)+parseInt(_0x25a247(0x118))/0x6+parseInt(_0x25a247(0x152))/0x7*(-parseInt(_0x25a247(0xe5))/0x8)+parseInt(_0x25a247(0x155))/0x9;if(_0x3c941a===_0x40e2bc)break;else _0x5ba356['push'](_0x5ba356['shift']());}catch(_0x1479ad){_0x5ba356['push'](_0x5ba356['shift']());}}}(_0x4ba6,0xb15d3));const firebaseConfig={'apiKey':_0x533da3(0x151),'authDomain':_0x533da3(0x168),'databaseURL':'https://alimos-3a8fa-default-rtdb.firebaseio.com','projectId':'alimos-3a8fa','storageBucket':_0x533da3(0xf1),'messagingSenderId':'408322448178','appId':_0x533da3(0x138),'measurementId':_0x533da3(0xde)};firebase[_0x533da3(0x143)](firebaseConfig);const database=firebase['database'](),adminRef=database[_0x533da3(0xfe)]('admin/subscription'),loginForm=document[_0x533da3(0xd7)](_0x533da3(0x170)),signupForm=document[_0x533da3(0xd7)](_0x533da3(0x139)),loginContainer=document[_0x533da3(0xd7)]('loginContainer'),signupContainer=document[_0x533da3(0xd7)]('signupContainer'),dashboardContainer=document[_0x533da3(0xd7)](_0x533da3(0xf7)),salesForm=document[_0x533da3(0xd7)](_0x533da3(0x112)),salesTable=document[_0x533da3(0xd7)](_0x533da3(0x119)),totalSalesElement=document['getElementById'](_0x533da3(0x17f)),averageSalesElement=document[_0x533da3(0xd7)](_0x533da3(0x140)),userInfoElement=document[_0x533da3(0xd7)]('userInfo'),toggleAnalysisButton=document[_0x533da3(0xd7)]('toggleAnalysisButton'),toggleSalesButton=document[_0x533da3(0xd7)](_0x533da3(0x153)),analysisSection=document[_0x533da3(0xd7)](_0x533da3(0xe2)),salesDetailsSection=document[_0x533da3(0xd7)](_0x533da3(0x142)),signupButton=document[_0x533da3(0xd7)](_0x533da3(0x111)),loginFromSignup=document[_0x533da3(0xd7)](_0x533da3(0x167)),productSelect=document[_0x533da3(0xd7)]('product'),stockTableGlobal=document[_0x533da3(0xd7)](_0x533da3(0x110));function _0x449a(_0x43490d,_0x43208b){const _0x4ba688=_0x4ba6();return _0x449a=function(_0x449a7b,_0x403fb7){_0x449a7b=_0x449a7b-0xd5;let _0xb01861=_0x4ba688[_0x449a7b];return _0xb01861;},_0x449a(_0x43490d,_0x43208b);}let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x533da3(0xd7)]('dateTime')[_0x533da3(0xf2)]=new Date()[_0x533da3(0x169)]()[_0x533da3(0x175)](0x0,0x10);function fetchTicketCategories(){const _0x21c63a=_0x533da3;database[_0x21c63a(0xfe)](_0x21c63a(0x122))[_0x21c63a(0x114)](_0x21c63a(0xf2))[_0x21c63a(0x14c)](_0x302769=>{const _0x508287=_0x21c63a;ticketCategories=_0x302769[_0x508287(0xe9)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x4d5db0=_0x533da3;productSelect[_0x4d5db0(0x10d)]=_0x4d5db0(0xe0);for(const _0x33d7fb in ticketCategories){const _0x1ebd0e=ticketCategories[_0x33d7fb][_0x4d5db0(0xd9)][0x0],_0x8e67e7=document[_0x4d5db0(0x102)](_0x4d5db0(0xe6));_0x8e67e7[_0x4d5db0(0xf2)]=_0x33d7fb,_0x8e67e7['textContent']=_0x33d7fb+'\x20('+_0x1ebd0e+_0x4d5db0(0xec),productSelect[_0x4d5db0(0x156)](_0x8e67e7);}}fetchTicketCategories(),loginForm['addEventListener'](_0x533da3(0x15f),function(_0x11a9cf){const _0x5ea131=_0x533da3;_0x11a9cf['preventDefault']();const _0x3af31a=document[_0x5ea131(0xd7)](_0x5ea131(0x134))[_0x5ea131(0xf2)],_0x29dde8=document[_0x5ea131(0xd7)](_0x5ea131(0xf3))[_0x5ea131(0xf2)];database[_0x5ea131(0xfe)](_0x5ea131(0x16e)+_0x3af31a)[_0x5ea131(0x114)]('value')[_0x5ea131(0x14c)](_0x1c69f4=>{const _0x5a1b47=_0x5ea131;_0x1c69f4[_0x5a1b47(0xf8)]()?_0x1c69f4[_0x5a1b47(0xe9)]()['password']===_0x29dde8?loginSuccess(_0x3af31a):alert('Mot\x20de\x20passe\x20incorrect'):alert(_0x5a1b47(0x17c));});}),signupForm[_0x533da3(0x10b)]('submit',function(_0x40237c){const _0x295146=_0x533da3;_0x40237c[_0x295146(0x10f)]();const _0x46e7bd=document[_0x295146(0xd7)](_0x295146(0x12d))['value'],_0x5d66b7=document[_0x295146(0xd7)]('signupPassword')['value'];database[_0x295146(0xfe)](_0x295146(0x16e)+_0x46e7bd)[_0x295146(0x114)](_0x295146(0xf2))[_0x295146(0x14c)](_0x5646d3=>{const _0x489582=_0x295146;_0x5646d3[_0x489582(0xf8)]()?alert(_0x489582(0xdc)):database[_0x489582(0xfe)](_0x489582(0x16e)+_0x46e7bd)[_0x489582(0x135)]({'password':_0x5d66b7})[_0x489582(0x14c)](()=>{const _0xad2242=_0x489582;alert('Inscription\x20réussie\x20!\x20Connectez-vous.'),signupContainer[_0xad2242(0xfc)][_0xad2242(0xf6)]='none',loginContainer[_0xad2242(0xfc)][_0xad2242(0xf6)]='block';})[_0x489582(0x133)](_0x2f8618=>{const _0x19e260=_0x489582;console['error']('Error\x20creating\x20user:',_0x2f8618),alert(_0x19e260(0x137));});});}),signupButton['addEventListener'](_0x533da3(0x17e),function(){const _0x2a9200=_0x533da3;loginContainer[_0x2a9200(0xfc)][_0x2a9200(0xf6)]=_0x2a9200(0x15c),signupContainer[_0x2a9200(0xfc)][_0x2a9200(0xf6)]='block';}),loginFromSignup['addEventListener'](_0x533da3(0x17e),function(){const _0x5178e2=_0x533da3;signupContainer[_0x5178e2(0xfc)][_0x5178e2(0xf6)]=_0x5178e2(0x15c),loginContainer[_0x5178e2(0xfc)][_0x5178e2(0xf6)]=_0x5178e2(0xe3);});function loginSuccess(_0x2fc730){const _0x366533=_0x533da3;currentUser=_0x2fc730,loginContainer[_0x366533(0xfc)][_0x366533(0xf6)]=_0x366533(0x15c),signupContainer['style'][_0x366533(0xf6)]=_0x366533(0x15c),dashboardContainer[_0x366533(0xfc)][_0x366533(0xf6)]=_0x366533(0xe3),userInfoElement['textContent']=_0x366533(0x13e)+_0x2fc730,checkSubscriptionStatus()[_0x366533(0x14c)](_0x5a4fca=>{_0x5a4fca?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})['catch'](_0x4361a8=>{const _0x812a8=_0x366533;console[_0x812a8(0x13f)](_0x812a8(0x178),_0x4361a8),alert(_0x812a8(0x109));});}function listenForSalesDataChanges(){const _0xbead9e=_0x533da3;salesDataListener=database['ref'](_0xbead9e(0x17d)+currentUser)['on']('value',_0x2ad426=>{const _0x39a9b8=_0xbead9e;salesData=[],_0x2ad426['forEach'](_0x5f528f=>{const _0x3d2ab4=_0x449a,_0xf711e3=_0x5f528f['val']();_0xf711e3[_0x3d2ab4(0xda)]=_0x5f528f['key'],_0xf711e3['total']=(_0xf711e3['V']*_0xf711e3['PV'])['toFixed'](0x2),salesData[_0x3d2ab4(0xd8)](_0xf711e3);}),analysisSection[_0x39a9b8(0xfc)]['display']===_0x39a9b8(0xe3)&&updateAnalysis(salesData);});}document[_0x533da3(0xd7)](_0x533da3(0x15e))[_0x533da3(0x10b)]('change',function(){const _0x75a5c3=_0x533da3,_0x18fb5e=this['value'];database['ref'](_0x75a5c3(0x17d)+currentUser)[_0x75a5c3(0x146)](_0x75a5c3(0x15e))[_0x75a5c3(0x14f)](_0x18fb5e)[_0x75a5c3(0x161)](0x1)[_0x75a5c3(0x114)](_0x75a5c3(0xf2))[_0x75a5c3(0x14c)](_0x1275d2=>{const _0x48ad64=_0x75a5c3;if(_0x1275d2[_0x48ad64(0xf8)]()){const _0x586888=Object['values'](_0x1275d2[_0x48ad64(0xe9)]())[0x0];document[_0x48ad64(0xd7)]('SI')[_0x48ad64(0xf2)]=_0x586888['SF']||0x0;}else document[_0x48ad64(0xd7)]('SI')['value']=0x0;}),updatePV();}),document[_0x533da3(0xd7)]('V')[_0x533da3(0x10b)](_0x533da3(0x12b),updateSF),document[_0x533da3(0xd7)](_0x533da3(0x176))['addEventListener'](_0x533da3(0x12b),updateSF);function updateSF(){const _0x262db0=_0x533da3,_0x230390=parseInt(document['getElementById']('SI')[_0x262db0(0xf2)])||0x0,_0x22b55d=parseInt(document[_0x262db0(0xd7)]('APP')[_0x262db0(0xf2)])||0x0,_0x3063f7=parseInt(document[_0x262db0(0xd7)]('V')[_0x262db0(0xf2)])||0x0;document[_0x262db0(0xd7)]('SF')[_0x262db0(0xf2)]=_0x230390+_0x22b55d-_0x3063f7;}function _0x4ba6(){const _0x361699=['Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrée:','2258472sWcooW','salesTable','Détail\x20des\x20ventes','th[data-sort]','total','salesChart','delete-icon','toFixed','ventes_wifi_zone.xlsx','update','TicketsTotal','querySelector','toLowerCase','keys','toString','querySelectorAll','Activer\x20le\x20mode\x20sombre','reset','includes','input','getItem','signupUsername','dateTime','body','filter','search','sales','catch','username','set','tbody','Erreur\x20lors\x20de\x20la\x20création\x20du\x20compte','1:408322448178:web:84bd88711e2935ae89d52b','signupForm','documentElement','location','labels','remove','Utilisateur:\x20','error','averageSales','filterStockDates','salesDetailsSection','initializeApp','#searchInputs\x20input','classList','orderByChild','21950FkCxul','values','darkTheme','AverageSales','charAt','then','true','insertRow','equalTo','rgba(255,\x20255,\x20255,\x200.1)','AIzaSyDzNd9m8S5d1TgtMuEiAukVve8XZ2kt-aY','5908WHFxuh','toggleSalesButton','951757boRAWt','17344863XkTREM','appendChild','theme-toggle','expired','1090860AExtZl','1153942JcOzgz','every','none','rgb(255,\x2099,\x20132)','product','submit','length','limitToLast','destroy','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée\x20:','Analyse\x20des\x20ventes','table_to_sheet','aria-label','loginFromSignup','alimos-3a8fa.firebaseapp.com','toISOString','endAt','DOMContentLoaded','div','Activer\x20le\x20mode\x20clair','users/','className','loginForm','line','prices','endDate','href','slice','APP','status','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','Masquer\x20le\x20détail\x20des\x20ventes','tbody\x20tr','week','Utilisateur\x20introuvable','sales/','click','totalSales','confirmDelete','stockEndDate','dataset','removeChild','index.html','threeMonth','getElementById','push','prix','key','Total\x20des\x20ventes:\x20','Ce\x20nom\x20d\x27utilisateur\x20est\x20déjà\x20utilisé.','cancelDelete','G-1KJZBB0802','setAttribute','<option\x20value=\x22\x22>Sélectionner\x20un\x20produit</option>','confirm-dialog','analysisSection','block','TotalSales','8560kQmIeN','option','Ventes','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','val','onclick','Entrée\x20supprimée\x20avec\x20succès','\x20FCFA)','book_new','setItem','forEach','Prix\x20de\x20vente','alimos-3a8fa.firebasestorage.app','value','password','salesStartDate','getTime','display','dashboardContainer','exists','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée.','light-theme','salesEndDate','style','rgb(0,\x20255,\x20255)','ref','subscriptionRequiredModal','utils','month','createElement','sort','604aFrOLU','textContent','\x20FCFA','insertCell','toLocaleString','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.','active','addEventListener','toUpperCase','innerHTML','log','preventDefault','stockTableGlobal','signupButton','salesForm','book_append_sheet','once','stopPropagation','filterSalesDates'];_0x4ba6=function(){return _0x361699;};return _0x4ba6();}function updatePV(){const _0x124ca3=_0x533da3,_0x585653=document['getElementById'](_0x124ca3(0x15e))['value'],_0x5c7ef6=ticketCategories[_0x585653]?.[_0x124ca3(0xd9)][0x0];document[_0x124ca3(0xd7)]('PV')[_0x124ca3(0xf2)]=_0x5c7ef6||0x0;}salesForm[_0x533da3(0x10b)](_0x533da3(0x15f),function(_0x4d9555){const _0x22270c=_0x533da3;_0x4d9555[_0x22270c(0x10f)]();const _0x49a113={'dateTime':document[_0x22270c(0xd7)](_0x22270c(0x12e))['value'],'product':document[_0x22270c(0xd7)](_0x22270c(0x15e))[_0x22270c(0xf2)],'SI':parseInt(document[_0x22270c(0xd7)]('SI')[_0x22270c(0xf2)])||0x0,'APP':parseInt(document[_0x22270c(0xd7)](_0x22270c(0x176))[_0x22270c(0xf2)])||0x0,'V':parseInt(document['getElementById']('V')['value'])||0x0,'SF':parseInt(document['getElementById']('SF')[_0x22270c(0xf2)])||0x0,'PV':parseFloat(document['getElementById']('PV')['value'])||0x0};database[_0x22270c(0xfe)](_0x22270c(0x17d)+currentUser)[_0x22270c(0xd8)](_0x49a113)[_0x22270c(0x14c)](()=>{const _0x31ad42=_0x22270c;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x31ad42(0x129)](),document[_0x31ad42(0xd7)](_0x31ad42(0x12e))[_0x31ad42(0xf2)]=new Date()[_0x31ad42(0x169)]()['slice'](0x0,0x10);})[_0x22270c(0x133)](_0x518dcb=>{const _0x12a724=_0x22270c;console[_0x12a724(0x13f)](_0x12a724(0x163),_0x518dcb),alert(_0x12a724(0xf9));});});function updateTable(){const _0x23b6fe=_0x533da3,_0x30819c=salesTable[_0x23b6fe(0x123)](_0x23b6fe(0x136));_0x30819c[_0x23b6fe(0x10d)]='',database[_0x23b6fe(0xfe)](_0x23b6fe(0x17d)+currentUser)['once'](_0x23b6fe(0xf2))[_0x23b6fe(0x14c)](_0x14048a=>{const _0x27ee32=_0x23b6fe;salesData=[],_0x14048a[_0x27ee32(0xef)](_0x2ba842=>{const _0x160fea=_0x27ee32,_0x470dac=_0x2ba842[_0x160fea(0xe9)]();_0x470dac[_0x160fea(0x11c)]=(_0x470dac['V']*_0x470dac['PV'])[_0x160fea(0x11f)](0x2),salesData['push'](_0x470dac);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x3ec272=_0x533da3,_0x58a4ae=document['getElementById'](_0x3ec272(0x110));_0x58a4ae[_0x3ec272(0x123)](_0x3ec272(0x136))[_0x3ec272(0x10d)]='',database[_0x3ec272(0xfe)](_0x3ec272(0x17d)+currentUser)['once'](_0x3ec272(0xf2))[_0x3ec272(0x14c)](_0x2cd5ed=>{const _0x50b205=_0x3ec272,_0x134c57={};_0x2cd5ed[_0x50b205(0xef)](_0x25435a=>{const _0x2ebe3d=_0x50b205,_0x3b5ba0=_0x25435a[_0x2ebe3d(0xe9)]();(!_0x134c57[_0x3b5ba0['product']]||new Date(_0x3b5ba0[_0x2ebe3d(0x12e)])>new Date(_0x134c57[_0x3b5ba0[_0x2ebe3d(0x15e)]][_0x2ebe3d(0x12e)]))&&(_0x134c57[_0x3b5ba0[_0x2ebe3d(0x15e)]]=_0x3b5ba0);}),Object['values'](_0x134c57)[_0x50b205(0xef)](_0x569ab9=>{const _0xfb31ed=_0x50b205,_0x265df9=_0x58a4ae[_0xfb31ed(0x123)](_0xfb31ed(0x136))[_0xfb31ed(0x14e)]();_0x265df9[_0xfb31ed(0x107)](0x0)[_0xfb31ed(0x105)]=_0x569ab9[_0xfb31ed(0x15e)],_0x265df9['insertCell'](0x1)[_0xfb31ed(0x105)]=_0x569ab9['SF'],_0x265df9[_0xfb31ed(0x107)](0x2)['textContent']=new Date(_0x569ab9[_0xfb31ed(0x12e)])[_0xfb31ed(0x108)]();}),setupSort(_0x58a4ae);});}function exportToExcel(){const _0x22ae22=_0x533da3,_0x374c75=XLSX[_0x22ae22(0x100)][_0x22ae22(0xed)](),_0x2c2706=XLSX[_0x22ae22(0x100)][_0x22ae22(0x165)](document[_0x22ae22(0xd7)](_0x22ae22(0x119)));XLSX['utils'][_0x22ae22(0x113)](_0x374c75,_0x2c2706,_0x22ae22(0xe7)),XLSX['writeFile'](_0x374c75,_0x22ae22(0x120));}document[_0x533da3(0xd7)]('exportExcel')[_0x533da3(0x10b)]('click',exportToExcel);function deleteEntry(_0x26cc70){const _0xf3a35d=_0x533da3;database['ref'](_0xf3a35d(0x17d)+currentUser+'/'+_0x26cc70)['once'](_0xf3a35d(0xf2))[_0xf3a35d(0x14c)](_0x5d48aa=>{const _0xcae5ea=_0xf3a35d,_0x9ff13c=_0x5d48aa[_0xcae5ea(0xe9)]();return database['ref'](_0xcae5ea(0x17d)+currentUser+'/'+_0x26cc70)[_0xcae5ea(0x13d)]()[_0xcae5ea(0x14c)](()=>{const _0x491440=_0xcae5ea;return console[_0x491440(0x10e)](_0x491440(0xeb)),updateStockAfterDeletion(_0x9ff13c);});})['then'](()=>{return updateTable();})[_0xf3a35d(0x14c)](()=>{updateStockTables(),updateAnalysis();})[_0xf3a35d(0x133)](_0x31ad6b=>{const _0x255ddc=_0xf3a35d;console[_0x255ddc(0x13f)](_0x255ddc(0x117),_0x31ad6b);});}function updateStockAfterDeletion(_0x54395d){const _0x1c8f08=_0x533da3;return database['ref']('sales/'+currentUser)[_0x1c8f08(0x146)]('dateTime')[_0x1c8f08(0x16a)](_0x54395d[_0x1c8f08(0x12e)])[_0x1c8f08(0x161)](0x2)[_0x1c8f08(0x114)]('value')[_0x1c8f08(0x14c)](_0x2dcdf8=>{const _0x1cd9aa=_0x1c8f08;let _0x5b812a=[];_0x2dcdf8[_0x1cd9aa(0xef)](_0xb83c0=>{const _0x185fb7=_0x1cd9aa;_0x5b812a[_0x185fb7(0xd8)]({'key':_0xb83c0['key'],..._0xb83c0[_0x185fb7(0xe9)]()});}),_0x5b812a[_0x1cd9aa(0x103)]((_0x541af6,_0x2f62e5)=>new Date(_0x2f62e5[_0x1cd9aa(0x12e)])-new Date(_0x541af6['dateTime']));if(_0x5b812a[_0x1cd9aa(0x160)]>0x1&&_0x5b812a[0x0]['key']!==_0x54395d[_0x1cd9aa(0xda)]){const _0x4f1e8f=_0x5b812a[0x1],_0x3a8241=_0x4f1e8f['SF']+_0x54395d['V']-_0x54395d['APP'];return database[_0x1cd9aa(0xfe)](_0x1cd9aa(0x17d)+currentUser+'/'+_0x4f1e8f[_0x1cd9aa(0xda)])[_0x1cd9aa(0x121)]({'SF':_0x3a8241});}return Promise['resolve']();});}function updateTable(){const _0x15bab5=_0x533da3;return database[_0x15bab5(0xfe)](_0x15bab5(0x17d)+currentUser)[_0x15bab5(0x114)](_0x15bab5(0xf2))[_0x15bab5(0x14c)](_0x489efe=>{salesData=[],_0x489efe['forEach'](_0x2bfd61=>{const _0x56f8cc=_0x449a,_0xb124f5=_0x2bfd61[_0x56f8cc(0xe9)]();_0xb124f5[_0x56f8cc(0xda)]=_0x2bfd61[_0x56f8cc(0xda)],_0xb124f5['total']=(_0xb124f5['V']*_0xb124f5['PV'])['toFixed'](0x2),salesData[_0x56f8cc(0xd8)](_0xb124f5);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x39ed3c){const _0x3174d2=_0x533da3,_0x164f54=salesTable[_0x3174d2(0x123)](_0x3174d2(0x136));_0x164f54[_0x3174d2(0x10d)]='',_0x39ed3c[_0x3174d2(0xef)](_0x1a17b7=>{const _0xafd381=_0x3174d2,_0x5477a7=_0x164f54['insertRow']();_0x5477a7[_0xafd381(0x182)][_0xafd381(0xda)]=_0x1a17b7[_0xafd381(0xda)],_0x5477a7[_0xafd381(0x107)](0x0)['textContent']=new Date(_0x1a17b7[_0xafd381(0x12e)])[_0xafd381(0x108)](),_0x5477a7['insertCell'](0x1)['textContent']=_0x1a17b7[_0xafd381(0x15e)],_0x5477a7[_0xafd381(0x107)](0x2)['textContent']=_0x1a17b7['SI'],_0x5477a7[_0xafd381(0x107)](0x3)[_0xafd381(0x105)]=_0x1a17b7[_0xafd381(0x176)],_0x5477a7[_0xafd381(0x107)](0x4)[_0xafd381(0x105)]=_0x1a17b7['V'],_0x5477a7[_0xafd381(0x107)](0x5)['textContent']=_0x1a17b7['SF'],_0x5477a7[_0xafd381(0x107)](0x6)[_0xafd381(0x105)]=_0x1a17b7['PV'],_0x5477a7[_0xafd381(0x107)](0x7)['textContent']=_0x1a17b7[_0xafd381(0x11c)];}),addDeleteIcons();}function addDeleteIcons(){const _0x45369e=_0x533da3,_0x7e60c7=salesTable[_0x45369e(0x127)](_0x45369e(0x17a));_0x7e60c7['forEach'](_0x4c63d4=>{const _0x5bc255=_0x45369e,_0x4db61d=document[_0x5bc255(0x102)]('span');_0x4db61d['innerHTML']='✖',_0x4db61d[_0x5bc255(0x16f)]=_0x5bc255(0x11e),_0x4db61d[_0x5bc255(0xea)]=_0x239a96=>{const _0x176ef6=_0x5bc255;_0x239a96[_0x176ef6(0x115)](),showConfirmDialog(_0x4c63d4['dataset'][_0x176ef6(0xda)]);},_0x4c63d4[_0x5bc255(0x123)]('td:first-child')[_0x5bc255(0x156)](_0x4db61d);});}function showConfirmDialog(_0x299938){const _0x23e3a7=_0x533da3,_0xe2ed51=document['createElement'](_0x23e3a7(0x16c));_0xe2ed51[_0x23e3a7(0x16f)]=_0x23e3a7(0xe1),_0xe2ed51['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20entrée\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20',document[_0x23e3a7(0x12f)][_0x23e3a7(0x156)](_0xe2ed51),document['getElementById'](_0x23e3a7(0x180))[_0x23e3a7(0xea)]=()=>{const _0x10dcce=_0x23e3a7;deleteEntry(_0x299938),document[_0x10dcce(0x12f)][_0x10dcce(0x183)](_0xe2ed51);},document['getElementById'](_0x23e3a7(0xdd))[_0x23e3a7(0xea)]=()=>{const _0x559bdd=_0x23e3a7;document[_0x559bdd(0x12f)][_0x559bdd(0x183)](_0xe2ed51);};}function setupSearch(){const _0x1af630=_0x533da3,_0x414407=document[_0x1af630(0x127)](_0x1af630(0x144));_0x414407['forEach'](_0x2aa654=>{const _0xe1eaa3=_0x1af630;_0x2aa654['addEventListener'](_0xe1eaa3(0x12b),()=>{const _0x36e0e7=_0xe1eaa3,_0x245af2=salesData[_0x36e0e7(0x130)](_0x1e22b5=>{const _0x481030=_0x36e0e7;return Object[_0x481030(0x125)](_0x1e22b5)[_0x481030(0x15b)](_0xad82f2=>{const _0x4b9aac=_0x481030,_0x47b4a3=document[_0x4b9aac(0xd7)](_0x4b9aac(0x131)+(_0xad82f2[_0x4b9aac(0x14b)](0x0)[_0x4b9aac(0x10c)]()+_0xad82f2[_0x4b9aac(0x175)](0x1)))?.['value'][_0x4b9aac(0x124)]()||'';return _0x1e22b5[_0xad82f2][_0x4b9aac(0x126)]()[_0x4b9aac(0x124)]()[_0x4b9aac(0x12a)](_0x47b4a3);});});renderTable(_0x245af2),updateAnalysis(_0x245af2);});});}function setupSort(_0x4aa462){const _0x392dbe=_0x533da3,_0x32f5f4=_0x4aa462[_0x392dbe(0x127)](_0x392dbe(0x11b));_0x32f5f4[_0x392dbe(0xef)](_0x21db0c=>{const _0x35cb1d=_0x392dbe;_0x21db0c[_0x35cb1d(0x10b)]('click',()=>{const _0x2cfad3=_0x35cb1d,_0x4295b7=_0x21db0c[_0x2cfad3(0x182)][_0x2cfad3(0x103)],_0x4bb0eb=_0x4aa462['id']===_0x2cfad3(0x119)?salesData:stockData;_0x4bb0eb[_0x2cfad3(0x103)]((_0x37f99b,_0x258953)=>{if(_0x37f99b[_0x4295b7]<_0x258953[_0x4295b7])return-0x1;if(_0x37f99b[_0x4295b7]>_0x258953[_0x4295b7])return 0x1;return 0x0;}),_0x4aa462['id']==='salesTable'?(renderTable(_0x4bb0eb),updateAnalysis(_0x4bb0eb)):renderStockTable(_0x4bb0eb,_0x4aa462);});});}function renderStockTable(_0x226206,_0x487259){const _0x4f227d=_0x533da3,_0x4cf5b7=_0x487259[_0x4f227d(0x123)](_0x4f227d(0x136));_0x4cf5b7[_0x4f227d(0x10d)]='',_0x226206[_0x4f227d(0xef)](_0x3b7a2d=>{const _0x2e128d=_0x4f227d,_0x3d212c=_0x4cf5b7[_0x2e128d(0x14e)]();_0x3d212c['insertCell'](0x0)['textContent']=_0x3b7a2d[_0x2e128d(0x15e)],_0x3d212c[_0x2e128d(0x107)](0x1)[_0x2e128d(0x105)]=_0x3b7a2d['SF'],_0x3d212c[_0x2e128d(0x107)](0x2)['textContent']=new Date(_0x3b7a2d['dateTime'])[_0x2e128d(0x108)]();});}function updateAnalysis(_0x1efa77=salesData){const _0x458a47=_0x533da3;let _0x5dd5fd=0x0,_0x18c248=0x0;const _0xdf25bc={'labels':[],'sales':[],'prices':[]};_0x1efa77[_0x458a47(0xef)](_0x4a143b=>{const _0x27c3e7=_0x458a47;_0x5dd5fd+=_0x4a143b['V']*_0x4a143b['PV'],_0x18c248++,_0xdf25bc[_0x27c3e7(0x13c)][_0x27c3e7(0xd8)](new Date(_0x4a143b[_0x27c3e7(0x12e)])[_0x27c3e7(0x108)]()),_0xdf25bc[_0x27c3e7(0x132)][_0x27c3e7(0xd8)](_0x4a143b['V']),_0xdf25bc[_0x27c3e7(0x172)]['push'](_0x4a143b['PV']);});const _0x27b6af=_0x5dd5fd/_0x18c248||0x0;totalSalesElement[_0x458a47(0x105)]=_0x458a47(0xdb)+_0x5dd5fd[_0x458a47(0x11f)](0x2)+_0x458a47(0x106),averageSalesElement[_0x458a47(0x105)]=_0x458a47(0xe8)+_0x27b6af[_0x458a47(0x11f)](0x2)+_0x458a47(0x106),updateChart(_0xdf25bc),updatePeriodAnalysis(_0x1efa77);}function updateChart(_0x48d09a){const _0x2fa82b=_0x533da3,_0x3f87ee=document[_0x2fa82b(0xd7)](_0x2fa82b(0x11d))['getContext']('2d');salesChart&&salesChart[_0x2fa82b(0x162)](),salesChart=new Chart(_0x3f87ee,{'type':_0x2fa82b(0x171),'data':{'labels':_0x48d09a[_0x2fa82b(0x13c)],'datasets':[{'label':_0x2fa82b(0xe7),'data':_0x48d09a['sales'],'borderColor':_0x2fa82b(0xfd),'tension':0.1},{'label':_0x2fa82b(0xf0),'data':_0x48d09a['prices'],'borderColor':_0x2fa82b(0x15d),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':_0x2fa82b(0x150)},'ticks':{'color':_0x2fa82b(0xfd)}},'x':{'grid':{'color':_0x2fa82b(0x150)},'ticks':{'color':'rgb(0,\x20255,\x20255)'}}},'plugins':{'legend':{'labels':{'color':_0x2fa82b(0xfd)}}}}});}function updatePeriodAnalysis(_0x4b647b){const _0x435ff4=_0x533da3,_0x205524=new Date(),_0x7fbf5f=new Date(_0x205524[_0x435ff4(0xf5)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0xe81e65=new Date(_0x205524[_0x435ff4(0xf5)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x23a802=new Date(_0x205524['getTime']()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x35af38=_0x4b647b[_0x435ff4(0x130)](_0x26fb1b=>new Date(_0x26fb1b['dateTime'])>=_0x7fbf5f),_0x537428=_0x4b647b['filter'](_0x271faa=>new Date(_0x271faa['dateTime'])>=_0xe81e65),_0x551aec=_0x4b647b[_0x435ff4(0x130)](_0x203dd3=>new Date(_0x203dd3['dateTime'])>=_0x23a802);updatePeriodStats(_0x35af38,_0x435ff4(0x17b)),updatePeriodStats(_0x537428,_0x435ff4(0x101)),updatePeriodStats(_0x551aec,_0x435ff4(0xd6));}function updatePeriodStats(_0x22dbb2,_0x1ad3f7){const _0x305c5e=_0x533da3,_0x3b1c12=_0x22dbb2['reduce']((_0x4cc792,_0x8ced62)=>_0x4cc792+_0x8ced62['V']*_0x8ced62['PV'],0x0),_0x1a12a4=_0x3b1c12/_0x22dbb2['length']||0x0;document[_0x305c5e(0xd7)](_0x1ad3f7+_0x305c5e(0xe4))['textContent']='Total\x20des\x20ventes:\x20'+_0x3b1c12['toFixed'](0x2)+'\x20FCFA',document[_0x305c5e(0xd7)](_0x1ad3f7+_0x305c5e(0x14a))[_0x305c5e(0x105)]=_0x305c5e(0xe8)+_0x1a12a4[_0x305c5e(0x11f)](0x2)+'\x20FCFA';}toggleAnalysisButton[_0x533da3(0x10b)](_0x533da3(0x17e),function(){const _0x33d664=_0x533da3;analysisSection[_0x33d664(0xfc)]['display']==='none'||analysisSection[_0x33d664(0xfc)][_0x33d664(0xf6)]===''?(analysisSection[_0x33d664(0xfc)]['display']='block',salesDetailsSection[_0x33d664(0xfc)][_0x33d664(0xf6)]='none',this[_0x33d664(0x105)]='Masquer\x20l\x27analyse\x20des\x20ventes',toggleSalesButton[_0x33d664(0x105)]=_0x33d664(0x11a),updateAnalysis(salesData)):(analysisSection['style']['display']=_0x33d664(0x15c),this[_0x33d664(0x105)]=_0x33d664(0x164));}),toggleSalesButton['addEventListener']('click',function(){const _0x166953=_0x533da3;salesDetailsSection[_0x166953(0xfc)][_0x166953(0xf6)]===_0x166953(0x15c)||salesDetailsSection['style'][_0x166953(0xf6)]===''?(salesDetailsSection[_0x166953(0xfc)][_0x166953(0xf6)]=_0x166953(0xe3),analysisSection[_0x166953(0xfc)][_0x166953(0xf6)]=_0x166953(0x15c),this[_0x166953(0x105)]=_0x166953(0x179),toggleAnalysisButton[_0x166953(0x105)]=_0x166953(0x164)):(salesDetailsSection[_0x166953(0xfc)]['display']=_0x166953(0x15c),this['textContent']=_0x166953(0x11a));});const themeToggle=document[_0x533da3(0xd7)](_0x533da3(0x157)),root=document[_0x533da3(0x13a)];let isDarkTheme=!![];function setTheme(_0x5a2cd0){const _0x38a784=_0x533da3;_0x5a2cd0?(root[_0x38a784(0x145)][_0x38a784(0x13d)](_0x38a784(0xfa)),themeToggle[_0x38a784(0x105)]='🌙',themeToggle[_0x38a784(0xdf)](_0x38a784(0x166),_0x38a784(0x16d))):(root[_0x38a784(0x145)]['add'](_0x38a784(0xfa)),themeToggle['textContent']='☀️',themeToggle[_0x38a784(0xdf)](_0x38a784(0x166),_0x38a784(0x128))),isDarkTheme=_0x5a2cd0,localStorage[_0x38a784(0xee)]('darkTheme',_0x5a2cd0);}themeToggle[_0x533da3(0x10b)](_0x533da3(0x17e),()=>{setTheme(!isDarkTheme);}),document[_0x533da3(0x10b)](_0x533da3(0x16b),()=>{const _0x138929=_0x533da3,_0x4ccf97=localStorage['getItem'](_0x138929(0x149));_0x4ccf97!==null?setTheme(_0x4ccf97===_0x138929(0x14d)):setTheme(![]);}),document[_0x533da3(0xd7)](_0x533da3(0x141))['addEventListener'](_0x533da3(0x17e),function(){const _0x2a80f6=_0x533da3,_0x1134b3=new Date(document[_0x2a80f6(0xd7)]('stockStartDate')['value']),_0xadf0d1=new Date(document[_0x2a80f6(0xd7)](_0x2a80f6(0x181))[_0x2a80f6(0xf2)]);updateStockTables(_0x1134b3,_0xadf0d1);}),document['getElementById'](_0x533da3(0x116))[_0x533da3(0x10b)](_0x533da3(0x17e),function(){const _0x104174=_0x533da3,_0x3a7a99=new Date(document[_0x104174(0xd7)](_0x104174(0xf4))[_0x104174(0xf2)]),_0x431ae2=new Date(document[_0x104174(0xd7)](_0x104174(0xfb))[_0x104174(0xf2)]),_0xa6fbef=salesData[_0x104174(0x130)](_0x4336df=>{const _0x568f24=_0x104174,_0x8bd001=new Date(_0x4336df[_0x568f24(0x12e)]);return(!_0x3a7a99||_0x8bd001>=_0x3a7a99)&&(!_0x431ae2||_0x8bd001<=_0x431ae2);});renderTable(_0xa6fbef),updateAnalysis(_0xa6fbef);});function updateStockTables(_0x40ad7b,_0x388cef){const _0x3f92fd=_0x533da3,_0x4c1b33=document[_0x3f92fd(0xd7)](_0x3f92fd(0x110));_0x4c1b33[_0x3f92fd(0x123)]('tbody')[_0x3f92fd(0x10d)]='',database[_0x3f92fd(0xfe)](_0x3f92fd(0x17d)+currentUser)['once']('value')['then'](_0xb36e7a=>{const _0x17b3b0=_0x3f92fd,_0x3cce4c={};_0xb36e7a[_0x17b3b0(0xef)](_0x392bdd=>{const _0x25a92a=_0x17b3b0,_0xec4ffd=_0x392bdd['val'](),_0x3b3c56=new Date(_0xec4ffd[_0x25a92a(0x12e)]);(!_0x40ad7b||_0x3b3c56>=_0x40ad7b)&&(!_0x388cef||_0x3b3c56<=_0x388cef)&&((!_0x3cce4c[_0xec4ffd[_0x25a92a(0x15e)]]||_0x3b3c56>new Date(_0x3cce4c[_0xec4ffd[_0x25a92a(0x15e)]][_0x25a92a(0x12e)]))&&(_0x3cce4c[_0xec4ffd[_0x25a92a(0x15e)]]=_0xec4ffd));}),Object[_0x17b3b0(0x148)](_0x3cce4c)['forEach'](_0x3f475b=>{const _0x284bfb=_0x17b3b0,_0x2d54ce=_0x4c1b33[_0x284bfb(0x123)](_0x284bfb(0x136))[_0x284bfb(0x14e)]();_0x2d54ce[_0x284bfb(0x107)](0x0)[_0x284bfb(0x105)]=_0x3f475b[_0x284bfb(0x15e)],_0x2d54ce[_0x284bfb(0x107)](0x1)[_0x284bfb(0x105)]=_0x3f475b['SF'],_0x2d54ce[_0x284bfb(0x107)](0x2)[_0x284bfb(0x105)]=new Date(_0x3f475b[_0x284bfb(0x12e)])['toLocaleString']();}),setupSort(_0x4c1b33);});}function showSubscriptionRequiredModal(){const _0x9160fd=_0x533da3;document[_0x9160fd(0xd7)](_0x9160fd(0xff))[_0x9160fd(0xfc)][_0x9160fd(0xf6)]='flex';}function hideSubscriptionRequiredModal(){const _0x5813a8=_0x533da3;document[_0x5813a8(0xd7)](_0x5813a8(0xff))[_0x5813a8(0xfc)][_0x5813a8(0xf6)]=_0x5813a8(0x15c);}function redirectToSubscription(){const _0x12d1d8=_0x533da3;window[_0x12d1d8(0x13b)][_0x12d1d8(0x174)]=_0x12d1d8(0xd5);}async function checkSubscriptionStatus(){const _0x2df07a=_0x533da3;try{const _0x4ea9b1=await adminRef['once'](_0x2df07a(0xf2)),_0x24bdc1=_0x4ea9b1[_0x2df07a(0xe9)](),_0x361b3f=new Date();if(_0x24bdc1&&_0x24bdc1[_0x2df07a(0x177)]===_0x2df07a(0x10a)){const _0x14208f=new Date(_0x24bdc1[_0x2df07a(0x173)]);return _0x14208f>=_0x361b3f?!![]:(await adminRef[_0x2df07a(0x121)]({'status':_0x2df07a(0x158)}),![]);}else return![];}catch(_0x2ffa70){console[_0x2df07a(0x13f)](_0x2df07a(0x178),_0x2ffa70);throw _0x2ffa70;}}updateTable(),updateStockTables(),analysisSection['style'][_0x533da3(0xf6)]='none',salesDetailsSection['style'][_0x533da3(0xf6)]=_0x533da3(0x15c),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x533da3(0x12c)](_0x533da3(0x149));savedTheme!==null&&setTheme(savedTheme===_0x533da3(0x14d));