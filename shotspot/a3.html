<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* ... (vos variables CSS) ... */
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #00637c;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: rgb(0, 48, 16);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: rgb(244, 255, 143);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
        .logout-button {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        background-color: #e74c3c;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button:hover {
        background-color: #c0392b;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .logout-button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button i {
        font-size: 16px;
    }

    @media (max-width: 768px) {
        .logout-button {
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 12px;
        }
    }
      .database-selector {
        margin-bottom: 20px;
    }

    .database-selector select {
        padding: 10px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        color: var(--text-color);
        cursor: pointer;
    }

    .database-selector select:focus {
        outline: none;
        border-color: var(--primary-color);
    }
    </style>
</head>
<body>
<button onclick="logout()" class="logout-button">
    <i class="fas fa-sign-out-alt"></i> Déconnexion
</button>
    <div class="container">
        <h1>Gestion des tickets</h1>

        <div class="database-selector">
            <label for="databaseSelect">Choisir la base de données : </label>
            <select id="databaseSelect" onchange="changeDatabase()">
                <option value="TicketsTotal">TicketsTotal</option>
                <option value="TicketsTransit">TicketsTransit</option>
            </select>
        </div>

        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".txt,.json" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editId" placeholder="ID" disabled>
            <input type="text" id="editCategory" placeholder="Catégorie">
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newCategory" placeholder="Catégorie">
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour la modification groupée -->
    <div id="bulkEditModal" class="modal">
        <div class="modal-content">
            <h2>Modifier les tickets sélectionnés</h2>
            <input type="text" id="bulkEditCategory" placeholder="Catégorie (laisser vide si inchangé)">
            <input type="text" id="bulkEditPassword" placeholder="Mot de passe (laisser vide si inchangé)">
            <input type="text" id="bulkEditPrice" placeholder="Prix (laisser vide si inchangé)">
            <input type="text" id="bulkEditUser" placeholder="Utilisateur (laisser vide si inchangé)">
            <div class="modal-buttons">
                <button onclick="saveBulkEdit()">Enregistrer</button>
                <button onclick="closeBulkEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
const _0xf83c63=_0x293b;(function(_0x11563d,_0x15b28e){const _0x337a9b=_0x293b,_0x5382a0=_0x11563d();while(!![]){try{const _0x307100=parseInt(_0x337a9b(0xd7))/0x1*(-parseInt(_0x337a9b(0x90))/0x2)+parseInt(_0x337a9b(0xfa))/0x3+-parseInt(_0x337a9b(0x6f))/0x4+parseInt(_0x337a9b(0x111))/0x5+parseInt(_0x337a9b(0xfd))/0x6+-parseInt(_0x337a9b(0xc6))/0x7*(parseInt(_0x337a9b(0xbb))/0x8)+-parseInt(_0x337a9b(0xed))/0x9*(-parseInt(_0x337a9b(0x7a))/0xa);if(_0x307100===_0x15b28e)break;else _0x5382a0['push'](_0x5382a0['shift']());}catch(_0x22239e){_0x5382a0['push'](_0x5382a0['shift']());}}}(_0x3b38,0xcd8e9));const firebaseConfig={'apiKey':_0xf83c63(0x7b),'authDomain':'signature-hotspot.firebaseapp.com','databaseURL':'https://signature-hotspot-default-rtdb.firebaseio.com','projectId':_0xf83c63(0x97),'storageBucket':_0xf83c63(0xb0),'messagingSenderId':_0xf83c63(0x104),'appId':'1:413468878792:web:540854701309fda2afc2fd','measurementId':_0xf83c63(0x98)};firebase['initializeApp'](firebaseConfig);const database=firebase[_0xf83c63(0xcb)]();let allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,currentDatabase=_0xf83c63(0xc3),editingCategory='',editingIndex=-0x1,editingId='';(function(){const _0x1aef98=_0xf83c63,_0x2f0ea4=sessionStorage[_0x1aef98(0x9c)]('isLoggedIn');!_0x2f0ea4&&window[_0x1aef98(0x9b)][_0x1aef98(0xc2)](_0x1aef98(0xe2));}()),document[_0xf83c63(0xd4)]('DOMContentLoaded',function(){const _0x25d3b7=_0xf83c63;!sessionStorage[_0x25d3b7(0x9c)]('isLoggedIn')&&window['location'][_0x25d3b7(0xc2)](_0x25d3b7(0xe2));}),window[_0xf83c63(0xd4)](_0xf83c63(0x10a),function(_0x831423){const _0x461419=_0xf83c63;(_0x831423[_0x461419(0x116)]||!sessionStorage[_0x461419(0x9c)](_0x461419(0x115)))&&window[_0x461419(0x9b)][_0x461419(0xc2)](_0x461419(0xe2));});function showLoading(){const _0x299ed5=_0xf83c63;document[_0x299ed5(0xc0)](_0x299ed5(0x67))[_0x299ed5(0xe8)]['display']='flex';}function hideLoading(){const _0x259304=_0xf83c63;document['getElementById'](_0x259304(0x67))[_0x259304(0xe8)]['display']=_0x259304(0x9d);}function loadTickets(){const _0x224576=_0xf83c63;showLoading();const _0x3c2424=database[_0x224576(0xdb)](currentDatabase);_0x3c2424[_0x224576(0xe1)](_0x224576(0xd5)),_0x3c2424['on'](_0x224576(0xd5),_0x2d2cc7=>{const _0xe1dccd=_0x224576;allTickets=_0x2d2cc7[_0xe1dccd(0xda)]()||{},displayTickets(allTickets),hideLoading();},_0x18e2be=>{const _0x437e08=_0x224576;console['error'](_0x437e08(0x95),_0x18e2be),hideLoading(),alert(_0x437e08(0x76));});}function _0x293b(_0x1827bc,_0x5bf00b){const _0x3b387e=_0x3b38();return _0x293b=function(_0x293b6f,_0x1abbf9){_0x293b6f=_0x293b6f-0x64;let _0x56f4a6=_0x3b387e[_0x293b6f];return _0x56f4a6;},_0x293b(_0x1827bc,_0x5bf00b);}function displayTickets(_0x3f7d1d,_0x4080eb=''){const _0x4eebc8=_0xf83c63,_0x5534d5=document[_0x4eebc8(0xc0)]('ticketCategories');_0x5534d5[_0x4eebc8(0x9e)]='';if(currentDatabase===_0x4eebc8(0xc3))displayTicketsTotal(_0x3f7d1d,_0x4080eb);else currentDatabase===_0x4eebc8(0xe0)&&displayTicketsTransit(_0x3f7d1d,_0x4080eb);}function displayTicketsTotal(_0x5beca9,_0x116fda=''){const _0xf3375c=_0xf83c63,_0x12102f=document['getElementById'](_0xf3375c(0xc7));for(let _0x3a38f1 in _0x5beca9){const _0xd0bd82=_0x5beca9[_0x3a38f1],_0x5b0c41=_0xf3375c(0x72)+_0x3a38f1+_0xf3375c(0xb1)+_0x3a38f1+_0xf3375c(0xa2)+_0x3a38f1+_0xf3375c(0x92)+_0x3a38f1+'\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20'+_0x3a38f1+_0xf3375c(0x118)+_0x3a38f1+_0xf3375c(0x75)+_0x3a38f1+_0xf3375c(0xf2)+_0x3a38f1+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22editSelectedTickets(\x27'+_0x3a38f1+_0xf3375c(0xc5)+_0x3a38f1+_0xf3375c(0xa1)+generateTicketRowsTotal(_0x3a38f1,_0xd0bd82,_0x116fda)+_0xf3375c(0xbd)+_0x3a38f1+_0xf3375c(0x7c)+_0x3a38f1+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x12102f[_0xf3375c(0x9e)]+=_0x5b0c41;}}function generateTicketRowsTotal(_0x2b90dd,_0x42ac30,_0x29256e){const _0x17b8a0=_0xf83c63;let _0x3ff49c='';for(let _0x4954e2=0x0;_0x4954e2<_0x42ac30[_0x17b8a0(0xee)]['length'];_0x4954e2++){if(_0x29256e&&!matchesSearchTotal(_0x42ac30,_0x4954e2,_0x29256e))continue;_0x3ff49c+=_0x17b8a0(0xc9)+_0x2b90dd+_0x17b8a0(0xaa)+_0x4954e2+_0x17b8a0(0xea)+highlightMatch(_0x42ac30['motDePasse'][_0x4954e2],_0x29256e)+_0x17b8a0(0x74)+highlightMatch(_0x42ac30[_0x17b8a0(0xcf)][_0x4954e2],_0x29256e)+_0x17b8a0(0x74)+highlightMatch(_0x42ac30[_0x17b8a0(0x11e)][_0x4954e2],_0x29256e)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTotal(\x27'+_0x2b90dd+_0x17b8a0(0xec)+_0x4954e2+_0x17b8a0(0xf8)+_0x2b90dd+_0x17b8a0(0xec)+_0x4954e2+_0x17b8a0(0x82);}return _0x3ff49c;}function displayTicketsTransit(_0x3d2504,_0x13ebf8=''){const _0xde62f0=_0xf83c63,_0x4bdd09=document[_0xde62f0(0xc0)](_0xde62f0(0xc7));_0x4bdd09[_0xde62f0(0x9e)]='';const _0xf46122='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Tickets\x20en\x20transit</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_Transit\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20TicketsTransit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a<input\x20type=\x22file\x22\x20id=\x22importFile_Transit\x22\x20\x0a\x20\x20\x20\x20accept=\x22.txt,.json\x22\x20\x0a\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20onchange=\x22importTickets(event)\x22>\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(null)\x22>Supprimer\x20tous\x20les\x20tickets</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22editSelectedTickets(null)\x22>Modifier\x20les\x20tickets\x20selectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_Transit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+generateTicketRowsTransit(_0x3d2504,_0x13ebf8)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(null)\x22>Supprimer\x20les\x20tickets\x20sélectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';_0x4bdd09['innerHTML']=_0xf46122;}function generateTicketRowsTransit(_0x1a1e78,_0x3e25f6){const _0x1f8abd=_0xf83c63;let _0x2ff627='';for(let _0xecc3b0 in _0x1a1e78){const _0xc6a34b=_0x1a1e78[_0xecc3b0];if(_0x3e25f6&&!matchesSearchTransit(_0xc6a34b,_0x3e25f6))continue;_0x2ff627+=_0x1f8abd(0xfc)+_0xecc3b0+_0x1f8abd(0xea)+highlightMatch(_0xecc3b0,_0x3e25f6)+_0x1f8abd(0x74)+highlightMatch(_0xc6a34b[_0x1f8abd(0x99)],_0x3e25f6)+_0x1f8abd(0x74)+highlightMatch(_0xc6a34b[_0x1f8abd(0x9a)],_0x3e25f6)+_0x1f8abd(0x74)+highlightMatch(_0xc6a34b[_0x1f8abd(0x70)],_0x3e25f6)+_0x1f8abd(0x74)+highlightMatch(_0xc6a34b[_0x1f8abd(0x110)],_0x3e25f6)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTransit(\x27'+_0xecc3b0+_0x1f8abd(0xb2)+_0xecc3b0+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}return _0x2ff627;}function editTicketTransit(_0x55bfa8){const _0x48478e=_0xf83c63,_0x167205=allTickets[_0x55bfa8];_0x167205?(editingId=_0x55bfa8,document[_0x48478e(0xc0)](_0x48478e(0xa6))[_0x48478e(0xd5)]=_0x55bfa8,document[_0x48478e(0xc0)](_0x48478e(0x87))[_0x48478e(0xd5)]=_0x167205[_0x48478e(0x99)],document[_0x48478e(0xc0)]('editPassword')[_0x48478e(0xd5)]=_0x167205[_0x48478e(0x9a)],document[_0x48478e(0xc0)]('editPrice')[_0x48478e(0xd5)]=_0x167205[_0x48478e(0x70)],document[_0x48478e(0xc0)](_0x48478e(0x103))[_0x48478e(0xd5)]=_0x167205[_0x48478e(0x110)],document['getElementById'](_0x48478e(0xce))['style'][_0x48478e(0xa9)]=_0x48478e(0x69)):alert(_0x48478e(0x80));}function saveTicketEdit(){const _0x4a130b=_0xf83c63,_0x5bb704=document[_0x4a130b(0xc0)](_0x4a130b(0xe6))[_0x4a130b(0xd5)],_0x62170f=document['getElementById']('editPrice')['value'],_0x5c9ed5=document[_0x4a130b(0xc0)](_0x4a130b(0x103))[_0x4a130b(0xd5)],_0x362821=document['getElementById']('editCategory')[_0x4a130b(0xd5)];if(!_0x5bb704||!_0x62170f||!_0x5c9ed5||!_0x362821){alert('Tous\x20les\x20champs\x20sont\x20obligatoires');return;}showLoading();if(currentDatabase===_0x4a130b(0xc3)){const _0x442248=allTickets[editingCategory];_0x442248['motDePasse'][editingIndex]=_0x5bb704,_0x442248[_0x4a130b(0xcf)][editingIndex]=_0x62170f,_0x442248[_0x4a130b(0x11e)][editingIndex]=_0x5c9ed5;const _0x2affae={[currentDatabase+'/'+editingCategory]:_0x442248};database['ref']()[_0x4a130b(0x101)](_0x2affae)[_0x4a130b(0xf0)](()=>{const _0x36d772=_0x4a130b;hideLoading(),closeEditModal(),alert(_0x36d772(0x11a));})[_0x4a130b(0x8e)](_0x1bd947=>{const _0x1a88c6=_0x4a130b;console[_0x1a88c6(0xa7)](_0x1a88c6(0x119),_0x1bd947),hideLoading(),alert(_0x1a88c6(0x109));});}else{if(currentDatabase==='TicketsTransit'){const _0x2175de=database[_0x4a130b(0xdb)](currentDatabase+'/'+editingId);_0x2175de['update']({'category':_0x362821,'password':_0x5bb704,'price':_0x62170f,'user':_0x5c9ed5})['then'](()=>{hideLoading(),closeEditModal(),alert('Ticket\x20modifié\x20avec\x20succès!');})['catch'](_0x5f5baa=>{const _0x1f6bf9=_0x4a130b;console['error'](_0x1f6bf9(0x119),_0x5f5baa),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket');});}}}function editTicketTotal(_0x1b582c,_0x45188a){const _0x23c575=_0xf83c63;editingCategory=_0x1b582c,editingIndex=_0x45188a;const _0x4e3f4c=allTickets[_0x1b582c];document['getElementById'](_0x23c575(0xa6))[_0x23c575(0xd5)]='',document['getElementById'](_0x23c575(0x87))['value']=_0x1b582c,document[_0x23c575(0xc0)](_0x23c575(0xe6))[_0x23c575(0xd5)]=_0x4e3f4c[_0x23c575(0xee)][_0x45188a],document[_0x23c575(0xc0)](_0x23c575(0xae))[_0x23c575(0xd5)]=_0x4e3f4c[_0x23c575(0xcf)][_0x45188a],document[_0x23c575(0xc0)](_0x23c575(0x103))['value']=_0x4e3f4c[_0x23c575(0x11e)][_0x45188a],document[_0x23c575(0xc0)](_0x23c575(0xce))[_0x23c575(0xe8)][_0x23c575(0xa9)]=_0x23c575(0x69);}function mergeTicketsToCategory(_0x269bf9,_0x1ef23c){const _0x5b49b0=_0xf83c63;let _0x424741={};if(currentDatabase===_0x5b49b0(0xe0))for(let _0x4b1d70 in _0x1ef23c){_0x424741[currentDatabase+'/'+_0x4b1d70]=_0x1ef23c[_0x4b1d70];}else{!allTickets[_0x269bf9]&&(allTickets[_0x269bf9]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0xefe408=allTickets[_0x269bf9],_0x54d887={'motDePasse':[..._0xefe408[_0x5b49b0(0xee)],..._0x1ef23c[_0x5b49b0(0xee)]],'prix':[..._0xefe408[_0x5b49b0(0xcf)],..._0x1ef23c[_0x5b49b0(0xcf)]],'utilisateur':[..._0xefe408[_0x5b49b0(0x11e)],..._0x1ef23c[_0x5b49b0(0x11e)]]};_0x424741[currentDatabase+'/'+_0x269bf9]=_0x54d887;}database[_0x5b49b0(0xdb)]()[_0x5b49b0(0x101)](_0x424741)[_0x5b49b0(0xf0)](()=>{const _0xe986e5=_0x5b49b0;hideLoading(),alert(_0xe986e5(0x105)+(_0x269bf9||_0xe986e5(0xe0))+'!');})['catch'](_0x360219=>{const _0x42814=_0x5b49b0;console[_0x42814(0xa7)](_0x42814(0x10e),_0x360219),hideLoading(),alert(_0x42814(0x8d));});}function editCategory(_0x1a9785){const _0x2c4430=_0xf83c63;currentEditingCategory=_0x1a9785,document[_0x2c4430(0xc0)](_0x2c4430(0xdf))[_0x2c4430(0xd5)]=_0x1a9785,document[_0x2c4430(0xc0)](_0x2c4430(0xc8))['style'][_0x2c4430(0xa9)]='block';}function saveCategoryEdit(){const _0x3d105d=_0xf83c63,_0x3375db=document['getElementById'](_0x3d105d(0xdf))['value'][_0x3d105d(0xca)]();if(!_0x3375db){alert(_0x3d105d(0xbc));return;}if(_0x3375db===currentEditingCategory){closeEditCategoryModal();return;}showLoading();const _0x5d653b=allTickets[currentEditingCategory],_0x178f99={[currentDatabase+'/'+currentEditingCategory]:null,[currentDatabase+'/'+_0x3375db]:_0x5d653b};database['ref']()[_0x3d105d(0x101)](_0x178f99)[_0x3d105d(0xf0)](()=>{hideLoading(),closeEditCategoryModal(),alert('Catégorie\x20modifiée\x20avec\x20succès!');})[_0x3d105d(0x8e)](_0x45827d=>{const _0x23a658=_0x3d105d;console[_0x23a658(0xa7)](_0x23a658(0x11b),_0x45827d),hideLoading(),alert(_0x23a658(0x8a));});}function showAddTicketModal(_0x56061a){const _0x586d10=_0xf83c63;currentEditingCategory=_0x56061a,document[_0x586d10(0xc0)](_0x586d10(0xe7))[_0x586d10(0xd5)]='',document['getElementById']('newPrice')[_0x586d10(0xd5)]='',document['getElementById'](_0x586d10(0x8b))[_0x586d10(0xd5)]='',document[_0x586d10(0xc0)](_0x586d10(0x7f))['value']='',document[_0x586d10(0xc0)]('addTicketModal')['style'][_0x586d10(0xa9)]='block';}function saveNewTicket(){const _0x1ae40d=_0xf83c63;showLoading();if(currentDatabase===_0x1ae40d(0xe0)){const _0x11f2c6=_0x1ae40d(0xb8)+Date[_0x1ae40d(0xb3)](),_0x46fa0d={'id':_0x11f2c6,'category':document[_0x1ae40d(0xc0)]('newCategory')[_0x1ae40d(0xd5)][_0x1ae40d(0xca)](),'password':document[_0x1ae40d(0xc0)]('newPassword')[_0x1ae40d(0xd5)][_0x1ae40d(0xca)](),'price':document[_0x1ae40d(0xc0)](_0x1ae40d(0x8f))[_0x1ae40d(0xd5)][_0x1ae40d(0xca)](),'user':document[_0x1ae40d(0xc0)](_0x1ae40d(0x8b))[_0x1ae40d(0xd5)]['trim']()};database[_0x1ae40d(0xdb)](currentDatabase+'/'+_0x11f2c6)[_0x1ae40d(0xad)](_0x46fa0d)['then'](()=>{hideLoading(),closeAddTicketModal(),alert('Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTransit!');})[_0x1ae40d(0x8e)](_0x59ae9d=>{const _0x5abc7c=_0x1ae40d;console[_0x5abc7c(0xa7)](_0x5abc7c(0x10c),_0x59ae9d),hideLoading(),alert(_0x5abc7c(0x6a));});}else{const _0x34d991=currentEditingCategory,_0x4ebaa3={'password':document[_0x1ae40d(0xc0)]('newPassword')[_0x1ae40d(0xd5)][_0x1ae40d(0xca)](),'price':document[_0x1ae40d(0xc0)](_0x1ae40d(0x8f))[_0x1ae40d(0xd5)][_0x1ae40d(0xca)](),'user':document[_0x1ae40d(0xc0)]('newUser')[_0x1ae40d(0xd5)][_0x1ae40d(0xca)]()},_0x233ea1=allTickets[_0x34d991]||{'motDePasse':[],'prix':[],'utilisateur':[]};_0x233ea1[_0x1ae40d(0xee)][_0x1ae40d(0xaf)](_0x4ebaa3[_0x1ae40d(0x9a)]),_0x233ea1['prix'][_0x1ae40d(0xaf)](_0x4ebaa3[_0x1ae40d(0x70)]),_0x233ea1[_0x1ae40d(0x11e)][_0x1ae40d(0xaf)](_0x4ebaa3[_0x1ae40d(0x110)]),database[_0x1ae40d(0xdb)](currentDatabase+'/'+_0x34d991)[_0x1ae40d(0xad)](_0x233ea1)[_0x1ae40d(0xf0)](()=>{const _0x5431fd=_0x1ae40d;hideLoading(),closeAddTicketModal(),alert(_0x5431fd(0x108));})[_0x1ae40d(0x8e)](_0x39543e=>{const _0x374802=_0x1ae40d;console[_0x374802(0xa7)](_0x374802(0x10c),_0x39543e),hideLoading(),alert(_0x374802(0x6a));});}}function closeEditModal(){const _0x35fb20=_0xf83c63;document[_0x35fb20(0xc0)](_0x35fb20(0xce))[_0x35fb20(0xe8)][_0x35fb20(0xa9)]=_0x35fb20(0x9d),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0x464695=_0xf83c63;document[_0x464695(0xc0)](_0x464695(0xc8))[_0x464695(0xe8)][_0x464695(0xa9)]=_0x464695(0x9d),currentEditingCategory=null;}function closeAddTicketModal(){const _0x363ec3=_0xf83c63;document[_0x363ec3(0xc0)](_0x363ec3(0xd2))[_0x363ec3(0xe8)][_0x363ec3(0xa9)]=_0x363ec3(0x9d),currentEditingCategory=null;}function _0x3b38(){const _0x32f158=['push','signature-hotspot.firebasestorage.app','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22editCategory(\x27','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(null,null,\x20\x27','now','floor','Transit','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:','selectedTicketsData','id-','bulkEditCategory','target','32jWjJkK','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20modifier','onload','getElementById','keys','replace','TicketsTotal','Tickets\x20sélectionnés\x20modifiés\x20avec\x20succès!','\x27)\x22>Modifier\x20les\x20tickets\x20selectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_','216622abTqBH','ticketCategories','editCategoryModal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_','trim','database','splice','input[name^=\x22ticketSelect_','editTicketModal','prix','index','map','addTicketModal','readAsText','addEventListener','value','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','14897DJyqYB','bulkEditPrice','split','val','ref','toLowerCase','json','\x22]:checked','editCategoryName','TicketsTransit','off','login.html','clear','Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.','remove','editPassword','newPassword','style','createElement','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','indexOf','\x27,\x20','117VmykHN','motDePasse','searchBar','then','Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier','\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?','tickets','Format\x20de\x20fichier\x20non\x20supporté','forEach','click',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(\x27','name','4312194brixnN','fill','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_Transit\x22\x20value=\x22','1790958NVYSIm','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.','Erreur\x20lors\x20de\x20la\x20modification\x20groupée\x20des\x20tickets','accept','update','textContent','editUser','413468878792','Importation\x20réussie\x20dans\x20','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer','download','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTotal!','Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket','pageshow','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:','includes','Erreur\x20lors\x20de\x20l\x27importation:','bulkEditModal','user','1987135TnpmPk','priceModal','from','.json','isLoggedIn','persisted','Ticket\x20supprimé\x20avec\x20succès!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_','Erreur\x20lors\x20de\x20la\x20modification:','Ticket\x20modifié\x20avec\x20succès!','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:','random','href','utilisateur','Importation\x20réussie\x20!','setAttribute','tickets_export_','data:text/json;charset=utf-8,','loadingIndicator','/ip\x20hotspot\x20user','block','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','databaseSelect','Erreur\x20lors\x20de\x20la\x20suppression:','filtered_tickets_export_','TicketsTransit\x20Import','5657912IEsmvl','price','.json,.csv,.txt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>','Erreur\x20d\x27importation:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTickets(event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','categoryName','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!','293060AKYsvI','AIzaSyBuRN31liV9m_Rire14EQ91Hz9TECqeSxA','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','priceInput','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?','newCategory','Ticket\x20introuvable.','querySelectorAll',',null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.txt,.json','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket','length','data','editCategory','match','files','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie','newUser','pop','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','catch','newPrice','18aGgWRK','result','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_','bulkEditUser','sort','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','parse','signature-hotspot','G-D2PWPV8VDY','category','password','location','getItem','none','innerHTML','txt','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(\x27','appendChild','</span>','importFile','editId','error','Tous\x20les\x20tickets\x20ont\x20été\x20supprimés\x20avec\x20succès!','display','\x22\x20value=\x22','csv','<span\x20class=\x22highlight\x22>','set','editPrice'];_0x3b38=function(){return _0x32f158;};return _0x3b38();}function matchesSearchTotal(_0x1287d2,_0x47b309,_0x5429e5){const _0x90d8a7=_0xf83c63,_0x3e268f=_0x5429e5[_0x90d8a7(0xdc)]();return _0x1287d2['motDePasse'][_0x47b309]['toLowerCase']()[_0x90d8a7(0x10d)](_0x3e268f)||_0x1287d2['prix'][_0x47b309]['toLowerCase']()[_0x90d8a7(0x10d)](_0x3e268f)||_0x1287d2['utilisateur'][_0x47b309][_0x90d8a7(0xdc)]()[_0x90d8a7(0x10d)](_0x3e268f);}function matchesSearchTransit(_0x38621b,_0x56d5b4){const _0x2b0005=_0xf83c63,_0x4555a=_0x56d5b4[_0x2b0005(0xdc)]();return _0x38621b['id']&&_0x38621b['id'][_0x2b0005(0xdc)]()[_0x2b0005(0x10d)](_0x4555a)||_0x38621b[_0x2b0005(0x99)]&&_0x38621b[_0x2b0005(0x99)]['toLowerCase']()['includes'](_0x4555a)||_0x38621b[_0x2b0005(0x9a)]&&_0x38621b['password']['toLowerCase']()[_0x2b0005(0x10d)](_0x4555a)||_0x38621b[_0x2b0005(0x70)]&&_0x38621b['price'][_0x2b0005(0xdc)]()['includes'](_0x4555a)||_0x38621b['user']&&_0x38621b['user'][_0x2b0005(0xdc)]()['includes'](_0x4555a);}function matchesSearch(_0x4fea65,_0x5bf479,_0x41df3f){const _0x229939=_0xf83c63;if(currentDatabase===_0x229939(0xc3))return matchesSearchTotal(_0x4fea65,_0x5bf479,_0x41df3f);else{if(currentDatabase===_0x229939(0xe0))return matchesSearchTransit(_0x4fea65,_0x41df3f);}return![];}function highlightMatch(_0x3a9a6b,_0xcb21c7){const _0x3a873b=_0xf83c63;if(!_0xcb21c7)return _0x3a9a6b;const _0x5b4677=new RegExp(_0xcb21c7,'gi');return _0x3a9a6b['replace'](_0x5b4677,_0x2e36b6=>_0x3a873b(0xac)+_0x2e36b6+_0x3a873b(0xa4));}function deleteTicket(_0x54f863,_0x25b4c8,_0x21985c){const _0x317f22=_0xf83c63;if(confirm(_0x317f22(0x7e))){showLoading();if(currentDatabase==='TicketsTransit')database[_0x317f22(0xdb)](currentDatabase+'/'+_0x21985c)['remove']()['then'](()=>{const _0x21e4c3=_0x317f22;hideLoading(),alert(_0x21e4c3(0x117));})[_0x317f22(0x8e)](_0x36e39c=>{const _0x524023=_0x317f22;console[_0x524023(0xa7)](_0x524023(0x6c),_0x36e39c),hideLoading(),alert(_0x524023(0x84));});else{const _0x4063cb=allTickets[_0x54f863];_0x4063cb['motDePasse']['splice'](_0x25b4c8,0x1),_0x4063cb[_0x317f22(0xcf)]['splice'](_0x25b4c8,0x1),_0x4063cb[_0x317f22(0x11e)][_0x317f22(0xcc)](_0x25b4c8,0x1),database[_0x317f22(0xdb)](currentDatabase+'/'+_0x54f863)[_0x317f22(0xad)](_0x4063cb)[_0x317f22(0xf0)](()=>{hideLoading(),alert('Ticket\x20supprimé\x20avec\x20succès!');})[_0x317f22(0x8e)](_0x2fc593=>{const _0x191ef8=_0x317f22;console[_0x191ef8(0xa7)](_0x191ef8(0x6c),_0x2fc593),hideLoading(),alert(_0x191ef8(0x84));});}}}function deleteSelectedTickets(_0x2fb483){const _0x452ad5=_0xf83c63,_0x2fafd0=document[_0x452ad5(0x81)](_0x452ad5(0xcd)+(_0x2fb483||_0x452ad5(0xb5))+'\x22]:checked');if(_0x2fafd0['length']===0x0){alert(_0x452ad5(0x106));return;}if(confirm(_0x452ad5(0xf3))){showLoading();const _0x1c222b={};if(currentDatabase===_0x452ad5(0xe0))_0x2fafd0['forEach'](_0x594af9=>{const _0x10ac09=_0x452ad5,_0x5261cd=_0x594af9[_0x10ac09(0xd5)];_0x1c222b[currentDatabase+'/'+_0x5261cd]=null;});else{const _0x594dea=allTickets[_0x2fb483],_0x2520f3=Array[_0x452ad5(0x113)](_0x2fafd0)[_0x452ad5(0xd1)](_0x3f2d9e=>parseInt(_0x3f2d9e[_0x452ad5(0xd5)]))[_0x452ad5(0x94)]((_0x4731a6,_0x154978)=>_0x154978-_0x4731a6);_0x2520f3[_0x452ad5(0xf6)](_0x555c65=>{const _0x218e24=_0x452ad5;_0x594dea[_0x218e24(0xee)][_0x218e24(0xcc)](_0x555c65,0x1),_0x594dea['prix']['splice'](_0x555c65,0x1),_0x594dea['utilisateur'][_0x218e24(0xcc)](_0x555c65,0x1);}),_0x1c222b[currentDatabase+'/'+_0x2fb483]=_0x594dea;}database['ref']()[_0x452ad5(0x101)](_0x1c222b)[_0x452ad5(0xf0)](()=>{const _0x373621=_0x452ad5;hideLoading(),alert(_0x373621(0x79));})['catch'](_0x191630=>{const _0x39f391=_0x452ad5;console[_0x39f391(0xa7)]('Erreur\x20lors\x20de\x20la\x20suppression:',_0x191630),hideLoading(),alert(_0x39f391(0x78));});}}function editSelectedTickets(_0x2aed35){const _0x58eeac=_0xf83c63,_0x17e3f3=document['querySelectorAll'](_0x58eeac(0xcd)+(_0x2aed35||_0x58eeac(0xb5))+_0x58eeac(0xde));if(_0x17e3f3['length']===0x0){alert(_0x58eeac(0xbe));return;}window['selectedTicketsData']={'category':_0x2aed35,'tickets':[]};if(currentDatabase==='TicketsTransit')_0x17e3f3[_0x58eeac(0xf6)](_0x405cc5=>{const _0x3b2646=_0x58eeac,_0x4e3faa=_0x405cc5[_0x3b2646(0xd5)];window[_0x3b2646(0xb7)][_0x3b2646(0xf4)][_0x3b2646(0xaf)]({'id':_0x4e3faa,'data':allTickets[_0x4e3faa]});});else{const _0x221205=Array[_0x58eeac(0x113)](_0x17e3f3)[_0x58eeac(0xd1)](_0x5f57fd=>parseInt(_0x5f57fd[_0x58eeac(0xd5)]));window['selectedTicketsData']['tickets']=_0x221205[_0x58eeac(0xd1)](_0x113f7e=>({'index':_0x113f7e,'data':{'password':allTickets[_0x2aed35][_0x58eeac(0xee)][_0x113f7e],'price':allTickets[_0x2aed35][_0x58eeac(0xcf)][_0x113f7e],'user':allTickets[_0x2aed35][_0x58eeac(0x11e)][_0x113f7e]}}));}document[_0x58eeac(0xc0)](_0x58eeac(0x10f))[_0x58eeac(0xe8)][_0x58eeac(0xa9)]='block';}function saveBulkEdit(){const _0xa74a6f=_0xf83c63,_0x4323ea=document[_0xa74a6f(0xc0)](_0xa74a6f(0xb9))[_0xa74a6f(0xd5)][_0xa74a6f(0xca)](),_0xb40222=document[_0xa74a6f(0xc0)]('bulkEditPassword')['value']['trim'](),_0x48fbdb=document[_0xa74a6f(0xc0)](_0xa74a6f(0xd8))[_0xa74a6f(0xd5)][_0xa74a6f(0xca)](),_0x39739c=document[_0xa74a6f(0xc0)](_0xa74a6f(0x93))['value']['trim']();showLoading();const _0x1283cc={};if(currentDatabase===_0xa74a6f(0xe0))window['selectedTicketsData'][_0xa74a6f(0xf4)][_0xa74a6f(0xf6)](_0x2481b9=>{const _0xae6c46=_0xa74a6f,_0x39ae6b={..._0x2481b9[_0xae6c46(0x86)],'category':_0x4323ea||_0x2481b9[_0xae6c46(0x86)][_0xae6c46(0x99)],'password':_0xb40222||_0x2481b9[_0xae6c46(0x86)]['password'],'price':_0x48fbdb||_0x2481b9['data'][_0xae6c46(0x70)],'user':_0x39739c||_0x2481b9[_0xae6c46(0x86)][_0xae6c46(0x110)]};_0x1283cc[currentDatabase+'/'+_0x2481b9['id']]=_0x39ae6b;});else{const _0x1325d8=window[_0xa74a6f(0xb7)][_0xa74a6f(0x99)],_0x3536a0=allTickets[_0x1325d8];window[_0xa74a6f(0xb7)][_0xa74a6f(0xf4)][_0xa74a6f(0xf6)](_0x1681db=>{const _0x45715a=_0xa74a6f;if(_0xb40222)_0x3536a0[_0x45715a(0xee)][_0x1681db['index']]=_0xb40222;if(_0x48fbdb)_0x3536a0[_0x45715a(0xcf)][_0x1681db[_0x45715a(0xd0)]]=_0x48fbdb;if(_0x39739c)_0x3536a0[_0x45715a(0x11e)][_0x1681db['index']]=_0x39739c;}),_0x1283cc[currentDatabase+'/'+_0x1325d8]=_0x3536a0;}database[_0xa74a6f(0xdb)]()[_0xa74a6f(0x101)](_0x1283cc)[_0xa74a6f(0xf0)](()=>{const _0x44491f=_0xa74a6f;hideLoading(),closeBulkEditModal(),alert(_0x44491f(0xc4));})['catch'](_0x1c88ac=>{const _0x3d3779=_0xa74a6f;console[_0x3d3779(0xa7)]('Erreur\x20lors\x20de\x20la\x20modification\x20groupée:',_0x1c88ac),hideLoading(),alert(_0x3d3779(0xff));});}function closeBulkEditModal(){const _0x5995d8=_0xf83c63;document[_0x5995d8(0xc0)](_0x5995d8(0x10f))['style']['display']=_0x5995d8(0x9d),window[_0x5995d8(0xb7)]=null;}function deleteAllTicketsInCategory(_0x51381a){const _0x35b24e=_0xf83c63;confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20'+(_0x51381a||'TicketsTransit')+'\x20?')&&(showLoading(),currentDatabase===_0x35b24e(0xe0)?database[_0x35b24e(0xdb)](currentDatabase)['set']({})[_0x35b24e(0xf0)](()=>{const _0x1e748e=_0x35b24e;hideLoading(),alert(_0x1e748e(0xa8));})[_0x35b24e(0x8e)](_0x3307a5=>{const _0xb91f5c=_0x35b24e;console[_0xb91f5c(0xa7)]('Erreur\x20lors\x20de\x20la\x20suppression:',_0x3307a5),hideLoading(),alert(_0xb91f5c(0x78));}):database[_0x35b24e(0xdb)](currentDatabase+'/'+_0x51381a)['set']({'motDePasse':[],'prix':[],'utilisateur':[]})[_0x35b24e(0xf0)](()=>{hideLoading(),alert('Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!');})[_0x35b24e(0x8e)](_0x3ad65b=>{const _0x5e435c=_0x35b24e;console['error'](_0x5e435c(0x6c),_0x3ad65b),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets');}));}function exportTickets(){const _0x24a6d8=_0xf83c63,_0x237a07=_0x24a6d8(0x66)+encodeURIComponent(JSON['stringify'](allTickets,null,0x2)),_0x7e3963=document[_0x24a6d8(0xe9)]('a');_0x7e3963[_0x24a6d8(0x64)](_0x24a6d8(0x11d),_0x237a07),_0x7e3963[_0x24a6d8(0x64)]('download',_0x24a6d8(0x65)+currentDatabase+_0x24a6d8(0x114)),document['body'][_0x24a6d8(0xa3)](_0x7e3963),_0x7e3963[_0x24a6d8(0xf7)](),_0x7e3963['remove']();}function exportFilteredTickets(){const _0x40d8d7=_0xf83c63,_0x2ec7f1=document[_0x40d8d7(0xc0)](_0x40d8d7(0xef))[_0x40d8d7(0xd5)]['trim'](),_0x7b5ba2={};if(currentDatabase===_0x40d8d7(0xe0))for(let _0x10fcea in allTickets){(!_0x2ec7f1||matchesSearchTransit(allTickets[_0x10fcea],_0x2ec7f1))&&(_0x7b5ba2[_0x10fcea]=allTickets[_0x10fcea]);}else for(let _0x477199 in allTickets){const _0x3b6ec7=allTickets[_0x477199];_0x7b5ba2[_0x477199]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x546ffb=0x0;_0x546ffb<_0x3b6ec7[_0x40d8d7(0xee)][_0x40d8d7(0x85)];_0x546ffb++){(!_0x2ec7f1||matchesSearchTotal(_0x3b6ec7,_0x546ffb,_0x2ec7f1))&&(_0x7b5ba2[_0x477199][_0x40d8d7(0xee)]['push'](_0x3b6ec7[_0x40d8d7(0xee)][_0x546ffb]),_0x7b5ba2[_0x477199][_0x40d8d7(0xcf)][_0x40d8d7(0xaf)](_0x3b6ec7[_0x40d8d7(0xcf)][_0x546ffb]),_0x7b5ba2[_0x477199][_0x40d8d7(0x11e)][_0x40d8d7(0xaf)](_0x3b6ec7[_0x40d8d7(0x11e)][_0x546ffb]));}}const _0x35f056=_0x40d8d7(0x66)+encodeURIComponent(JSON['stringify'](_0x7b5ba2,null,0x2)),_0x33de54=document[_0x40d8d7(0xe9)]('a');_0x33de54[_0x40d8d7(0x64)]('href',_0x35f056),_0x33de54[_0x40d8d7(0x64)](_0x40d8d7(0x107),_0x40d8d7(0x6d)+currentDatabase+_0x40d8d7(0x114)),document['body']['appendChild'](_0x33de54),_0x33de54['click'](),_0x33de54[_0x40d8d7(0xe5)]();}function handleJsonImport(_0x10e12d){const _0x38e8f9=_0xf83c63,_0x4c71aa=JSON[_0x38e8f9(0x96)](_0x10e12d);if(confirm(_0x38e8f9(0xfe))){(!allTickets||Object[_0x38e8f9(0xc1)](allTickets)['length']===0x0)&&(allTickets=currentDatabase===_0x38e8f9(0xe0)?{}:{});const _0x22984f={};if(currentDatabase===_0x38e8f9(0xe0)){let _0x5bc3ce={};for(let _0x3408a0 in _0x4c71aa){let _0x411ed7=_0x3408a0;while(allTickets[_0x411ed7]){_0x411ed7=_0x38e8f9(0xb8)+Date['now']()+'-'+Math[_0x38e8f9(0xb4)](Math[_0x38e8f9(0x11c)]()*0x3e8);}_0x5bc3ce[_0x411ed7]={..._0x4c71aa[_0x3408a0],'id':_0x411ed7};}for(let _0x41ac2f in _0x5bc3ce){_0x22984f[currentDatabase+'/'+_0x41ac2f]=_0x5bc3ce[_0x41ac2f];}}else for(let _0x35be4a in _0x4c71aa){allTickets[_0x35be4a]?_0x22984f[currentDatabase+'/'+_0x35be4a]={'motDePasse':[...allTickets[_0x35be4a][_0x38e8f9(0xee)],..._0x4c71aa[_0x35be4a][_0x38e8f9(0xee)]],'prix':[...allTickets[_0x35be4a][_0x38e8f9(0xcf)],..._0x4c71aa[_0x35be4a]['prix']],'utilisateur':[...allTickets[_0x35be4a][_0x38e8f9(0x11e)],..._0x4c71aa[_0x35be4a][_0x38e8f9(0x11e)]]}:_0x22984f[currentDatabase+'/'+_0x35be4a]=_0x4c71aa[_0x35be4a];}database['ref']()[_0x38e8f9(0x101)](_0x22984f)[_0x38e8f9(0xf0)](()=>{const _0x2f2198=_0x38e8f9;hideLoading(),alert(_0x2f2198(0x11f));})['catch'](_0x4c11fa=>{const _0x1f1889=_0x38e8f9;console['error'](_0x1f1889(0x10e),_0x4c11fa),hideLoading(),alert(_0x1f1889(0x8d));});}else hideLoading();}function handleCsvImport(_0x510e01){const _0x55fee1=_0xf83c63,_0x2f2845=_0x510e01[_0x55fee1(0xd9)]('\x0a');let _0x29fd97={};if(currentDatabase===_0x55fee1(0xe0)){for(let _0x28592e=0x1;_0x28592e<_0x2f2845[_0x55fee1(0x85)];_0x28592e++){if(!_0x2f2845[_0x28592e]['trim']())continue;const _0x3af211=_0x2f2845[_0x28592e][_0x55fee1(0xd9)](','),_0x1d6047=_0x55fee1(0xb8)+Date[_0x55fee1(0xb3)]()+'-'+Math['floor'](Math[_0x55fee1(0x11c)]()*0x3e8);_0x29fd97[_0x1d6047]={'id':_0x1d6047,'category':_0x3af211[0x1]?_0x3af211[0x1][_0x55fee1(0xca)]():'N/A','password':_0x3af211[0x2]?_0x3af211[0x2][_0x55fee1(0xca)]():'','price':_0x3af211[0x3]?_0x3af211[0x3][_0x55fee1(0xca)]():'','user':_0x3af211[0x4]?_0x3af211[0x4][_0x55fee1(0xca)]():''};}tempImportData={'tickets':_0x29fd97},tempCategory=_0x55fee1(0xe0),showPriceModal(_0x55fee1(0x6e));}else{for(let _0x5ad99d=0x1;_0x5ad99d<_0x2f2845[_0x55fee1(0x85)];_0x5ad99d++){if(!_0x2f2845[_0x5ad99d][_0x55fee1(0xca)]())continue;const _0x4c3022=_0x2f2845[_0x5ad99d][_0x55fee1(0xd9)](','),_0x1f8807=_0x4c3022[0x2][_0x55fee1(0xca)]();!_0x29fd97[_0x1f8807]&&(_0x29fd97[_0x1f8807]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x29fd97[_0x1f8807][_0x55fee1(0x11e)][_0x55fee1(0xaf)](_0x4c3022[0x0][_0x55fee1(0xca)]()),_0x29fd97[_0x1f8807][_0x55fee1(0xee)][_0x55fee1(0xaf)](_0x4c3022[0x1][_0x55fee1(0xca)]());}tempImportData=_0x29fd97;const _0x3793fb=Object['keys'](_0x29fd97)[0x0];showPriceModal(_0x3793fb);}}function handleTxtImport(_0x432138){const _0x1bc49e=_0xf83c63,_0x227ba8=_0x432138[_0x1bc49e(0xd9)]('\x0a');let _0xee5897={};if(currentDatabase===_0x1bc49e(0xe0)){const _0x5179fa=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x5d613d of _0x227ba8){_0x5d613d=_0x5d613d[_0x1bc49e(0xca)]();if(!_0x5d613d||_0x5d613d==='/ip\x20hotspot\x20user')continue;const _0x19b827=_0x5d613d[_0x1bc49e(0x88)](_0x5179fa);if(_0x19b827){const [_0xa4a024,_0x2df927,_0x1e4713,_0x3f0b5f]=_0x19b827,_0x1a7073='id-'+Date['now']()+'-'+Math[_0x1bc49e(0xb4)](Math[_0x1bc49e(0x11c)]()*0x3e8);_0xee5897[_0x1a7073]={'id':_0x1a7073,'category':_0x3f0b5f,'password':_0x1e4713,'price':'','user':_0x2df927};}}tempImportData={'tickets':_0xee5897},tempCategory=_0x1bc49e(0xe0),showPriceModal(_0x1bc49e(0x6e));}else{const _0x2dcd76=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x17a523 of _0x227ba8){_0x17a523=_0x17a523['trim']();if(!_0x17a523||_0x17a523===_0x1bc49e(0x68))continue;const _0x27daac=_0x17a523[_0x1bc49e(0x88)](_0x2dcd76);if(_0x27daac){const [_0x759661,_0x29df57,_0x49cc43,_0x3a11ee]=_0x27daac;!_0xee5897[_0x3a11ee]&&(_0xee5897[_0x3a11ee]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0xee5897[_0x3a11ee][_0x1bc49e(0x11e)][_0x1bc49e(0xaf)](_0x29df57),_0xee5897[_0x3a11ee]['motDePasse']['push'](_0x49cc43);}}if(Object[_0x1bc49e(0xc1)](_0xee5897)[_0x1bc49e(0x85)]===0x0){hideLoading(),alert(_0x1bc49e(0xf1));return;}tempImportData=_0xee5897;const _0x2e79d6=Object['keys'](_0xee5897)[0x0];showPriceModal(_0x2e79d6);}}function showPriceModal(_0x4e5e3f){const _0x3d034a=_0xf83c63;tempCategory=_0x4e5e3f,document['getElementById'](_0x3d034a(0x77))[_0x3d034a(0x102)]=_0x4e5e3f,document[_0x3d034a(0xc0)](_0x3d034a(0x112))[_0x3d034a(0xe8)][_0x3d034a(0xa9)]='block',document[_0x3d034a(0xc0)]('priceInput')['value']='';}function confirmPrice(){const _0x24d980=_0xf83c63,_0x36aef8=document[_0x24d980(0xc0)](_0x24d980(0x7d))['value']['trim']();if(!_0x36aef8){alert('Veuillez\x20entrer\x20un\x20prix');return;}if(currentDatabase===_0x24d980(0xe0)){for(let _0x2ce106 in tempImportData[_0x24d980(0xf4)]){tempImportData[_0x24d980(0xf4)][_0x2ce106][_0x24d980(0x70)]=_0x36aef8;}finishImport();}else{tempImportData[tempCategory][_0x24d980(0xcf)]=Array(tempImportData[tempCategory][_0x24d980(0xee)][_0x24d980(0x85)])[_0x24d980(0xfb)](_0x36aef8);const _0x1fb5b4=Object[_0x24d980(0xc1)](tempImportData),_0x337903=_0x1fb5b4[_0x24d980(0xeb)](tempCategory);_0x337903<_0x1fb5b4[_0x24d980(0x85)]-0x1?(document[_0x24d980(0xc0)](_0x24d980(0x7d))[_0x24d980(0xd5)]='',showPriceModal(_0x1fb5b4[_0x337903+0x1])):finishImport();}}function cancelImport(){const _0x52254c=_0xf83c63;document[_0x52254c(0xc0)](_0x52254c(0x112))[_0x52254c(0xe8)][_0x52254c(0xa9)]='none',currentDatabase===_0x52254c(0xe0)&&(tempImportData=null),document[_0x52254c(0xc0)]('importFile')[_0x52254c(0xd5)]='',tempCategory=null,hideLoading();}function finishImport(){const _0x3e63aa=_0xf83c63;if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.')){(!allTickets||Object[_0x3e63aa(0xc1)](allTickets)[_0x3e63aa(0x85)]===0x0)&&(allTickets=currentDatabase===_0x3e63aa(0xe0)?{}:{});const _0x714b8d={};if(currentDatabase==='TicketsTransit')for(let _0x538c46 in tempImportData[_0x3e63aa(0xf4)]){_0x714b8d[currentDatabase+'/'+_0x538c46]=tempImportData['tickets'][_0x538c46];}else for(let _0x5cd9bb in tempImportData){allTickets[_0x5cd9bb]?_0x714b8d[currentDatabase+'/'+_0x5cd9bb]={'motDePasse':[...allTickets[_0x5cd9bb][_0x3e63aa(0xee)],...tempImportData[_0x5cd9bb][_0x3e63aa(0xee)]],'prix':[...allTickets[_0x5cd9bb][_0x3e63aa(0xcf)],...tempImportData[_0x5cd9bb][_0x3e63aa(0xcf)]],'utilisateur':[...allTickets[_0x5cd9bb][_0x3e63aa(0x11e)],...tempImportData[_0x5cd9bb][_0x3e63aa(0x11e)]]}:_0x714b8d[currentDatabase+'/'+_0x5cd9bb]=tempImportData[_0x5cd9bb];}database['ref']()[_0x3e63aa(0x101)](_0x714b8d)['then'](()=>{const _0xaf0cf1=_0x3e63aa;document['getElementById'](_0xaf0cf1(0x112))[_0xaf0cf1(0xe8)][_0xaf0cf1(0xa9)]=_0xaf0cf1(0x9d),document[_0xaf0cf1(0xc0)](_0xaf0cf1(0xa5))[_0xaf0cf1(0xd5)]='',tempImportData=null,tempCategory=null,hideLoading(),alert('Importation\x20réussie\x20!');})[_0x3e63aa(0x8e)](_0x135029=>{const _0x154015=_0x3e63aa;console[_0x154015(0xa7)](_0x154015(0x10e),_0x135029),hideLoading(),alert(_0x154015(0x8d));});}else cancelImport();}function importTickets(_0x2da0d9){const _0x8c70ab=_0xf83c63,_0x35e3a3=_0x2da0d9[_0x8c70ab(0xba)][_0x8c70ab(0x89)][0x0];if(!_0x35e3a3)return;showLoading();const _0x2e9b00=new FileReader();_0x2e9b00['onload']=function(_0x3f6b3f){const _0x130df8=_0x8c70ab;try{const _0x3f2cad=_0x35e3a3[_0x130df8(0xf9)][_0x130df8(0xd9)]('.')[_0x130df8(0x8c)]()['toLowerCase']();if(_0x3f2cad===_0x130df8(0xdd))handleJsonImport(_0x3f6b3f[_0x130df8(0xba)][_0x130df8(0x91)]);else{if(_0x3f2cad===_0x130df8(0xab))handleCsvImport(_0x3f6b3f[_0x130df8(0xba)][_0x130df8(0x91)]);else{if(_0x3f2cad===_0x130df8(0x9f))handleTxtImport(_0x3f6b3f[_0x130df8(0xba)][_0x130df8(0x91)]);else throw new Error(_0x130df8(0xf5));}}}catch(_0x266a25){console[_0x130df8(0xa7)](_0x130df8(0x73),_0x266a25),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.');}},_0x2e9b00[_0x8c70ab(0xd3)](_0x35e3a3);}function deleteSearchResults(){const _0x582278=_0xf83c63,_0x5060ad=document[_0x582278(0xc0)]('searchBar')[_0x582278(0xd5)]['trim']();if(!_0x5060ad){alert(_0x582278(0xa0));return;}if(confirm(_0x582278(0x10b))){showLoading();const _0x5670e3={};if(currentDatabase==='TicketsTransit')for(let _0x56d565 in allTickets){matchesSearchTransit(allTickets[_0x56d565],_0x5060ad)&&(_0x5670e3[currentDatabase+'/'+_0x56d565]=null);}else for(let _0x1ad617 in allTickets){const _0x3815fa=allTickets[_0x1ad617],_0x244604={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x4ac781=0x0;_0x4ac781<_0x3815fa[_0x582278(0xee)][_0x582278(0x85)];_0x4ac781++){!matchesSearchTotal(_0x3815fa,_0x4ac781,_0x5060ad)&&(_0x244604[_0x582278(0xee)][_0x582278(0xaf)](_0x3815fa[_0x582278(0xee)][_0x4ac781]),_0x244604[_0x582278(0xcf)][_0x582278(0xaf)](_0x3815fa[_0x582278(0xcf)][_0x4ac781]),_0x244604[_0x582278(0x11e)][_0x582278(0xaf)](_0x3815fa[_0x582278(0x11e)][_0x4ac781]));}_0x5670e3[currentDatabase+'/'+_0x1ad617]=_0x244604;}database['ref']()[_0x582278(0x101)](_0x5670e3)['then'](()=>{const _0x44bfd5=_0x582278;hideLoading(),alert(_0x44bfd5(0xe4));})[_0x582278(0x8e)](_0x6820e9=>{const _0x2eb1e8=_0x582278;console[_0x2eb1e8(0xa7)](_0x2eb1e8(0xb6),_0x6820e9),hideLoading(),alert(_0x2eb1e8(0xd6));});}}function searchTickets(){const _0x5a505b=_0xf83c63,_0xe80082=document[_0x5a505b(0xc0)](_0x5a505b(0xef))[_0x5a505b(0xd5)][_0x5a505b(0xca)]();displayTickets(allTickets,_0xe80082);}function checkAuth(){const _0x4478df=_0xf83c63,_0x4f567c=sessionStorage['getItem'](_0x4478df(0x115));if(!_0x4f567c)return window['location']['replace']('login.html'),![];return!![];}function changeDatabase(){const _0x4a3aa3=_0xf83c63;currentDatabase=document[_0x4a3aa3(0xc0)](_0x4a3aa3(0x6b))['value'],updateImportFileAccept(),loadTickets();}function updateImportFileAccept(){const _0x112f0f=_0xf83c63,_0x2020b2=document[_0x112f0f(0xc0)]('importFile');currentDatabase==='TicketsTransit'?_0x2020b2[_0x112f0f(0x100)]=_0x112f0f(0x83):_0x2020b2[_0x112f0f(0x100)]=_0x112f0f(0x71);}window[_0xf83c63(0xbf)]=()=>{checkAuth()&&(updateImportFileAccept(),loadTickets());};function logout(){const _0x8178d9=_0xf83c63;sessionStorage[_0x8178d9(0xe3)](),window['location'][_0x8178d9(0xc2)](_0x8178d9(0xe2));}document['getElementById'](_0xf83c63(0xef))['addEventListener']('input',searchTickets),window[_0xf83c63(0xbf)]=()=>{checkAuth()&&loadTickets();};
</script>

</body>
</html>
