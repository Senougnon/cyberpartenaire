const _0x706553=_0x109d;(function(_0x4180ce,_0x30e437){const _0x4355eb=_0x109d,_0x584ecf=_0x4180ce();while(!![]){try{const _0x9b09dc=-parseInt(_0x4355eb(0x1f6))/0x1*(-parseInt(_0x4355eb(0x210))/0x2)+-parseInt(_0x4355eb(0x219))/0x3*(parseInt(_0x4355eb(0x1e7))/0x4)+-parseInt(_0x4355eb(0x1b1))/0x5+-parseInt(_0x4355eb(0x211))/0x6*(-parseInt(_0x4355eb(0x227))/0x7)+parseInt(_0x4355eb(0x1cc))/0x8*(parseInt(_0x4355eb(0x224))/0x9)+parseInt(_0x4355eb(0x1e9))/0xa*(-parseInt(_0x4355eb(0x1ef))/0xb)+-parseInt(_0x4355eb(0x1bd))/0xc;if(_0x9b09dc===_0x30e437)break;else _0x584ecf['push'](_0x584ecf['shift']());}catch(_0x2c9bff){_0x584ecf['push'](_0x584ecf['shift']());}}}(_0x287d,0xb0324));const firebaseConfig={'apiKey':_0x706553(0x197),'authDomain':_0x706553(0x1aa),'databaseURL':_0x706553(0x18e),'projectId':'signature-hotspot','storageBucket':_0x706553(0x22d),'messagingSenderId':_0x706553(0x1ac),'appId':_0x706553(0x1d1),'measurementId':'G-D2PWPV8VDY'};firebase[_0x706553(0x215)](firebaseConfig);const database=firebase[_0x706553(0x1e0)](),adminRef=database['ref'](_0x706553(0x1e6)),loginForm=document[_0x706553(0x1b9)](_0x706553(0x1c6)),signupForm=document[_0x706553(0x1b9)](_0x706553(0x1d8)),loginContainer=document[_0x706553(0x1b9)](_0x706553(0x1fd)),signupContainer=document['getElementById'](_0x706553(0x218)),dashboardContainer=document[_0x706553(0x1b9)](_0x706553(0x1f2)),salesForm=document[_0x706553(0x1b9)]('salesForm'),salesTable=document[_0x706553(0x1b9)]('salesTable'),totalSalesElement=document['getElementById'](_0x706553(0x216)),averageSalesElement=document[_0x706553(0x1b9)](_0x706553(0x1db)),userInfoElement=document['getElementById'](_0x706553(0x21b)),toggleAnalysisButton=document['getElementById']('toggleAnalysisButton'),toggleSalesButton=document['getElementById'](_0x706553(0x1a3)),analysisSection=document[_0x706553(0x1b9)](_0x706553(0x207)),salesDetailsSection=document[_0x706553(0x1b9)](_0x706553(0x1c5)),signupButton=document[_0x706553(0x1b9)](_0x706553(0x195)),loginFromSignup=document[_0x706553(0x1b9)](_0x706553(0x1ca)),productSelect=document[_0x706553(0x1b9)](_0x706553(0x1d4)),stockTableGlobal=document[_0x706553(0x1b9)](_0x706553(0x1b2));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x706553(0x1b9)]('dateTime')[_0x706553(0x1dd)]=new Date()['toISOString']()[_0x706553(0x1a9)](0x0,0x10);function _0x287d(){const _0x520e21=['signature-hotspot.firebaseapp.com','Total\x20des\x20ventes:\x20','413468878792','documentElement','rgba(255,\x20255,\x20255,\x200.1)','ref','insertRow','7152540hoZhUT','stockTableGlobal','innerHTML','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','log','dateTime','labels','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement\x20:','getElementById','index.html','textContent','active','1161660uoRDNL','Inscription\x20r√©ussie\x20!\x20Connectez-vous.','exists','click','delete-icon','salesTable','rgb(255,\x2099,\x20132)','D√©tail\x20des\x20ventes','salesDetailsSection','loginForm','style','signupUsername','flex','loginFromSignup','push','6755064ZNRlNH','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e.','reduce','display','prices','1:413468878792:web:540854701309fda2afc2fd','val','sales','product','onclick','username','users/','signupForm','Entr√©e\x20supprim√©e\x20avec\x20succ√®s','Masquer\x20l\x27analyse\x20des\x20ventes','averageSales','href','value','threeMonth','Activer\x20le\x20mode\x20sombre','database','\x20FCFA','every','ventes_wifi_zone.xlsx','week','#searchInputs\x20input','admin/subscription','11796HPNQRw','once','10adZVdK','querySelector','signupPassword','confirm-dialog','tbody','stopPropagation','6589682Hfneib','dataset','Masquer\x20le\x20d√©tail\x20des\x20ventes','dashboardContainer','light-theme','getContext','div','5RITkqf','endDate','endAt','Erreur\x20lors\x20de\x20la\x20cr√©ation\x20du\x20compte','toISOString','key','Ce\x20nom\x20d\x27utilisateur\x20est\x20d√©j√†\x20utilis√©.','loginContainer','submit','line','Activer\x20le\x20mode\x20clair','removeChild','keys','includes','equalTo','writeFile','remove','analysisSection','aria-label','forEach','values','addEventListener','input','block','APP','password','496820uelZyj','6976236cOzTPO','getItem','body','expired','initializeApp','totalSales','length','signupContainer','408MpCgqq','insertCell','userInfo','rgb(0,\x20255,\x20255)','orderByChild','setAttribute','className','Utilisateur:\x20','td:first-child','salesStartDate','table_to_sheet','9tSgTsJ','querySelectorAll','option','7YyIcIl','charAt','subscriptionRequiredModal','classList','Utilisateur\x20introuvable','then','signature-hotspot.firebasestorage.app','Error\x20creating\x20user:','Ventes','toLowerCase','add','toFixed','search','book_new','darkTheme','none','month','appendChild','location','status','sort','Analyse\x20des\x20ventes','<option\x20value=\x22\x22>S√©lectionner\x20un\x20produit</option>','preventDefault','utils','toString','exportExcel','cancelDelete','toLocaleString','tbody\x20tr','https://signature-hotspot-default-rtdb.firebaseio.com','TotalSales','createElement','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e\x20:','total','true','limitToLast','signupButton','sales/','AIzaSyBuRN31liV9m_Rire14EQ91Hz9TECqeSxA','error','resolve','change','update','book_append_sheet','catch','stockStartDate','prix','filterSalesDates','filter','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entr√©e:','toggleSalesButton','span','setItem','salesChart','getTime','theme-toggle','slice'];_0x287d=function(){return _0x520e21;};return _0x287d();}function fetchTicketCategories(){const _0x216d49=_0x706553;database[_0x216d49(0x1af)]('TicketsTotal')['once'](_0x216d49(0x1dd))[_0x216d49(0x22c)](_0x366dfd=>{ticketCategories=_0x366dfd['val']()||{},populateProductSelect();});}function populateProductSelect(){const _0xcce68c=_0x706553;productSelect[_0xcce68c(0x1b3)]=_0xcce68c(0x186);for(const _0x50edb7 in ticketCategories){const _0x229fee=ticketCategories[_0x50edb7][_0xcce68c(0x19f)][0x0],_0x2fcf65=document[_0xcce68c(0x190)](_0xcce68c(0x226));_0x2fcf65[_0xcce68c(0x1dd)]=_0x50edb7,_0x2fcf65[_0xcce68c(0x1bb)]=_0x50edb7+'\x20('+_0x229fee+'\x20FCFA)',productSelect[_0xcce68c(0x238)](_0x2fcf65);}}fetchTicketCategories(),loginForm[_0x706553(0x20b)]('submit',function(_0x50b0a0){const _0x29bbb4=_0x706553;_0x50b0a0[_0x29bbb4(0x187)]();const _0x59918b=document[_0x29bbb4(0x1b9)](_0x29bbb4(0x1d6))[_0x29bbb4(0x1dd)],_0x29222=document[_0x29bbb4(0x1b9)](_0x29bbb4(0x20f))['value'];database[_0x29bbb4(0x1af)](_0x29bbb4(0x1d7)+_0x59918b)['once'](_0x29bbb4(0x1dd))[_0x29bbb4(0x22c)](_0x459bee=>{const _0x24d6f1=_0x29bbb4;_0x459bee[_0x24d6f1(0x1bf)]()?_0x459bee[_0x24d6f1(0x1d2)]()[_0x24d6f1(0x20f)]===_0x29222?loginSuccess(_0x59918b):alert('Mot\x20de\x20passe\x20incorrect'):alert(_0x24d6f1(0x22b));});}),signupForm[_0x706553(0x20b)](_0x706553(0x1fe),function(_0x243e90){const _0x2e6b70=_0x706553;_0x243e90[_0x2e6b70(0x187)]();const _0x5e51b3=document['getElementById'](_0x2e6b70(0x1c8))[_0x2e6b70(0x1dd)],_0x414eb3=document[_0x2e6b70(0x1b9)](_0x2e6b70(0x1eb))[_0x2e6b70(0x1dd)];database[_0x2e6b70(0x1af)](_0x2e6b70(0x1d7)+_0x5e51b3)['once']('value')[_0x2e6b70(0x22c)](_0x35d0fa=>{const _0x59b405=_0x2e6b70;_0x35d0fa[_0x59b405(0x1bf)]()?alert(_0x59b405(0x1fc)):database[_0x59b405(0x1af)](_0x59b405(0x1d7)+_0x5e51b3)['set']({'password':_0x414eb3})[_0x59b405(0x22c)](()=>{const _0x1dc494=_0x59b405;alert(_0x1dc494(0x1be)),signupContainer[_0x1dc494(0x1c7)][_0x1dc494(0x1cf)]=_0x1dc494(0x236),loginContainer['style'][_0x1dc494(0x1cf)]=_0x1dc494(0x20d);})[_0x59b405(0x19d)](_0x4fe651=>{const _0x4bdf1f=_0x59b405;console[_0x4bdf1f(0x198)](_0x4bdf1f(0x22e),_0x4fe651),alert(_0x4bdf1f(0x1f9));});});}),signupButton['addEventListener'](_0x706553(0x1c0),function(){const _0x3ab0a1=_0x706553;loginContainer['style']['display']=_0x3ab0a1(0x236),signupContainer[_0x3ab0a1(0x1c7)][_0x3ab0a1(0x1cf)]='block';}),loginFromSignup['addEventListener']('click',function(){const _0x18e379=_0x706553;signupContainer[_0x18e379(0x1c7)]['display']=_0x18e379(0x236),loginContainer[_0x18e379(0x1c7)][_0x18e379(0x1cf)]=_0x18e379(0x20d);});function loginSuccess(_0x5e9d61){const _0xe96eef=_0x706553;currentUser=_0x5e9d61,loginContainer['style'][_0xe96eef(0x1cf)]=_0xe96eef(0x236),signupContainer[_0xe96eef(0x1c7)]['display']=_0xe96eef(0x236),dashboardContainer['style'][_0xe96eef(0x1cf)]=_0xe96eef(0x20d),userInfoElement[_0xe96eef(0x1bb)]=_0xe96eef(0x220)+_0x5e9d61,checkSubscriptionStatus()[_0xe96eef(0x22c)](_0xfa705c=>{_0xfa705c?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0xe96eef(0x19d)](_0x4a21a0=>{const _0x4b0081=_0xe96eef;console[_0x4b0081(0x198)](_0x4b0081(0x1b8),_0x4a21a0),alert('Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement.');});}function listenForSalesDataChanges(){const _0xeaa606=_0x706553;salesDataListener=database[_0xeaa606(0x1af)](_0xeaa606(0x196)+currentUser)['on'](_0xeaa606(0x1dd),_0x1c4457=>{const _0xd21fe3=_0xeaa606;salesData=[],_0x1c4457[_0xd21fe3(0x209)](_0x302c77=>{const _0x30c8e0=_0xd21fe3,_0x499e44=_0x302c77['val']();_0x499e44[_0x30c8e0(0x1fb)]=_0x302c77[_0x30c8e0(0x1fb)],_0x499e44[_0x30c8e0(0x192)]=(_0x499e44['V']*_0x499e44['PV'])[_0x30c8e0(0x232)](0x2),salesData['push'](_0x499e44);}),analysisSection[_0xd21fe3(0x1c7)][_0xd21fe3(0x1cf)]===_0xd21fe3(0x20d)&&updateAnalysis(salesData);});}document['getElementById']('product')['addEventListener'](_0x706553(0x19a),function(){const _0x2e81f6=_0x706553,_0x5b3781=this[_0x2e81f6(0x1dd)];database['ref'](_0x2e81f6(0x196)+currentUser)[_0x2e81f6(0x21d)](_0x2e81f6(0x1d4))[_0x2e81f6(0x204)](_0x5b3781)['limitToLast'](0x1)['once'](_0x2e81f6(0x1dd))['then'](_0x583a22=>{const _0x5585a2=_0x2e81f6;if(_0x583a22[_0x5585a2(0x1bf)]()){const _0x2325b1=Object[_0x5585a2(0x20a)](_0x583a22[_0x5585a2(0x1d2)]())[0x0];document['getElementById']('SI')['value']=_0x2325b1['SF']||0x0;}else document[_0x5585a2(0x1b9)]('SI')[_0x5585a2(0x1dd)]=0x0;}),updatePV();}),document[_0x706553(0x1b9)]('V')[_0x706553(0x20b)](_0x706553(0x20c),updateSF),document[_0x706553(0x1b9)](_0x706553(0x20e))[_0x706553(0x20b)](_0x706553(0x20c),updateSF);function updateSF(){const _0x4c4601=_0x706553,_0x2314e1=parseInt(document[_0x4c4601(0x1b9)]('SI')[_0x4c4601(0x1dd)])||0x0,_0x434b52=parseInt(document[_0x4c4601(0x1b9)](_0x4c4601(0x20e))[_0x4c4601(0x1dd)])||0x0,_0x316c2a=parseInt(document[_0x4c4601(0x1b9)]('V')[_0x4c4601(0x1dd)])||0x0;document['getElementById']('SF')[_0x4c4601(0x1dd)]=_0x2314e1+_0x434b52-_0x316c2a;}function updatePV(){const _0x3a0534=_0x706553,_0x146d3a=document[_0x3a0534(0x1b9)](_0x3a0534(0x1d4))[_0x3a0534(0x1dd)],_0x3c6ee2=ticketCategories[_0x146d3a]?.[_0x3a0534(0x19f)][0x0];document[_0x3a0534(0x1b9)]('PV')['value']=_0x3c6ee2||0x0;}salesForm[_0x706553(0x20b)](_0x706553(0x1fe),function(_0x473d73){const _0x142a02=_0x706553;_0x473d73[_0x142a02(0x187)]();const _0x2e4e3d={'dateTime':document[_0x142a02(0x1b9)](_0x142a02(0x1b6))['value'],'product':document['getElementById'](_0x142a02(0x1d4))[_0x142a02(0x1dd)],'SI':parseInt(document[_0x142a02(0x1b9)]('SI')[_0x142a02(0x1dd)])||0x0,'APP':parseInt(document[_0x142a02(0x1b9)](_0x142a02(0x20e))['value'])||0x0,'V':parseInt(document[_0x142a02(0x1b9)]('V')[_0x142a02(0x1dd)])||0x0,'SF':parseInt(document[_0x142a02(0x1b9)]('SF')[_0x142a02(0x1dd)])||0x0,'PV':parseFloat(document[_0x142a02(0x1b9)]('PV')[_0x142a02(0x1dd)])||0x0};database['ref']('sales/'+currentUser)[_0x142a02(0x1cb)](_0x2e4e3d)[_0x142a02(0x22c)](()=>{const _0x3e8e79=_0x142a02;updateTable(),updateStockTables(),updateAnalysis(),salesForm['reset'](),document['getElementById']('dateTime')['value']=new Date()[_0x3e8e79(0x1fa)]()['slice'](0x0,0x10);})[_0x142a02(0x19d)](_0x990708=>{const _0x5eb59b=_0x142a02;console['error'](_0x5eb59b(0x191),_0x990708),alert(_0x5eb59b(0x1cd));});});function updateTable(){const _0x402be2=_0x706553,_0x335093=salesTable[_0x402be2(0x1ea)](_0x402be2(0x1ed));_0x335093[_0x402be2(0x1b3)]='',database[_0x402be2(0x1af)]('sales/'+currentUser)[_0x402be2(0x1e8)](_0x402be2(0x1dd))[_0x402be2(0x22c)](_0x4e4586=>{salesData=[],_0x4e4586['forEach'](_0x114477=>{const _0x1bd34d=_0x109d,_0x1670e1=_0x114477[_0x1bd34d(0x1d2)]();_0x1670e1[_0x1bd34d(0x192)]=(_0x1670e1['V']*_0x1670e1['PV'])[_0x1bd34d(0x232)](0x2),salesData['push'](_0x1670e1);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x7737c1=_0x706553,_0x3ad28c=document[_0x7737c1(0x1b9)](_0x7737c1(0x1b2));_0x3ad28c[_0x7737c1(0x1ea)](_0x7737c1(0x1ed))[_0x7737c1(0x1b3)]='',database[_0x7737c1(0x1af)](_0x7737c1(0x196)+currentUser)[_0x7737c1(0x1e8)](_0x7737c1(0x1dd))[_0x7737c1(0x22c)](_0x4d6892=>{const _0x21c004=_0x7737c1,_0x44a35d={};_0x4d6892[_0x21c004(0x209)](_0xdcbf9=>{const _0x117da9=_0x21c004,_0x2bf7b8=_0xdcbf9[_0x117da9(0x1d2)]();(!_0x44a35d[_0x2bf7b8['product']]||new Date(_0x2bf7b8[_0x117da9(0x1b6)])>new Date(_0x44a35d[_0x2bf7b8[_0x117da9(0x1d4)]]['dateTime']))&&(_0x44a35d[_0x2bf7b8['product']]=_0x2bf7b8);}),Object[_0x21c004(0x20a)](_0x44a35d)[_0x21c004(0x209)](_0x313a3=>{const _0x4c7433=_0x21c004,_0x1798db=_0x3ad28c[_0x4c7433(0x1ea)]('tbody')[_0x4c7433(0x1b0)]();_0x1798db['insertCell'](0x0)['textContent']=_0x313a3['product'],_0x1798db[_0x4c7433(0x21a)](0x1)['textContent']=_0x313a3['SF'],_0x1798db[_0x4c7433(0x21a)](0x2)['textContent']=new Date(_0x313a3[_0x4c7433(0x1b6)])[_0x4c7433(0x18c)]();}),setupSort(_0x3ad28c);});}function exportToExcel(){const _0x15f3ea=_0x706553,_0x41b439=XLSX[_0x15f3ea(0x188)][_0x15f3ea(0x234)](),_0x326e05=XLSX['utils'][_0x15f3ea(0x223)](document[_0x15f3ea(0x1b9)]('salesTable'));XLSX[_0x15f3ea(0x188)][_0x15f3ea(0x19c)](_0x41b439,_0x326e05,_0x15f3ea(0x22f)),XLSX[_0x15f3ea(0x205)](_0x41b439,_0x15f3ea(0x1e3));}document[_0x706553(0x1b9)](_0x706553(0x18a))[_0x706553(0x20b)](_0x706553(0x1c0),exportToExcel);function deleteEntry(_0x4b719e){const _0x54250d=_0x706553;database[_0x54250d(0x1af)](_0x54250d(0x196)+currentUser+'/'+_0x4b719e)['once']('value')[_0x54250d(0x22c)](_0x42d648=>{const _0x320500=_0x54250d,_0x46e8ea=_0x42d648[_0x320500(0x1d2)]();return database[_0x320500(0x1af)](_0x320500(0x196)+currentUser+'/'+_0x4b719e)[_0x320500(0x206)]()[_0x320500(0x22c)](()=>{const _0x3982af=_0x320500;return console[_0x3982af(0x1b5)](_0x3982af(0x1d9)),updateStockAfterDeletion(_0x46e8ea);});})['then'](()=>{return updateTable();})[_0x54250d(0x22c)](()=>{updateStockTables(),updateAnalysis();})['catch'](_0x58bd04=>{const _0x320894=_0x54250d;console[_0x320894(0x198)](_0x320894(0x1a2),_0x58bd04);});}function updateStockAfterDeletion(_0x120db4){const _0x3871ab=_0x706553;return database[_0x3871ab(0x1af)](_0x3871ab(0x196)+currentUser)[_0x3871ab(0x21d)]('dateTime')[_0x3871ab(0x1f8)](_0x120db4[_0x3871ab(0x1b6)])[_0x3871ab(0x194)](0x2)['once'](_0x3871ab(0x1dd))[_0x3871ab(0x22c)](_0x192ab=>{const _0x74150c=_0x3871ab;let _0x4cf775=[];_0x192ab[_0x74150c(0x209)](_0x162251=>{const _0x2b17b4=_0x74150c;_0x4cf775[_0x2b17b4(0x1cb)]({'key':_0x162251['key'],..._0x162251[_0x2b17b4(0x1d2)]()});}),_0x4cf775[_0x74150c(0x23b)]((_0x638cfc,_0x2be08)=>new Date(_0x2be08[_0x74150c(0x1b6)])-new Date(_0x638cfc[_0x74150c(0x1b6)]));if(_0x4cf775['length']>0x1&&_0x4cf775[0x0][_0x74150c(0x1fb)]!==_0x120db4[_0x74150c(0x1fb)]){const _0x1be429=_0x4cf775[0x1],_0x11fcb3=_0x1be429['SF']+_0x120db4['V']-_0x120db4[_0x74150c(0x20e)];return database['ref'](_0x74150c(0x196)+currentUser+'/'+_0x1be429['key'])[_0x74150c(0x19b)]({'SF':_0x11fcb3});}return Promise[_0x74150c(0x199)]();});}function updateTable(){const _0x1ad04a=_0x706553;return database['ref'](_0x1ad04a(0x196)+currentUser)[_0x1ad04a(0x1e8)](_0x1ad04a(0x1dd))[_0x1ad04a(0x22c)](_0x258276=>{const _0x45efbe=_0x1ad04a;salesData=[],_0x258276[_0x45efbe(0x209)](_0x21db9e=>{const _0x4962d7=_0x45efbe,_0x4f5646=_0x21db9e[_0x4962d7(0x1d2)]();_0x4f5646['key']=_0x21db9e[_0x4962d7(0x1fb)],_0x4f5646[_0x4962d7(0x192)]=(_0x4f5646['V']*_0x4f5646['PV'])[_0x4962d7(0x232)](0x2),salesData['push'](_0x4f5646);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x5dd496){const _0x37d4dc=_0x706553,_0x2f211c=salesTable[_0x37d4dc(0x1ea)]('tbody');_0x2f211c['innerHTML']='',_0x5dd496[_0x37d4dc(0x209)](_0x38af5f=>{const _0x40e3ce=_0x37d4dc,_0x2aeaf3=_0x2f211c['insertRow']();_0x2aeaf3['dataset'][_0x40e3ce(0x1fb)]=_0x38af5f[_0x40e3ce(0x1fb)],_0x2aeaf3[_0x40e3ce(0x21a)](0x0)[_0x40e3ce(0x1bb)]=new Date(_0x38af5f[_0x40e3ce(0x1b6)])[_0x40e3ce(0x18c)](),_0x2aeaf3[_0x40e3ce(0x21a)](0x1)[_0x40e3ce(0x1bb)]=_0x38af5f[_0x40e3ce(0x1d4)],_0x2aeaf3[_0x40e3ce(0x21a)](0x2)['textContent']=_0x38af5f['SI'],_0x2aeaf3[_0x40e3ce(0x21a)](0x3)['textContent']=_0x38af5f[_0x40e3ce(0x20e)],_0x2aeaf3['insertCell'](0x4)['textContent']=_0x38af5f['V'],_0x2aeaf3[_0x40e3ce(0x21a)](0x5)[_0x40e3ce(0x1bb)]=_0x38af5f['SF'],_0x2aeaf3[_0x40e3ce(0x21a)](0x6)[_0x40e3ce(0x1bb)]=_0x38af5f['PV'],_0x2aeaf3[_0x40e3ce(0x21a)](0x7)[_0x40e3ce(0x1bb)]=_0x38af5f[_0x40e3ce(0x192)];}),addDeleteIcons();}function addDeleteIcons(){const _0x2687a3=_0x706553,_0x1e2680=salesTable[_0x2687a3(0x225)](_0x2687a3(0x18d));_0x1e2680[_0x2687a3(0x209)](_0x8f96b9=>{const _0x203c6f=_0x2687a3,_0x1e372b=document['createElement'](_0x203c6f(0x1a4));_0x1e372b[_0x203c6f(0x1b3)]='‚úñ',_0x1e372b[_0x203c6f(0x21f)]=_0x203c6f(0x1c1),_0x1e372b[_0x203c6f(0x1d5)]=_0x30ef8f=>{const _0x1b430c=_0x203c6f;_0x30ef8f[_0x1b430c(0x1ee)](),showConfirmDialog(_0x8f96b9[_0x1b430c(0x1f0)][_0x1b430c(0x1fb)]);},_0x8f96b9[_0x203c6f(0x1ea)](_0x203c6f(0x221))[_0x203c6f(0x238)](_0x1e372b);});}function showConfirmDialog(_0x48f8c6){const _0x3f98a0=_0x706553,_0x1ed2af=document['createElement'](_0x3f98a0(0x1f5));_0x1ed2af['className']=_0x3f98a0(0x1ec),_0x1ed2af['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>√ätes-vous\x20s√ªr\x20de\x20vouloir\x20supprimer\x20cette\x20entr√©e\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20',document[_0x3f98a0(0x213)][_0x3f98a0(0x238)](_0x1ed2af),document[_0x3f98a0(0x1b9)]('confirmDelete')['onclick']=()=>{const _0x300e54=_0x3f98a0;deleteEntry(_0x48f8c6),document[_0x300e54(0x213)][_0x300e54(0x201)](_0x1ed2af);},document['getElementById'](_0x3f98a0(0x18b))[_0x3f98a0(0x1d5)]=()=>{const _0x54378f=_0x3f98a0;document['body'][_0x54378f(0x201)](_0x1ed2af);};}function setupSearch(){const _0xa402d9=_0x706553,_0x2a5333=document[_0xa402d9(0x225)](_0xa402d9(0x1e5));_0x2a5333['forEach'](_0x4a5db5=>{const _0x404051=_0xa402d9;_0x4a5db5[_0x404051(0x20b)](_0x404051(0x20c),()=>{const _0x1694eb=_0x404051,_0x13f6ae=salesData[_0x1694eb(0x1a1)](_0x26f04e=>{const _0x56eaec=_0x1694eb;return Object[_0x56eaec(0x202)](_0x26f04e)[_0x56eaec(0x1e2)](_0x4b33c7=>{const _0x138463=_0x56eaec,_0x541bee=document[_0x138463(0x1b9)](_0x138463(0x233)+(_0x4b33c7[_0x138463(0x228)](0x0)['toUpperCase']()+_0x4b33c7[_0x138463(0x1a9)](0x1)))?.[_0x138463(0x1dd)][_0x138463(0x230)]()||'';return _0x26f04e[_0x4b33c7][_0x138463(0x189)]()[_0x138463(0x230)]()[_0x138463(0x203)](_0x541bee);});});renderTable(_0x13f6ae),updateAnalysis(_0x13f6ae);});});}function setupSort(_0xfb5b55){const _0x1348bb=_0x706553,_0x582a85=_0xfb5b55[_0x1348bb(0x225)]('th[data-sort]');_0x582a85[_0x1348bb(0x209)](_0x282af0=>{const _0x5334ed=_0x1348bb;_0x282af0[_0x5334ed(0x20b)](_0x5334ed(0x1c0),()=>{const _0x10130e=_0x5334ed,_0x1f88dc=_0x282af0[_0x10130e(0x1f0)]['sort'],_0x47ba2a=_0xfb5b55['id']===_0x10130e(0x1c2)?salesData:stockData;_0x47ba2a[_0x10130e(0x23b)]((_0x43e85a,_0x728ab3)=>{if(_0x43e85a[_0x1f88dc]<_0x728ab3[_0x1f88dc])return-0x1;if(_0x43e85a[_0x1f88dc]>_0x728ab3[_0x1f88dc])return 0x1;return 0x0;}),_0xfb5b55['id']===_0x10130e(0x1c2)?(renderTable(_0x47ba2a),updateAnalysis(_0x47ba2a)):renderStockTable(_0x47ba2a,_0xfb5b55);});});}function renderStockTable(_0x436c48,_0x3ea20c){const _0x440fc9=_0x706553,_0x10ee45=_0x3ea20c[_0x440fc9(0x1ea)](_0x440fc9(0x1ed));_0x10ee45[_0x440fc9(0x1b3)]='',_0x436c48[_0x440fc9(0x209)](_0x14ad11=>{const _0x3b31a7=_0x440fc9,_0x24dda9=_0x10ee45[_0x3b31a7(0x1b0)]();_0x24dda9[_0x3b31a7(0x21a)](0x0)[_0x3b31a7(0x1bb)]=_0x14ad11[_0x3b31a7(0x1d4)],_0x24dda9['insertCell'](0x1)[_0x3b31a7(0x1bb)]=_0x14ad11['SF'],_0x24dda9[_0x3b31a7(0x21a)](0x2)[_0x3b31a7(0x1bb)]=new Date(_0x14ad11[_0x3b31a7(0x1b6)])[_0x3b31a7(0x18c)]();});}function updateAnalysis(_0x2da261=salesData){const _0x453f0f=_0x706553;let _0x4b59b4=0x0,_0x494f31=0x0;const _0x47b360={'labels':[],'sales':[],'prices':[]};_0x2da261[_0x453f0f(0x209)](_0x4f4cbb=>{const _0x3000c2=_0x453f0f;_0x4b59b4+=_0x4f4cbb['V']*_0x4f4cbb['PV'],_0x494f31++,_0x47b360[_0x3000c2(0x1b7)][_0x3000c2(0x1cb)](new Date(_0x4f4cbb['dateTime'])[_0x3000c2(0x18c)]()),_0x47b360['sales']['push'](_0x4f4cbb['V']),_0x47b360[_0x3000c2(0x1d0)]['push'](_0x4f4cbb['PV']);});const _0x576412=_0x4b59b4/_0x494f31||0x0;totalSalesElement['textContent']=_0x453f0f(0x1ab)+_0x4b59b4['toFixed'](0x2)+'\x20FCFA',averageSalesElement[_0x453f0f(0x1bb)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x576412[_0x453f0f(0x232)](0x2)+_0x453f0f(0x1e1),updateChart(_0x47b360),updatePeriodAnalysis(_0x2da261);}function updateChart(_0x38c983){const _0x3764b8=_0x706553,_0x2bfc79=document['getElementById'](_0x3764b8(0x1a6))[_0x3764b8(0x1f4)]('2d');salesChart&&salesChart['destroy'](),salesChart=new Chart(_0x2bfc79,{'type':_0x3764b8(0x1ff),'data':{'labels':_0x38c983[_0x3764b8(0x1b7)],'datasets':[{'label':_0x3764b8(0x22f),'data':_0x38c983[_0x3764b8(0x1d3)],'borderColor':_0x3764b8(0x21c),'tension':0.1},{'label':'Prix\x20de\x20vente','data':_0x38c983[_0x3764b8(0x1d0)],'borderColor':_0x3764b8(0x1c3),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':_0x3764b8(0x1ae)},'ticks':{'color':'rgb(0,\x20255,\x20255)'}},'x':{'grid':{'color':_0x3764b8(0x1ae)},'ticks':{'color':_0x3764b8(0x21c)}}},'plugins':{'legend':{'labels':{'color':'rgb(0,\x20255,\x20255)'}}}}});}function updatePeriodAnalysis(_0x4211ce){const _0x327da4=_0x706553,_0x5273e3=new Date(),_0xf74f13=new Date(_0x5273e3[_0x327da4(0x1a7)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x2ab35b=new Date(_0x5273e3[_0x327da4(0x1a7)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x350272=new Date(_0x5273e3[_0x327da4(0x1a7)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x4b7e57=_0x4211ce['filter'](_0x5a9d09=>new Date(_0x5a9d09['dateTime'])>=_0xf74f13),_0x590165=_0x4211ce[_0x327da4(0x1a1)](_0xaedaac=>new Date(_0xaedaac['dateTime'])>=_0x2ab35b),_0x449a01=_0x4211ce[_0x327da4(0x1a1)](_0x23ede4=>new Date(_0x23ede4[_0x327da4(0x1b6)])>=_0x350272);updatePeriodStats(_0x4b7e57,_0x327da4(0x1e4)),updatePeriodStats(_0x590165,_0x327da4(0x237)),updatePeriodStats(_0x449a01,_0x327da4(0x1de));}function updatePeriodStats(_0x485ed3,_0x45b1e4){const _0x2222d0=_0x706553,_0x54881d=_0x485ed3[_0x2222d0(0x1ce)]((_0x21adb8,_0x38bb12)=>_0x21adb8+_0x38bb12['V']*_0x38bb12['PV'],0x0),_0x289b37=_0x54881d/_0x485ed3[_0x2222d0(0x217)]||0x0;document[_0x2222d0(0x1b9)](_0x45b1e4+_0x2222d0(0x18f))['textContent']=_0x2222d0(0x1ab)+_0x54881d[_0x2222d0(0x232)](0x2)+'\x20FCFA',document[_0x2222d0(0x1b9)](_0x45b1e4+'AverageSales')[_0x2222d0(0x1bb)]=_0x2222d0(0x1b4)+_0x289b37['toFixed'](0x2)+_0x2222d0(0x1e1);}toggleAnalysisButton['addEventListener'](_0x706553(0x1c0),function(){const _0x9598b1=_0x706553;analysisSection['style'][_0x9598b1(0x1cf)]===_0x9598b1(0x236)||analysisSection[_0x9598b1(0x1c7)][_0x9598b1(0x1cf)]===''?(analysisSection[_0x9598b1(0x1c7)][_0x9598b1(0x1cf)]=_0x9598b1(0x20d),salesDetailsSection[_0x9598b1(0x1c7)][_0x9598b1(0x1cf)]=_0x9598b1(0x236),this[_0x9598b1(0x1bb)]=_0x9598b1(0x1da),toggleSalesButton[_0x9598b1(0x1bb)]=_0x9598b1(0x1c4),updateAnalysis(salesData)):(analysisSection[_0x9598b1(0x1c7)][_0x9598b1(0x1cf)]=_0x9598b1(0x236),this[_0x9598b1(0x1bb)]='Analyse\x20des\x20ventes');}),toggleSalesButton[_0x706553(0x20b)](_0x706553(0x1c0),function(){const _0x41bae3=_0x706553;salesDetailsSection['style'][_0x41bae3(0x1cf)]==='none'||salesDetailsSection['style'][_0x41bae3(0x1cf)]===''?(salesDetailsSection[_0x41bae3(0x1c7)][_0x41bae3(0x1cf)]=_0x41bae3(0x20d),analysisSection[_0x41bae3(0x1c7)]['display']=_0x41bae3(0x236),this[_0x41bae3(0x1bb)]=_0x41bae3(0x1f1),toggleAnalysisButton['textContent']=_0x41bae3(0x185)):(salesDetailsSection[_0x41bae3(0x1c7)][_0x41bae3(0x1cf)]=_0x41bae3(0x236),this[_0x41bae3(0x1bb)]='D√©tail\x20des\x20ventes');});const themeToggle=document[_0x706553(0x1b9)](_0x706553(0x1a8)),root=document[_0x706553(0x1ad)];let isDarkTheme=!![];function setTheme(_0x263a14){const _0x1215f7=_0x706553;_0x263a14?(root[_0x1215f7(0x22a)][_0x1215f7(0x206)](_0x1215f7(0x1f3)),themeToggle[_0x1215f7(0x1bb)]='üåô',themeToggle['setAttribute'](_0x1215f7(0x208),_0x1215f7(0x200))):(root[_0x1215f7(0x22a)][_0x1215f7(0x231)](_0x1215f7(0x1f3)),themeToggle['textContent']='‚òÄÔ∏è',themeToggle[_0x1215f7(0x21e)](_0x1215f7(0x208),_0x1215f7(0x1df))),isDarkTheme=_0x263a14,localStorage[_0x1215f7(0x1a5)](_0x1215f7(0x235),_0x263a14);}function _0x109d(_0x538201,_0x1d59cc){const _0x287d39=_0x287d();return _0x109d=function(_0x109d28,_0x27bf64){_0x109d28=_0x109d28-0x185;let _0x44e6db=_0x287d39[_0x109d28];return _0x44e6db;},_0x109d(_0x538201,_0x1d59cc);}themeToggle[_0x706553(0x20b)](_0x706553(0x1c0),()=>{setTheme(!isDarkTheme);}),document[_0x706553(0x20b)]('DOMContentLoaded',()=>{const _0x43f8c9=_0x706553,_0x6888e3=localStorage[_0x43f8c9(0x212)](_0x43f8c9(0x235));_0x6888e3!==null?setTheme(_0x6888e3==='true'):setTheme(![]);}),document[_0x706553(0x1b9)]('filterStockDates')['addEventListener'](_0x706553(0x1c0),function(){const _0x19eff8=_0x706553,_0x204952=new Date(document[_0x19eff8(0x1b9)](_0x19eff8(0x19e))[_0x19eff8(0x1dd)]),_0x4cc78a=new Date(document[_0x19eff8(0x1b9)]('stockEndDate')[_0x19eff8(0x1dd)]);updateStockTables(_0x204952,_0x4cc78a);}),document[_0x706553(0x1b9)](_0x706553(0x1a0))[_0x706553(0x20b)](_0x706553(0x1c0),function(){const _0x452824=_0x706553,_0x2348a5=new Date(document['getElementById'](_0x452824(0x222))[_0x452824(0x1dd)]),_0x5c702f=new Date(document[_0x452824(0x1b9)]('salesEndDate')['value']),_0x208395=salesData['filter'](_0x40f3d9=>{const _0x483c74=_0x452824,_0x386275=new Date(_0x40f3d9[_0x483c74(0x1b6)]);return(!_0x2348a5||_0x386275>=_0x2348a5)&&(!_0x5c702f||_0x386275<=_0x5c702f);});renderTable(_0x208395),updateAnalysis(_0x208395);});function updateStockTables(_0x1b7db0,_0x3cd5a8){const _0x5cfc1f=_0x706553,_0x52776d=document[_0x5cfc1f(0x1b9)](_0x5cfc1f(0x1b2));_0x52776d['querySelector'](_0x5cfc1f(0x1ed))[_0x5cfc1f(0x1b3)]='',database[_0x5cfc1f(0x1af)](_0x5cfc1f(0x196)+currentUser)[_0x5cfc1f(0x1e8)](_0x5cfc1f(0x1dd))[_0x5cfc1f(0x22c)](_0x4074be=>{const _0x40661e=_0x5cfc1f,_0x439965={};_0x4074be['forEach'](_0x12b128=>{const _0x2da12c=_0x109d,_0x23a6d0=_0x12b128[_0x2da12c(0x1d2)](),_0x2faf90=new Date(_0x23a6d0['dateTime']);(!_0x1b7db0||_0x2faf90>=_0x1b7db0)&&(!_0x3cd5a8||_0x2faf90<=_0x3cd5a8)&&((!_0x439965[_0x23a6d0[_0x2da12c(0x1d4)]]||_0x2faf90>new Date(_0x439965[_0x23a6d0[_0x2da12c(0x1d4)]][_0x2da12c(0x1b6)]))&&(_0x439965[_0x23a6d0[_0x2da12c(0x1d4)]]=_0x23a6d0));}),Object[_0x40661e(0x20a)](_0x439965)[_0x40661e(0x209)](_0x2a9bd3=>{const _0xf6a06a=_0x40661e,_0x5847d8=_0x52776d['querySelector']('tbody')[_0xf6a06a(0x1b0)]();_0x5847d8[_0xf6a06a(0x21a)](0x0)[_0xf6a06a(0x1bb)]=_0x2a9bd3[_0xf6a06a(0x1d4)],_0x5847d8['insertCell'](0x1)['textContent']=_0x2a9bd3['SF'],_0x5847d8[_0xf6a06a(0x21a)](0x2)['textContent']=new Date(_0x2a9bd3[_0xf6a06a(0x1b6)])['toLocaleString']();}),setupSort(_0x52776d);});}function showSubscriptionRequiredModal(){const _0x1b65c3=_0x706553;document[_0x1b65c3(0x1b9)](_0x1b65c3(0x229))[_0x1b65c3(0x1c7)][_0x1b65c3(0x1cf)]=_0x1b65c3(0x1c9);}function hideSubscriptionRequiredModal(){const _0x3ea852=_0x706553;document[_0x3ea852(0x1b9)](_0x3ea852(0x229))['style'][_0x3ea852(0x1cf)]=_0x3ea852(0x236);}function redirectToSubscription(){const _0x46ef06=_0x706553;window[_0x46ef06(0x239)][_0x46ef06(0x1dc)]=_0x46ef06(0x1ba);}async function checkSubscriptionStatus(){const _0x36c68b=_0x706553;try{const _0xfc6603=await adminRef[_0x36c68b(0x1e8)](_0x36c68b(0x1dd)),_0x46fb06=_0xfc6603[_0x36c68b(0x1d2)](),_0x11b6ab=new Date();if(_0x46fb06&&_0x46fb06[_0x36c68b(0x23a)]===_0x36c68b(0x1bc)){const _0x1fd4eb=new Date(_0x46fb06[_0x36c68b(0x1f7)]);return _0x1fd4eb>=_0x11b6ab?!![]:(await adminRef[_0x36c68b(0x19b)]({'status':_0x36c68b(0x214)}),![]);}else return![];}catch(_0xa3e148){console[_0x36c68b(0x198)](_0x36c68b(0x1b8),_0xa3e148);throw _0xa3e148;}}updateTable(),updateStockTables(),analysisSection[_0x706553(0x1c7)][_0x706553(0x1cf)]=_0x706553(0x236),salesDetailsSection[_0x706553(0x1c7)][_0x706553(0x1cf)]=_0x706553(0x236),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x706553(0x212)]('darkTheme');savedTheme!==null&&setTheme(savedTheme===_0x706553(0x193));