const _0x324131=_0x50f3;(function(_0x2fe6e1,_0x3ebb4d){const _0x19a005=_0x50f3,_0x562830=_0x2fe6e1();while(!![]){try{const _0x2645e3=parseInt(_0x19a005(0x23c))/0x1*(-parseInt(_0x19a005(0x1cd))/0x2)+parseInt(_0x19a005(0x1df))/0x3+parseInt(_0x19a005(0x226))/0x4+-parseInt(_0x19a005(0x1a4))/0x5*(parseInt(_0x19a005(0x1ad))/0x6)+-parseInt(_0x19a005(0x237))/0x7*(-parseInt(_0x19a005(0x1cc))/0x8)+parseInt(_0x19a005(0x1ef))/0x9*(-parseInt(_0x19a005(0x233))/0xa)+-parseInt(_0x19a005(0x217))/0xb*(parseInt(_0x19a005(0x1ce))/0xc);if(_0x2645e3===_0x3ebb4d)break;else _0x562830['push'](_0x562830['shift']());}catch(_0x5444ef){_0x562830['push'](_0x562830['shift']());}}}(_0x3d20,0xc3b5f));const firebaseConfig={'apiKey':_0x324131(0x1ed),'authDomain':'fnmcwifi.firebaseapp.com','databaseURL':_0x324131(0x1a7),'projectId':_0x324131(0x1c9),'storageBucket':_0x324131(0x1ff),'messagingSenderId':_0x324131(0x1c5),'appId':_0x324131(0x1c0),'measurementId':_0x324131(0x1d0)};firebase[_0x324131(0x231)](firebaseConfig);const database=firebase[_0x324131(0x1f9)](),adminRef=database[_0x324131(0x211)](_0x324131(0x228)),loginForm=document[_0x324131(0x20a)](_0x324131(0x21b)),signupForm=document[_0x324131(0x20a)](_0x324131(0x195)),loginContainer=document[_0x324131(0x20a)](_0x324131(0x215)),signupContainer=document[_0x324131(0x20a)](_0x324131(0x19a)),dashboardContainer=document[_0x324131(0x20a)](_0x324131(0x201)),salesForm=document[_0x324131(0x20a)](_0x324131(0x1eb)),salesTable=document[_0x324131(0x20a)](_0x324131(0x1ca)),totalSalesElement=document[_0x324131(0x20a)]('totalSales'),averageSalesElement=document[_0x324131(0x20a)](_0x324131(0x1e4)),userInfoElement=document[_0x324131(0x20a)]('userInfo'),toggleAnalysisButton=document['getElementById']('toggleAnalysisButton'),toggleSalesButton=document[_0x324131(0x20a)]('toggleSalesButton'),analysisSection=document[_0x324131(0x20a)](_0x324131(0x1f1)),salesDetailsSection=document[_0x324131(0x20a)](_0x324131(0x1c2)),signupButton=document['getElementById'](_0x324131(0x1f5)),loginFromSignup=document['getElementById'](_0x324131(0x1fe)),productSelect=document['getElementById'](_0x324131(0x232)),stockTableGlobal=document[_0x324131(0x20a)]('stockTableGlobal');let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x324131(0x20a)](_0x324131(0x199))[_0x324131(0x200)]=new Date()[_0x324131(0x1db)]()[_0x324131(0x213)](0x0,0x10);function fetchTicketCategories(){const _0x482e36=_0x324131;database[_0x482e36(0x211)](_0x482e36(0x1d4))[_0x482e36(0x21a)](_0x482e36(0x200))[_0x482e36(0x1d5)](_0x4b66ac=>{const _0x5f2906=_0x482e36;ticketCategories=_0x4b66ac[_0x5f2906(0x203)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x5e00a5=_0x324131;productSelect[_0x5e00a5(0x21f)]=_0x5e00a5(0x19c);for(const _0xa8baa in ticketCategories){const _0x2951c7=ticketCategories[_0xa8baa][_0x5e00a5(0x1be)][0x0],_0x18ee4f=document[_0x5e00a5(0x1fd)]('option');_0x18ee4f['value']=_0xa8baa,_0x18ee4f[_0x5e00a5(0x1f6)]=_0xa8baa+'\x20('+_0x2951c7+_0x5e00a5(0x1dc),productSelect[_0x5e00a5(0x214)](_0x18ee4f);}}fetchTicketCategories(),loginForm[_0x324131(0x1ba)]('submit',function(_0x16cd54){const _0xadca9f=_0x324131;_0x16cd54['preventDefault']();const _0x12a302=document[_0xadca9f(0x20a)](_0xadca9f(0x1b8))[_0xadca9f(0x200)],_0x40328d=document[_0xadca9f(0x20a)](_0xadca9f(0x212))['value'];database[_0xadca9f(0x211)](_0xadca9f(0x20f)+_0x12a302)['once'](_0xadca9f(0x200))[_0xadca9f(0x1d5)](_0x521890=>{const _0x55fb44=_0xadca9f;_0x521890[_0x55fb44(0x197)]()?_0x521890[_0x55fb44(0x203)]()[_0x55fb44(0x212)]===_0x40328d?loginSuccess(_0x12a302):alert(_0x55fb44(0x1b2)):alert(_0x55fb44(0x1d1));});}),signupForm[_0x324131(0x1ba)](_0x324131(0x19e),function(_0x180da7){const _0x241a2a=_0x324131;_0x180da7[_0x241a2a(0x21e)]();const _0x3271d2=document['getElementById']('signupUsername')[_0x241a2a(0x200)],_0x2badc6=document[_0x241a2a(0x20a)]('signupPassword')['value'];database[_0x241a2a(0x211)]('users/'+_0x3271d2)[_0x241a2a(0x21a)]('value')[_0x241a2a(0x1d5)](_0x45da40=>{const _0x118a86=_0x241a2a;_0x45da40[_0x118a86(0x197)]()?alert('Ce\x20nom\x20d\x27utilisateur\x20est\x20déjà\x20utilisé.'):database[_0x118a86(0x211)](_0x118a86(0x20f)+_0x3271d2)['set']({'password':_0x2badc6})[_0x118a86(0x1d5)](()=>{const _0x48fe75=_0x118a86;alert('Inscription\x20réussie\x20!\x20Connectez-vous.'),signupContainer['style'][_0x48fe75(0x22e)]=_0x48fe75(0x1fb),loginContainer['style'][_0x48fe75(0x22e)]='block';})[_0x118a86(0x1f7)](_0x6a5f1b=>{const _0x298abf=_0x118a86;console[_0x298abf(0x205)](_0x298abf(0x1d2),_0x6a5f1b),alert(_0x298abf(0x1da));});});}),signupButton[_0x324131(0x1ba)](_0x324131(0x22a),function(){const _0x2a86c8=_0x324131;loginContainer['style'][_0x2a86c8(0x22e)]=_0x2a86c8(0x1fb),signupContainer[_0x2a86c8(0x227)][_0x2a86c8(0x22e)]=_0x2a86c8(0x1a9);}),loginFromSignup[_0x324131(0x1ba)](_0x324131(0x22a),function(){const _0x3faf13=_0x324131;signupContainer[_0x3faf13(0x227)][_0x3faf13(0x22e)]='none',loginContainer[_0x3faf13(0x227)][_0x3faf13(0x22e)]=_0x3faf13(0x1a9);});function loginSuccess(_0x511dfa){const _0x23be9d=_0x324131;currentUser=_0x511dfa,loginContainer[_0x23be9d(0x227)][_0x23be9d(0x22e)]=_0x23be9d(0x1fb),signupContainer[_0x23be9d(0x227)][_0x23be9d(0x22e)]=_0x23be9d(0x1fb),dashboardContainer[_0x23be9d(0x227)][_0x23be9d(0x22e)]=_0x23be9d(0x1a9),userInfoElement[_0x23be9d(0x1f6)]='Utilisateur:\x20'+_0x511dfa,checkSubscriptionStatus()['then'](_0x71c5b1=>{_0x71c5b1?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})['catch'](_0x56597c=>{const _0x5b58f0=_0x23be9d;console[_0x5b58f0(0x205)](_0x5b58f0(0x1c3),_0x56597c),alert('Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.');});}function listenForSalesDataChanges(){const _0x37859f=_0x324131;salesDataListener=database[_0x37859f(0x211)](_0x37859f(0x1a6)+currentUser)['on']('value',_0x25ea4a=>{const _0x17821d=_0x37859f;salesData=[],_0x25ea4a[_0x17821d(0x1e6)](_0x4201f9=>{const _0x10cbfa=_0x17821d,_0x598273=_0x4201f9[_0x10cbfa(0x203)]();_0x598273['key']=_0x4201f9['key'],_0x598273['total']=(_0x598273['V']*_0x598273['PV'])[_0x10cbfa(0x1b1)](0x2),salesData['push'](_0x598273);}),analysisSection[_0x17821d(0x227)][_0x17821d(0x22e)]===_0x17821d(0x1a9)&&updateAnalysis(salesData);});}document['getElementById'](_0x324131(0x232))[_0x324131(0x1ba)](_0x324131(0x235),function(){const _0x5ee73b=_0x324131,_0x3ee9db=this[_0x5ee73b(0x200)];database[_0x5ee73b(0x211)](_0x5ee73b(0x1a6)+currentUser)[_0x5ee73b(0x223)](_0x5ee73b(0x232))[_0x5ee73b(0x1bb)](_0x3ee9db)[_0x5ee73b(0x1ac)](0x1)[_0x5ee73b(0x21a)]('value')[_0x5ee73b(0x1d5)](_0x3bfa7c=>{const _0x32496d=_0x5ee73b;if(_0x3bfa7c[_0x32496d(0x197)]()){const _0x41bf00=Object[_0x32496d(0x1d7)](_0x3bfa7c[_0x32496d(0x203)]())[0x0];document[_0x32496d(0x20a)]('SI')['value']=_0x41bf00['SF']||0x0;}else document[_0x32496d(0x20a)]('SI')['value']=0x0;}),updatePV();}),document['getElementById']('V')[_0x324131(0x1ba)](_0x324131(0x209),updateSF),document[_0x324131(0x20a)](_0x324131(0x1d3))['addEventListener']('input',updateSF);function updateSF(){const _0x4b75e0=_0x324131,_0x1d3b32=parseInt(document[_0x4b75e0(0x20a)]('SI')[_0x4b75e0(0x200)])||0x0,_0x2fdca3=parseInt(document[_0x4b75e0(0x20a)](_0x4b75e0(0x1d3))[_0x4b75e0(0x200)])||0x0,_0x46c510=parseInt(document[_0x4b75e0(0x20a)]('V')[_0x4b75e0(0x200)])||0x0;document['getElementById']('SF')[_0x4b75e0(0x200)]=_0x1d3b32+_0x2fdca3-_0x46c510;}function updatePV(){const _0x5a774f=_0x324131,_0x3eace6=document['getElementById'](_0x5a774f(0x232))[_0x5a774f(0x200)],_0x2c4b84=ticketCategories[_0x3eace6]?.['prix'][0x0];document[_0x5a774f(0x20a)]('PV')['value']=_0x2c4b84||0x0;}salesForm[_0x324131(0x1ba)](_0x324131(0x19e),function(_0x3ae617){const _0x140456=_0x324131;_0x3ae617['preventDefault']();const _0x55e24d={'dateTime':document[_0x140456(0x20a)]('dateTime')[_0x140456(0x200)],'product':document[_0x140456(0x20a)]('product')[_0x140456(0x200)],'SI':parseInt(document[_0x140456(0x20a)]('SI')[_0x140456(0x200)])||0x0,'APP':parseInt(document[_0x140456(0x20a)](_0x140456(0x1d3))[_0x140456(0x200)])||0x0,'V':parseInt(document[_0x140456(0x20a)]('V')[_0x140456(0x200)])||0x0,'SF':parseInt(document['getElementById']('SF')[_0x140456(0x200)])||0x0,'PV':parseFloat(document[_0x140456(0x20a)]('PV')[_0x140456(0x200)])||0x0};database[_0x140456(0x211)]('sales/'+currentUser)['push'](_0x55e24d)[_0x140456(0x1d5)](()=>{const _0x3ac3ca=_0x140456;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x3ac3ca(0x1f8)](),document[_0x3ac3ca(0x20a)](_0x3ac3ca(0x199))[_0x3ac3ca(0x200)]=new Date()[_0x3ac3ca(0x1db)]()[_0x3ac3ca(0x213)](0x0,0x10);})['catch'](_0x36b613=>{const _0x53c442=_0x140456;console[_0x53c442(0x205)](_0x53c442(0x1c6),_0x36b613),alert(_0x53c442(0x22f));});});function updateTable(){const _0x44d831=_0x324131,_0x1d754e=salesTable[_0x44d831(0x1c4)](_0x44d831(0x1a8));_0x1d754e[_0x44d831(0x21f)]='',database[_0x44d831(0x211)](_0x44d831(0x1a6)+currentUser)[_0x44d831(0x21a)](_0x44d831(0x200))[_0x44d831(0x1d5)](_0x3a33fa=>{const _0x53f1c3=_0x44d831;salesData=[],_0x3a33fa[_0x53f1c3(0x1e6)](_0x1242dd=>{const _0x4d3e3d=_0x53f1c3,_0x482d2d=_0x1242dd['val']();_0x482d2d[_0x4d3e3d(0x225)]=(_0x482d2d['V']*_0x482d2d['PV'])['toFixed'](0x2),salesData[_0x4d3e3d(0x224)](_0x482d2d);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x14b415=_0x324131,_0x4f183=document['getElementById']('stockTableGlobal');_0x4f183[_0x14b415(0x1c4)]('tbody')[_0x14b415(0x21f)]='',database[_0x14b415(0x211)]('sales/'+currentUser)[_0x14b415(0x21a)](_0x14b415(0x200))[_0x14b415(0x1d5)](_0x2aa86c=>{const _0x5cb05b=_0x14b415,_0x16afa4={};_0x2aa86c[_0x5cb05b(0x1e6)](_0x4fc31b=>{const _0x1fc491=_0x5cb05b,_0x49eae9=_0x4fc31b['val']();(!_0x16afa4[_0x49eae9[_0x1fc491(0x232)]]||new Date(_0x49eae9[_0x1fc491(0x199)])>new Date(_0x16afa4[_0x49eae9[_0x1fc491(0x232)]]['dateTime']))&&(_0x16afa4[_0x49eae9[_0x1fc491(0x232)]]=_0x49eae9);}),Object['values'](_0x16afa4)[_0x5cb05b(0x1e6)](_0x32e9fe=>{const _0x25f396=_0x5cb05b,_0x590c49=_0x4f183[_0x25f396(0x1c4)](_0x25f396(0x1a8))[_0x25f396(0x1d6)]();_0x590c49[_0x25f396(0x236)](0x0)['textContent']=_0x32e9fe['product'],_0x590c49[_0x25f396(0x236)](0x1)[_0x25f396(0x1f6)]=_0x32e9fe['SF'],_0x590c49[_0x25f396(0x236)](0x2)[_0x25f396(0x1f6)]=new Date(_0x32e9fe['dateTime'])[_0x25f396(0x1e8)]();}),setupSort(_0x4f183);});}function exportToExcel(){const _0x17bfae=_0x324131,_0x3ba756=XLSX[_0x17bfae(0x202)]['book_new'](),_0xe36646=XLSX[_0x17bfae(0x202)][_0x17bfae(0x218)](document[_0x17bfae(0x20a)](_0x17bfae(0x1ca)));XLSX['utils']['book_append_sheet'](_0x3ba756,_0xe36646,_0x17bfae(0x1e1)),XLSX[_0x17bfae(0x19f)](_0x3ba756,_0x17bfae(0x1a5));}document['getElementById']('exportExcel')[_0x324131(0x1ba)]('click',exportToExcel);function deleteEntry(_0x1c90b2){const _0x3acfd3=_0x324131;database[_0x3acfd3(0x211)](_0x3acfd3(0x1a6)+currentUser+'/'+_0x1c90b2)['once'](_0x3acfd3(0x200))['then'](_0x6ac94b=>{const _0x41a97=_0x3acfd3,_0x2aae76=_0x6ac94b[_0x41a97(0x203)]();return database['ref']('sales/'+currentUser+'/'+_0x1c90b2)[_0x41a97(0x20b)]()[_0x41a97(0x1d5)](()=>{const _0x436937=_0x41a97;return console[_0x436937(0x23a)](_0x436937(0x208)),updateStockAfterDeletion(_0x2aae76);});})[_0x3acfd3(0x1d5)](()=>{return updateTable();})[_0x3acfd3(0x1d5)](()=>{updateStockTables(),updateAnalysis();})[_0x3acfd3(0x1f7)](_0x1cfd52=>{const _0x3f8540=_0x3acfd3;console[_0x3f8540(0x205)]('Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrée:',_0x1cfd52);});}function updateStockAfterDeletion(_0x54ed02){const _0x108927=_0x324131;return database[_0x108927(0x211)](_0x108927(0x1a6)+currentUser)[_0x108927(0x223)](_0x108927(0x199))['endAt'](_0x54ed02['dateTime'])['limitToLast'](0x2)['once'](_0x108927(0x200))[_0x108927(0x1d5)](_0x42570c=>{const _0x54e8f0=_0x108927;let _0x146c4b=[];_0x42570c[_0x54e8f0(0x1e6)](_0x551f92=>{const _0x5052ae=_0x54e8f0;_0x146c4b[_0x5052ae(0x224)]({'key':_0x551f92[_0x5052ae(0x1a1)],..._0x551f92['val']()});}),_0x146c4b[_0x54e8f0(0x1e9)]((_0x51df01,_0x3d6a36)=>new Date(_0x3d6a36[_0x54e8f0(0x199)])-new Date(_0x51df01[_0x54e8f0(0x199)]));if(_0x146c4b['length']>0x1&&_0x146c4b[0x0]['key']!==_0x54ed02['key']){const _0x11a721=_0x146c4b[0x1],_0x209b79=_0x11a721['SF']+_0x54ed02['V']-_0x54ed02['APP'];return database['ref'](_0x54e8f0(0x1a6)+currentUser+'/'+_0x11a721[_0x54e8f0(0x1a1)])[_0x54e8f0(0x1e7)]({'SF':_0x209b79});}return Promise[_0x54e8f0(0x222)]();});}function updateTable(){const _0x1651e5=_0x324131;return database['ref'](_0x1651e5(0x1a6)+currentUser)['once'](_0x1651e5(0x200))[_0x1651e5(0x1d5)](_0x152145=>{const _0x35d880=_0x1651e5;salesData=[],_0x152145[_0x35d880(0x1e6)](_0x1cd03d=>{const _0x464ad8=_0x35d880,_0x18bd8d=_0x1cd03d['val']();_0x18bd8d[_0x464ad8(0x1a1)]=_0x1cd03d['key'],_0x18bd8d[_0x464ad8(0x225)]=(_0x18bd8d['V']*_0x18bd8d['PV'])[_0x464ad8(0x1b1)](0x2),salesData[_0x464ad8(0x224)](_0x18bd8d);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x3cc7ff){const _0x8caff0=_0x324131,_0x3ddbc6=salesTable[_0x8caff0(0x1c4)](_0x8caff0(0x1a8));_0x3ddbc6[_0x8caff0(0x21f)]='',_0x3cc7ff[_0x8caff0(0x1e6)](_0x492bd8=>{const _0x5242e9=_0x8caff0,_0x5cbf68=_0x3ddbc6['insertRow']();_0x5cbf68['dataset'][_0x5242e9(0x1a1)]=_0x492bd8[_0x5242e9(0x1a1)],_0x5cbf68[_0x5242e9(0x236)](0x0)[_0x5242e9(0x1f6)]=new Date(_0x492bd8[_0x5242e9(0x199)])['toLocaleString'](),_0x5cbf68['insertCell'](0x1)[_0x5242e9(0x1f6)]=_0x492bd8[_0x5242e9(0x232)],_0x5cbf68[_0x5242e9(0x236)](0x2)[_0x5242e9(0x1f6)]=_0x492bd8['SI'],_0x5cbf68[_0x5242e9(0x236)](0x3)[_0x5242e9(0x1f6)]=_0x492bd8[_0x5242e9(0x1d3)],_0x5cbf68['insertCell'](0x4)[_0x5242e9(0x1f6)]=_0x492bd8['V'],_0x5cbf68[_0x5242e9(0x236)](0x5)[_0x5242e9(0x1f6)]=_0x492bd8['SF'],_0x5cbf68['insertCell'](0x6)[_0x5242e9(0x1f6)]=_0x492bd8['PV'],_0x5cbf68[_0x5242e9(0x236)](0x7)[_0x5242e9(0x1f6)]=_0x492bd8[_0x5242e9(0x225)];}),addDeleteIcons();}function addDeleteIcons(){const _0x479a76=_0x324131,_0x4b781c=salesTable[_0x479a76(0x206)](_0x479a76(0x1aa));_0x4b781c['forEach'](_0x528191=>{const _0x48e7ad=_0x479a76,_0x31aa00=document[_0x48e7ad(0x1fd)]('span');_0x31aa00['innerHTML']='✖',_0x31aa00[_0x48e7ad(0x1ae)]=_0x48e7ad(0x20e),_0x31aa00[_0x48e7ad(0x1e2)]=_0x16129b=>{const _0xa44535=_0x48e7ad;_0x16129b[_0xa44535(0x1f0)](),showConfirmDialog(_0x528191[_0xa44535(0x19b)][_0xa44535(0x1a1)]);},_0x528191['querySelector'](_0x48e7ad(0x20c))['appendChild'](_0x31aa00);});}function showConfirmDialog(_0x38ed9a){const _0x3450db=_0x324131,_0xce14f7=document[_0x3450db(0x1fd)]('div');_0xce14f7[_0x3450db(0x1ae)]=_0x3450db(0x229),_0xce14f7[_0x3450db(0x21f)]=_0x3450db(0x234),document['body']['appendChild'](_0xce14f7),document[_0x3450db(0x20a)]('confirmDelete')[_0x3450db(0x1e2)]=()=>{const _0x1f3bb4=_0x3450db;deleteEntry(_0x38ed9a),document[_0x1f3bb4(0x1fa)][_0x1f3bb4(0x1e0)](_0xce14f7);},document['getElementById'](_0x3450db(0x23b))['onclick']=()=>{const _0x14b678=_0x3450db;document[_0x14b678(0x1fa)][_0x14b678(0x1e0)](_0xce14f7);};}function setupSearch(){const _0x336bf5=_0x324131,_0x2f3e03=document[_0x336bf5(0x206)](_0x336bf5(0x1b9));_0x2f3e03[_0x336bf5(0x1e6)](_0x2c31c9=>{const _0x184d9d=_0x336bf5;_0x2c31c9[_0x184d9d(0x1ba)](_0x184d9d(0x209),()=>{const _0x25bd41=salesData['filter'](_0x8e1ec8=>{const _0x5304bd=_0x50f3;return Object[_0x5304bd(0x1c8)](_0x8e1ec8)[_0x5304bd(0x1f2)](_0xfcf241=>{const _0x356750=_0x5304bd,_0x2fbfe9=document[_0x356750(0x20a)](_0x356750(0x22b)+(_0xfcf241[_0x356750(0x1f3)](0x0)['toUpperCase']()+_0xfcf241['slice'](0x1)))?.[_0x356750(0x200)][_0x356750(0x210)]()||'';return _0x8e1ec8[_0xfcf241]['toString']()['toLowerCase']()[_0x356750(0x1c7)](_0x2fbfe9);});});renderTable(_0x25bd41),updateAnalysis(_0x25bd41);});});}function setupSort(_0xeff916){const _0x110c35=_0x324131,_0x5a420d=_0xeff916[_0x110c35(0x206)](_0x110c35(0x1de));_0x5a420d[_0x110c35(0x1e6)](_0xec7716=>{const _0x3d9c45=_0x110c35;_0xec7716[_0x3d9c45(0x1ba)](_0x3d9c45(0x22a),()=>{const _0x257447=_0x3d9c45,_0x419a0a=_0xec7716[_0x257447(0x19b)][_0x257447(0x1e9)],_0x7c529a=_0xeff916['id']==='salesTable'?salesData:stockData;_0x7c529a['sort']((_0x4e5db8,_0x3d7cdd)=>{if(_0x4e5db8[_0x419a0a]<_0x3d7cdd[_0x419a0a])return-0x1;if(_0x4e5db8[_0x419a0a]>_0x3d7cdd[_0x419a0a])return 0x1;return 0x0;}),_0xeff916['id']==='salesTable'?(renderTable(_0x7c529a),updateAnalysis(_0x7c529a)):renderStockTable(_0x7c529a,_0xeff916);});});}function renderStockTable(_0xeeb378,_0x935d42){const _0x32bef6=_0x324131,_0x74bf03=_0x935d42[_0x32bef6(0x1c4)](_0x32bef6(0x1a8));_0x74bf03['innerHTML']='',_0xeeb378[_0x32bef6(0x1e6)](_0x5f258d=>{const _0x36b0ed=_0x32bef6,_0x57e467=_0x74bf03[_0x36b0ed(0x1d6)]();_0x57e467[_0x36b0ed(0x236)](0x0)[_0x36b0ed(0x1f6)]=_0x5f258d[_0x36b0ed(0x232)],_0x57e467[_0x36b0ed(0x236)](0x1)['textContent']=_0x5f258d['SF'],_0x57e467['insertCell'](0x2)[_0x36b0ed(0x1f6)]=new Date(_0x5f258d[_0x36b0ed(0x199)])[_0x36b0ed(0x1e8)]();});}function updateAnalysis(_0x3c784c=salesData){const _0x57d1b0=_0x324131;let _0x45d619=0x0,_0x2b6129=0x0;const _0x188a33={'labels':[],'sales':[],'prices':[]};_0x3c784c['forEach'](_0x581184=>{const _0x382068=_0x50f3;_0x45d619+=_0x581184['V']*_0x581184['PV'],_0x2b6129++,_0x188a33[_0x382068(0x1b4)][_0x382068(0x224)](new Date(_0x581184[_0x382068(0x199)])[_0x382068(0x1e8)]()),_0x188a33[_0x382068(0x1a2)][_0x382068(0x224)](_0x581184['V']),_0x188a33['prices'][_0x382068(0x224)](_0x581184['PV']);});const _0x2114ca=_0x45d619/_0x2b6129||0x0;totalSalesElement[_0x57d1b0(0x1f6)]=_0x57d1b0(0x196)+_0x45d619[_0x57d1b0(0x1b1)](0x2)+_0x57d1b0(0x1bc),averageSalesElement[_0x57d1b0(0x1f6)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x2114ca['toFixed'](0x2)+_0x57d1b0(0x1bc),updateChart(_0x188a33),updatePeriodAnalysis(_0x3c784c);}function _0x3d20(){const _0x4160c0=['#searchInputs\x20input','addEventListener','equalTo','\x20FCFA','AverageSales','prix','rgb(0,\x20255,\x20255)','1:544746759759:web:f28f7e0ba691e007122c3a','month','salesDetailsSection','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','querySelector','544746759759','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée\x20:','includes','keys','fnmcwifi','salesTable','add','976YoumzW','2BzNlZR','612bxPXnx','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','G-GC6MV1MJKR','Utilisateur\x20introuvable','Error\x20creating\x20user:','APP','TicketsTotal','then','insertRow','values','week','location','Erreur\x20lors\x20de\x20la\x20création\x20du\x20compte','toISOString','\x20FCFA)','Masquer\x20le\x20détail\x20des\x20ventes','th[data-sort]','2666163kUFjul','removeChild','Ventes','onclick','aria-label','averageSales','stockStartDate','forEach','update','toLocaleString','sort','endDate','salesForm','Activer\x20le\x20mode\x20sombre','AIzaSyA3RqnjgqrZE8M3DYRE-LvX2DDDOLfVEsI','light-theme','9NTFWGY','stopPropagation','analysisSection','every','charAt','reduce','signupButton','textContent','catch','reset','database','body','none','active','createElement','loginFromSignup','fnmcwifi.firebasestorage.app','value','dashboardContainer','utils','val','length','error','querySelectorAll','index.html','Entrée\x20supprimée\x20avec\x20succès','input','getElementById','remove','td:first-child','subscriptionRequiredModal','delete-icon','users/','toLowerCase','ref','password','slice','appendChild','loginContainer','getItem','106711droiPS','table_to_sheet','filterSalesDates','once','loginForm','rgb(255,\x2099,\x20132)','line','preventDefault','innerHTML','darkTheme','salesChart','resolve','orderByChild','push','total','2832260auzuUV','style','admin/subscription','confirm-dialog','click','search','stockEndDate','theme-toggle','display','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée.','salesStartDate','initializeApp','product','1068230OLUtwm','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20entrée\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','change','insertCell','29687VRlQuF','rgba(255,\x20255,\x20255,\x200.1)','getTime','log','cancelDelete','258499PFfJFc','flex','signupForm','Total\x20des\x20ventes:\x20','exists','Détail\x20des\x20ventes','dateTime','signupContainer','dataset','<option\x20value=\x22\x22>Sélectionner\x20un\x20produit</option>','Activer\x20le\x20mode\x20clair','submit','writeFile','setItem','key','sales','threeMonth','45escAjV','ventes_wifi_zone.xlsx','sales/','https://fnmcwifi-default-rtdb.firebaseio.com','tbody','block','tbody\x20tr','DOMContentLoaded','limitToLast','301656UPcKvI','className','destroy','filter','toFixed','Mot\x20de\x20passe\x20incorrect','getContext','labels','href','Analyse\x20des\x20ventes','classList','username'];_0x3d20=function(){return _0x4160c0;};return _0x3d20();}function updateChart(_0x2dbd20){const _0xe9b06=_0x324131,_0x2e0c16=document[_0xe9b06(0x20a)](_0xe9b06(0x221))[_0xe9b06(0x1b3)]('2d');salesChart&&salesChart[_0xe9b06(0x1af)](),salesChart=new Chart(_0x2e0c16,{'type':_0xe9b06(0x21d),'data':{'labels':_0x2dbd20['labels'],'datasets':[{'label':'Ventes','data':_0x2dbd20[_0xe9b06(0x1a2)],'borderColor':_0xe9b06(0x1bf),'tension':0.1},{'label':'Prix\x20de\x20vente','data':_0x2dbd20['prices'],'borderColor':_0xe9b06(0x21c),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':_0xe9b06(0x238)},'ticks':{'color':_0xe9b06(0x1bf)}},'x':{'grid':{'color':_0xe9b06(0x238)},'ticks':{'color':_0xe9b06(0x1bf)}}},'plugins':{'legend':{'labels':{'color':'rgb(0,\x20255,\x20255)'}}}}});}function updatePeriodAnalysis(_0x1b586c){const _0xc903da=_0x324131,_0x4d079b=new Date(),_0x42b9be=new Date(_0x4d079b[_0xc903da(0x239)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x27dd38=new Date(_0x4d079b['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8),_0xcf5e97=new Date(_0x4d079b[_0xc903da(0x239)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x3aa803=_0x1b586c[_0xc903da(0x1b0)](_0x2b9596=>new Date(_0x2b9596[_0xc903da(0x199)])>=_0x42b9be),_0x7f6a17=_0x1b586c[_0xc903da(0x1b0)](_0x1448e2=>new Date(_0x1448e2[_0xc903da(0x199)])>=_0x27dd38),_0x280238=_0x1b586c[_0xc903da(0x1b0)](_0x4c5188=>new Date(_0x4c5188['dateTime'])>=_0xcf5e97);updatePeriodStats(_0x3aa803,_0xc903da(0x1d8)),updatePeriodStats(_0x7f6a17,_0xc903da(0x1c1)),updatePeriodStats(_0x280238,_0xc903da(0x1a3));}function updatePeriodStats(_0x275b1,_0x251777){const _0x13062e=_0x324131,_0x1e9f13=_0x275b1[_0x13062e(0x1f4)]((_0x240b88,_0x138f84)=>_0x240b88+_0x138f84['V']*_0x138f84['PV'],0x0),_0x5a97b1=_0x1e9f13/_0x275b1[_0x13062e(0x204)]||0x0;document[_0x13062e(0x20a)](_0x251777+'TotalSales')['textContent']=_0x13062e(0x196)+_0x1e9f13[_0x13062e(0x1b1)](0x2)+_0x13062e(0x1bc),document[_0x13062e(0x20a)](_0x251777+_0x13062e(0x1bd))[_0x13062e(0x1f6)]=_0x13062e(0x1cf)+_0x5a97b1['toFixed'](0x2)+_0x13062e(0x1bc);}toggleAnalysisButton[_0x324131(0x1ba)](_0x324131(0x22a),function(){const _0x44667e=_0x324131;analysisSection['style'][_0x44667e(0x22e)]===_0x44667e(0x1fb)||analysisSection['style']['display']===''?(analysisSection[_0x44667e(0x227)][_0x44667e(0x22e)]='block',salesDetailsSection['style'][_0x44667e(0x22e)]=_0x44667e(0x1fb),this[_0x44667e(0x1f6)]='Masquer\x20l\x27analyse\x20des\x20ventes',toggleSalesButton[_0x44667e(0x1f6)]=_0x44667e(0x198),updateAnalysis(salesData)):(analysisSection['style'][_0x44667e(0x22e)]=_0x44667e(0x1fb),this['textContent']=_0x44667e(0x1b6));}),toggleSalesButton[_0x324131(0x1ba)](_0x324131(0x22a),function(){const _0x3abc5a=_0x324131;salesDetailsSection[_0x3abc5a(0x227)]['display']===_0x3abc5a(0x1fb)||salesDetailsSection[_0x3abc5a(0x227)][_0x3abc5a(0x22e)]===''?(salesDetailsSection['style']['display']=_0x3abc5a(0x1a9),analysisSection['style'][_0x3abc5a(0x22e)]='none',this[_0x3abc5a(0x1f6)]=_0x3abc5a(0x1dd),toggleAnalysisButton[_0x3abc5a(0x1f6)]=_0x3abc5a(0x1b6)):(salesDetailsSection[_0x3abc5a(0x227)][_0x3abc5a(0x22e)]=_0x3abc5a(0x1fb),this[_0x3abc5a(0x1f6)]='Détail\x20des\x20ventes');});const themeToggle=document[_0x324131(0x20a)](_0x324131(0x22d)),root=document['documentElement'];let isDarkTheme=!![];function setTheme(_0x548f60){const _0x567c19=_0x324131;_0x548f60?(root[_0x567c19(0x1b7)][_0x567c19(0x20b)](_0x567c19(0x1ee)),themeToggle['textContent']='🌙',themeToggle['setAttribute'](_0x567c19(0x1e3),_0x567c19(0x19d))):(root[_0x567c19(0x1b7)][_0x567c19(0x1cb)](_0x567c19(0x1ee)),themeToggle[_0x567c19(0x1f6)]='☀️',themeToggle['setAttribute'](_0x567c19(0x1e3),_0x567c19(0x1ec))),isDarkTheme=_0x548f60,localStorage[_0x567c19(0x1a0)](_0x567c19(0x220),_0x548f60);}themeToggle[_0x324131(0x1ba)](_0x324131(0x22a),()=>{setTheme(!isDarkTheme);}),document[_0x324131(0x1ba)](_0x324131(0x1ab),()=>{const _0x3c5d4c=localStorage['getItem']('darkTheme');_0x3c5d4c!==null?setTheme(_0x3c5d4c==='true'):setTheme(![]);}),document[_0x324131(0x20a)]('filterStockDates')[_0x324131(0x1ba)](_0x324131(0x22a),function(){const _0x3d190f=_0x324131,_0x409c32=new Date(document[_0x3d190f(0x20a)](_0x3d190f(0x1e5))[_0x3d190f(0x200)]),_0x431836=new Date(document[_0x3d190f(0x20a)](_0x3d190f(0x22c))[_0x3d190f(0x200)]);updateStockTables(_0x409c32,_0x431836);}),document[_0x324131(0x20a)](_0x324131(0x219))[_0x324131(0x1ba)](_0x324131(0x22a),function(){const _0x28984e=_0x324131,_0x5b92c3=new Date(document[_0x28984e(0x20a)](_0x28984e(0x230))['value']),_0x12e3b1=new Date(document[_0x28984e(0x20a)]('salesEndDate')[_0x28984e(0x200)]),_0x29f948=salesData[_0x28984e(0x1b0)](_0x4cb6ad=>{const _0x4e5a80=new Date(_0x4cb6ad['dateTime']);return(!_0x5b92c3||_0x4e5a80>=_0x5b92c3)&&(!_0x12e3b1||_0x4e5a80<=_0x12e3b1);});renderTable(_0x29f948),updateAnalysis(_0x29f948);});function updateStockTables(_0x254387,_0xb59909){const _0x13d411=_0x324131,_0xe904=document[_0x13d411(0x20a)]('stockTableGlobal');_0xe904[_0x13d411(0x1c4)](_0x13d411(0x1a8))[_0x13d411(0x21f)]='',database[_0x13d411(0x211)]('sales/'+currentUser)['once']('value')[_0x13d411(0x1d5)](_0x3c1394=>{const _0x5d4bb3=_0x13d411,_0x4f5f7f={};_0x3c1394['forEach'](_0x16d86a=>{const _0x37f6fd=_0x50f3,_0x36673b=_0x16d86a[_0x37f6fd(0x203)](),_0x24230a=new Date(_0x36673b[_0x37f6fd(0x199)]);(!_0x254387||_0x24230a>=_0x254387)&&(!_0xb59909||_0x24230a<=_0xb59909)&&((!_0x4f5f7f[_0x36673b[_0x37f6fd(0x232)]]||_0x24230a>new Date(_0x4f5f7f[_0x36673b[_0x37f6fd(0x232)]]['dateTime']))&&(_0x4f5f7f[_0x36673b['product']]=_0x36673b));}),Object[_0x5d4bb3(0x1d7)](_0x4f5f7f)['forEach'](_0x7b858a=>{const _0x534962=_0x5d4bb3,_0x197285=_0xe904[_0x534962(0x1c4)](_0x534962(0x1a8))[_0x534962(0x1d6)]();_0x197285[_0x534962(0x236)](0x0)[_0x534962(0x1f6)]=_0x7b858a[_0x534962(0x232)],_0x197285['insertCell'](0x1)['textContent']=_0x7b858a['SF'],_0x197285[_0x534962(0x236)](0x2)['textContent']=new Date(_0x7b858a[_0x534962(0x199)])[_0x534962(0x1e8)]();}),setupSort(_0xe904);});}function showSubscriptionRequiredModal(){const _0x32f4b7=_0x324131;document[_0x32f4b7(0x20a)](_0x32f4b7(0x20d))[_0x32f4b7(0x227)]['display']=_0x32f4b7(0x23d);}function hideSubscriptionRequiredModal(){const _0x17ad8b=_0x324131;document[_0x17ad8b(0x20a)](_0x17ad8b(0x20d))[_0x17ad8b(0x227)][_0x17ad8b(0x22e)]=_0x17ad8b(0x1fb);}function redirectToSubscription(){const _0x2f0baf=_0x324131;window[_0x2f0baf(0x1d9)][_0x2f0baf(0x1b5)]=_0x2f0baf(0x207);}async function checkSubscriptionStatus(){const _0x5043bc=_0x324131;try{const _0xe8d249=await adminRef[_0x5043bc(0x21a)]('value'),_0x33c081=_0xe8d249[_0x5043bc(0x203)](),_0x44af3e=new Date();if(_0x33c081&&_0x33c081['status']===_0x5043bc(0x1fc)){const _0x85aab0=new Date(_0x33c081[_0x5043bc(0x1ea)]);return _0x85aab0>=_0x44af3e?!![]:(await adminRef[_0x5043bc(0x1e7)]({'status':'expired'}),![]);}else return![];}catch(_0x5a471a){console[_0x5043bc(0x205)]('Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:',_0x5a471a);throw _0x5a471a;}}updateTable(),updateStockTables(),analysisSection[_0x324131(0x227)][_0x324131(0x22e)]=_0x324131(0x1fb),salesDetailsSection[_0x324131(0x227)][_0x324131(0x22e)]=_0x324131(0x1fb),updateTable(),updateStockTables(),updateAnalysis();function _0x50f3(_0x1e8a78,_0x5d982a){const _0x3d201b=_0x3d20();return _0x50f3=function(_0x50f39d,_0x530a15){_0x50f39d=_0x50f39d-0x195;let _0x5ba571=_0x3d201b[_0x50f39d];return _0x5ba571;},_0x50f3(_0x1e8a78,_0x5d982a);}const savedTheme=localStorage[_0x324131(0x216)](_0x324131(0x220));savedTheme!==null&&setTheme(savedTheme==='true');