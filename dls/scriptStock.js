const _0x2ec6b8=_0x46d8;(function(_0x455b95,_0x43ea57){const _0x293950=_0x46d8,_0x48f354=_0x455b95();while(!![]){try{const _0x4b70b1=parseInt(_0x293950(0xb8))/0x1*(parseInt(_0x293950(0x145))/0x2)+-parseInt(_0x293950(0xcf))/0x3+-parseInt(_0x293950(0xe3))/0x4*(-parseInt(_0x293950(0xd1))/0x5)+parseInt(_0x293950(0x11b))/0x6*(-parseInt(_0x293950(0xc8))/0x7)+-parseInt(_0x293950(0xd6))/0x8*(-parseInt(_0x293950(0xde))/0x9)+-parseInt(_0x293950(0xe5))/0xa+parseInt(_0x293950(0xf2))/0xb;if(_0x4b70b1===_0x43ea57)break;else _0x48f354['push'](_0x48f354['shift']());}catch(_0x562117){_0x48f354['push'](_0x48f354['shift']());}}}(_0x102a,0xf01ee));const firebaseConfig={'apiKey':_0x2ec6b8(0x10b),'authDomain':_0x2ec6b8(0x117),'databaseURL':_0x2ec6b8(0x148),'projectId':_0x2ec6b8(0xbc),'storageBucket':_0x2ec6b8(0x12c),'messagingSenderId':_0x2ec6b8(0xd0),'appId':_0x2ec6b8(0xb9),'measurementId':_0x2ec6b8(0x101)};firebase[_0x2ec6b8(0xe6)](firebaseConfig);const database=firebase[_0x2ec6b8(0x118)](),adminRef=database[_0x2ec6b8(0x143)](_0x2ec6b8(0xd5)),loginForm=document[_0x2ec6b8(0x15d)](_0x2ec6b8(0xf0)),signupForm=document[_0x2ec6b8(0x15d)](_0x2ec6b8(0x15b)),loginContainer=document[_0x2ec6b8(0x15d)](_0x2ec6b8(0xb6)),signupContainer=document[_0x2ec6b8(0x15d)](_0x2ec6b8(0x142)),dashboardContainer=document['getElementById']('dashboardContainer'),salesForm=document['getElementById'](_0x2ec6b8(0x131)),salesTable=document['getElementById']('salesTable'),totalSalesElement=document[_0x2ec6b8(0x15d)](_0x2ec6b8(0xc5)),averageSalesElement=document['getElementById'](_0x2ec6b8(0xdc)),userInfoElement=document[_0x2ec6b8(0x15d)](_0x2ec6b8(0x122)),toggleAnalysisButton=document[_0x2ec6b8(0x15d)](_0x2ec6b8(0xf7)),toggleSalesButton=document[_0x2ec6b8(0x15d)](_0x2ec6b8(0x11f)),analysisSection=document['getElementById']('analysisSection'),salesDetailsSection=document['getElementById'](_0x2ec6b8(0xeb)),signupButton=document['getElementById'](_0x2ec6b8(0x100)),loginFromSignup=document[_0x2ec6b8(0x15d)](_0x2ec6b8(0x13d)),productSelect=document[_0x2ec6b8(0x15d)]('product'),stockTableGlobal=document['getElementById']('stockTableGlobal');let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x2ec6b8(0x15d)](_0x2ec6b8(0x112))[_0x2ec6b8(0x105)]=new Date()[_0x2ec6b8(0x136)]()['slice'](0x0,0x10);function _0x46d8(_0x465c90,_0x33515c){const _0x102aaf=_0x102a();return _0x46d8=function(_0x46d82c,_0x31b462){_0x46d82c=_0x46d82c-0xb4;let _0x50dc11=_0x102aaf[_0x46d82c];return _0x50dc11;},_0x46d8(_0x465c90,_0x33515c);}function fetchTicketCategories(){const _0x548d45=_0x2ec6b8;database['ref'](_0x548d45(0xee))[_0x548d45(0xe1)](_0x548d45(0x105))['then'](_0x5893a1=>{const _0x20d495=_0x548d45;ticketCategories=_0x5893a1[_0x20d495(0x13a)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x2b762f=_0x2ec6b8;productSelect[_0x2b762f(0xc4)]=_0x2b762f(0x150);for(const _0xeff93 in ticketCategories){const _0x2f422a=ticketCategories[_0xeff93][_0x2b762f(0xfb)][0x0],_0x3ac90c=document[_0x2b762f(0x120)](_0x2b762f(0xbf));_0x3ac90c[_0x2b762f(0x105)]=_0xeff93,_0x3ac90c['textContent']=_0xeff93+'\x20('+_0x2f422a+_0x2b762f(0x124),productSelect[_0x2b762f(0x113)](_0x3ac90c);}}fetchTicketCategories(),loginForm['addEventListener']('submit',function(_0x4165b0){const _0x5c3eca=_0x2ec6b8;_0x4165b0['preventDefault']();const _0x3c7968=document['getElementById'](_0x5c3eca(0x114))[_0x5c3eca(0x105)],_0x127480=document[_0x5c3eca(0x15d)](_0x5c3eca(0x103))['value'];database[_0x5c3eca(0x143)](_0x5c3eca(0x132)+_0x3c7968)['once'](_0x5c3eca(0x105))['then'](_0x11dfff=>{const _0x4f0c04=_0x5c3eca;_0x11dfff[_0x4f0c04(0x130)]()?_0x11dfff[_0x4f0c04(0x13a)]()['password']===_0x127480?loginSuccess(_0x3c7968):alert(_0x4f0c04(0x10a)):alert('Utilisateur\x20introuvable');});}),signupForm[_0x2ec6b8(0x12e)](_0x2ec6b8(0x14f),function(_0x41e809){const _0x4886f3=_0x2ec6b8;_0x41e809[_0x4886f3(0x162)]();const _0x57ee41=document[_0x4886f3(0x15d)](_0x4886f3(0x139))['value'],_0x1e987d=document[_0x4886f3(0x15d)](_0x4886f3(0x13b))[_0x4886f3(0x105)];database[_0x4886f3(0x143)](_0x4886f3(0x132)+_0x57ee41)[_0x4886f3(0xe1)](_0x4886f3(0x105))['then'](_0x9bb42d=>{const _0x544afe=_0x4886f3;_0x9bb42d[_0x544afe(0x130)]()?alert(_0x544afe(0x13f)):database[_0x544afe(0x143)](_0x544afe(0x132)+_0x57ee41)['set']({'password':_0x1e987d})[_0x544afe(0x156)](()=>{const _0x29edd4=_0x544afe;alert(_0x29edd4(0xbd)),signupContainer[_0x29edd4(0xd7)][_0x29edd4(0x102)]=_0x29edd4(0x11e),loginContainer[_0x29edd4(0xd7)][_0x29edd4(0x102)]='block';})[_0x544afe(0xf3)](_0x476abe=>{const _0x31567e=_0x544afe;console[_0x31567e(0xff)](_0x31567e(0x11c),_0x476abe),alert('Erreur\x20lors\x20de\x20la\x20création\x20du\x20compte');});});}),signupButton['addEventListener'](_0x2ec6b8(0x14c),function(){const _0x3b4082=_0x2ec6b8;loginContainer[_0x3b4082(0xd7)][_0x3b4082(0x102)]=_0x3b4082(0x11e),signupContainer[_0x3b4082(0xd7)]['display']=_0x3b4082(0xfa);}),loginFromSignup[_0x2ec6b8(0x12e)](_0x2ec6b8(0x14c),function(){const _0x318171=_0x2ec6b8;signupContainer[_0x318171(0xd7)][_0x318171(0x102)]=_0x318171(0x11e),loginContainer[_0x318171(0xd7)]['display']=_0x318171(0xfa);});function loginSuccess(_0x190bdf){const _0x598a13=_0x2ec6b8;currentUser=_0x190bdf,loginContainer['style'][_0x598a13(0x102)]=_0x598a13(0x11e),signupContainer[_0x598a13(0xd7)][_0x598a13(0x102)]='none',dashboardContainer[_0x598a13(0xd7)]['display']='block',userInfoElement[_0x598a13(0x13c)]=_0x598a13(0x12a)+_0x190bdf,checkSubscriptionStatus()[_0x598a13(0x156)](_0x5384d0=>{_0x5384d0?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x598a13(0xf3)](_0x364130=>{const _0x550448=_0x598a13;console[_0x550448(0xff)](_0x550448(0x146),_0x364130),alert('Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.');});}function listenForSalesDataChanges(){const _0x54cd4f=_0x2ec6b8;salesDataListener=database[_0x54cd4f(0x143)]('sales/'+currentUser)['on'](_0x54cd4f(0x105),_0x533d60=>{const _0x182e65=_0x54cd4f;salesData=[],_0x533d60['forEach'](_0x2a673e=>{const _0x2b5aee=_0x46d8,_0x5bb022=_0x2a673e[_0x2b5aee(0x13a)]();_0x5bb022[_0x2b5aee(0x11d)]=_0x2a673e['key'],_0x5bb022[_0x2b5aee(0x147)]=(_0x5bb022['V']*_0x5bb022['PV'])['toFixed'](0x2),salesData[_0x2b5aee(0x116)](_0x5bb022);}),analysisSection['style'][_0x182e65(0x102)]===_0x182e65(0xfa)&&updateAnalysis(salesData);});}document[_0x2ec6b8(0x15d)](_0x2ec6b8(0xf4))['addEventListener'](_0x2ec6b8(0xce),function(){const _0x355aab=_0x2ec6b8,_0x188f3e=this[_0x355aab(0x105)];database[_0x355aab(0x143)](_0x355aab(0xba)+currentUser)[_0x355aab(0xbe)](_0x355aab(0xf4))['equalTo'](_0x188f3e)[_0x355aab(0x12f)](0x1)[_0x355aab(0xe1)]('value')[_0x355aab(0x156)](_0x2f7629=>{const _0x533dfa=_0x355aab;if(_0x2f7629[_0x533dfa(0x130)]()){const _0x4149ce=Object[_0x533dfa(0x115)](_0x2f7629[_0x533dfa(0x13a)]())[0x0];document[_0x533dfa(0x15d)]('SI')[_0x533dfa(0x105)]=_0x4149ce['SF']||0x0;}else document[_0x533dfa(0x15d)]('SI')[_0x533dfa(0x105)]=0x0;}),updatePV();}),document[_0x2ec6b8(0x15d)]('V')[_0x2ec6b8(0x12e)]('input',updateSF),document[_0x2ec6b8(0x15d)](_0x2ec6b8(0xc9))[_0x2ec6b8(0x12e)](_0x2ec6b8(0x163),updateSF);function updateSF(){const _0x199d7a=_0x2ec6b8,_0x3aeef9=parseInt(document[_0x199d7a(0x15d)]('SI')['value'])||0x0,_0x569fe1=parseInt(document[_0x199d7a(0x15d)]('APP')[_0x199d7a(0x105)])||0x0,_0x11d88a=parseInt(document[_0x199d7a(0x15d)]('V')[_0x199d7a(0x105)])||0x0;document[_0x199d7a(0x15d)]('SF')[_0x199d7a(0x105)]=_0x3aeef9+_0x569fe1-_0x11d88a;}function updatePV(){const _0xf0bea4=_0x2ec6b8,_0x467247=document[_0xf0bea4(0x15d)](_0xf0bea4(0xf4))['value'],_0x1e5177=ticketCategories[_0x467247]?.[_0xf0bea4(0xfb)][0x0];document[_0xf0bea4(0x15d)]('PV')[_0xf0bea4(0x105)]=_0x1e5177||0x0;}salesForm['addEventListener'](_0x2ec6b8(0x14f),function(_0x514888){const _0x52e34c=_0x2ec6b8;_0x514888[_0x52e34c(0x162)]();const _0x583b01={'dateTime':document['getElementById'](_0x52e34c(0x112))[_0x52e34c(0x105)],'product':document[_0x52e34c(0x15d)](_0x52e34c(0xf4))['value'],'SI':parseInt(document['getElementById']('SI')['value'])||0x0,'APP':parseInt(document['getElementById'](_0x52e34c(0xc9))['value'])||0x0,'V':parseInt(document[_0x52e34c(0x15d)]('V')[_0x52e34c(0x105)])||0x0,'SF':parseInt(document['getElementById']('SF')[_0x52e34c(0x105)])||0x0,'PV':parseFloat(document[_0x52e34c(0x15d)]('PV')[_0x52e34c(0x105)])||0x0};database['ref'](_0x52e34c(0xba)+currentUser)['push'](_0x583b01)[_0x52e34c(0x156)](()=>{const _0x571edf=_0x52e34c;updateTable(),updateStockTables(),updateAnalysis(),salesForm['reset'](),document[_0x571edf(0x15d)](_0x571edf(0x112))['value']=new Date()[_0x571edf(0x136)]()[_0x571edf(0xc6)](0x0,0x10);})[_0x52e34c(0xf3)](_0x30ee2f=>{const _0x2687fe=_0x52e34c;console['error'](_0x2687fe(0x166),_0x30ee2f),alert(_0x2687fe(0x15e));});});function updateTable(){const _0x33acac=_0x2ec6b8,_0x12aa63=salesTable[_0x33acac(0x128)](_0x33acac(0xca));_0x12aa63[_0x33acac(0xc4)]='',database['ref'](_0x33acac(0xba)+currentUser)['once'](_0x33acac(0x105))['then'](_0x5002f5=>{salesData=[],_0x5002f5['forEach'](_0x198f95=>{const _0x1600cb=_0x46d8,_0x7241e3=_0x198f95[_0x1600cb(0x13a)]();_0x7241e3[_0x1600cb(0x147)]=(_0x7241e3['V']*_0x7241e3['PV'])[_0x1600cb(0xec)](0x2),salesData[_0x1600cb(0x116)](_0x7241e3);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x9522a5=_0x2ec6b8,_0x626428=document['getElementById']('stockTableGlobal');_0x626428[_0x9522a5(0x128)](_0x9522a5(0xca))[_0x9522a5(0xc4)]='',database[_0x9522a5(0x143)](_0x9522a5(0xba)+currentUser)['once'](_0x9522a5(0x105))[_0x9522a5(0x156)](_0x56c534=>{const _0x569f19=_0x9522a5,_0x2b4760={};_0x56c534[_0x569f19(0x157)](_0x550867=>{const _0x3694f1=_0x569f19,_0x14abbd=_0x550867[_0x3694f1(0x13a)]();(!_0x2b4760[_0x14abbd[_0x3694f1(0xf4)]]||new Date(_0x14abbd[_0x3694f1(0x112)])>new Date(_0x2b4760[_0x14abbd[_0x3694f1(0xf4)]][_0x3694f1(0x112)]))&&(_0x2b4760[_0x14abbd[_0x3694f1(0xf4)]]=_0x14abbd);}),Object[_0x569f19(0x115)](_0x2b4760)[_0x569f19(0x157)](_0x4a9024=>{const _0x4f4bac=_0x569f19,_0xb89f57=_0x626428[_0x4f4bac(0x128)](_0x4f4bac(0xca))[_0x4f4bac(0x125)]();_0xb89f57[_0x4f4bac(0xe9)](0x0)[_0x4f4bac(0x13c)]=_0x4a9024['product'],_0xb89f57[_0x4f4bac(0xe9)](0x1)[_0x4f4bac(0x13c)]=_0x4a9024['SF'],_0xb89f57['insertCell'](0x2)[_0x4f4bac(0x13c)]=new Date(_0x4a9024['dateTime'])[_0x4f4bac(0x104)]();}),setupSort(_0x626428);});}function exportToExcel(){const _0x20cd5b=_0x2ec6b8,_0x1693ca=XLSX[_0x20cd5b(0xd2)][_0x20cd5b(0xf8)](),_0x4c2322=XLSX[_0x20cd5b(0xd2)][_0x20cd5b(0x15c)](document[_0x20cd5b(0x15d)](_0x20cd5b(0xf1)));XLSX[_0x20cd5b(0xd2)]['book_append_sheet'](_0x1693ca,_0x4c2322,_0x20cd5b(0x140)),XLSX[_0x20cd5b(0x129)](_0x1693ca,'ventes_wifi_zone.xlsx');}document[_0x2ec6b8(0x15d)](_0x2ec6b8(0xdd))[_0x2ec6b8(0x12e)](_0x2ec6b8(0x14c),exportToExcel);function deleteEntry(_0x183ff1){const _0x268a7f=_0x2ec6b8;database[_0x268a7f(0x143)](_0x268a7f(0xba)+currentUser+'/'+_0x183ff1)[_0x268a7f(0xe1)]('value')[_0x268a7f(0x156)](_0x5490c1=>{const _0x38faf4=_0x268a7f,_0x10a5c8=_0x5490c1[_0x38faf4(0x13a)]();return database['ref'](_0x38faf4(0xba)+currentUser+'/'+_0x183ff1)['remove']()['then'](()=>{const _0x401174=_0x38faf4;return console[_0x401174(0x161)](_0x401174(0x106)),updateStockAfterDeletion(_0x10a5c8);});})['then'](()=>{return updateTable();})[_0x268a7f(0x156)](()=>{updateStockTables(),updateAnalysis();})['catch'](_0x230b23=>{const _0x2b54b5=_0x268a7f;console[_0x2b54b5(0xff)](_0x2b54b5(0x107),_0x230b23);});}function updateStockAfterDeletion(_0x56f9e4){const _0x22d6dc=_0x2ec6b8;return database[_0x22d6dc(0x143)](_0x22d6dc(0xba)+currentUser)['orderByChild'](_0x22d6dc(0x112))[_0x22d6dc(0x158)](_0x56f9e4[_0x22d6dc(0x112)])['limitToLast'](0x2)['once'](_0x22d6dc(0x105))['then'](_0x47aaf7=>{const _0x338e71=_0x22d6dc;let _0x483fa2=[];_0x47aaf7[_0x338e71(0x157)](_0x58a752=>{const _0x3f0651=_0x338e71;_0x483fa2[_0x3f0651(0x116)]({'key':_0x58a752[_0x3f0651(0x11d)],..._0x58a752[_0x3f0651(0x13a)]()});}),_0x483fa2[_0x338e71(0x127)]((_0x48f49a,_0x2e306b)=>new Date(_0x2e306b[_0x338e71(0x112)])-new Date(_0x48f49a[_0x338e71(0x112)]));if(_0x483fa2[_0x338e71(0xef)]>0x1&&_0x483fa2[0x0][_0x338e71(0x11d)]!==_0x56f9e4[_0x338e71(0x11d)]){const _0x394cab=_0x483fa2[0x1],_0x1e763=_0x394cab['SF']+_0x56f9e4['V']-_0x56f9e4[_0x338e71(0xc9)];return database[_0x338e71(0x143)](_0x338e71(0xba)+currentUser+'/'+_0x394cab[_0x338e71(0x11d)])[_0x338e71(0x12d)]({'SF':_0x1e763});}return Promise['resolve']();});}function updateTable(){const _0x54e83b=_0x2ec6b8;return database['ref'](_0x54e83b(0xba)+currentUser)['once'](_0x54e83b(0x105))[_0x54e83b(0x156)](_0x226668=>{salesData=[],_0x226668['forEach'](_0x19f82d=>{const _0x2a7b54=_0x46d8,_0x44b8ad=_0x19f82d['val']();_0x44b8ad[_0x2a7b54(0x11d)]=_0x19f82d[_0x2a7b54(0x11d)],_0x44b8ad[_0x2a7b54(0x147)]=(_0x44b8ad['V']*_0x44b8ad['PV'])[_0x2a7b54(0xec)](0x2),salesData[_0x2a7b54(0x116)](_0x44b8ad);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x394b47){const _0x4f096d=_0x2ec6b8,_0x1f35d8=salesTable[_0x4f096d(0x128)](_0x4f096d(0xca));_0x1f35d8[_0x4f096d(0xc4)]='',_0x394b47[_0x4f096d(0x157)](_0x4960ab=>{const _0x5cc2c2=_0x4f096d,_0x3c9d30=_0x1f35d8[_0x5cc2c2(0x125)]();_0x3c9d30['dataset'][_0x5cc2c2(0x11d)]=_0x4960ab['key'],_0x3c9d30[_0x5cc2c2(0xe9)](0x0)['textContent']=new Date(_0x4960ab[_0x5cc2c2(0x112)])['toLocaleString'](),_0x3c9d30['insertCell'](0x1)[_0x5cc2c2(0x13c)]=_0x4960ab['product'],_0x3c9d30[_0x5cc2c2(0xe9)](0x2)[_0x5cc2c2(0x13c)]=_0x4960ab['SI'],_0x3c9d30[_0x5cc2c2(0xe9)](0x3)[_0x5cc2c2(0x13c)]=_0x4960ab[_0x5cc2c2(0xc9)],_0x3c9d30[_0x5cc2c2(0xe9)](0x4)['textContent']=_0x4960ab['V'],_0x3c9d30[_0x5cc2c2(0xe9)](0x5)[_0x5cc2c2(0x13c)]=_0x4960ab['SF'],_0x3c9d30['insertCell'](0x6)[_0x5cc2c2(0x13c)]=_0x4960ab['PV'],_0x3c9d30['insertCell'](0x7)[_0x5cc2c2(0x13c)]=_0x4960ab[_0x5cc2c2(0x147)];}),addDeleteIcons();}function addDeleteIcons(){const _0x578567=_0x2ec6b8,_0xc60aff=salesTable['querySelectorAll'](_0x578567(0xd9));_0xc60aff[_0x578567(0x157)](_0x12ebb6=>{const _0x3fb7a6=_0x578567,_0x579d48=document[_0x3fb7a6(0x120)](_0x3fb7a6(0x14d));_0x579d48['innerHTML']='✖',_0x579d48[_0x3fb7a6(0x11a)]=_0x3fb7a6(0x126),_0x579d48[_0x3fb7a6(0x108)]=_0x4b76a7=>{const _0x4f6886=_0x3fb7a6;_0x4b76a7[_0x4f6886(0x138)](),showConfirmDialog(_0x12ebb6[_0x4f6886(0x135)][_0x4f6886(0x11d)]);},_0x12ebb6[_0x3fb7a6(0x128)]('td:first-child')[_0x3fb7a6(0x113)](_0x579d48);});}function showConfirmDialog(_0x43efea){const _0x31049c=_0x2ec6b8,_0x1f305e=document[_0x31049c(0x120)]('div');_0x1f305e['className']=_0x31049c(0xfd),_0x1f305e[_0x31049c(0xc4)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20entrée\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20',document[_0x31049c(0x133)][_0x31049c(0x113)](_0x1f305e),document['getElementById'](_0x31049c(0xe7))[_0x31049c(0x108)]=()=>{const _0x143e99=_0x31049c;deleteEntry(_0x43efea),document['body'][_0x143e99(0x109)](_0x1f305e);},document[_0x31049c(0x15d)](_0x31049c(0xfc))['onclick']=()=>{const _0x219a49=_0x31049c;document['body'][_0x219a49(0x109)](_0x1f305e);};}function setupSearch(){const _0x2f355c=_0x2ec6b8,_0xcb4aba=document[_0x2f355c(0xc7)]('#searchInputs\x20input');_0xcb4aba[_0x2f355c(0x157)](_0x1c79be=>{const _0x59a354=_0x2f355c;_0x1c79be[_0x59a354(0x12e)](_0x59a354(0x163),()=>{const _0x1638b0=_0x59a354,_0x2b1a2c=salesData[_0x1638b0(0xb7)](_0x36ac6c=>{const _0x152b13=_0x1638b0;return Object[_0x152b13(0x13e)](_0x36ac6c)[_0x152b13(0xb4)](_0x203820=>{const _0x26a9d0=_0x152b13,_0x31bf3f=document[_0x26a9d0(0x15d)](_0x26a9d0(0xd4)+(_0x203820[_0x26a9d0(0xe8)](0x0)[_0x26a9d0(0xcb)]()+_0x203820['slice'](0x1)))?.[_0x26a9d0(0x105)][_0x26a9d0(0x153)]()||'';return _0x36ac6c[_0x203820][_0x26a9d0(0x155)]()[_0x26a9d0(0x153)]()[_0x26a9d0(0x15a)](_0x31bf3f);});});renderTable(_0x2b1a2c),updateAnalysis(_0x2b1a2c);});});}function setupSort(_0x31c073){const _0xeeb109=_0x2ec6b8,_0x349cc0=_0x31c073[_0xeeb109(0xc7)](_0xeeb109(0x167));_0x349cc0[_0xeeb109(0x157)](_0x300149=>{_0x300149['addEventListener']('click',()=>{const _0x1563f2=_0x46d8,_0x3b6961=_0x300149[_0x1563f2(0x135)][_0x1563f2(0x127)],_0x54724f=_0x31c073['id']==='salesTable'?salesData:stockData;_0x54724f[_0x1563f2(0x127)]((_0x89501e,_0x45e19a)=>{if(_0x89501e[_0x3b6961]<_0x45e19a[_0x3b6961])return-0x1;if(_0x89501e[_0x3b6961]>_0x45e19a[_0x3b6961])return 0x1;return 0x0;}),_0x31c073['id']===_0x1563f2(0xf1)?(renderTable(_0x54724f),updateAnalysis(_0x54724f)):renderStockTable(_0x54724f,_0x31c073);});});}function renderStockTable(_0x2fd7ff,_0x37a32f){const _0x2161dd=_0x2ec6b8,_0x17955d=_0x37a32f[_0x2161dd(0x128)](_0x2161dd(0xca));_0x17955d[_0x2161dd(0xc4)]='',_0x2fd7ff[_0x2161dd(0x157)](_0x55fc7e=>{const _0x30d072=_0x2161dd,_0x525dd0=_0x17955d['insertRow']();_0x525dd0[_0x30d072(0xe9)](0x0)[_0x30d072(0x13c)]=_0x55fc7e[_0x30d072(0xf4)],_0x525dd0[_0x30d072(0xe9)](0x1)['textContent']=_0x55fc7e['SF'],_0x525dd0[_0x30d072(0xe9)](0x2)[_0x30d072(0x13c)]=new Date(_0x55fc7e[_0x30d072(0x112)])['toLocaleString']();});}function updateAnalysis(_0x133a4e=salesData){const _0x2a141c=_0x2ec6b8;let _0x1cd35e=0x0,_0xd818bd=0x0;const _0x5c7635={'labels':[],'sales':[],'prices':[]};_0x133a4e['forEach'](_0x42c50a=>{const _0x5c198c=_0x46d8;_0x1cd35e+=_0x42c50a['V']*_0x42c50a['PV'],_0xd818bd++,_0x5c7635[_0x5c198c(0x15f)][_0x5c198c(0x116)](new Date(_0x42c50a[_0x5c198c(0x112)])['toLocaleString']()),_0x5c7635[_0x5c198c(0xe2)][_0x5c198c(0x116)](_0x42c50a['V']),_0x5c7635[_0x5c198c(0x14e)]['push'](_0x42c50a['PV']);});const _0x4b7cca=_0x1cd35e/_0xd818bd||0x0;totalSalesElement['textContent']=_0x2a141c(0xd8)+_0x1cd35e[_0x2a141c(0xec)](0x2)+_0x2a141c(0x10d),averageSalesElement[_0x2a141c(0x13c)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x4b7cca[_0x2a141c(0xec)](0x2)+'\x20FCFA',updateChart(_0x5c7635),updatePeriodAnalysis(_0x133a4e);}function updateChart(_0x5da696){const _0x2cb161=_0x2ec6b8,_0x297c95=document[_0x2cb161(0x15d)]('salesChart')['getContext']('2d');salesChart&&salesChart[_0x2cb161(0x10f)](),salesChart=new Chart(_0x297c95,{'type':_0x2cb161(0xc3),'data':{'labels':_0x5da696[_0x2cb161(0x15f)],'datasets':[{'label':_0x2cb161(0x140),'data':_0x5da696[_0x2cb161(0xe2)],'borderColor':'rgb(0,\x20255,\x20255)','tension':0.1},{'label':_0x2cb161(0x154),'data':_0x5da696[_0x2cb161(0x14e)],'borderColor':_0x2cb161(0xdb),'tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x2cb161(0x121)}},'x':{'grid':{'color':_0x2cb161(0xc2)},'ticks':{'color':_0x2cb161(0x121)}}},'plugins':{'legend':{'labels':{'color':_0x2cb161(0x121)}}}}});}function updatePeriodAnalysis(_0x508c9b){const _0x2c2757=_0x2ec6b8,_0x3d178b=new Date(),_0xfa140b=new Date(_0x3d178b[_0x2c2757(0xb5)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x5c69a6=new Date(_0x3d178b[_0x2c2757(0xb5)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x2be2f1=new Date(_0x3d178b['getTime']()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x5b46fc=_0x508c9b[_0x2c2757(0xb7)](_0x46b988=>new Date(_0x46b988[_0x2c2757(0x112)])>=_0xfa140b),_0x3bccb6=_0x508c9b[_0x2c2757(0xb7)](_0x34f6f1=>new Date(_0x34f6f1[_0x2c2757(0x112)])>=_0x5c69a6),_0xfcbec4=_0x508c9b['filter'](_0x4ec710=>new Date(_0x4ec710['dateTime'])>=_0x2be2f1);updatePeriodStats(_0x5b46fc,_0x2c2757(0x141)),updatePeriodStats(_0x3bccb6,_0x2c2757(0x14a)),updatePeriodStats(_0xfcbec4,_0x2c2757(0x152));}function updatePeriodStats(_0x3ef86a,_0x2e0d13){const _0xc548e0=_0x2ec6b8,_0x51a624=_0x3ef86a[_0xc548e0(0xc0)]((_0x24b480,_0x3aae55)=>_0x24b480+_0x3aae55['V']*_0x3aae55['PV'],0x0),_0x11401d=_0x51a624/_0x3ef86a['length']||0x0;document[_0xc548e0(0x15d)](_0x2e0d13+_0xc548e0(0xc1))[_0xc548e0(0x13c)]=_0xc548e0(0xd8)+_0x51a624['toFixed'](0x2)+_0xc548e0(0x10d),document[_0xc548e0(0x15d)](_0x2e0d13+_0xc548e0(0x165))[_0xc548e0(0x13c)]=_0xc548e0(0xd3)+_0x11401d[_0xc548e0(0xec)](0x2)+_0xc548e0(0x10d);}toggleAnalysisButton[_0x2ec6b8(0x12e)](_0x2ec6b8(0x14c),function(){const _0x298b81=_0x2ec6b8;analysisSection[_0x298b81(0xd7)][_0x298b81(0x102)]==='none'||analysisSection[_0x298b81(0xd7)][_0x298b81(0x102)]===''?(analysisSection['style'][_0x298b81(0x102)]=_0x298b81(0xfa),salesDetailsSection[_0x298b81(0xd7)][_0x298b81(0x102)]=_0x298b81(0x11e),this[_0x298b81(0x13c)]=_0x298b81(0x149),toggleSalesButton['textContent']=_0x298b81(0xdf),updateAnalysis(salesData)):(analysisSection[_0x298b81(0xd7)]['display']=_0x298b81(0x11e),this['textContent']=_0x298b81(0x10c));}),toggleSalesButton[_0x2ec6b8(0x12e)](_0x2ec6b8(0x14c),function(){const _0xd04437=_0x2ec6b8;salesDetailsSection[_0xd04437(0xd7)][_0xd04437(0x102)]==='none'||salesDetailsSection['style']['display']===''?(salesDetailsSection[_0xd04437(0xd7)][_0xd04437(0x102)]='block',analysisSection[_0xd04437(0xd7)]['display']=_0xd04437(0x11e),this[_0xd04437(0x13c)]=_0xd04437(0xe4),toggleAnalysisButton[_0xd04437(0x13c)]=_0xd04437(0x10c)):(salesDetailsSection[_0xd04437(0xd7)][_0xd04437(0x102)]=_0xd04437(0x11e),this[_0xd04437(0x13c)]='Détail\x20des\x20ventes');});const themeToggle=document[_0x2ec6b8(0x15d)](_0x2ec6b8(0xea)),root=document[_0x2ec6b8(0xe0)];let isDarkTheme=!![];function setTheme(_0x4519b1){const _0x4dc605=_0x2ec6b8;_0x4519b1?(root[_0x4dc605(0xf9)]['remove'](_0x4dc605(0x134)),themeToggle[_0x4dc605(0x13c)]='🌙',themeToggle[_0x4dc605(0x151)](_0x4dc605(0x12b),_0x4dc605(0xf6))):(root[_0x4dc605(0xf9)][_0x4dc605(0xf5)]('light-theme'),themeToggle[_0x4dc605(0x13c)]='☀️',themeToggle[_0x4dc605(0x151)](_0x4dc605(0x12b),_0x4dc605(0xfe))),isDarkTheme=_0x4519b1,localStorage[_0x4dc605(0x111)](_0x4dc605(0x137),_0x4519b1);}themeToggle[_0x2ec6b8(0x12e)](_0x2ec6b8(0x14c),()=>{setTheme(!isDarkTheme);}),document[_0x2ec6b8(0x12e)]('DOMContentLoaded',()=>{const _0x24011b=_0x2ec6b8,_0x557ec0=localStorage[_0x24011b(0x164)](_0x24011b(0x137));_0x557ec0!==null?setTheme(_0x557ec0==='true'):setTheme(![]);}),document[_0x2ec6b8(0x15d)]('filterStockDates')[_0x2ec6b8(0x12e)](_0x2ec6b8(0x14c),function(){const _0x3222bb=_0x2ec6b8,_0x396608=new Date(document[_0x3222bb(0x15d)](_0x3222bb(0x10e))[_0x3222bb(0x105)]),_0x152838=new Date(document[_0x3222bb(0x15d)](_0x3222bb(0x110))[_0x3222bb(0x105)]);updateStockTables(_0x396608,_0x152838);}),document[_0x2ec6b8(0x15d)](_0x2ec6b8(0xed))[_0x2ec6b8(0x12e)](_0x2ec6b8(0x14c),function(){const _0xb779b8=_0x2ec6b8,_0x51bdde=new Date(document[_0xb779b8(0x15d)](_0xb779b8(0x144))['value']),_0x47e379=new Date(document['getElementById'](_0xb779b8(0x159))['value']),_0x4efba8=salesData[_0xb779b8(0xb7)](_0x52634a=>{const _0x32f78a=_0xb779b8,_0x18e9c7=new Date(_0x52634a[_0x32f78a(0x112)]);return(!_0x51bdde||_0x18e9c7>=_0x51bdde)&&(!_0x47e379||_0x18e9c7<=_0x47e379);});renderTable(_0x4efba8),updateAnalysis(_0x4efba8);});function updateStockTables(_0x31263a,_0x16abbb){const _0x2a68cb=_0x2ec6b8,_0x373d78=document[_0x2a68cb(0x15d)](_0x2a68cb(0xda));_0x373d78[_0x2a68cb(0x128)]('tbody')[_0x2a68cb(0xc4)]='',database[_0x2a68cb(0x143)]('sales/'+currentUser)[_0x2a68cb(0xe1)](_0x2a68cb(0x105))['then'](_0xf145f7=>{const _0x44d1f0=_0x2a68cb,_0x34c58f={};_0xf145f7[_0x44d1f0(0x157)](_0x5edb3f=>{const _0x3fe953=_0x44d1f0,_0x20195c=_0x5edb3f[_0x3fe953(0x13a)](),_0x2581ae=new Date(_0x20195c[_0x3fe953(0x112)]);(!_0x31263a||_0x2581ae>=_0x31263a)&&(!_0x16abbb||_0x2581ae<=_0x16abbb)&&((!_0x34c58f[_0x20195c[_0x3fe953(0xf4)]]||_0x2581ae>new Date(_0x34c58f[_0x20195c['product']][_0x3fe953(0x112)]))&&(_0x34c58f[_0x20195c[_0x3fe953(0xf4)]]=_0x20195c));}),Object[_0x44d1f0(0x115)](_0x34c58f)[_0x44d1f0(0x157)](_0x2f29b6=>{const _0x78257c=_0x44d1f0,_0x4141bc=_0x373d78[_0x78257c(0x128)](_0x78257c(0xca))['insertRow']();_0x4141bc[_0x78257c(0xe9)](0x0)[_0x78257c(0x13c)]=_0x2f29b6[_0x78257c(0xf4)],_0x4141bc['insertCell'](0x1)[_0x78257c(0x13c)]=_0x2f29b6['SF'],_0x4141bc[_0x78257c(0xe9)](0x2)[_0x78257c(0x13c)]=new Date(_0x2f29b6['dateTime'])['toLocaleString']();}),setupSort(_0x373d78);});}function showSubscriptionRequiredModal(){const _0x5c13bd=_0x2ec6b8;document[_0x5c13bd(0x15d)](_0x5c13bd(0xcd))['style']['display']=_0x5c13bd(0x168);}function hideSubscriptionRequiredModal(){const _0x404257=_0x2ec6b8;document[_0x404257(0x15d)](_0x404257(0xcd))[_0x404257(0xd7)][_0x404257(0x102)]=_0x404257(0x11e);}function redirectToSubscription(){const _0x425937=_0x2ec6b8;window['location'][_0x425937(0x123)]=_0x425937(0x160);}async function checkSubscriptionStatus(){const _0x43bb0e=_0x2ec6b8;try{const _0x305958=await adminRef[_0x43bb0e(0xe1)](_0x43bb0e(0x105)),_0x20176b=_0x305958[_0x43bb0e(0x13a)](),_0x20dd73=new Date();if(_0x20176b&&_0x20176b['status']===_0x43bb0e(0x119)){const _0x512ee4=new Date(_0x20176b[_0x43bb0e(0xbb)]);return _0x512ee4>=_0x20dd73?!![]:(await adminRef['update']({'status':_0x43bb0e(0x14b)}),![]);}else return![];}catch(_0x3f0324){console[_0x43bb0e(0xff)](_0x43bb0e(0x146),_0x3f0324);throw _0x3f0324;}}function _0x102a(){const _0x11798f=['initializeApp','confirmDelete','charAt','insertCell','theme-toggle','salesDetailsSection','toFixed','filterSalesDates','TicketsTotal','length','loginForm','salesTable','19129605aAcCbC','catch','product','add','Activer\x20le\x20mode\x20clair','toggleAnalysisButton','book_new','classList','block','prix','cancelDelete','confirm-dialog','Activer\x20le\x20mode\x20sombre','error','signupButton','G-YDLNR7S0C6','display','password','toLocaleString','value','Entrée\x20supprimée\x20avec\x20succès','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entrée:','onclick','removeChild','Mot\x20de\x20passe\x20incorrect','AIzaSyBwLgE4rF7RimBCr2cx8krF2c9FpXetQLc','Analyse\x20des\x20ventes','\x20FCFA','stockStartDate','destroy','stockEndDate','setItem','dateTime','appendChild','username','values','push','dlswifi.firebaseapp.com','database','active','className','3624774yALHjo','Error\x20creating\x20user:','key','none','toggleSalesButton','createElement','rgb(0,\x20255,\x20255)','userInfo','href','\x20FCFA)','insertRow','delete-icon','sort','querySelector','writeFile','Utilisateur:\x20','aria-label','dlswifi.firebasestorage.app','update','addEventListener','limitToLast','exists','salesForm','users/','body','light-theme','dataset','toISOString','darkTheme','stopPropagation','signupUsername','val','signupPassword','textContent','loginFromSignup','keys','Ce\x20nom\x20d\x27utilisateur\x20est\x20déjà\x20utilisé.','Ventes','week','signupContainer','ref','salesStartDate','2383454HCGyue','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','total','https://dlswifi-default-rtdb.firebaseio.com','Masquer\x20l\x27analyse\x20des\x20ventes','month','expired','click','span','prices','submit','<option\x20value=\x22\x22>Sélectionner\x20un\x20produit</option>','setAttribute','threeMonth','toLowerCase','Prix\x20de\x20vente','toString','then','forEach','endAt','salesEndDate','includes','signupForm','table_to_sheet','getElementById','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée.','labels','index.html','log','preventDefault','input','getItem','AverageSales','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entrée\x20:','th[data-sort]','flex','every','getTime','loginContainer','filter','1CprEtg','1:914445912574:web:4448ebbc615241b63ad8af','sales/','endDate','dlswifi','Inscription\x20réussie\x20!\x20Connectez-vous.','orderByChild','option','reduce','TotalSales','rgba(255,\x20255,\x20255,\x200.1)','line','innerHTML','totalSales','slice','querySelectorAll','7aWKXhJ','APP','tbody','toUpperCase','true','subscriptionRequiredModal','change','3209553HFaYWK','914445912574','201705YWmUTB','utils','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','search','admin/subscription','391576NGWhDe','style','Total\x20des\x20ventes:\x20','tbody\x20tr','stockTableGlobal','rgb(255,\x2099,\x20132)','averageSales','exportExcel','27rlbNDP','Détail\x20des\x20ventes','documentElement','once','sales','4nrsTVt','Masquer\x20le\x20détail\x20des\x20ventes','4604500DmLQmH'];_0x102a=function(){return _0x11798f;};return _0x102a();}updateTable(),updateStockTables(),analysisSection[_0x2ec6b8(0xd7)][_0x2ec6b8(0x102)]=_0x2ec6b8(0x11e),salesDetailsSection[_0x2ec6b8(0xd7)][_0x2ec6b8(0x102)]='none',updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage['getItem'](_0x2ec6b8(0x137));savedTheme!==null&&setTheme(savedTheme===_0x2ec6b8(0xcc));